"use strict";(self.webpackChunkControlePonto=self.webpackChunkControlePonto||[]).push([[179],{6304:(mt,Ie,F)=>{F.d(Ie,{Dh:()=>De,GT:()=>he,cc:()=>Fe,hO:()=>ze,on:()=>j,pX:()=>ce,xv:()=>ue});var u=F(5879),ie=F(3071),V=F(5656);mt=F.hmd(mt);const le=["ngOnDestroy"],ce=(Ve,pt,gt,se={})=>new Proxy(Ve,{get:(Ce,de)=>gt.runOutsideAngular(()=>{var Ae;if(Ve[de])return!(null===(Ae=se?.spy)||void 0===Ae)&&Ae.get&&se.spy.get(de,Ve[de]),Ve[de];if(le.indexOf(de)>-1)return()=>{};const $e=pt.toPromise().then(G=>{const ke=G&&G[de];return"function"==typeof ke?ke.bind(G):ke&&ke.then?ke.then(Ke=>gt.run(()=>Ke)):gt.run(()=>ke)});return new Proxy(()=>{},{get:(G,ke)=>$e[ke],apply:(G,ke,Ke)=>$e.then(Vt=>{var Yt;const Nn=Vt&&Vt(...Ke);return!(null===(Yt=se?.spy)||void 0===Yt)&&Yt.apply&&se.spy.apply(de,Ke,Nn),Nn})})})}),he=(Ve,pt)=>{pt.forEach(gt=>{Object.getOwnPropertyNames(gt.prototype||gt).forEach(se=>{Object.defineProperty(Ve.prototype,se,Object.getOwnPropertyDescriptor(gt.prototype||gt,se))})})};class ve{constructor(pt){return pt}}const De=new u.OlP("angularfire2.app.options"),ue=new u.OlP("angularfire2.app.name");function j(Ve,pt,gt){const Ce="object"==typeof gt&&gt||{};Ce.name=Ce.name||"string"==typeof gt&&gt||"[DEFAULT]";const Ae=ie.Z.apps.filter($e=>$e&&$e.name===Ce.name)[0]||pt.runOutsideAngular(()=>ie.Z.initializeApp(Ve,Ce));try{JSON.stringify(Ve)!==JSON.stringify(Ae.options)&&W("error",`${Ae.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(Ae)}const W=(Ve,...pt)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Ve](...pt)},ae={provide:ve,useFactory:j,deps:[De,u.R0b,[new u.FiY,ue]]};let ze=(()=>{class Ve{constructor(gt){ie.Z.registerVersion("angularfire",V.q4.full,"core"),ie.Z.registerVersion("angularfire",V.q4.full,"app-compat"),ie.Z.registerVersion("angular",u.q4F.full,gt.toString())}static initializeApp(gt,se){return{ngModule:Ve,providers:[{provide:De,useValue:gt},{provide:ue,useValue:se}]}}}return Ve.\u0275fac=function(gt){return new(gt||Ve)(u.LFG(u.Lbi))},Ve.\u0275mod=u.oAB({type:Ve}),Ve.\u0275inj=u.cJS({providers:[ae]}),Ve})();function Fe(Ve,pt,gt,se,Ce){const[,de,Ae]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===Ve)||[];if(de)return function Je(Ve,pt){try{return Ve.toString()===pt.toString()}catch{return Ve===pt}}(Ce,Ae)||(it("error",`${pt} was already initialized on the ${gt} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),it("warn",{is:Ce,was:Ae})),de;{const $e=se();return globalThis.\u0275AngularfireInstanceCache.push([Ve,$e,Ce]),$e}}const Ue=!!mt.hot,it=(Ve,...pt)=>{(0,u.X6Q)()&&typeof console<"u"&&console[Ve](...pt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5656:(mt,Ie,F)=>{F.d(Ie,{q4:()=>Yu,iC:()=>Nc,fc:()=>Tt,HU:()=>Zu,vb:()=>Fi,JM:()=>yt});var u=F(5879),ie=F(301),V=F(5861),le=F(4303),ce=F(9058),he=F(4537),ve=F(7879),De=F(1878);const ue="@firebase/installations",j="0.5.12",W=1e4,ae=`w:${j}`,ze="FIS_v2",Fe="https://firebaseinstallations.googleapis.com/v1",Je=36e5,pt=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function gt(I){return I instanceof ce.ZR&&I.code.includes("request-failed")}function se({projectId:I}){return`${Fe}/projects/${I}/installations`}function Ce(I){return{token:I.token,requestStatus:2,expiresIn:Vt(I.expiresIn),creationTime:Date.now()}}function de(I,S){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,V.Z)(function*(I,S){const $=(yield S.json()).error;return pt.create("request-failed",{requestName:I,serverCode:$.code,serverMessage:$.message,serverStatus:$.status})})).apply(this,arguments)}function $e({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function ke(I){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,V.Z)(function*(I){const S=yield I();return S.status>=500&&S.status<600?I():S})).apply(this,arguments)}function Vt(I){return Number(I.replace("s","000"))}function In(){return(In=(0,V.Z)(function*({appConfig:I,heartbeatServiceProvider:S},{fid:k}){const $=se(I),ee=$e(I),pe=S.getImmediate({optional:!0});if(pe){const Ft=yield pe.getHeartbeatsHeader();Ft&&ee.append("x-firebase-client",Ft)}const rt={method:"POST",headers:ee,body:JSON.stringify({fid:k,authVersion:ze,appId:I.appId,sdkVersion:ae})},xt=yield ke(()=>fetch($,rt));if(xt.ok){const Ft=yield xt.json();return{fid:Ft.fid||k,registrationStatus:2,refreshToken:Ft.refreshToken,authToken:Ce(Ft.authToken)}}throw yield de("Create Installation",xt)})).apply(this,arguments)}function Sn(I){return new Promise(S=>{setTimeout(S,I)})}const _r=/^[cdef][\w-]{21}$/,fe="";function _e(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const k=function be(I){return function ri(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return _r.test(k)?k:fe}catch{return fe}}function Ee(I){return`${I.appName}!${I.appId}`}const He=new Map;function Ye(I,S){const k=Ee(I);nn(k,S),function kt(I,S){const k=function St(){return!un&&"BroadcastChannel"in self&&(un=new BroadcastChannel("[Firebase] FID Change"),un.onmessage=I=>{nn(I.data.key,I.data.fid)}),un}();k&&k.postMessage({key:I,fid:S}),function fn(){0===He.size&&un&&(un.close(),un=null)}()}(k,S)}function nn(I,S){const k=He.get(I);if(k)for(const $ of k)$(S)}let un=null;const Pn="firebase-installations-database",fi=1,pn="firebase-installations-store";let re=null;function ne(){return re||(re=(0,De.X3)(Pn,fi,{upgrade:(I,S)=>{0===S&&I.createObjectStore(pn)}})),re}function ye(I,S){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,V.Z)(function*(I,S){const k=Ee(I),ee=(yield ne()).transaction(pn,"readwrite"),pe=ee.objectStore(pn),Le=yield pe.get(k);return yield pe.put(S,k),yield ee.done,(!Le||Le.fid!==S.fid)&&Ye(I,S.fid),S})).apply(this,arguments)}function et(I){return st.apply(this,arguments)}function st(){return(st=(0,V.Z)(function*(I){const S=Ee(I),$=(yield ne()).transaction(pn,"readwrite");yield $.objectStore(pn).delete(S),yield $.done})).apply(this,arguments)}function En(I,S){return nt.apply(this,arguments)}function nt(){return(nt=(0,V.Z)(function*(I,S){const k=Ee(I),ee=(yield ne()).transaction(pn,"readwrite"),pe=ee.objectStore(pn),Le=yield pe.get(k),rt=S(Le);return void 0===rt?yield pe.delete(k):yield pe.put(rt,k),yield ee.done,rt&&(!Le||Le.fid!==rt.fid)&&Ye(I,rt.fid),rt})).apply(this,arguments)}function ft(I){return Dt.apply(this,arguments)}function Dt(){return Dt=(0,V.Z)(function*(I){let S;const k=yield En(I.appConfig,$=>{const ee=function Cn(I){return $i(I||{fid:_e(),registrationStatus:0})}($),pe=function Oi(I,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(pt.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},$=function Kn(I,S){return mn.apply(this,arguments)}(I,k);return{installationEntry:k,registrationPromise:$}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:ln(I)}:{installationEntry:S}}(I,ee);return S=pe.registrationPromise,pe.installationEntry});return k.fid===fe?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}}),Dt.apply(this,arguments)}function mn(){return mn=(0,V.Z)(function*(I,S){try{const k=yield function Nn(I,S){return In.apply(this,arguments)}(I,S);return ye(I.appConfig,k)}catch(k){throw gt(k)&&409===k.customData.serverCode?yield et(I.appConfig):yield ye(I.appConfig,{fid:S.fid,registrationStatus:0}),k}}),mn.apply(this,arguments)}function ln(I){return or.apply(this,arguments)}function or(){return(or=(0,V.Z)(function*(I){let S=yield jt(I.appConfig);for(;1===S.registrationStatus;)yield Sn(100),S=yield jt(I.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:$}=yield ft(I);return $||k}return S})).apply(this,arguments)}function jt(I){return En(I,S=>{if(!S)throw pt.create("installation-not-found");return $i(S)})}function $i(I){return function dn(I){return 1===I.registrationStatus&&I.registrationTime+W<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function ar(){return(ar=(0,V.Z)(function*({appConfig:I,heartbeatServiceProvider:S},k){const $=function gl(I,{fid:S}){return`${se(I)}/${S}/authTokens:generate`}(I,k),ee=function G(I,{refreshToken:S}){const k=$e(I);return k.append("Authorization",function Yt(I){return`${ze} ${I}`}(S)),k}(I,k),pe=S.getImmediate({optional:!0});if(pe){const Ft=yield pe.getHeartbeatsHeader();Ft&&ee.append("x-firebase-client",Ft)}const rt={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:ae,appId:I.appId}})},xt=yield ke(()=>fetch($,rt));if(xt.ok)return Ce(yield xt.json());throw yield de("Generate Auth Token",xt)})).apply(this,arguments)}function J(I){return K.apply(this,arguments)}function K(){return K=(0,V.Z)(function*(I,S=!1){let k;const $=yield En(I.appConfig,pe=>{if(!It(pe))throw pt.create("not-registered");const Le=pe.authToken;if(!S&&function Bt(I){return 2===I.requestStatus&&!function vn(I){const S=Date.now();return S<I.creationTime||I.creationTime+I.expiresIn<S+Je}(I)}(Le))return pe;if(1===Le.requestStatus)return k=function z(I,S){return Y.apply(this,arguments)}(I,S),pe;{if(!navigator.onLine)throw pt.create("app-offline");const rt=function vi(I){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:S})}(pe);return k=function Be(I,S){return We.apply(this,arguments)}(I,rt),rt}});return k?yield k:$.authToken}),K.apply(this,arguments)}function Y(){return(Y=(0,V.Z)(function*(I,S){let k=yield q(I.appConfig);for(;1===k.authToken.requestStatus;)yield Sn(100),k=yield q(I.appConfig);const $=k.authToken;return 0===$.requestStatus?J(I,S):$})).apply(this,arguments)}function q(I){return En(I,S=>{if(!It(S))throw pt.create("not-registered");return function Zt(I){return 1===I.requestStatus&&I.requestTime+W<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function We(){return We=(0,V.Z)(function*(I,S){try{const k=yield function sr(I,S){return ar.apply(this,arguments)}(I,S),$=Object.assign(Object.assign({},S),{authToken:k});return yield ye(I.appConfig,$),k}catch(k){if(!gt(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const $=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield ye(I.appConfig,$)}else yield et(I.appConfig);throw k}}),We.apply(this,arguments)}function It(I){return void 0!==I&&2===I.registrationStatus}function zo(){return(zo=(0,V.Z)(function*(I){const S=I,{installationEntry:k,registrationPromise:$}=yield ft(S);return $?$.catch(console.error):J(S).catch(console.error),k.fid})).apply(this,arguments)}function Ji(){return Ji=(0,V.Z)(function*(I,S=!1){const k=I;return yield function Wo(I){return lr.apply(this,arguments)}(k),(yield J(k,S)).token}),Ji.apply(this,arguments)}function lr(){return(lr=(0,V.Z)(function*(I){const{registrationPromise:S}=yield ft(I);S&&(yield S)})).apply(this,arguments)}function Qs(I){return pt.create("missing-app-config-values",{valueName:I})}const Su="installations",pi=I=>{const S=I.getProvider("app").getImmediate(),k=function _l(I){if(!I||!I.options)throw Qs("App Configuration");if(!I.name)throw Qs("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!I.options[k])throw Qs(k);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,le._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},yl=I=>{const S=I.getProvider("app").getImmediate(),k=(0,le._getProvider)(S,Su).getImmediate();return{getId:()=>function yr(I){return zo.apply(this,arguments)}(k),getToken:ee=>function xa(I){return Ji.apply(this,arguments)}(k,ee)}};(function Js(){(0,le._registerComponent)(new he.wA(Su,pi,"PUBLIC")),(0,le._registerComponent)(new he.wA("installations-internal",yl,"PRIVATE"))})(),(0,le.registerVersion)(ue,j),(0,le.registerVersion)(ue,j,"esm2017");const Aa="@firebase/remote-config",Gi=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Jf{constructor(S,k,$,ee){this.client=S,this.storage=k,this.storageCache=$,this.logger=ee}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const $=Date.now()-k,ee=$<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${$}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ee}.`),ee}fetch(S){var k=this;return(0,V.Z)(function*(){const[$,ee]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(ee&&k.isCachedDataFresh(S.cacheMaxAgeMillis,$))return ee;S.eTag=ee&&ee.eTag;const pe=yield k.client.fetch(S),Le=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===pe.status&&Le.push(k.storage.setLastSuccessfulFetchResponse(pe)),yield Promise.all(Le),pe})()}}function Ht(I=navigator){return I.languages&&I.languages[0]||I.language}class oi{constructor(S,k,$,ee,pe,Le){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=$,this.projectId=ee,this.apiKey=pe,this.appId=Le}fetch(S){var k=this;return(0,V.Z)(function*(){var $,ee,pe;const[Le,rt]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Ft=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Pt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},At={sdk_version:k.sdkVersion,app_instance_id:Le,app_instance_id_token:rt,app_id:k.appId,language_code:Ht()},Li={method:"POST",headers:Pt,body:JSON.stringify(At)},li=fetch(Ft,Li),Ei=new Promise((Dn,Bn)=>{S.signal.addEventListener(()=>{const Fr=new Error("The operation was aborted.");Fr.name="AbortError",Bn(Fr)})});let ko;try{yield Promise.race([li,Ei]),ko=yield li}catch(Dn){let Bn="fetch-client-network";throw"AbortError"===(null===($=Dn)||void 0===$?void 0:$.name)&&(Bn="fetch-timeout"),Gi.create(Bn,{originalErrorMessage:null===(ee=Dn)||void 0===ee?void 0:ee.message})}let zn=ko.status;const Rs=ko.headers.get("ETag")||void 0;let Po,tn;if(200===ko.status){let Dn;try{Dn=yield ko.json()}catch(Bn){throw Gi.create("fetch-client-parse",{originalErrorMessage:null===(pe=Bn)||void 0===pe?void 0:pe.message})}Po=Dn.entries,tn=Dn.state}if("INSTANCE_STATE_UNSPECIFIED"===tn?zn=500:"NO_CHANGE"===tn?zn=304:("NO_TEMPLATE"===tn||"EMPTY_CONFIG"===tn)&&(Po={}),304!==zn&&200!==zn)throw Gi.create("fetch-status",{httpStatus:zn});return{status:zn,eTag:Rs,config:Po}})()}}class br{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,V.Z)(function*(){const $=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,$)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:$}){var ee=this;return(0,V.Z)(function*(){yield function Yn(I,S){return new Promise((k,$)=>{const ee=Math.max(S-Date.now(),0),pe=setTimeout(k,ee);I.addEventListener(()=>{clearTimeout(pe),$(Gi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const pe=yield ee.client.fetch(S);return yield ee.storage.deleteThrottleMetadata(),pe}catch(pe){if(!function Ss(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(pe))throw pe;const Le={throttleEndTimeMillis:Date.now()+(0,ce.$s)($),backoffCount:$+1};return yield ee.storage.setThrottleMetadata(Le),ee.attemptFetch(S,Le)}})()}}class Na{constructor(S,k,$,ee,pe){this.app=S,this._client=k,this._storageCache=$,this._storage=ee,this._logger=pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pc(I,S){var k;const $=I.target.error||void 0;return Gi.create(S,{originalErrorMessage:$&&(null===(k=$)||void 0===k?void 0:k.message)})}const Ko="app_namespace_store";class Gn{constructor(S,k,$,ee=function Ut(){return new Promise((I,S)=>{var k;try{const $=indexedDB.open("firebase_remote_config",1);$.onerror=ee=>{S(pc(ee,"storage-open"))},$.onsuccess=ee=>{I(ee.target.result)},$.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(Ko,{keyPath:"compositeKey"})}}catch($){S(Gi.create("storage-open",{originalErrorMessage:null===(k=$)||void 0===k?void 0:k.message}))}})}()){this.appId=S,this.appName=k,this.namespace=$,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,V.Z)(function*(){const $=yield k.openDbPromise;return new Promise((ee,pe)=>{var Le;const xt=$.transaction([Ko],"readonly").objectStore(Ko),Ft=k.createCompositeKey(S);try{const Pt=xt.get(Ft);Pt.onerror=At=>{pe(pc(At,"storage-get"))},Pt.onsuccess=At=>{const Li=At.target.result;ee(Li?Li.value:void 0)}}catch(Pt){pe(Gi.create("storage-get",{originalErrorMessage:null===(Le=Pt)||void 0===Le?void 0:Le.message}))}})})()}set(S,k){var $=this;return(0,V.Z)(function*(){const ee=yield $.openDbPromise;return new Promise((pe,Le)=>{var rt;const Ft=ee.transaction([Ko],"readwrite").objectStore(Ko),Pt=$.createCompositeKey(S);try{const At=Ft.put({compositeKey:Pt,value:k});At.onerror=Li=>{Le(pc(Li,"storage-set"))},At.onsuccess=()=>{pe()}}catch(At){Le(Gi.create("storage-set",{originalErrorMessage:null===(rt=At)||void 0===rt?void 0:rt.message}))}})})()}delete(S){var k=this;return(0,V.Z)(function*(){const $=yield k.openDbPromise;return new Promise((ee,pe)=>{var Le;const xt=$.transaction([Ko],"readwrite").objectStore(Ko),Ft=k.createCompositeKey(S);try{const Pt=xt.delete(Ft);Pt.onerror=At=>{pe(pc(At,"storage-delete"))},Pt.onsuccess=()=>{ee()}}catch(Pt){pe(Gi.create("storage-delete",{originalErrorMessage:null===(Le=Pt)||void 0===Le?void 0:Le.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class wr{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,V.Z)(function*(){const k=S.storage.getLastFetchStatus(),$=S.storage.getLastSuccessfulFetchTimestampMillis(),ee=S.storage.getActiveConfig(),pe=yield k;pe&&(S.lastFetchStatus=pe);const Le=yield $;Le&&(S.lastSuccessfulFetchTimestampMillis=Le);const rt=yield ee;rt&&(S.activeConfig=rt)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Fn(){return ea.apply(this,arguments)}function ea(){return(ea=(0,V.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function Zr(){(0,le._registerComponent)(new he.wA("remote-config",function I(S,{instanceIdentifier:k}){const $=S.getProvider("app").getImmediate(),ee=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Gi.create("registration-window");if(!(0,ce.hl)())throw Gi.create("indexed-db-unavailable");const{projectId:pe,apiKey:Le,appId:rt}=$.options;if(!pe)throw Gi.create("registration-project-id");if(!Le)throw Gi.create("registration-api-key");if(!rt)throw Gi.create("registration-app-id");const xt=new Gn(rt,$.name,k=k||"firebase"),Ft=new wr(xt),Pt=new ve.Yd(Aa);Pt.logLevel=ve.in.ERROR;const At=new oi(ee,le.SDK_VERSION,k,pe,Le,rt),Li=new br(At,xt),li=new Jf(Li,xt,Ft,Pt),Ei=new Na($,li,Ft,xt,Pt);return function qd(I){const S=(0,ce.m9)(I);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ei),Ei},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(Aa,"0.3.11"),(0,le.registerVersion)(Aa,"0.3.11","esm2017")}();const xo="/firebase-messaging-sw.js",Ot="/firebase-cloud-messaging-push-scope",Qr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ta="https://fcmregistrations.googleapis.com/v1",Ao="google.c.a.c_id",Un="google.c.a.c_l",El="google.c.a.ts";var Yo=function(I){return I.PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",I}(Yo||{});function Er(I){const S=new Uint8Array(I);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zo(I){const k=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),$=atob(k),ee=new Uint8Array($.length);for(let pe=0;pe<$.length;++pe)ee[pe]=$.charCodeAt(pe);return ee}const Rr="fcm_token_details_db",Oa=5,gi="fcm_token_object_Store";function Xf(){return Xf=(0,V.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(pe=>pe.name).includes(Rr))return null;let S=null;return(yield(0,De.X3)(Rr,Oa,{upgrade:($=(0,V.Z)(function*(ee,pe,Le,rt){var xt;if(pe<2||!ee.objectStoreNames.contains(gi))return;const Ft=rt.objectStore(gi),Pt=yield Ft.index("fcmSenderId").get(I);if(yield Ft.clear(),Pt)if(2===pe){const At=Pt;if(!At.auth||!At.p256dh||!At.endpoint)return;S={token:At.fcmToken,createTime:null!==(xt=At.createTime)&&void 0!==xt?xt:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:Er(At.vapidKey)}}}else if(3===pe){const At=Pt;S={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Er(At.auth),p256dh:Er(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Er(At.vapidKey)}}}else if(4===pe){const At=Pt;S={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Er(At.auth),p256dh:Er(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Er(At.vapidKey)}}}}),function(pe,Le,rt,xt){return $.apply(this,arguments)})})).close(),yield(0,De.Lj)(Rr),yield(0,De.Lj)("fcm_vapid_details_db"),yield(0,De.Lj)("undefined"),function mc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:S}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var $}),Xf.apply(this,arguments)}const Dl="firebase-messaging-database",Jr=1,kr="firebase-messaging-store";let As=null;function Ms(){return As||(As=(0,De.X3)(Dl,Jr,{upgrade:(I,S)=>{0===S&&I.createObjectStore(kr)}})),As}function _i(I){return Ru.apply(this,arguments)}function Ru(){return Ru=(0,V.Z)(function*(I){const S=na(I),$=yield(yield Ms()).transaction(kr).objectStore(kr).get(S);if($)return $;{const ee=yield function on(I){return Xf.apply(this,arguments)}(I.appConfig.senderId);if(ee)return yield si(I,ee),ee}}),Ru.apply(this,arguments)}function si(I,S){return ki.apply(this,arguments)}function ki(){return(ki=(0,V.Z)(function*(I,S){const k=na(I),ee=(yield Ms()).transaction(kr,"readwrite");return yield ee.objectStore(kr).put(S,k),yield ee.done,S})).apply(this,arguments)}function Xr(){return(Xr=(0,V.Z)(function*(I){const S=na(I),$=(yield Ms()).transaction(kr,"readwrite");yield $.objectStore(kr).delete(S),yield $.done})).apply(this,arguments)}function na({appConfig:I}){return I.appId}const Zn=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Yd(I,S){return _c.apply(this,arguments)}function _c(){return(_c=(0,V.Z)(function*(I,S){var k;const $=yield Jd(I),ee=Lu(S),pe={method:"POST",headers:$,body:JSON.stringify(ee)};let Le;try{Le=yield(yield fetch(yc(I.appConfig),pe)).json()}catch(rt){throw Zn.create("token-subscribe-failed",{errorInfo:null===(k=rt)||void 0===k?void 0:k.toString()})}if(Le.error)throw Zn.create("token-subscribe-failed",{errorInfo:Le.error.message});if(!Le.token)throw Zn.create("token-subscribe-no-token");return Le.token})).apply(this,arguments)}function ku(){return(ku=(0,V.Z)(function*(I,S){var k;const $=yield Jd(I),ee=Lu(S.subscriptionOptions),pe={method:"PATCH",headers:$,body:JSON.stringify(ee)};let Le;try{Le=yield(yield fetch(`${yc(I.appConfig)}/${S.token}`,pe)).json()}catch(rt){throw Zn.create("token-update-failed",{errorInfo:null===(k=rt)||void 0===k?void 0:k.toString()})}if(Le.error)throw Zn.create("token-update-failed",{errorInfo:Le.error.message});if(!Le.token)throw Zn.create("token-update-no-token");return Le.token})).apply(this,arguments)}function Pu(I,S){return Qd.apply(this,arguments)}function Qd(){return(Qd=(0,V.Z)(function*(I,S){var k;const ee={method:"DELETE",headers:yield Jd(I)};try{const Le=yield(yield fetch(`${yc(I.appConfig)}/${S}`,ee)).json();if(Le.error)throw Zn.create("token-unsubscribe-failed",{errorInfo:Le.error.message})}catch(pe){throw Zn.create("token-unsubscribe-failed",{errorInfo:null===(k=pe)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function yc({projectId:I}){return`${ta}/projects/${I}/registrations`}function Jd(I){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,V.Z)(function*({appConfig:I,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Lu({p256dh:I,auth:S,endpoint:k,vapidKey:$}){const ee={web:{endpoint:k,auth:S,p256dh:I}};return $!==Qr&&(ee.web.applicationPubKey=$),ee}const Xd=6048e5;function eh(){return eh=(0,V.Z)(function*(I){const S=yield function tp(I,S){return Qn.apply(this,arguments)}(I.swRegistration,I.vapidKey),k={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:S.endpoint,auth:Er(S.getKey("auth")),p256dh:Er(S.getKey("p256dh"))},$=yield _i(I.firebaseDependencies);if($){if(function np(I,S){return S.vapidKey===I.vapidKey&&S.endpoint===I.endpoint&&S.auth===I.auth&&S.p256dh===I.p256dh}($.subscriptionOptions,k))return Date.now()>=$.createTime+Xd?function nh(I,S){return ih.apply(this,arguments)}(I,{token:$.token,createTime:Date.now(),subscriptionOptions:k}):$.token;try{yield Pu(I.firebaseDependencies,$.token)}catch(ee){console.warn(ee)}return Tl(I.firebaseDependencies,k)}return Tl(I.firebaseDependencies,k)}),eh.apply(this,arguments)}function ep(){return ep=(0,V.Z)(function*(I){const S=yield _i(I.firebaseDependencies);S&&(yield Pu(I.firebaseDependencies,S.token),yield function gc(I){return Xr.apply(this,arguments)}(I.firebaseDependencies));const k=yield I.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()}),ep.apply(this,arguments)}function ih(){return ih=(0,V.Z)(function*(I,S){try{const k=yield function Zd(I,S){return ku.apply(this,arguments)}(I.firebaseDependencies,S),$=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield si(I.firebaseDependencies,$),k}catch(k){throw yield function th(I){return ep.apply(this,arguments)}(I),k}}),ih.apply(this,arguments)}function Tl(I,S){return vc.apply(this,arguments)}function vc(){return(vc=(0,V.Z)(function*(I,S){const $={token:yield Yd(I,S),createTime:Date.now(),subscriptionOptions:S};return yield si(I,$),$.token})).apply(this,arguments)}function Qn(){return(Qn=(0,V.Z)(function*(I,S){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zo(S)})})).apply(this,arguments)}function ia(I){const S={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Vu(I,S){if(!S.notification)return;I.notification={};const k=S.notification.title;k&&(I.notification.title=k);const $=S.notification.body;$&&(I.notification.body=$);const ee=S.notification.image;ee&&(I.notification.image=ee)}(S,I),function db(I,S){S.data&&(I.data=S.data)}(S,I),function rh(I,S){var k,$,ee,pe,Le;if(!(S.fcmOptions||null!==(k=S.notification)&&void 0!==k&&k.click_action))return;I.fcmOptions={};const rt=null!==(ee=null===($=S.fcmOptions)||void 0===$?void 0:$.link)&&void 0!==ee?ee:null===(pe=S.notification)||void 0===pe?void 0:pe.click_action;rt&&(I.fcmOptions.link=rt);const xt=null===(Le=S.fcmOptions)||void 0===Le?void 0:Le.analytics_label;xt&&(I.fcmOptions.analyticsLabel=xt)}(S,I),S}function oh(I,S){const k=[];for(let $=0;$<I.length;$++)k.push(I.charAt($)),$<S.length&&k.push(S.charAt($));return k.join("")}function bc(I){return Zn.create("missing-app-config-values",{valueName:I})}oh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),oh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class hb{constructor(S,k,$){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function Fg(I){if(!I||!I.options)throw bc("App Configuration Object");if(!I.name)throw bc("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=I;for(const $ of S)if(!k[$])throw bc($);return{appName:I.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ee,installations:k,analyticsProvider:$}}_delete(){return Promise.resolve()}}function Pr(){return(Pr=(0,V.Z)(function*(I){var S;try{I.swRegistration=yield navigator.serviceWorker.register(xo,{scope:Ot}),I.swRegistration.update().catch(()=>{})}catch(k){throw Zn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=k)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function Jn(){return(Jn=(0,V.Z)(function*(I,S){if(!S&&!I.swRegistration&&(yield function Il(I){return Pr.apply(this,arguments)}(I)),S||!I.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Zn.create("invalid-sw-registration");I.swRegistration=S}})).apply(this,arguments)}function sh(){return(sh=(0,V.Z)(function*(I,S){S?I.vapidKey=S:I.vapidKey||(I.vapidKey=Qr)})).apply(this,arguments)}function ka(){return ka=(0,V.Z)(function*(I,S){if(!navigator)throw Zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Zn.create("permission-blocked");return yield function Mo(I,S){return sh.apply(this,arguments)}(I,S?.vapidKey),yield function Ra(I,S){return Jn.apply(this,arguments)}(I,S?.serviceWorkerRegistration),function Bu(I){return eh.apply(this,arguments)}(I)}),ka.apply(this,arguments)}function ah(){return(ah=(0,V.Z)(function*(I,S,k){const $=function lh(I){switch(I){case Yo.NOTIFICATION_CLICKED:return"notification_open";case Yo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent($,{message_id:k[Ao],message_name:k[Un],message_time:k[El],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Pa(){return Pa=(0,V.Z)(function*(I,S){const k=S.data;if(!k.isFirebaseMessaging)return;I.onMessageHandler&&k.messageType===Yo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(ia(k)):I.onMessageHandler.next(ia(k)));const $=k.data;(function Uu(I){return"object"==typeof I&&!!I&&Ao in I})($)&&"1"===$["google.c.a.e"]&&(yield function ra(I,S,k){return ah.apply(this,arguments)}(I,k.messageType,$))}),Pa.apply(this,arguments)}const uh="@firebase/messaging",Lg=I=>{const S=new hb(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function ch(I,S){return Pa.apply(this,arguments)}(S,k)),S},xl=I=>{const S=I.getProvider("messaging").getImmediate();return{getToken:$=>function Sl(I,S){return ka.apply(this,arguments)}(S,$)}};function ip(){return ju.apply(this,arguments)}function ju(){return(ju=(0,V.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Bg(){(0,le._registerComponent)(new he.wA("messaging",Lg,"PUBLIC")),(0,le._registerComponent)(new he.wA("messaging-internal",xl,"PRIVATE")),(0,le.registerVersion)(uh,"0.9.16"),(0,le.registerVersion)(uh,"0.9.16","esm2017")}();const hh="analytics",op="firebase_id",gb="origin",eo=6e4,oa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wc="https://www.googletagmanager.com/gtag/js",Kt=new ve.Yd("@firebase/analytics");function Al(I){return Promise.all(I.map(S=>S.catch(k=>k)))}function La(){return(La=(0,V.Z)(function*(I,S,k,$,ee,pe){const Le=$[ee];try{if(Le)yield S[Le];else{const xt=(yield Al(k)).find(Ft=>Ft.measurementId===ee);xt&&(yield S[xt.appId])}}catch(rt){Kt.error(rt)}I("config",ee,pe)})).apply(this,arguments)}function bi(){return(bi=(0,V.Z)(function*(I,S,k,$,ee){try{let pe=[];if(ee&&ee.send_to){let Le=ee.send_to;Array.isArray(Le)||(Le=[Le]);const rt=yield Al(k);for(const xt of Le){const Ft=rt.find(At=>At.measurementId===xt),Pt=Ft&&S[Ft.appId];if(!Pt){pe=[];break}pe.push(Pt)}}0===pe.length&&(pe=Object.values(S)),yield Promise.all(pe),I("event",$,ee||{})}catch(pe){Kt.error(pe)}})).apply(this,arguments)}const cr=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ba=30,Ml=new class to{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function mh(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Cc(){return(Cc=(0,V.Z)(function*(I){var S;const{appId:k,apiKey:$}=I,ee={method:"GET",headers:mh($)},pe=oa.replace("{app-id}",k),Le=yield fetch(pe,ee);if(200!==Le.status&&304!==Le.status){let rt="";try{const xt=yield Le.json();null!==(S=xt.error)&&void 0!==S&&S.message&&(rt=xt.error.message)}catch{}throw cr.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:rt})}return Le.json()})).apply(this,arguments)}function Gu(){return(Gu=(0,V.Z)(function*(I,S=Ml,k){const{appId:$,apiKey:ee,measurementId:pe}=I.options;if(!$)throw cr.create("no-app-id");if(!ee){if(pe)return{measurementId:pe,appId:$};throw cr.create("no-api-key")}const Le=S.getThrottleMetadata($)||{backoffCount:0,throttleEndTimeMillis:Date.now()},rt=new Wu;return setTimeout((0,V.Z)(function*(){rt.abort()}),void 0!==k?k:eo),Dc({appId:$,apiKey:ee,measurementId:pe},Le,rt,S)})).apply(this,arguments)}function Dc(I,S,k){return zu.apply(this,arguments)}function zu(){return zu=(0,V.Z)(function*(I,{throttleEndTimeMillis:S,backoffCount:k},$,ee=Ml){var pe,Le;const{appId:rt,measurementId:xt}=I;try{yield function Nl(I,S){return new Promise((k,$)=>{const ee=Math.max(S-Date.now(),0),pe=setTimeout(k,ee);I.addEventListener(()=>{clearTimeout(pe),$(cr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}($,S)}catch(Ft){if(xt)return Kt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xt} provided in the "measurementId" field in the local Firebase config. [${null===(pe=Ft)||void 0===pe?void 0:pe.message}]`),{appId:rt,measurementId:xt};throw Ft}try{const Ft=yield function Rt(I){return Cc.apply(this,arguments)}(I);return ee.deleteThrottleMetadata(rt),Ft}catch(Ft){const Pt=Ft;if(!function Ns(I){if(!(I instanceof ce.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(Pt)){if(ee.deleteThrottleMetadata(rt),xt)return Kt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xt} provided in the "measurementId" field in the local Firebase config. [${Pt?.message}]`),{appId:rt,measurementId:xt};throw Ft}const At=503===Number(null===(Le=Pt?.customData)||void 0===Le?void 0:Le.httpStatus)?(0,ce.$s)(k,ee.intervalMillis,Ba):(0,ce.$s)(k,ee.intervalMillis),Li={throttleEndTimeMillis:Date.now()+At,backoffCount:k+1};return ee.setThrottleMetadata(rt,Li),Kt.debug(`Calling attemptFetch again in ${At} millis`),Dc(I,Li,$,ee)}}),zu.apply(this,arguments)}class Wu{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Tc,Cr;function aa(){return(aa=(0,V.Z)(function*(I,S,k,$,ee){if(ee&&ee.global)I("event",k,$);else{const pe=yield S;I("event",k,Object.assign(Object.assign({},$),{send_to:pe}))}})).apply(this,arguments)}function ap(){return(ap=(0,V.Z)(function*(){var I;if(!(0,ce.hl)())return Kt.warn(cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(S){return Kt.warn(cr.create("indexeddb-unavailable",{errorInfo:null===(I=S)||void 0===I?void 0:I.toString()}).message),!1}return!0})).apply(this,arguments)}function Pi(){return Pi=(0,V.Z)(function*(I,S,k,$,ee,pe,Le){var rt;const xt=function wi(I){return Gu.apply(this,arguments)}(I);xt.then(li=>{k[li.measurementId]=li.appId,I.options.measurementId&&li.measurementId!==I.options.measurementId&&Kt.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${li.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(li=>Kt.error(li)),S.push(xt);const Ft=function Hg(){return ap.apply(this,arguments)}().then(li=>{if(li)return $.getId()}),[Pt,At]=yield Promise.all([xt,Ft]);(function $u(){const I=window.document.getElementsByTagName("script");for(const S of Object.values(I))if(S.src&&S.src.includes(wc))return S;return null})()||function Ec(I,S){const k=document.createElement("script");k.src=`${wc}?l=${I}&id=${S}`,k.async=!0,document.head.appendChild(k)}(pe,Pt.measurementId),Cr&&(ee("consent","default",Cr),function xc(I){Cr=I}(void 0)),ee("js",new Date);const Li=null!==(rt=Le?.config)&&void 0!==rt?rt:{};return Li[gb]="firebase",Li.update=!0,null!=At&&(Li[op]=At),ee("config",Pt.measurementId,Li),Tc&&(ee("set",Tc),function Rl(I){Tc=I}(void 0)),Pt.measurementId}),Pi.apply(this,arguments)}class No{constructor(S){this.app=S}_delete(){return delete Oo[this.app.options.appId],Promise.resolve()}}let Oo={},Xo=[];const no={};let lp,es,Va="dataLayer",ua=!1;function Ac(I,S,k){!function qu(){const I=[];if((0,ce.ru)()&&I.push("This is a browser extension environment."),(0,ce.zI)()||I.push("Cookies are not available."),I.length>0){const S=I.map(($,ee)=>`(${ee+1}) ${$}`).join(" "),k=cr.create("invalid-analytics-context",{errorInfo:S});Kt.warn(k.message)}}();const $=I.options.appId;if(!$)throw cr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw cr.create("no-api-key");Kt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Oo[$])throw cr.create("already-exists",{id:$});if(!ua){!function Wi(I){let S=[];Array.isArray(window[I])?S=window[I]:window[I]=S}(Va);const{wrappedGtag:pe,gtagCore:Le}=function sp(I,S,k,$,ee){let pe=function(...Le){window[$].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(pe=window[ee]),window[ee]=function fh(I,S,k,$){function pe(){return pe=(0,V.Z)(function*(Le,rt,xt){try{"event"===Le?yield function Qo(I,S,k,$,ee){return bi.apply(this,arguments)}(I,S,k,rt,xt):"config"===Le?yield function sa(I,S,k,$,ee,pe){return La.apply(this,arguments)}(I,S,k,$,rt,xt):"consent"===Le?I("consent","update",xt):I("set",rt)}catch(Ft){Kt.error(Ft)}}),pe.apply(this,arguments)}return function ee(Le,rt,xt){return pe.apply(this,arguments)}}(pe,I,S,k),{gtagCore:pe,wrappedGtag:window[ee]}}(Oo,Xo,no,Va,"gtag");es=pe,lp=Le,ua=!0}return Oo[$]=function ca(I,S,k,$,ee,pe,Le){return Pi.apply(this,arguments)}(I,Xo,no,S,lp,Va,k),new No(I)}function Ku(){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,V.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const da="@firebase/analytics";!function Wg(){(0,le._registerComponent)(new he.wA(hh,(S,{options:k})=>Ac(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,le._registerComponent)(new he.wA("analytics-internal",function I(S){try{const k=S.getProvider(hh).getImmediate();return{logEvent:($,ee,pe)=>function zg(I,S,k,$){I=(0,ce.m9)(I),function jg(I,S,k,$,ee){return aa.apply(this,arguments)}(es,Oo[I.app.options.appId],S,k,$).catch(ee=>Kt.error(ee))}(k,$,ee,pe)}}catch(k){throw cr.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,le.registerVersion)(da,"0.8.0"),(0,le.registerVersion)(da,"0.8.0","esm2017")}();var bh=F(2381),qg=F(6321),wh=F(9397),ja=F(3093),Pl=F(5137);const Yu=new u.GfV("7.6.1"),io="__angularfire_symbol__analyticsIsSupportedValue",Ha="__angularfire_symbol__analyticsIsSupported",ro="__angularfire_symbol__remoteConfigIsSupportedValue",ha="__angularfire_symbol__remoteConfigIsSupported",Fl="__angularfire_symbol__messagingIsSupportedValue",Mc="__angularfire_symbol__messagingIsSupported";function yt(I,S,k){if(S){if(1===S.length)return S[0];const pe=S.filter(Le=>Le.app===k);if(1===pe.length)return pe[0]}return k.container.getProvider(I).getImmediate({optional:!0})}globalThis[Ha]||(globalThis[Ha]=Ku().then(I=>globalThis[io]=I).catch(()=>globalThis[io]=!1)),globalThis[Mc]||(globalThis[Mc]=ip().then(I=>globalThis[Fl]=I).catch(()=>globalThis[Fl]=!1)),globalThis[ha]||(globalThis[ha]=Fn().then(I=>globalThis[ro]=I).catch(()=>globalThis[ro]=!1));const Fi=(I,S)=>{const k=S?[S]:(0,ie.C6)(),$=[];return k.forEach(ee=>{ee.container.getProvider(I).instances.forEach(Le=>{$.includes(Le)||$.push(Le)})}),$};function Ll(){}class $a{constructor(S,k=bh.N){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,$){const ee=this.zone;return this.delegate.schedule(function(Le){ee.runGuarded(()=>{S.apply(this,[Le])})},k,$)}}class Kg{constructor(S){this.zone=S,this.task=null}call(S,k){const $=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ll,{},Ll,Ll)),k.pipe((0,wh.b)({next:$,complete:$,error:$})).subscribe(S).add($)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Zu=(()=>{class I{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new $a(Zone.current)),this.insideAngular=k.run(()=>new $a(Zone.current,qg.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(k){return new(k||I)(u.LFG(u.R0b))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ro(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Tt(I){return I.pipe((0,ja.Q)(Ro().outsideAngular))}function Nc(I){return Ro(),function Os(I){return function(k){return(k=k.lift(new Kg(I.ngZone))).pipe((0,Pl.R)(I.outsideAngular),(0,ja.Q)(I.insideAngular))}}(Ro())(I)}},9058:(mt,Ie,F)=>{F.d(Ie,{$s:()=>dn,BH:()=>ze,DV:()=>tt,Dv:()=>En,G6:()=>$e,GJ:()=>Ye,L:()=>De,LL:()=>In,Mn:()=>de,Pz:()=>fe,Sg:()=>Fe,UG:()=>it,UI:()=>kt,US:()=>he,Wj:()=>Dt,Yr:()=>Ae,ZB:()=>W,ZR:()=>Nn,b$:()=>gt,cI:()=>_r,d:()=>se,dS:()=>Oi,eu:()=>ke,g5:()=>V,gK:()=>nt,gQ:()=>re,h$:()=>ve,hl:()=>G,hu:()=>ie,jU:()=>Ve,lb:()=>Cn,m9:()=>gl,ne:()=>ne,p$:()=>j,pd:()=>pn,r3:()=>_t,ru:()=>pt,tV:()=>ue,uI:()=>Ue,ug:()=>Kn,vZ:()=>un,w1:()=>Ce,w9:()=>He,xO:()=>Pn,xb:()=>nn,z$:()=>Je,zI:()=>Ke,zd:()=>fi});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ie=function(J,K){if(!J)throw V(K)},V=function(J){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+J)},le=function(J){const K=[];let z=0;for(let Y=0;Y<J.length;Y++){let q=J.charCodeAt(Y);q<128?K[z++]=q:q<2048?(K[z++]=q>>6|192,K[z++]=63&q|128):55296==(64512&q)&&Y+1<J.length&&56320==(64512&J.charCodeAt(Y+1))?(q=65536+((1023&q)<<10)+(1023&J.charCodeAt(++Y)),K[z++]=q>>18|240,K[z++]=q>>12&63|128,K[z++]=q>>6&63|128,K[z++]=63&q|128):(K[z++]=q>>12|224,K[z++]=q>>6&63|128,K[z++]=63&q|128)}return K},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(J,K){if(!Array.isArray(J))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=K?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let q=0;q<J.length;q+=3){const Be=J[q],We=q+1<J.length,It=We?J[q+1]:0,Bt=q+2<J.length,vn=Bt?J[q+2]:0;let yr=(15&It)<<2|vn>>6,zo=63&vn;Bt||(zo=64,We||(yr=64)),Y.push(z[Be>>2],z[(3&Be)<<4|It>>4],z[yr],z[zo])}return Y.join("")},encodeString(J,K){return this.HAS_NATIVE_SUPPORT&&!K?btoa(J):this.encodeByteArray(le(J),K)},decodeString(J,K){return this.HAS_NATIVE_SUPPORT&&!K?atob(J):function(J){const K=[];let z=0,Y=0;for(;z<J.length;){const q=J[z++];if(q<128)K[Y++]=String.fromCharCode(q);else if(q>191&&q<224){const Be=J[z++];K[Y++]=String.fromCharCode((31&q)<<6|63&Be)}else if(q>239&&q<365){const Bt=((7&q)<<18|(63&J[z++])<<12|(63&J[z++])<<6|63&J[z++])-65536;K[Y++]=String.fromCharCode(55296+(Bt>>10)),K[Y++]=String.fromCharCode(56320+(1023&Bt))}else{const Be=J[z++],We=J[z++];K[Y++]=String.fromCharCode((15&q)<<12|(63&Be)<<6|63&We)}}return K.join("")}(this.decodeStringToByteArray(J,K))},decodeStringToByteArray(J,K){this.init_();const z=K?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let q=0;q<J.length;){const Be=z[J.charAt(q++)],It=q<J.length?z[J.charAt(q)]:0;++q;const vn=q<J.length?z[J.charAt(q)]:64;++q;const Zt=q<J.length?z[J.charAt(q)]:64;if(++q,null==Be||null==It||null==vn||null==Zt)throw Error();Y.push(Be<<2|It>>4),64!==vn&&(Y.push(It<<4&240|vn>>2),64!==Zt&&Y.push(vn<<6&192|Zt))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let J=0;J<this.ENCODED_VALS.length;J++)this.byteToCharMap_[J]=this.ENCODED_VALS.charAt(J),this.charToByteMap_[this.byteToCharMap_[J]]=J,this.byteToCharMapWebSafe_[J]=this.ENCODED_VALS_WEBSAFE.charAt(J),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[J]]=J,J>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(J)]=J,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(J)]=J)}}},ve=function(J){const K=le(J);return he.encodeByteArray(K,!0)},De=function(J){return ve(J).replace(/\./g,"")},ue=function(J){try{return he.decodeString(J,!0)}catch(K){console.error("base64Decode failed: ",K)}return null};function j(J){return W(void 0,J)}function W(J,K){if(!(K instanceof Object))return K;switch(K.constructor){case Date:return new Date(K.getTime());case Object:void 0===J&&(J={});break;case Array:J=[];break;default:return K}for(const z in K)!K.hasOwnProperty(z)||!ae(z)||(J[z]=W(J[z],K[z]));return J}function ae(J){return"__proto__"!==J}class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((K,z)=>{this.resolve=K,this.reject=z})}wrapCallback(K){return(z,Y)=>{z?this.reject(z):this.resolve(Y),"function"==typeof K&&(this.promise.catch(()=>{}),1===K.length?K(z):K(z,Y))}}}function Fe(J,K){if(J.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=K||"demo-project",q=J.iat||0,Be=J.sub||J.user_id;if(!Be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:q,exp:q+3600,auth_time:q,sub:Be,user_id:Be,firebase:{sign_in_provider:"custom",identities:{}}},J);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(We)),""].join(".")}function Je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function it(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ve(){return"object"==typeof self&&self.self===self}function pt(){const J="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof J&&void 0!==J.id}function gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function se(){return Je().indexOf("Electron/")>=0}function Ce(){const J=Je();return J.indexOf("MSIE ")>=0||J.indexOf("Trident/")>=0}function de(){return Je().indexOf("MSAppHost/")>=0}function Ae(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function $e(){return!it()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G(){return"object"==typeof indexedDB}function ke(){return new Promise((J,K)=>{try{let z=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(Y);q.onsuccess=()=>{q.result.close(),z||self.indexedDB.deleteDatabase(Y),J(!0)},q.onupgradeneeded=()=>{z=!1},q.onerror=()=>{var Be;K((null===(Be=q.error)||void 0===Be?void 0:Be.message)||"")}}catch(z){K(z)}})}function Ke(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Nn extends Error{constructor(K,z,Y){super(z),this.code=K,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,Nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,In.prototype.create)}}class In{constructor(K,z,Y){this.service=K,this.serviceName=z,this.errors=Y}create(K,...z){const Y=z[0]||{},q=`${this.service}/${K}`,Be=this.errors[K],We=Be?function Sn(J,K){return J.replace(ri,(z,Y)=>{const q=K[Y];return null!=q?String(q):`<${Y}?>`})}(Be,Y):"Error";return new Nn(q,`${this.serviceName}: ${We} (${q}).`,Y)}}const ri=/\{\$([^}]+)}/g;function _r(J){return JSON.parse(J)}function fe(J){return JSON.stringify(J)}const _e=function(J){let K={},z={},Y={},q="";try{const Be=J.split(".");K=_r(ue(Be[0])||""),z=_r(ue(Be[1])||""),q=Be[2],Y=z.d||{},delete z.d}catch{}return{header:K,claims:z,data:Y,signature:q}},He=function(J){const z=_e(J).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},Ye=function(J){const K=_e(J).claims;return"object"==typeof K&&!0===K.admin};function _t(J,K){return Object.prototype.hasOwnProperty.call(J,K)}function tt(J,K){if(Object.prototype.hasOwnProperty.call(J,K))return J[K]}function nn(J){for(const K in J)if(Object.prototype.hasOwnProperty.call(J,K))return!1;return!0}function kt(J,K,z){const Y={};for(const q in J)Object.prototype.hasOwnProperty.call(J,q)&&(Y[q]=K.call(z,J[q],q,J));return Y}function un(J,K){if(J===K)return!0;const z=Object.keys(J),Y=Object.keys(K);for(const q of z){if(!Y.includes(q))return!1;const Be=J[q],We=K[q];if(St(Be)&&St(We)){if(!un(Be,We))return!1}else if(Be!==We)return!1}for(const q of Y)if(!z.includes(q))return!1;return!0}function St(J){return null!==J&&"object"==typeof J}function Pn(J){const K=[];for(const[z,Y]of Object.entries(J))Array.isArray(Y)?Y.forEach(q=>{K.push(encodeURIComponent(z)+"="+encodeURIComponent(q))}):K.push(encodeURIComponent(z)+"="+encodeURIComponent(Y));return K.length?"&"+K.join("&"):""}function fi(J){const K={};return J.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[q,Be]=Y.split("=");K[decodeURIComponent(q)]=decodeURIComponent(Be)}}),K}function pn(J){const K=J.indexOf("?");if(!K)return"";const z=J.indexOf("#",K);return J.substring(K,z>0?z:void 0)}class re{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let K=1;K<this.blockSize;++K)this.pad_[K]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(K,z){z||(z=0);const Y=this.W_;if("string"==typeof K)for(let Zt=0;Zt<16;Zt++)Y[Zt]=K.charCodeAt(z)<<24|K.charCodeAt(z+1)<<16|K.charCodeAt(z+2)<<8|K.charCodeAt(z+3),z+=4;else for(let Zt=0;Zt<16;Zt++)Y[Zt]=K[z]<<24|K[z+1]<<16|K[z+2]<<8|K[z+3],z+=4;for(let Zt=16;Zt<80;Zt++){const yr=Y[Zt-3]^Y[Zt-8]^Y[Zt-14]^Y[Zt-16];Y[Zt]=4294967295&(yr<<1|yr>>>31)}let vn,vi,q=this.chain_[0],Be=this.chain_[1],We=this.chain_[2],It=this.chain_[3],Bt=this.chain_[4];for(let Zt=0;Zt<80;Zt++){Zt<40?Zt<20?(vn=It^Be&(We^It),vi=1518500249):(vn=Be^We^It,vi=1859775393):Zt<60?(vn=Be&We|It&(Be|We),vi=2400959708):(vn=Be^We^It,vi=3395469782);const yr=(q<<5|q>>>27)+vn+Bt+vi+Y[Zt]&4294967295;Bt=It,It=We,We=4294967295&(Be<<30|Be>>>2),Be=q,q=yr}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+Be&4294967295,this.chain_[2]=this.chain_[2]+We&4294967295,this.chain_[3]=this.chain_[3]+It&4294967295,this.chain_[4]=this.chain_[4]+Bt&4294967295}update(K,z){if(null==K)return;void 0===z&&(z=K.length);const Y=z-this.blockSize;let q=0;const Be=this.buf_;let We=this.inbuf_;for(;q<z;){if(0===We)for(;q<=Y;)this.compress_(K,q),q+=this.blockSize;if("string"==typeof K){for(;q<z;)if(Be[We]=K.charCodeAt(q),++We,++q,We===this.blockSize){this.compress_(Be),We=0;break}}else for(;q<z;)if(Be[We]=K[q],++We,++q,We===this.blockSize){this.compress_(Be),We=0;break}}this.inbuf_=We,this.total_+=z}digest(){const K=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&z,z/=256;this.compress_(this.buf_);let Y=0;for(let q=0;q<5;q++)for(let Be=24;Be>=0;Be-=8)K[Y]=this.chain_[q]>>Be&255,++Y;return K}}function ne(J,K){const z=new ye(J,K);return z.subscribe.bind(z)}class ye{constructor(K,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{K(this)}).catch(Y=>{this.error(Y)})}next(K){this.forEachObserver(z=>{z.next(K)})}error(K){this.forEachObserver(z=>{z.error(K)}),this.close(K)}complete(){this.forEachObserver(K=>{K.complete()}),this.close()}subscribe(K,z,Y){let q;if(void 0===K&&void 0===z&&void 0===Y)throw new Error("Missing Observer.");q=function et(J,K){if("object"!=typeof J||null===J)return!1;for(const z of K)if(z in J&&"function"==typeof J[z])return!0;return!1}(K,["next","error","complete"])?K:{next:K,error:z,complete:Y},void 0===q.next&&(q.next=st),void 0===q.error&&(q.error=st),void 0===q.complete&&(q.complete=st);const Be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),Be}unsubscribeOne(K){void 0===this.observers||void 0===this.observers[K]||(delete this.observers[K],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(K){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,K)}sendOne(K,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[K])try{z(this.observers[K])}catch(Y){typeof console<"u"&&console.error&&console.error(Y)}})}close(K){this.finalized||(this.finalized=!0,void 0!==K&&(this.finalError=K),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function st(){}const En=function(J,K,z,Y){let q;if(Y<K?q="at least "+K:Y>z&&(q=0===z?"none":"no more than "+z),q)throw new Error(J+" failed: Was called with "+Y+(1===Y?" argument.":" arguments.")+" Expects "+q+".")};function nt(J,K){return`${J} failed: ${K} argument `}function Dt(J,K,z,Y){if((!Y||z)&&"function"!=typeof z)throw new Error(nt(J,K)+"must be a valid function.")}function Cn(J,K,z,Y){if((!Y||z)&&("object"!=typeof z||null===z))throw new Error(nt(J,K)+"must be a valid context object.")}const Oi=function(J){const K=[];let z=0;for(let Y=0;Y<J.length;Y++){let q=J.charCodeAt(Y);if(q>=55296&&q<=56319){const Be=q-55296;Y++,ie(Y<J.length,"Surrogate pair missing trail surrogate."),q=65536+(Be<<10)+(J.charCodeAt(Y)-56320)}q<128?K[z++]=q:q<2048?(K[z++]=q>>6|192,K[z++]=63&q|128):q<65536?(K[z++]=q>>12|224,K[z++]=q>>6&63|128,K[z++]=63&q|128):(K[z++]=q>>18|240,K[z++]=q>>12&63|128,K[z++]=q>>6&63|128,K[z++]=63&q|128)}return K},Kn=function(J){let K=0;for(let z=0;z<J.length;z++){const Y=J.charCodeAt(z);Y<128?K++:Y<2048?K+=2:Y>=55296&&Y<=56319?(K+=4,z++):K+=3}return K},ln=1e3,or=2,jt=144e5,$i=.5;function dn(J,K=ln,z=or){const Y=K*Math.pow(z,J),q=Math.round($i*Y*(Math.random()-.5)*2);return Math.min(jt,Y+q)}function gl(J){return J&&J._delegate?J._delegate:J}},6809:(mt,Ie,F)=>{var u=F(5879);let ie=null;function V(){return ie}class ce{}const he=new u.OlP("DocumentToken");let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(ue)},providedIn:"platform"}),n})();const De=new u.OlP("Location Initialized");let ue=(()=>{class n extends ve{constructor(){super(),this._doc=(0,u.f3M)(he),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const i=V().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=V().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function j(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function W(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ae(n){return n&&"?"!==n[0]?"?"+n:n}let ze=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(Je)},providedIn:"root"}),n})();const Fe=new u.OlP("appBaseHref");let Je=(()=>{class n extends ze{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return j(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+ae(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const l=this.prepareExternalUrl(r+ae(o));this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,o){const l=this.prepareExternalUrl(r+ae(o));this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ve),u.LFG(Fe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ue=(()=>{class n extends ze{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=j(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let l=this.prepareExternalUrl(r+ae(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,o){let l=this.prepareExternalUrl(r+ae(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ve),u.LFG(Fe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),it=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function se(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(W(gt(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+ae(i))}normalize(t){return n.stripTrailingSlash(function pt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,gt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ae(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ae(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=ae,n.joinWithSlash=j,n.stripTrailingSlash=W,n.\u0275fac=function(t){return new(t||n)(u.LFG(ze))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ve(){return new it((0,u.LFG)(ze))}()},providedIn:"root"}),n})();function gt(n){return n.replace(/\/index.html$/,"")}let Or=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new bl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){qd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){qd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class bl{constructor(){this.$implicit=null,this.ngIf=null}}function qd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}class wl{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Xs=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const i of this._defaultViews)i.enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),Nu=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new wl(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(Xs,9))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),So=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:o,ngTemplateOutletInjector:l}=this;this._viewRef=i.createEmbeddedView(r,o,l?{injector:l}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[u.TTD]}),n})(),Ri=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const Yo="browser";function gi(n){return"server"===n}let Dl=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Jr((0,u.LFG)(he),window)}),n})();class Jr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function As(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=kr(this.window.history)||kr(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function kr(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ec extends ce{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Wi extends Ec{static makeCurrent(){!function le(n){ie||(ie=n)}(new Wi)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function La(){return sa=sa||document.querySelector("base"),sa?sa.getAttribute("href"):null}();return null==t?null:function bi(n){Qo=Qo||document.createElement("a"),Qo.setAttribute("href",n);const e=Qo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){sa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Mu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let Qo,sa=null,sp=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const $u=new u.OlP("EventManagerPlugins");let Jo=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new u.vHH(5101,!1);return this._eventNameToPlugin.set(t,i),i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG($u),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class cr{constructor(e){this._doc=e}}const Ba="ng-app-id";let ph=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gi(o),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Ba}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(Ba),o;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=i,this.platformIsServer&&l.setAttribute(Ba,this.appId),l}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const o=this.styleRef,l=o.get(i)?.elements;l?l.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(he),u.LFG(u.AFp),u.LFG(u.Ojb,8),u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const to={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ml=/%COMP%/g,Gu=new u.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Nl(n,e){return e.map(t=>t.replace(Ml,n))}let Ns=(()=>{class n{constructor(t,i,r,o,l,h,p,y=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=l,this.platformId=h,this.ngZone=p,this.nonce=y,this.rendererByCompId=new Map,this.platformIsServer=gi(h),this.defaultRenderer=new Wu(t,l,p,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===u.ifc.ShadowDom&&(i={...i,encapsulation:u.ifc.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof en?r.applyToHost(t):r instanceof Re&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let o=r.get(i.id);if(!o){const l=this.doc,h=this.ngZone,p=this.eventManager,y=this.sharedStylesHost,w=this.removeStylesOnCompDestroy,T=this.platformIsServer;switch(i.encapsulation){case u.ifc.Emulated:o=new en(p,y,i,this.appId,w,l,h,T);break;case u.ifc.ShadowDom:return new gh(p,y,t,i,l,h,this.nonce,T);default:o=new Re(p,y,i,w,l,h,T)}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Jo),u.LFG(ph),u.LFG(u.AFp),u.LFG(Gu),u.LFG(he),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(u.Ojb))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Wu{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(to[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(aa(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(aa(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new u.vHH(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=to[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=to[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,i,r&u.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=V().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function aa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class gh extends Wu{constructor(e,t,i,r,o,l,h,p){super(e,o,l,p),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const y=Nl(r.id,r.styles);for(const w of y){const T=document.createElement("style");h&&T.setAttribute("nonce",h),T.textContent=w,this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Re extends Wu{constructor(e,t,i,r,o,l,h,p){super(e,o,l,h),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=p?Nl(p,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class en extends Re{constructor(e,t,i,r,o,l,h,p){const y=r+"-"+i.id;super(e,t,i,o,l,h,p,y),this.contentAttr=function Dc(n){return"_ngcontent-%COMP%".replace(Ml,n)}(y),this.hostAttr=function zu(n){return"_nghost-%COMP%".replace(Ml,n)}(y)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Ic=(()=>{class n extends cr{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(he))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ol=["alt","control","meta","shift"],ai={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let la=(()=>{class n extends cr{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),l=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,o.domEventName,l))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let l="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),l="code."),Ol.forEach(y=>{const w=i.indexOf(y);w>-1&&(i.splice(w,1),l+=y+".")}),l+=o,0!=i.length||0===o.length)return null;const p={};return p.domEventName=r,p.fullKey=l,p}static matchEventFullKeyCode(t,i){let r=ai[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),Ol.forEach(l=>{l!==r&&(0,Sc[l])(t)&&(o+=l+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(he))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Oo=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:Yo},{provide:u.g9A,useValue:function ap(){Wi.makeCurrent()},multi:!0},{provide:he,useFactory:function Pi(){return(0,u.RDi)(document),document},deps:[]}]),Xo=new u.OlP(""),no=[{provide:u.rWj,useClass:class fh{addToWindow(e){u.dqk.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new u.vHH(5103,!1);return o},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(i=>{const r=u.dqk.getAllAngularTestabilities();let o=r.length,l=!1;const h=function(p){l=l||p,o--,0==o&&i(l)};r.forEach(p=>{p.whenStable(h)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],Va=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function ca(){return new u.qLn},deps:[]},{provide:$u,useClass:Ic,multi:!0,deps:[he,u.R0b,u.Lbi]},{provide:$u,useClass:la,multi:!0,deps:[he]},Ns,ph,Jo,{provide:u.FYo,useExisting:Ns},{provide:class _i{},useClass:sp,deps:[]},[]];let kl=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Xo,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...Va,...no],imports:[Ri,u.hGG]}),n})(),qu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(he))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function _h(){return new qu((0,u.LFG)(he))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var jn=F(5592),ur=F(4674),wn=F(2459),yt=F(2096),Fi=F(5619);const{isArray:Ll}=Array,{getPrototypeOf:$a,prototype:Kg,keys:Zu}=Object;function Ro(n){if(1===n.length){const e=n[0];if(Ll(e))return{args:e,keys:null};if(function Yg(n){return n&&"object"==typeof n&&$a(n)===Kg}(e)){const t=Zu(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var dr=F(2737),Tt=F(7398);const{isArray:Qu}=Array;function Os(n){return(0,Tt.U)(e=>function Nc(n,e){return Qu(e)?n(...e):n(e)}(n,e))}var oo=F(9940);function Oc(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var I=F(8251),S=F(7103);function k(...n){const e=(0,oo.yG)(n),t=(0,oo.jO)(n),{args:i,keys:r}=Ro(n);if(0===i.length)return(0,wn.D)([],e);const o=new jn.y(function $(n,e,t=dr.y){return i=>{ee(e,()=>{const{length:r}=n,o=new Array(r);let l=r,h=r;for(let p=0;p<r;p++)ee(e,()=>{const y=(0,wn.D)(n[p],e);let w=!1;y.subscribe((0,I.x)(i,T=>{o[p]=T,w||(w=!0,h--),h||i.next(t(o.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,e,r?l=>Oc(r,l):dr.y));return t?o.pipe(Os(t)):o}function ee(n,e,t){n?(0,S.f)(t,n,e):e()}const Le=(0,F(2306).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var rt=F(7537);function Ft(...n){return function xt(){return(0,rt.J)(1)}()((0,wn.D)(n,(0,oo.yG)(n)))}var Pt=F(4829);function At(n){return new jn.y(e=>{(0,Pt.Xf)(n()).subscribe(e)})}var Li=F(8407);function li(n,e){const t=(0,ur.m)(n)?n:()=>n,i=r=>r.error(t());return new jn.y(e?r=>e.schedule(i,0,r):i)}var Ei=F(6232),ko=F(7394),zn=F(9360);function Rs(){return(0,zn.e)((n,e)=>{let t=null;n._refCount++;const i=(0,I.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class Po extends jn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,zn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ko.w0;const t=this.getSubject();e.add(this.source.subscribe((0,I.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ko.w0.EMPTY)}return e}refCount(){return Rs()(this)}}var tn=F(8645),Dn=F(4664);function Bn(n){return n<=0?()=>Ei.E:(0,zn.e)((e,t)=>{let i=0;e.subscribe((0,I.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Fr(...n){const e=(0,oo.yG)(n);return(0,zn.e)((t,i)=>{(e?Ft(n,t,e):Ft(n,t)).subscribe(i)})}function ti(n,e){return(0,zn.e)((t,i)=>{let r=0;t.subscribe((0,I.x)(i,o=>n.call(e,o,r++)&&i.next(o)))})}var Ci=F(1631);function Rc(n){return(0,zn.e)((e,t)=>{let i=!1;e.subscribe((0,I.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Zg(n=Qg){return(0,zn.e)((e,t)=>{let i=!1;e.subscribe((0,I.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Qg(){return new Le}function Fo(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ti((r,o)=>n(r,o,i)):dr.y,Bn(1),t?Rc(e):Zg(()=>new Le))}function ks(n,e){return(0,ur.m)(e)?(0,Ci.z)(n,e,1):(0,Ci.z)(n,1)}var ci=F(9397);function so(n){return(0,zn.e)((e,t)=>{let o,i=null,r=!1;i=e.subscribe((0,I.x)(t,void 0,void 0,l=>{o=(0,Pt.Xf)(n(l,so(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function Lo(n,e){return(0,zn.e)(function Jg(n,e,t,i,r){return(o,l)=>{let h=t,p=e,y=0;o.subscribe((0,I.x)(l,w=>{const T=y++;p=h?n(p,w,T):(h=!0,w),i&&l.next(p)},r&&(()=>{h&&l.next(p),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Ga(n){return n<=0?()=>Ei.E:(0,zn.e)((e,t)=>{let i=[];e.subscribe((0,I.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function e_(n){return(0,zn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Qt="primary",Eh=Symbol("RouteTitle");class iD{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ju(n){return new iD(n)}function t_(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const l=i[o],h=n[o];if(l.startsWith(":"))r[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ps(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!n_(n[r],e[r]))return!1;return!0}function n_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function Di(n){return n.length>0?n[n.length-1]:null}function za(n){return function dp(n){return!!n&&(n instanceof jn.y||(0,ur.m)(n.lift)&&(0,ur.m)(n.subscribe))}(n)?n:(0,u.QGY)(n)?(0,wn.D)(Promise.resolve(n)):(0,yt.of)(n)}const Pc={exact:function hp(n,e,t){if(!lo(n.segments,e.segments)||!fp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!hp(n.children[i],e.children[i],t))return!1;return!0},subset:Lc},i_={exact:function Xu(n,e){return Ps(n,e)},subset:function Fc(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>n_(n[t],e[t]))},ignored:()=>!0};function ao(n,e,t){return Pc[t.paths](n.root,e.root,t.matrixParams)&&i_[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Lc(n,e,t){return Ch(n,e,e.segments,t)}function Ch(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!lo(r,t)||e.hasChildren()||!fp(r,t,i))}if(n.segments.length===t.length){if(!lo(n.segments,t)||!fp(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!Lc(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(lo(n.segments,r)&&fp(n.segments,r,i)&&n.children[Qt])&&Ch(n.children[Qt],e,o,i)}}function fp(n,e,t){return e.every((i,r)=>i_[t](n[r].parameters,i.parameters))}class Bl{constructor(e=new On([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ju(this.queryParams)),this._queryParamMap}toString(){return yb.serialize(this)}}class On{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gp(this)}}class Bi{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ju(this.parameters)),this._parameterMap}toString(){return o_(this)}}function lo(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Bc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new mp},providedIn:"root"}),n})();class mp{parse(e){const t=new _p(e);return new Bl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ns(e.root,!0)}`,i=function vb(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Dh(t)}=${Dh(r)}`).join("&"):`${Dh(t)}=${Dh(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function ed(n){return encodeURI(n)}(e.fragment)}`:""}`}}const yb=new mp;function gp(n){return n.segments.map(e=>o_(e)).join("/")}function ns(n,e){if(!n.hasChildren())return gp(n);if(e){const t=n.children[Qt]?ns(n.children[Qt],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==Qt&&i.push(`${r}:${ns(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function _b(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Qt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Qt&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===Qt?[ns(n.children[Qt],!1)]:[`${r}:${ns(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${gp(n)}/${t[0]}`:`${gp(n)}/(${t.join("//")})`}}function r_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Dh(n){return r_(n).replace(/%3B/gi,";")}function Vc(n){return r_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vl(n){return decodeURIComponent(n)}function td(n){return Vl(n.replace(/\+/g,"%20"))}function o_(n){return`${Vc(n.path)}${function Uc(n){return Object.keys(n).map(e=>`;${Vc(e)}=${Vc(n[e])}`).join("")}(n.parameters)}`}const s_=/^[^\/()?;#]+/;function Ul(n){const e=n.match(s_);return e?e[0]:""}const Th=/^[^\/()?;=#]+/,bb=/^[^=?&#]+/,jc=/^[^&#]+/;class _p{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new On([],{}):new On([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Qt]=new On(e,t)),i}parseSegment(){const e=Ul(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(e),new Bi(Vl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function a_(n){const e=n.match(Th);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Ul(this.remaining);r&&(i=r,this.capture(i))}e[Vl(t)]=Vl(i)}parseQueryParam(e){const t=function wb(n){const e=n.match(bb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const l=function Hc(n){const e=n.match(jc);return e?e[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=td(t),o=td(i);if(e.hasOwnProperty(r)){let l=e[r];Array.isArray(l)||(l=[l],e[r]=l),l.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Ul(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new u.vHH(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Qt);const l=this.parseChildren();t[o]=1===Object.keys(l).length?l[Qt]:new On([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,!1)}}function Eb(n){return n.segments.length>0?new On([],{[Qt]:n}):n}function yp(n){const e={};for(const i of Object.keys(n.children)){const o=yp(n.children[i]);if(i===Qt&&0===o.segments.length&&o.hasChildren())for(const[l,h]of Object.entries(o.children))e[l]=h;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function vp(n){if(1===n.numberOfChildren&&n.children[Qt]){const e=n.children[Qt];return new On(n.segments.concat(e.segments),e.children)}return n}(new On(n.segments,e))}function Wa(n){return n instanceof Bl}function l_(n){let e;const r=Eb(function t(o){const l={};for(const p of o.children){const y=t(p);l[p.outlet]=y}const h=new On(o.url,l);return o===n&&(e=h),h}(n.root));return e??r}function nd(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return bp(r,r,r,t,i);const o=function c_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Db(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return Object.entries(o.outlets).forEach(([p,y])=>{h[p]="string"==typeof y?y.split("/"):y}),[...r,{outlets:h}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===l?(o.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&r.push(h))}),r):[...r,o]},[]);return new Db(t,e,i)}(e);if(o.toRoot())return bp(r,r,new On([],{}),t,i);const l=function Tb(n,e,t){if(n.isAbsolute)return new wp(e,!0,0);if(!t)return new wp(e,!1,NaN);if(null===t.parent)return new wp(t,!0,0);const i=jl(n.commands[0])?0:1;return function id(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new u.vHH(4005,!1);r=i.segments.length}return new wp(i,!1,r-o)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(o,r,n),h=l.processChildren?Sh(l.segmentGroup,l.index,o.commands):u_(l.segmentGroup,l.index,o.commands);return bp(r,l.segmentGroup,h,t,i)}function jl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function $c(n){return"object"==typeof n&&null!=n&&n.outlets}function bp(n,e,t,i,r){let l,o={};i&&Object.entries(i).forEach(([p,y])=>{o[p]=Array.isArray(y)?y.map(w=>`${w}`):`${y}`}),l=n===e?t:Ih(n,e,t);const h=Eb(yp(l));return new Bl(h,o,r)}function Ih(n,e,t){const i={};return Object.entries(n.children).forEach(([r,o])=>{i[r]=o===e?t:Ih(o,e,t)}),new On(n.segments,i)}class Db{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&jl(i[0]))throw new u.vHH(4003,!1);const r=i.find($c);if(r&&r!==Di(i))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wp{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function u_(n,e,t){if(n||(n=new On([],{})),0===n.segments.length&&n.hasChildren())return Sh(n,e,t);const i=function Cp(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const l=n.segments[r],h=t[i];if($c(h))break;const p=`${h}`,y=i<t.length-1?t[i+1]:null;if(r>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!Dp(p,y,l))return o;i+=2}else{if(!Dp(p,{},l))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new On(n.segments.slice(0,i.pathIndex),{});return o.children[Qt]=new On(n.segments.slice(i.pathIndex),n.children),Sh(o,0,r)}return i.match&&0===r.length?new On(n.segments,{}):i.match&&!n.hasChildren()?d_(n,e,t):i.match?Sh(n,0,r):d_(n,e,t)}function Sh(n,e,t){if(0===t.length)return new On(n.segments,{});{const i=function Ep(n){return $c(n[0])?n[0].outlets:{[Qt]:n}}(t),r={};if(!i[Qt]&&n.children[Qt]&&1===n.numberOfChildren&&0===n.children[Qt].segments.length){const o=Sh(n.children[Qt],e,t);return new On(n.segments,o.children)}return Object.entries(i).forEach(([o,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(r[o]=u_(n.children[o],e,l))}),Object.entries(n.children).forEach(([o,l])=>{void 0===i[o]&&(r[o]=l)}),new On(n.segments,r)}}function d_(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if($c(o)){const p=rD(o.outlets);return new On(i,p)}if(0===r&&jl(t[0])){i.push(new Bi(n.segments[e].path,h_(t[0]))),r++;continue}const l=$c(o)?o.outlets[Qt]:`${o}`,h=r<t.length-1?t[r+1]:null;l&&h&&jl(h)?(i.push(new Bi(l,h_(h))),r+=2):(i.push(new Bi(l,{})),r++)}return new On(i,{})}function rD(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=d_(new On([],{}),0,i))}),e}function h_(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function Dp(n,e,t){return n==t.path&&Ps(e,t.parameters)}const Gc="imperative";class is{constructor(e,t){this.id=e,this.url=t}}class zc extends is{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bo extends is{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rd extends is{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qi extends is{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class qa extends is{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Hl extends is{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class f_ extends is{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xh extends is{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wc extends is{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ah extends is{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class od{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ib{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ka{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class p_{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m_{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tp{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class g_{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Lr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ya,this.attachRef=null}}let Ya=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Lr,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Mh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ip(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Ip(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Xn(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Xn(e,this._root).map(t=>t.value)}}function Ip(n,e){if(n===e.value)return e;for(const t of e.children){const i=Ip(n,t);if(i)return i}return null}function Xn(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Xn(n,t);if(i.length)return i.unshift(e),i}return[]}class Dr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Za(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class sd extends Mh{constructor(e,t){super(e),this.snapshot=t,m(this,e)}toString(){return this.snapshot.toString()}}function tr(n,e){const t=function $l(n,e){const l=new ad([],{},{},"",{},Qt,e,null,{});return new b("",new Dr(l,[]))}(0,e),i=new Fi.X([new Bi("",{})]),r=new Fi.X({}),o=new Fi.X({}),l=new Fi.X({}),h=new Fi.X(""),p=new Gl(i,r,l,h,o,Qt,e,t.root);return p.snapshot=t.root,new sd(new Dr(p,[]),t)}class Gl{constructor(e,t,i,r,o,l,h,p){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=l,this.component=h,this._futureSnapshot=p,this.title=this.dataSubject?.pipe((0,Tt.U)(y=>y[Eh]))??(0,yt.of)(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(e=>Ju(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(e=>Ju(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Sp(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function xb(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class ad{get title(){return this.data?.[Eh]}constructor(e,t,i,r,o,l,h,p,y){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=l,this.component=h,this.routeConfig=p,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ju(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ju(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class b extends Mh{constructor(e,t){super(t),this.url=e,m(this,t)}toString(){return _(this._root)}}function m(n,e){e.value._routerState=n,e.children.forEach(t=>m(n,t))}function _(n){const e=n.children.length>0?` { ${n.children.map(_).join(", ")} } `:"";return`${n.value}${e}`}function E(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ps(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ps(e.params,t.params)||n.paramsSubject.next(t.params),function kc(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ps(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ps(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function N(n,e){const t=Ps(n.params,e.params)&&function pp(n,e){return lo(n,e)&&n.every((t,i)=>Ps(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||N(n.parent,e.parent))}let P=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qt,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(Ya),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb),this.inputBinder=(0,u.f3M)(ge,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new u.vHH(4013,!1);this._activatedRoute=t;const r=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new Q(t,h,r.injector);this.activated=r.createComponent(l,{index:r.length,injector:p,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]}),n})();class Q{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Gl?this.route:e===Ya?this.childContexts:this.parent.get(e,t)}}const ge=new u.OlP("");let Xe=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=k([i.queryParams,i.params,i.data]).pipe((0,Dn.w)(([o,l,h],p)=>(h={...o,...l,...h},0===p?(0,yt.of)(h):Promise.resolve(h)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const l=(0,u.qFp)(i.component);if(l)for(const{templateName:h}of l.inputs)t.activatedComponentRef.setInput(h,o[h]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Mt(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Nt(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Mt(n,i,r);return Mt(n,i)})}(n,e,t);return new Dr(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>Mt(n,h)),l}}const i=function Ti(n){return new Gl(new Fi.X(n.url),new Fi.X(n.params),new Fi.X(n.queryParams),new Fi.X(n.fragment),new Fi.X(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>Mt(n,o));return new Dr(i,r)}}const Br="ngNavigationCancelingError";function qc(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Wa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Qa(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function Qa(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[Br]=!0,i.cancellationCode=e,t&&(i.url=t),i}function zl(n){return Nh(n)&&Wa(n.url)}function Nh(n){return n&&n[Br]}let ld=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(t,i){1&t&&u._UZ(0,"router-outlet")},dependencies:[P],encapsulation:2}),n})();function b_(n){const e=n.children&&n.children.map(b_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qt&&(t.component=ld),t}function rs(n){return n.outlet||Qt}function xp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class cd{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),E(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Za(t);e.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,r[l],i),delete r[l]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Za(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],r);if(i&&i.outlet){const l=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Za(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=Za(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Tp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new p_(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(E(r),r===o)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),E(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=xp(r.snapshot);l.attachRef=null,l.route=r,l.injector=h,l.outlet&&l.outlet.activateWith(r,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,i)}}class kb{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ap{constructor(e,t){this.component=e,this.route=t}}function UA(n,e,t){const i=n._root;return Mp(i,e?e._root:null,t,[i.value])}function Wl(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:i}function Mp(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Za(e);return n.children.forEach(l=>{(function aD(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const p=function lD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!lo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!lo(n.url,e.url)||!Ps(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!N(n,e)||!Ps(n.queryParams,e.queryParams);default:return!N(n,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new kb(i)):(o.data=l.data,o._resolvedData=l._resolvedData),Mp(n,e,o.component?h?h.children:null:t,i,r),p&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new Ap(h.outlet.component,l))}else l&&Oh(e,h,r),r.canActivateChecks.push(new kb(i)),Mp(n,null,o.component?h?h.children:null:t,i,r)})(l,o[l.value.outlet],t,i.concat([l.value]),r),delete o[l.value.outlet]}),Object.entries(o).forEach(([l,h])=>Oh(h,t.getContext(l),r)),r}function Oh(n,e,t){const i=Za(n),r=n.value;Object.entries(i).forEach(([o,l])=>{Oh(l,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Ap(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function ud(n){return"function"==typeof n}function Rh(n){return n instanceof Le||"EmptyError"===n?.name}const C_=Symbol("INITIAL_VALUE");function dd(){return(0,Dn.w)(n=>k(n.map(e=>e.pipe(Bn(1),Fr(C_)))).pipe((0,Tt.U)(e=>{for(const t of e)if(!0!==t){if(t===C_)return C_;if(!1===t||t instanceof Bl)return t}return!0}),ti(e=>e!==C_),Bn(1)))}function fD(n){return(0,Li.z)((0,ci.b)(e=>{if(Wa(e))throw qc(0,e)}),(0,Tt.U)(e=>!0===e))}class T_{constructor(e){this.segmentGroup=e||null}}class I_{constructor(e){this.urlTree=e}}function Ph(n){return li(new T_(n))}function Fh(n){return li(new I_(n))}class pD{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new u.vHH(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return(0,yt.of)(i);if(r.numberOfChildren>1||!r.children[Qt])return li(new u.vHH(4e3,!1));r=r.children[Qt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new Bl(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const h=o.substring(1);i[r]=t[h]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let l={};return Object.entries(t.children).forEach(([h,p])=>{l[h]=this.createSegmentGroup(e,p,i,r)}),new On(o,l)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new u.vHH(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const x_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mD(n,e,t,i,r){const o=A_(n,e,t);return o.matched?(i=function Kc(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function vB(n,e,t,i){const r=e.canMatch;if(!r||0===r.length)return(0,yt.of)(!0);const o=r.map(l=>{const h=Wl(l,n);return za(function E_(n){return n&&ud(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))});return(0,yt.of)(o).pipe(dd(),fD())}(i,e,t).pipe((0,Tt.U)(l=>!0===l?o:{...x_}))):(0,yt.of)(o)}function A_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...x_}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||t_)(t,n,e);if(!r)return{...x_};const o={};Object.entries(r.posParams??{}).forEach(([h,p])=>{o[h]=p.path});const l=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:l,positionalParamSegments:r.posParams??{}}}function gD(n,e,t,i){return t.length>0&&function KA(n,e,t){return t.some(i=>fa(n,e,i)&&rs(i)!==Qt)}(n,t,i)?{segmentGroup:new On(e,qA(i,new On(t,n.children))),slicedSegments:[]}:0===t.length&&function YA(n,e,t){return t.some(i=>fa(n,e,i))}(n,t,i)?{segmentGroup:new On(n.segments,WA(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new On(n.segments,n.children),slicedSegments:t}}function WA(n,e,t,i,r){const o={};for(const l of i)if(fa(n,t,l)&&!r[rs(l)]){const h=new On([],{});o[rs(l)]=h}return{...r,...o}}function qA(n,e){const t={};t[Qt]=e;for(const i of n)if(""===i.path&&rs(i)!==Qt){const r=new On([],{});t[rs(i)]=r}return t}function fa(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class wB{constructor(e,t,i,r,o,l,h){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=l,this.urlSerializer=h,this.allowRedirects=!0,this.applyRedirects=new pD(this.urlSerializer,this.urlTree)}noMatchError(e){return new u.vHH(4002,!1)}recognize(){const e=gD(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Qt).pipe(so(t=>{if(t instanceof I_)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof T_?this.noMatchError(t):t}),(0,Tt.U)(t=>{const i=new ad([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qt,this.rootComponentType,null,{}),r=new Dr(i,t),o=new b("",r),l=function Cb(n,e,t=null,i=null){return nd(l_(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(o._root),{state:o,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Qt).pipe(so(i=>{throw i instanceof T_?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=Sp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return(0,wn.D)(r).pipe(ks(o=>{const l=i.children[o],h=function VA(n,e){const t=n.filter(i=>rs(i)===e);return t.push(...n.filter(i=>rs(i)!==e)),t}(t,o);return this.processSegmentGroup(e,h,l,o)}),Lo((o,l)=>(o.push(...l),o)),Rc(null),function nD(n,e){const t=arguments.length>=2;return i=>i.pipe(n?ti((r,o)=>n(r,o,i)):dr.y,Ga(1),t?Rc(e):Zg(()=>new Le))}(),(0,Ci.z)(o=>{if(null===o)return Ph(i);const l=QA(o);return function EB(n){n.sort((e,t)=>e.value.outlet===Qt?-1:t.value.outlet===Qt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),(0,yt.of)(l)}))}processSegment(e,t,i,r,o,l){return(0,wn.D)(t).pipe(ks(h=>this.processSegmentAgainstRoute(h._injector??e,t,h,i,r,o,l).pipe(so(p=>{if(p instanceof T_)return(0,yt.of)(null);throw p}))),Fo(h=>!!h),so(h=>{if(Rh(h))return function ZA(n,e,t){return 0===e.length&&!n.children[t]}(i,r,o)?(0,yt.of)([]):Ph(i);throw h}))}processSegmentAgainstRoute(e,t,i,r,o,l,h){return function Op(n,e,t,i){return!!(rs(n)===i||i!==Qt&&fa(e,t,n))&&("**"===n.path||A_(e,n,t).matched)}(i,r,o,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,o,l,h):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,l):Ph(r):Ph(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const o=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Fh(o):this.applyRedirects.lineralizeSegments(i,o).pipe((0,Ci.z)(l=>{const h=new On(l,{});return this.processSegment(e,t,h,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,l){const{matched:h,consumedSegments:p,remainingSegments:y,positionalParamSegments:w}=A_(t,r,o);if(!h)return Ph(t);const T=this.applyRedirects.applyRedirectCommands(p,r.redirectTo,w);return r.redirectTo.startsWith("/")?Fh(T):this.applyRedirects.lineralizeSegments(r,T).pipe((0,Ci.z)(M=>this.processSegment(e,i,t,M.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,i,r,o,l){let h;if("**"===i.path){const p=r.length>0?Di(r).parameters:{},y=new ad(r,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_D(i),rs(i),i.component??i._loadedComponent??null,i,yD(i));h=(0,yt.of)({snapshot:y,consumedSegments:[],remainingSegments:[]}),t.children={}}else h=mD(t,i,r,e).pipe((0,Tt.U)(({matched:p,consumedSegments:y,remainingSegments:w,parameters:T})=>p?{snapshot:new ad(y,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_D(i),rs(i),i.component??i._loadedComponent??null,i,yD(i)),consumedSegments:y,remainingSegments:w}:null));return h.pipe((0,Dn.w)(p=>null===p?Ph(t):this.getChildConfig(e=i._injector??e,i,r).pipe((0,Dn.w)(({routes:y})=>{const w=i._loadedInjector??e,{snapshot:T,consumedSegments:M,remainingSegments:O}=p,{segmentGroup:L,slicedSegments:H}=gD(t,M,O,y);if(0===H.length&&L.hasChildren())return this.processChildren(w,y,L).pipe((0,Tt.U)(Te=>null===Te?null:[new Dr(T,Te)]));if(0===y.length&&0===H.length)return(0,yt.of)([new Dr(T,[])]);const te=rs(i)===o;return this.processSegment(w,y,L,H,te?Qt:o,!0).pipe((0,Tt.U)(Te=>[new Dr(T,Te)]))}))))}getChildConfig(e,t,i){return t.children?(0,yt.of)({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?(0,yt.of)({routes:t._loadedRoutes,injector:t._loadedInjector}):function zA(n,e,t,i){const r=e.canLoad;if(void 0===r||0===r.length)return(0,yt.of)(!0);const o=r.map(l=>{const h=Wl(l,n);return za(function w_(n){return n&&ud(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))});return(0,yt.of)(o).pipe(dd(),fD())}(e,t,i).pipe((0,Ci.z)(r=>r?this.configLoader.loadChildren(e,t).pipe((0,ci.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function Bb(n){return li(Qa(!1,3))}())):(0,yt.of)({routes:[],injector:e})}}function CB(n){const e=n.value.routeConfig;return e&&""===e.path}function QA(n){const e=[],t=new Set;for(const i of n){if(!CB(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=QA(i.children);e.push(new Dr(i.value,r))}return e.filter(i=>!t.has(i))}function _D(n){return n.data||{}}function yD(n){return n.resolve||{}}function eM(n,e){return(0,Ci.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return(0,yt.of)(t);let o=0;return(0,wn.D)(r).pipe(ks(l=>function Vb(n,e,t,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!Ub(r)&&(o[Eh]=r.title),function ql(n,e,t,i){const r=function Rp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return(0,yt.of)({});const o={};return(0,wn.D)(r).pipe((0,Ci.z)(l=>function vD(n,e,t,i){const r=xp(e)??i,o=Wl(n,r);return za(o.resolve?o.resolve(e,t):r.runInContext(()=>o(e,t)))}(n[l],e,t,i).pipe(Fo(),(0,ci.b)(h=>{o[l]=h}))),Ga(1),function Xg(n){return(0,Tt.U)(()=>n)}(o),so(l=>Rh(l)?Ei.E:li(l)))}(o,n,e,i).pipe((0,Tt.U)(l=>(n._resolvedData=l,n.data=Sp(n,t).resolve,r&&Ub(r)&&(n.data[Eh]=r.title),null)))}(l.route,i,n,e)),(0,ci.b)(()=>o++),Ga(1),(0,Ci.z)(l=>o===r.length?(0,yt.of)(t):Ei.E))})}function Ub(n){return"string"==typeof n.title||null===n.title}function M_(n){return(0,Dn.w)(e=>{const t=n(e);return t?(0,wn.D)(t).pipe((0,Tt.U)(()=>e)):(0,yt.of)(e)})}const kp=new u.OlP("ROUTES");let bD=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,yt.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=za(t.loadComponent()).pipe((0,Tt.U)(N_),(0,ci.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),e_(()=>{this.componentLoaders.delete(t)})),r=new Po(i,()=>new tn.x).pipe(Rs());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return(0,yt.of)({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,Tt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(i);let p,y;return Array.isArray(h)?y=h:(p=h.create(t).injector,y=p.get(kp,[],u.XFs.Self|u.XFs.Optional).flat()),{routes:y.map(b_),injector:p}}),e_(()=>{this.childrenLoaders.delete(i)})),l=new Po(o,()=>new tn.x).pipe(Rs());return this.childrenLoaders.set(i,l),l}loadModuleFactoryOrRoutes(t){return za(t()).pipe((0,Tt.U)(N_),(0,Ci.z)(i=>i instanceof u.YKP||Array.isArray(i)?(0,yt.of)(i):(0,wn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function N_(n){return function DB(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Lh=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new tn.x,this.configLoader=(0,u.f3M)(bD),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(Bc),this.rootContexts=(0,u.f3M)(Ya),this.inputBindingEnabled=null!==(0,u.f3M)(ge,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,yt.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Ib(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new od(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new Fi.X({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Gc,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ti(i=>0!==i.id),(0,Tt.U)(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),(0,Dn.w)(i=>{let r=!1,o=!1;return(0,yt.of)(i).pipe((0,ci.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Dn.w)(l=>{const h=t.browserUrlTree.toString(),p=!t.navigated||l.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!p&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const w="";return this.events.next(new qi(l.id,t.serializeUrl(i.rawUrl),w,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ei.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return tM(l.source)&&(t.browserUrlTree=l.extractedUrl),(0,yt.of)(l).pipe((0,Dn.w)(w=>{const T=this.transitions?.getValue();return this.events.next(new zc(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),T!==this.transitions?.getValue()?Ei.E:Promise.resolve(w)}),function XA(n,e,t,i,r,o){return(0,Ci.z)(l=>function bB(n,e,t,i,r,o,l="emptyOnly"){return new wB(n,e,t,i,r,l,o).recognize()}(n,e,t,i,l.extractedUrl,r,o).pipe((0,Tt.U)(({state:h,tree:p})=>({...l,targetSnapshot:h,urlAfterRedirects:p}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,ci.b)(w=>{if(i.targetSnapshot=w.targetSnapshot,i.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!w.extras.skipLocationChange){const M=t.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);t.setBrowserUrl(M,w)}t.browserUrlTree=w.urlAfterRedirects}const T=new Hl(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(T)}));if(p&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:w,extractedUrl:T,source:M,restoredState:O,extras:L}=l,H=new zc(w,this.urlSerializer.serialize(T),M,O);this.events.next(H);const te=tr(0,this.rootComponentType).snapshot;return i={...l,targetSnapshot:te,urlAfterRedirects:T,extras:{...L,skipLocationChange:!1,replaceUrl:!1}},(0,yt.of)(i)}{const w="";return this.events.next(new qi(l.id,t.serializeUrl(i.extractedUrl),w,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ei.E}}),(0,ci.b)(l=>{const h=new f_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,Tt.U)(l=>i={...l,guards:UA(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function HA(n,e){return(0,Ci.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return 0===l.length&&0===o.length?(0,yt.of)({...t,guardsResult:!0}):function $A(n,e,t,i){return(0,wn.D)(n).pipe((0,Ci.z)(r=>function kh(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,yt.of)(!0);const l=o.map(h=>{const p=xp(e)??r,y=Wl(h,p);return za(function Pb(n){return n&&ud(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,i):p.runInContext(()=>y(n,e,t,i))).pipe(Fo())});return(0,yt.of)(l).pipe(dd())}(r.component,r.route,t,e,i)),Fo(r=>!0!==r,!0))}(l,i,r,n).pipe((0,Ci.z)(h=>h&&function cD(n){return"boolean"==typeof n}(h)?function GA(n,e,t,i){return(0,wn.D)(e).pipe(ks(r=>Ft(function hD(n,e){return null!==n&&e&&e(new Ka(n)),(0,yt.of)(!0)}(r.route.parent,i),function dD(n,e){return null!==n&&e&&e(new m_(n)),(0,yt.of)(!0)}(r.route,i),function Lb(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>function yB(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>At(()=>{const h=l.guards.map(p=>{const y=xp(l.node)??t,w=Wl(p,y);return za(function uD(n){return n&&ud(n.canActivateChild)}(w)?w.canActivateChild(i,n):y.runInContext(()=>w(i,n))).pipe(Fo())});return(0,yt.of)(h).pipe(dd())}));return(0,yt.of)(o).pipe(dd())}(n,r.path,t),function D_(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return(0,yt.of)(!0);const r=i.map(o=>At(()=>{const l=xp(e)??t,h=Wl(o,l);return za(function Np(n){return n&&ud(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(Fo())}));return(0,yt.of)(r).pipe(dd())}(n,r.route,t))),Fo(r=>!0!==r,!0))}(i,o,n,e):(0,yt.of)(h)),(0,Tt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),(0,ci.b)(l=>{if(i.guardsResult=l.guardsResult,Wa(l.guardsResult))throw qc(0,l.guardsResult);const h=new xh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),ti(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),M_(l=>{if(l.guards.canActivateChecks.length)return(0,yt.of)(l).pipe((0,ci.b)(h=>{const p=new Wc(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),(0,Dn.w)(h=>{let p=!1;return(0,yt.of)(h).pipe(eM(t.paramsInheritanceStrategy,this.environmentInjector),(0,ci.b)({next:()=>p=!0,complete:()=>{p||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,ci.b)(h=>{const p=new Ah(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),M_(l=>{const h=p=>{const y=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(p.routeConfig).pipe((0,ci.b)(w=>{p.component=w}),(0,Tt.U)(()=>{})));for(const w of p.children)y.push(...h(w));return y};return k(h(l.targetSnapshot.root)).pipe(Rc(),Bn(1))}),M_(()=>this.afterPreactivation()),(0,Tt.U)(l=>{const h=function ut(n,e,t){const i=Mt(n,e._root,t?t._root:void 0);return new sd(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return i={...l,targetRouterState:h}}),(0,ci.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,i)=>(0,Tt.U)(r=>(new cd(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Bn(1),(0,ci.b)({next:l=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Bo(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{r=!0}}),e_(()=>{r||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),so(l=>{if(o=!0,Nh(l)){zl(l)||(t.navigated=!0,t.restoreHistory(i,!0));const h=new rd(i.id,this.urlSerializer.serialize(i.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),zl(l)){const p=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),y={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||tM(i.source)};t.scheduleNavigation(p,Gc,null,y,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const h=new qa(i.id,this.urlSerializer.serialize(i.extractedUrl),l,i.targetSnapshot??void 0);this.events.next(h);try{i.resolve(t.errorHandler(l))}catch(p){i.reject(p)}}return Ei.E}))}))}cancelNavigationTransition(t,i,r){const o=new rd(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tM(n){return n!==Gc}let nM=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Qt);return i}getResolvedTitleForRoute(t){return t.data[Eh]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(wD)},providedIn:"root"}),n})(),wD=(()=>{class n extends nM{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(qu))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(oM)},providedIn:"root"}),n})();class rM{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let oM=(()=>{class n extends rM{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const O_=new u.OlP("",{providedIn:"root",factory:()=>({})});let ED=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(R_)},providedIn:"root"}),n})(),R_=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Pp=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Pp||{});function k_(n,e){n.events.pipe(ti(t=>t instanceof Bo||t instanceof rd||t instanceof qa||t instanceof qi),(0,Tt.U)(t=>t instanceof Bo||t instanceof qi?Pp.COMPLETE:t instanceof rd&&(0===t.code||1===t.code)?Pp.REDIRECTING:Pp.FAILED),ti(t=>t!==Pp.REDIRECTING),Bn(1)).subscribe(()=>{e()})}function sM(n){throw n}function Bh(n,e,t){return e.parse("/")}const aM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let os=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this.options=(0,u.f3M)(O_,{optional:!0})||{},this.pendingTasks=(0,u.f3M)(u.HDt),this.errorHandler=this.options.errorHandler||sM,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Bh,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(ED),this.routeReuseStrategy=(0,u.f3M)(iM),this.titleStrategy=(0,u.f3M)(nM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,u.f3M)(kp,{optional:!0})?.flat()??[],this.navigationTransitions=(0,u.f3M)(Lh),this.urlSerializer=(0,u.f3M)(Bc),this.location=(0,u.f3M)(it),this.componentInputBindingEnabled=!!(0,u.f3M)(ge,{optional:!0}),this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Bl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=tr(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Gc,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const o={replaceUrl:!0},l=r?.navigationId?r:null;if(r){const p={...r};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(o.state=p)}const h=this.parseUrl(t);this.scheduleNavigation(h,i,l,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(b_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:l,queryParamsHandling:h,preserveFragment:p}=i,y=p?this.currentUrlTree.fragment:l;let T,w=null;switch(h){case"merge":w={...this.currentUrlTree.queryParams,...o};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=o||null}null!==w&&(w=this.removeEmptyProps(w));try{T=l_(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),T=this.currentUrlTree.root}return nd(T,t,w,y??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Wa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Gc,null,i)}navigate(t,i={skipLocationChange:!1}){return function CD(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new u.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...aM}:!1===i?{...lM}:i,Wa(t))return ao(this.currentUrlTree,t,r);const o=this.parseUrl(t);return ao(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(t,i,r,o,l){if(this.disposed)return Promise.resolve(!1);let h,p,y;l?(h=l.resolve,p=l.reject,y=l.promise):y=new Promise((T,M)=>{h=T,p=M});const w=this.pendingTasks.add();return k_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(w))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:h,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(T=>Promise.reject(T))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const l={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",l)}else{const o={...i.extras.state,...this.generateNgRouterState(i.id,(this.browserPageId??0)+1)};this.location.go(r,"",o)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-(this.browserPageId??this.currentPageId);0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class DD{}let TB=(()=>{class n{constructor(t,i,r,o,l){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ti(t=>t instanceof Bo),ks(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=(0,u.MMx)(o.providers,t,`Route: ${o.path}`));const l=o._injector??t,h=o._loadedInjector??l;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(l,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(h,o.children??o._loadedRoutes))}return(0,wn.D)(r).pipe((0,rt.J)())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):(0,yt.of)(null);const o=r.pipe((0,Ci.z)(l=>null===l?(0,yt.of)(void 0):(i._loadedRoutes=l.routes,i._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(i.loadComponent&&!i._loadedComponent){const l=this.loader.loadComponent(i);return(0,wn.D)([o,l]).pipe((0,rt.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(os),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(DD),u.LFG(bD))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hd=new u.OlP("");let xn=(()=>{class n{constructor(t,i,r,o,l={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof zc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bo?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof qi&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof g_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new g_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Ja(n,e){return{\u0275kind:n,\u0275providers:e}}function $b(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const i=n.get(os),r=n.get(F_);1===n.get(ID)&&i.initialNavigation(),n.get(zb,null,u.XFs.Optional)?.setUpPreloading(),n.get(hd,null,u.XFs.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const F_=new u.OlP("",{factory:()=>new tn.x}),ID=new u.OlP("",{providedIn:"root",factory:()=>1}),zb=new u.OlP("");function xD(n){return Ja(0,[{provide:zb,useExisting:TB},{provide:DD,useExisting:n}])}const B_=new u.OlP("ROUTER_FORROOT_GUARD"),V_=[it,{provide:Bc,useClass:mp},os,Ya,{provide:Gl,useFactory:function Hb(n){return n.routerState.root},deps:[os]},bD,[]];function fd(){return new u.PXZ("Router",os)}let Uh=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[V_,[],{provide:kp,multi:!0,useValue:t},{provide:B_,useFactory:MD,deps:[[os,new u.FiY,new u.tp0]]},{provide:O_,useValue:i||{}},i?.useHash?{provide:ze,useClass:Ue}:{provide:ze,useClass:Je},{provide:hd,useFactory:()=>{const n=(0,u.f3M)(Dl),e=(0,u.f3M)(u.R0b),t=(0,u.f3M)(O_),i=(0,u.f3M)(Lh),r=(0,u.f3M)(Bc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new xn(r,i,n,e,t)}},i?.preloadingStrategy?xD(i.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:fd},i?.initialNavigation?jh(i):[],i?.bindToComponentInputs?Ja(8,[Xe,{provide:ge,useExisting:Xe}]).\u0275providers:[],[{provide:ND,useFactory:$b},{provide:u.tb,multi:!0,useExisting:ND}]]}}static forChild(t){return{ngModule:n,providers:[{provide:kp,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(B_,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function MD(n){return"guarded"}function jh(n){return["disabled"===n.initialNavigation?Ja(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(os);return()=>{e.setUpLocationChangeListener()}}},{provide:ID,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ja(2,[{provide:ID,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(De,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(os),o=e.get(F_);k_(r,()=>{i(!0)}),e.get(Lh).afterPreactivation=()=>(i(!0),o.closed?(0,yt.of)(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const ND=new u.OlP(""),NB=[{path:"",redirectTo:"/auth",pathMatch:"full"}];let bM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Uh.forRoot(NB),Uh]}),n})(),wM=(()=>{class n{constructor(){this.title="ControlePonto"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&u._UZ(0,"router-outlet")},dependencies:[P]}),n})();class kD{}class OB{}const Yc="*";function U_(n,e){return{type:7,name:n,definitions:e,options:{}}}function EM(n,e=null){return{type:4,styles:e,timings:n}}function j_(n,e=null){return{type:2,steps:n,options:e}}function Kl(n){return{type:6,styles:n,offset:null}}function qb(n,e,t){return{type:0,name:n,styles:e,options:t}}function Fp(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}class $_{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class G_{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==o&&this._onFinish()}),l.onDestroy(()=>{++i==o&&this._onDestroy()}),l.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function BD(n){return new u.vHH(3e3,!1)}function pa(n){switch(n.length){case 0:return new $_;case 1:return n[0];default:return new G_(n)}}function t0(n,e,t=new Map,i=new Map){const r=[],o=[];let l=-1,h=null;if(e.forEach(p=>{const y=p.get("offset"),w=y==l,T=w&&h||new Map;p.forEach((M,O)=>{let L=O,H=M;if("offset"!==O)switch(L=n.normalizePropertyName(L,r),H){case"!":H=t.get(O);break;case Yc:H=i.get(O);break;default:H=n.normalizeStyleValue(O,L,H,r)}T.set(L,H)}),w||o.push(T),h=T,l=y}),r.length)throw function PM(n){return new u.vHH(3502,!1)}();return o}function q_(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&n0(t,"start",n)));break;case"done":n.onDone(()=>i(t&&n0(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&n0(t,"destroy",n)))}}function n0(n,e,t){const o=r0(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(o._data=l),o}function r0(n,e,t,i,r="",o=0,l){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!l}}function ss(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function qD(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const VM=(()=>typeof document>"u"?null:document.documentElement)();function o0(n){const e=n.parentNode||n.host||null;return e===VM?null:e}let Fs=null,Xa=!1;function jM(n,e){for(;e;){if(e===n)return!0;e=o0(e)}return!1}function HM(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let s0=(()=>{class n{validateStyleProperty(t){return function YD(n){Fs||(Fs=function UM(){return typeof document<"u"?document.body:null}()||{},Xa=!!Fs.style&&"WebkitAppearance"in Fs.style);let e=!0;return Fs.style&&!function KD(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Fs.style,!e&&Xa&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Fs.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return jM(t,i)}getParentElement(t){return o0(t)}query(t,i,r){return HM(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,l,h=[],p){return new $_(r,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ZD=(()=>{class n{}return n.NOOP=new s0,n})();const QD=1e3,K_="ng-enter",jp="ng-leave",$t="ng-trigger",Hp=".ng-trigger",a0="ng-animating",XD=".ng-animating";function el(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Y_(parseFloat(e[1]),e[2])}function Y_(n,e){return"s"===e?n*QD:n}function Z_(n,e,t){return n.hasOwnProperty("duration")?n:function GM(n,e,t){let r,o=0,l="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(BD()),{duration:0,delay:0,easing:""};r=Y_(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(o=Y_(parseFloat(p),h[4]));const y=h[5];y&&(l=y)}else r=n;if(!t){let h=!1,p=e.length;r<0&&(e.push(function TM(){return new u.vHH(3100,!1)}()),h=!0),o<0&&(e.push(function VD(){return new u.vHH(3101,!1)}()),h=!0),h&&e.splice(p,0,BD())}return{duration:r,delay:o,easing:l}}(n,e,t)}function Gh(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function eT(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Zc(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function Yl(n,e,t){e.forEach((i,r)=>{const o=Gp(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function Qc(n,e){e.forEach((t,i)=>{const r=Gp(i);n.style[r]=""})}function zh(n){return Array.isArray(n)?1==n.length?n[0]:j_(n):n}const Xc=new RegExp("{{\\s*(.+?)\\s*}}","g");function l0(n){let e=[];if("string"==typeof n){let t;for(;t=Xc.exec(n);)e.push(t[1]);Xc.lastIndex=0}return e}function $p(n,e,t){const i=n.toString(),r=i.replace(Xc,(o,l)=>{let h=e[l];return null==h&&(t.push(function IM(n){return new u.vHH(3003,!1)}()),h=""),h.toString()});return r==i?n:r}function pd(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Wh=/-+([a-z0-9])/g;function Gp(n){return n.replace(Wh,(...e)=>e[1].toUpperCase())}function co(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function SM(n){return new u.vHH(3004,!1)}()}}function J_(n,e){return window.getComputedStyle(n)[e]}const X_="*";function qM(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function KM(n,e,t){if(":"==n[0]){const p=function YM(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function W_(n){return new u.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function RM(n){return new u.vHH(3015,!1)}()),e;const r=i[1],o=i[2],l=i[3];e.push(oT(r,l));"<"==o[0]&&!(r==X_&&l==X_)&&e.push(oT(l,r))}(i,t,e)):t.push(n),t}const zp=new Set(["true","1"]),Wp=new Set(["false","0"]);function oT(n,e){const t=zp.has(n)||Wp.has(n),i=zp.has(e)||Wp.has(e);return(r,o)=>{let l=n==X_||n==r,h=e==X_||e==o;return!l&&t&&"boolean"==typeof r&&(l=r?zp.has(n):Wp.has(n)),!h&&i&&"boolean"==typeof o&&(h=o?zp.has(e):Wp.has(e)),l&&h}}const as=new RegExp("s*:selfs*,?","g");function u0(n,e,t,i){return new BB(n).build(e,t,i)}class BB{constructor(e){this._driver=e}build(e,t,i){const r=new ZM(t);return this._resetContextStyleTimingState(r),co(this,zh(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const o=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function xM(){return new u.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(w=>{p.name=w,o.push(this.visitState(p,t))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,t);i+=p.queryCount,r+=p.depCount,l.push(p)}else t.errors.push(function Zb(){return new u.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:l,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const o=new Set,l=r||{};i.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{l0(p).forEach(y=>{l.hasOwnProperty(y)||o.add(y)})})}),o.size&&(pd(o.values()),t.errors.push(function Qb(n,e){return new u.vHH(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=co(this,zh(e.animation),t);return{type:1,matchers:qM(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:eu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>co(this,i,t)),options:eu(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const o=e.steps.map(l=>{t.currentTime=i;const h=co(this,l,t);return r=Math.max(r,t.currentTime),h});return t.currentTime=r,{type:3,steps:o,options:eu(e.options)}}visitAnimate(e,t){const i=function JM(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return h0(Z_(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=h0(0,0,"");return o.dynamic=!0,o.strValue=t,o}const r=Z_(t,e);return h0(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Kl({});if(5==o.type)r=this.visitKeyframes(o,t);else{let l=e.styles,h=!1;if(!l){h=!0;const y={};i.easing&&(y.easing=i.easing),l=Kl(y)}t.currentTime+=i.duration+i.delay;const p=this.visitStyle(l,t);p.isEmptyStep=h,r=p}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of r)"string"==typeof h?h===Yc?i.push(h):t.errors.push(new u.vHH(3002,!1)):i.push(eT(h));let o=!1,l=null;return i.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(l=h.get("easing"),h.delete("easing")),!o))for(let p of h.values())if(p.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:l,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((h,p)=>{const y=t.collectedStyles.get(t.currentQuerySelector),w=y.get(p);let T=!0;w&&(o!=r&&o>=w.startTime&&r<=w.endTime&&(t.errors.push(function Jb(n,e,t,i,r){return new u.vHH(3010,!1)}()),T=!1),o=w.startTime),T&&y.set(p,{startTime:o,endTime:r}),t.options&&function Jc(n,e,t){const i=e.params||{},r=l0(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(function UD(n){return new u.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function z_(){return new u.vHH(3011,!1)}()),i;let o=0;const l=[];let h=!1,p=!1,y=0;const w=e.steps.map(Te=>{const Ne=this._makeStyleAst(Te,t);let je=null!=Ne.offset?Ne.offset:function QM(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ne.styles),xe=0;return null!=je&&(o++,xe=Ne.offset=je),p=p||xe<0||xe>1,h=h||xe<y,y=xe,l.push(xe),Ne});p&&t.errors.push(function NM(){return new u.vHH(3012,!1)}()),h&&t.errors.push(function jD(){return new u.vHH(3200,!1)}());const T=e.steps.length;let M=0;o>0&&o<T?t.errors.push(function OM(){return new u.vHH(3202,!1)}()):0==o&&(M=1/(T-1));const O=T-1,L=t.currentTime,H=t.currentAnimateTimings,te=H.duration;return w.forEach((Te,Ne)=>{const je=M>0?Ne==O?1:M*Ne:l[Ne],xe=je*te;t.currentTime=L+H.delay+xe,H.duration=xe,this._validateStyleAst(Te,t),Te.offset=je,i.styles.push(Te)}),i}visitReference(e,t){return{type:8,animation:co(this,zh(e.animation),t),options:eu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:eu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:eu(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[o,l]=function d0(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(as,"")),n=n.replace(/@\*/g,Hp).replace(/@\w+/g,t=>Hp+"-"+t.slice(1)).replace(/:animating/g,XD),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,ss(t.collectedStyles,t.currentQuerySelector,new Map);const h=co(this,zh(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:h,originalSelector:e.selector,options:eu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function HD(){return new u.vHH(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:Z_(e.timings,t.errors,!0);return{type:12,animation:co(this,zh(e.animation),t),timings:i,options:null}}}class ZM{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function eu(n){return n?(n=Gh(n)).params&&(n.params=function lT(n){return n?Gh(n):null}(n.params)):n={},n}function h0(n,e,t){return{duration:n,delay:e,easing:t}}function f0(n,e,t,i,r,o,l=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:l,subTimeline:h}}class qh{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const tN=new RegExp(":enter","g"),iN=new RegExp(":leave","g");function Ls(n,e,t,i,r,o=new Map,l=new Map,h,p,y=[]){return(new p0).buildKeyframes(n,e,t,i,r,o,l,h,p,y)}class p0{buildKeyframes(e,t,i,r,o,l,h,p,y,w=[]){y=y||new qh;const T=new ty(e,t,y,r,o,w,[]);T.options=p;const M=p.delay?el(p.delay):0;T.currentTimeline.delayNextStep(M),T.currentTimeline.setStyles([l],null,T.errors,p),co(this,i,T);const O=T.timelines.filter(L=>L.containsAnimation());if(O.length&&h.size){let L;for(let H=O.length-1;H>=0;H--){const te=O[H];if(te.element===t){L=te;break}}L&&!L.allowOnlyTimelineStyles()&&L.setStyles([h],null,T.errors,p)}return O.length?O.map(L=>L.buildKeyframes()):[f0(t,[],[],[],0,M,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);o!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const o=r?.delay;if(o){const l="number"==typeof o?o:el($p(o,r?.params??{},t.errors));i.delayNextStep(l)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime;const l=null!=i.duration?el(i.duration):null,h=null!=i.delay?el(i.delay):null;return 0!==l&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,l,h);o=Math.max(o,y.duration+y.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),co(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=ey);const l=el(o.delay);r.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>co(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?el(e.options.delay):0;e.steps.forEach(l=>{const h=t.createSubContext(e.options);o&&h.delayNextStep(o),co(this,l,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return Z_(t.params?$p(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,h=t.createSubContext().currentTimeline;h.easing=i.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*o),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?el(r.delay):0;o&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ey);let l=i;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((y,w)=>{t.currentQueryIndex=w;const T=t.createSubContext(e.options,y);o&&T.delayNextStep(o),y===t.element&&(p=T.currentTimeline),co(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,o=e.timings,l=Math.abs(o.duration),h=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":p=h-p;break;case"full":p=i.currentStaggerTime}const w=t.currentTimeline;p&&w.delayNextStep(p);const T=w.currentTime;co(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-T+(r.startTime-i.currentTimeline.startTime)}}const ey={};class ty{constructor(e,t,i,r,o,l,h,p){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ey,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new ny(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=el(i.duration)),null!=i.delay&&(r.delay=el(i.delay));const o=i.params;if(o){let l=r.params;l||(l=this.options.params={}),Object.keys(o).forEach(h=>{(!t||!l.hasOwnProperty(h))&&(l[h]=$p(o[h],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,o=new ty(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=ey,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new cT(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,l){let h=[];if(r&&h.push(this.element),e.length>0){e=(e=e.replace(tN,"."+this._enterClassName)).replace(iN,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),h.push(...y)}return!o&&0==h.length&&l.push(function kB(n){return new u.vHH(3014,!1)}()),h}}class ny{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new ny(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Yc),this._currentKeyframe.set(t,Yc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const o=r&&r.params||{},l=function iy(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let o of i)t.set(o,Yc)}else Zc(r,t)}),t}(e,this._globalTimelineStyles);for(let[h,p]of l){const y=$p(p,o,i);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??Yc),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,p)=>{const y=Zc(h,new Map,this._backFill);y.forEach((w,T)=>{"!"===w?e.add(T):w===Yc&&t.add(T)}),i||y.set("offset",p/this.duration),r.push(y)});const o=e.size?pd(e.values()):[],l=t.size?pd(t.values()):[];if(i){const h=r[0],p=new Map(h);h.set("offset",0),p.set("offset",1),r=[h,p]}return f0(this.element,r,o,l,this.duration,this.startTime,this.easing,!1)}}class cT extends ny{constructor(e,t,i,r,o,l,h=!1){super(e,t,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],l=i+t,h=t/l,p=Zc(e[0]);p.set("offset",0),o.push(p);const y=Zc(e[0]);y.set("offset",m0(h)),o.push(y);const w=e.length-1;for(let T=1;T<=w;T++){let M=Zc(e[T]);const O=M.get("offset");M.set("offset",m0((t+O*i)/l)),o.push(M)}i=l,t=0,r="",e=o}return f0(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function m0(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class dT{}const hT=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class fT extends dT{normalizePropertyName(e,t){return Gp(e)}normalizeStyleValue(e,t,i,r){let o="";const l=i.toString().trim();if(hT.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(function RB(n,e){return new u.vHH(3005,!1)}())}return l+o}}function g0(n,e,t,i,r,o,l,h,p,y,w,T,M){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:l,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:w,totalTime:T,errors:M}}const qp={};class tl{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function oN(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,l,h,p,y,w){const T=[],M=this.ast.options&&this.ast.options.params||qp,L=this.buildStyles(i,h&&h.params||qp,T),H=p&&p.params||qp,te=this.buildStyles(r,H,T),Te=new Set,Ne=new Map,je=new Map,xe="void"===r,Qe={params:_0(H,M),delay:this.ast.options?.delay},ot=w?[]:Ls(e,t,this.ast.animation,o,l,L,te,Qe,y,T);let wt=0;if(ot.forEach(kn=>{wt=Math.max(kn.duration+kn.delay,wt)}),T.length)return g0(t,this._triggerName,i,r,xe,L,te,[],[],Ne,je,wt,T);ot.forEach(kn=>{const qn=kn.element,Mr=ss(Ne,qn,new Set);kn.preStyleProps.forEach(ji=>Mr.add(ji));const Do=ss(je,qn,new Set);kn.postStyleProps.forEach(ji=>Do.add(ji)),qn!==t&&Te.add(qn)});const qt=pd(Te.values());return g0(t,this._triggerName,i,r,xe,L,te,ot,qt,Ne,je,wt)}}function _0(n,e){const t=Gh(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class sN{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=Gh(this.defaultParams);return Object.keys(e).forEach(o=>{const l=e[o];null!==l&&(r[o]=l)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,h)=>{l&&(l=$p(l,r,t));const p=this.normalizer.normalizePropertyName(h,t);l=this.normalizer.normalizeStyleValue(h,p,l,t),i.set(h,l)})}),i}}class aN{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new sN(r.style,r.options&&r.options.params||{},i))}),v0(this.states,"true","1"),v0(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new tl(e,r,this.states))}),this.fallbackTransition=function lN(n,e,t){return new tl(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(l=>l.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function v0(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const cN=new qh;class ry{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],o=u0(this._driver,t,i,[]);if(i.length)throw function $D(n){return new u.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,i){const r=e.element,o=t0(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],o=this._animations.get(e);let l;const h=new Map;if(o?(l=Ls(this._driver,t,o,K_,jp,new Map,new Map,i,cN,r),l.forEach(w=>{const T=ss(h,w.element,new Map);w.postStyleProps.forEach(M=>T.set(M,null))})):(r.push(function FM(){return new u.vHH(3300,!1)}()),l=[]),r.length)throw function LM(n){return new u.vHH(3504,!1)}();h.forEach((w,T)=>{w.forEach((M,O)=>{w.set(O,this._driver.computeStyle(T,O,Yc))})});const y=pa(l.map(w=>{const T=h.get(w.element);return this._buildPlayer(w,new Map,T)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function BM(n){return new u.vHH(3301,!1)}();return t}listen(e,t,i,r){const o=r0(t,"","","");return q_(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const Kh="ng-animate-queued",pT="ng-animate-disabled",dN=[],_T={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},yT={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Bs="__ng_removed";class md{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function fN(n){return n??null}(i?e.value:e),i){const o=Gh(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Kp="void",sy=new md(Kp);class vT{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Vs(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function GD(n,e){return new u.vHH(3302,!1)}();if(null==i||0==i.length)throw function zD(n){return new u.vHH(3303,!1)}();if(!function pN(n){return"start"==n||"done"==n}(i))throw function Xb(n,e){return new u.vHH(3400,!1)}();const o=ss(this._elementListeners,e,[]),l={name:t,phase:i,callback:r};o.push(l);const h=ss(this._engine.statesByElement,e,new Map);return h.has(t)||(Vs(e,$t),Vs(e,$t+"-"+t),h.set(t,sy)),()=>{this._engine.afterFlush(()=>{const p=o.indexOf(l);p>=0&&o.splice(p,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Vp(n){return new u.vHH(3401,!1)}();return t}trigger(e,t,i,r=!0){const o=this._getTrigger(t),l=new b0(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Vs(e,$t),Vs(e,$t+"-"+t),this._engine.statesByElement.set(e,h=new Map));let p=h.get(t);const y=new md(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h.set(t,y),p||(p=sy),y.value!==Kp&&p.value===y.value){if(!function gN(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(p.params,y.params)){const H=[],te=o.matchStyles(p.value,p.params,H),Te=o.matchStyles(y.value,y.params,H);H.length?this._engine.reportError(H):this._engine.afterFlush(()=>{Qc(e,te),Yl(e,Te)})}return}const M=ss(this._engine.playersByElement,e,[]);M.forEach(H=>{H.namespaceId==this.id&&H.triggerName==t&&H.queued&&H.destroy()});let O=o.matchTransition(p.value,y.value,e,y.params),L=!1;if(!O){if(!r)return;O=o.fallbackTransition,L=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:p,toState:y,player:l,isFallbackTransition:L}),L||(Vs(e,Kh),l.onStart(()=>{Yh(e,Kh)})),l.onDone(()=>{let H=this.players.indexOf(l);H>=0&&this.players.splice(H,1);const te=this._engine.playersByElement.get(e);if(te){let Te=te.indexOf(l);Te>=0&&te.splice(Te,1)}}),this.players.push(l),M.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,Hp,!0);i.forEach(r=>{if(r[Bs])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(l=>l.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const o=this._engine.statesByElement.get(e),l=new Map;if(o){const h=[];if(o.forEach((p,y)=>{if(l.set(y,p.value),this._triggers.has(y)){const w=this.trigger(e,y,Kp,r);w&&h.push(w)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),i&&pa(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(o=>{const l=o.name;if(r.has(l))return;r.add(l);const p=this._triggers.get(l).fallbackTransition,y=i.get(l)||sy,w=new md(Kp),T=new b0(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:y,toState:w,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let l=e;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Bs];(!o||o===_T)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Vs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,l=this._elementListeners.get(o);l&&l.forEach(h=>{if(h.name==i.triggerName){const p=r0(o,i.triggerName,i.fromState.value,i.toState.value);p._data=e,q_(i.player,h.phase,p,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const o=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==o||0==l?o-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class hN{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new vT(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let l=!1,h=this.driver.getParentElement(t);for(;h;){const p=r.get(h);if(p){const y=i.indexOf(p);i.splice(y+1,0,e),l=!0;break}h=this.driver.getParentElement(h)}l||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}return t}trigger(e,t,i,r){if(w0(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!w0(t))return;const o=t[Bs];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Vs(e,pT)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Yh(e,pT))}removeNode(e,t,i){if(w0(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[Bs]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return w0(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Hp,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,XD,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return pa(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Bs];if(t&&t.setForRemoval){if(e[Bs]=_T,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(pT)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Vs(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?pa(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function WD(n){return new u.vHH(3402,!1)}()}_flushAnimations(e,t){const i=new qh,r=[],o=new Map,l=[],h=new Map,p=new Map,y=new Map,w=new Set;this.disabledNodes.forEach(ht=>{w.add(ht);const Et=this.driver.query(ht,".ng-animate-queued",!0);for(let Lt=0;Lt<Et.length;Lt++)w.add(Et[Lt])});const T=this.bodyNode,M=Array.from(this.statesByElement.keys()),O=ET(M,this.collectedEnterElements),L=new Map;let H=0;O.forEach((ht,Et)=>{const Lt=K_+H++;L.set(Et,Lt),ht.forEach(hn=>Vs(hn,Lt))});const te=[],Te=new Set,Ne=new Set;for(let ht=0;ht<this.collectedLeaveElements.length;ht++){const Et=this.collectedLeaveElements[ht],Lt=Et[Bs];Lt&&Lt.setForRemoval&&(te.push(Et),Te.add(Et),Lt.hasAnimation?this.driver.query(Et,".ng-star-inserted",!0).forEach(hn=>Te.add(hn)):Ne.add(Et))}const je=new Map,xe=ET(M,Array.from(Te));xe.forEach((ht,Et)=>{const Lt=jp+H++;je.set(Et,Lt),ht.forEach(hn=>Vs(hn,Lt))}),e.push(()=>{O.forEach((ht,Et)=>{const Lt=L.get(Et);ht.forEach(hn=>Yh(hn,Lt))}),xe.forEach((ht,Et)=>{const Lt=je.get(Et);ht.forEach(hn=>Yh(hn,Lt))}),te.forEach(ht=>{this.processLeaveNode(ht)})});const Qe=[],ot=[];for(let ht=this._namespaceList.length-1;ht>=0;ht--)this._namespaceList[ht].drainQueuedTransitions(t).forEach(Lt=>{const hn=Lt.player,Hi=Lt.element;if(Qe.push(hn),this.collectedEnterElements.length){const rr=Hi[Bs];if(rr&&rr.setForMove){if(rr.previousTriggersValues&&rr.previousTriggersValues.has(Lt.triggerName)){const Ts=rr.previousTriggersValues.get(Lt.triggerName),Go=this.statesByElement.get(Lt.element);if(Go&&Go.has(Lt.triggerName)){const ub=Go.get(Lt.triggerName);ub.value=Ts,Go.set(Lt.triggerName,ub)}}return void hn.destroy()}}const Ys=!T||!this.driver.containsElement(T,Hi),Nr=je.get(Hi),Sa=L.get(Hi),$n=this._buildInstruction(Lt,i,Sa,Nr,Ys);if($n.errors&&$n.errors.length)return void ot.push($n);if(Ys)return hn.onStart(()=>Qc(Hi,$n.fromStyles)),hn.onDestroy(()=>Yl(Hi,$n.toStyles)),void r.push(hn);if(Lt.isFallbackTransition)return hn.onStart(()=>Qc(Hi,$n.fromStyles)),hn.onDestroy(()=>Yl(Hi,$n.toStyles)),void r.push(hn);const hc=[];$n.timelines.forEach(rr=>{rr.stretchStartingKeyframe=!0,this.disabledNodes.has(rr.element)||hc.push(rr)}),$n.timelines=hc,i.append(Hi,$n.timelines),l.push({instruction:$n,player:hn,element:Hi}),$n.queriedElements.forEach(rr=>ss(h,rr,[]).push(hn)),$n.preStyleProps.forEach((rr,Ts)=>{if(rr.size){let Go=p.get(Ts);Go||p.set(Ts,Go=new Set),rr.forEach((ub,Rg)=>Go.add(Rg))}}),$n.postStyleProps.forEach((rr,Ts)=>{let Go=y.get(Ts);Go||y.set(Ts,Go=new Set),rr.forEach((ub,Rg)=>Go.add(Rg))})});if(ot.length){const ht=[];ot.forEach(Et=>{ht.push(function e0(n,e){return new u.vHH(3505,!1)}())}),Qe.forEach(Et=>Et.destroy()),this.reportError(ht)}const wt=new Map,qt=new Map;l.forEach(ht=>{const Et=ht.element;i.has(Et)&&(qt.set(Et,Et),this._beforeAnimationBuild(ht.player.namespaceId,ht.instruction,wt))}),r.forEach(ht=>{const Et=ht.element;this._getPreviousPlayers(Et,!1,ht.namespaceId,ht.triggerName,null).forEach(hn=>{ss(wt,Et,[]).push(hn),hn.destroy()})});const kn=te.filter(ht=>Zp(ht,p,y)),qn=new Map;wT(qn,this.driver,Ne,y,Yc).forEach(ht=>{Zp(ht,p,y)&&kn.push(ht)});const Do=new Map;O.forEach((ht,Et)=>{wT(Do,this.driver,new Set(ht),p,"!")}),kn.forEach(ht=>{const Et=qn.get(ht),Lt=Do.get(ht);qn.set(ht,new Map([...Et?.entries()??[],...Lt?.entries()??[]]))});const ji=[],Tu=[],Iu={};l.forEach(ht=>{const{element:Et,player:Lt,instruction:hn}=ht;if(i.has(Et)){if(w.has(Et))return Lt.onDestroy(()=>Yl(Et,hn.toStyles)),Lt.disabled=!0,Lt.overrideTotalTime(hn.totalTime),void r.push(Lt);let Hi=Iu;if(qt.size>1){let Nr=Et;const Sa=[];for(;Nr=Nr.parentNode;){const $n=qt.get(Nr);if($n){Hi=$n;break}Sa.push(Nr)}Sa.forEach($n=>qt.set($n,Hi))}const Ys=this._buildAnimation(Lt.namespaceId,hn,wt,o,Do,qn);if(Lt.setRealPlayer(Ys),Hi===Iu)ji.push(Lt);else{const Nr=this.playersByElement.get(Hi);Nr&&Nr.length&&(Lt.parentPlayer=pa(Nr)),r.push(Lt)}}else Qc(Et,hn.fromStyles),Lt.onDestroy(()=>Yl(Et,hn.toStyles)),Tu.push(Lt),w.has(Et)&&r.push(Lt)}),Tu.forEach(ht=>{const Et=o.get(ht.element);if(Et&&Et.length){const Lt=pa(Et);ht.setRealPlayer(Lt)}}),r.forEach(ht=>{ht.parentPlayer?ht.syncPlayerEvents(ht.parentPlayer):ht.destroy()});for(let ht=0;ht<te.length;ht++){const Et=te[ht],Lt=Et[Bs];if(Yh(Et,jp),Lt&&Lt.hasAnimation)continue;let hn=[];if(h.size){let Ys=h.get(Et);Ys&&Ys.length&&hn.push(...Ys);let Nr=this.driver.query(Et,XD,!0);for(let Sa=0;Sa<Nr.length;Sa++){let $n=h.get(Nr[Sa]);$n&&$n.length&&hn.push(...$n)}}const Hi=hn.filter(Ys=>!Ys.destroyed);Hi.length?mN(this,Et,Hi):this.processLeaveNode(Et)}return te.length=0,ji.forEach(ht=>{this.players.push(ht),ht.onDone(()=>{ht.destroy();const Et=this.players.indexOf(ht);this.players.splice(Et,1)}),ht.play()}),ji}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let l=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(l=h)}else{const h=this.playersByElement.get(e);if(h){const p=!o||o==Kp;h.forEach(y=>{y.queued||!p&&y.triggerName!=r||l.push(y)})}}return(i||r)&&(l=l.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),l}_beforeAnimationBuild(e,t,i){const o=t.element,l=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,w=y!==o,T=ss(i,y,[]);this._getPreviousPlayers(y,w,l,h,t.toState).forEach(O=>{const L=O.getRealPlayer();L.beforeDestroy&&L.beforeDestroy(),O.destroy(),T.push(O)})}Qc(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,l){const h=t.triggerName,p=t.element,y=[],w=new Set,T=new Set,M=t.timelines.map(L=>{const H=L.element;w.add(H);const te=H[Bs];if(te&&te.removedBeforeQueried)return new $_(L.duration,L.delay);const Te=H!==p,Ne=function CT(n){const e=[];return ay(n,e),e}((i.get(H)||dN).map(wt=>wt.getRealPlayer())).filter(wt=>!!wt.element&&wt.element===H),je=o.get(H),xe=l.get(H),Qe=t0(this._normalizer,L.keyframes,je,xe),ot=this._buildPlayer(L,Qe,Ne);if(L.subTimeline&&r&&T.add(H),Te){const wt=new b0(e,h,H);wt.setRealPlayer(ot),y.push(wt)}return ot});y.forEach(L=>{ss(this.playersByQueriedElement,L.element,[]).push(L),L.onDone(()=>function Yp(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,L.element,L))}),w.forEach(L=>Vs(L,a0));const O=pa(M);return O.onDestroy(()=>{w.forEach(L=>Yh(L,a0)),Yl(p,t.toStyles)}),T.forEach(L=>{ss(r,L,[]).push(O)}),O}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new $_(e.duration,e.delay)}}class b0{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new $_,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>q_(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ss(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function w0(n){return n&&1===n.nodeType}function bT(n,e){const t=n.style.display;return n.style.display=e??"none",t}function wT(n,e,t,i,r){const o=[];t.forEach(p=>o.push(bT(p)));const l=[];i.forEach((p,y)=>{const w=new Map;p.forEach(T=>{const M=e.computeStyle(y,T,r);w.set(T,M),(!M||0==M.length)&&(y[Bs]=yT,l.push(y))}),n.set(y,w)});let h=0;return t.forEach(p=>bT(p,o[h++])),l}function ET(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const r=new Set(e),o=new Map;function l(h){if(!h)return 1;let p=o.get(h);if(p)return p;const y=h.parentNode;return p=t.has(y)?y:r.has(y)?1:l(y),o.set(h,p),p}return e.forEach(h=>{const p=l(h);1!==p&&t.get(p).push(h)}),t}function Vs(n,e){n.classList?.add(e)}function Yh(n,e){n.classList?.remove(e)}function mN(n,e,t){pa(t).onDone(()=>n.processLeaveNode(e))}function ay(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof G_?ay(i.players,e):e.push(i)}}function Zp(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}class ly{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new hN(e,t,i),this._timelineEngine=new ry(e,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){const l=e+"-"+r;let h=this._triggerCache[l];if(!h){const p=[],w=u0(this._driver,o,p,[]);if(p.length)throw function Bp(n,e){return new u.vHH(3404,!1)}();h=function y0(n,e,t){return new aN(n,e,t)}(r,w,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(t,r,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[o,l]=qD(i);this._timelineEngine.command(o,t,l,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if("@"==i.charAt(0)){const[l,h]=qD(i);return this._timelineEngine.listen(l,t,h,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let yN=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Yl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Yl(this._element,this._initialStyles),this._endStyles&&(Yl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Qc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Qc(this._element,this._endStyles),this._endStyles=null),Yl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function E0(n){let e=null;return n.forEach((t,i)=>{(function vN(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class DT{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:J_(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class TT{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return jM(e,t)}getParentElement(e){return o0(e)}query(e,t,i){return HM(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,o,l=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(p.easing=o);const y=new Map,w=l.filter(O=>O instanceof DT);(function iT(n,e){return 0===n||0===e})(i,r)&&w.forEach(O=>{O.currentSnapshot.forEach((L,H)=>y.set(H,L))});let T=function tT(n){return n.length?n[0]instanceof Map?n:n.map(e=>eT(e)):[]}(t).map(O=>Zc(O));T=function c0(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,l)=>{i.has(l)||r.push(l),i.set(l,o)}),r.length)for(let o=1;o<e.length;o++){let l=e[o];r.forEach(h=>l.set(h,J_(n,h)))}}return e}(e,T,y);const M=function _N(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=E0(e[0]),e.length>1&&(i=E0(e[e.length-1]))):e instanceof Map&&(t=E0(e)),t||i?new yN(n,t,i):null}(e,T);return new DT(e,T,p,M)}}let IT=(()=>{class n extends kD{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?j_(t):t;return wN(this._renderer,null,i,"register",[r]),new ST(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(he))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class ST extends OB{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new bN(this._id,e,t||{},this._renderer)}}class bN{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return wN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function wN(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const C0="@.disabled";let UB=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(o,l)=>{const h=l?.parentNode(o);h&&l.removeChild(h,o)}}createRenderer(t,i){const o=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let w=this._rendererCache.get(o);return w||(w=new Jp("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,w)),w}const l=i.id,h=i.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=w=>{Array.isArray(w)?w.forEach(p):this.engine.registerTrigger(l,h,t,w.name,w)};return i.data.animation.forEach(p),new EN(this,h,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[l,h]=o;l(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(ly),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Jp{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==C0?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class EN extends Jp{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==C0?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function CN(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),l="";return"@"!=o.charAt(0)&&([o,l]=function D0(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,r,o,l,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(e,t,i)}}let DN=(()=>{class n extends ly{constructor(t,i,r,o){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(he),u.LFG(ZD),u.LFG(dT),u.LFG(u.z2F))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Tr=[{provide:kD,useClass:IT},{provide:dT,useFactory:function nl(){return new fT}},{provide:ly,useClass:DN},{provide:u.FYo,useFactory:function Xp(n,e,t){return new UB(n,e,t)},deps:[Ns,ly,u.R0b]}],Zl=[{provide:ZD,useFactory:()=>new TT},{provide:u.QbO,useValue:"BrowserAnimations"},...Tr],em=[{provide:ZD,useClass:s0},{provide:u.QbO,useValue:"NoopAnimations"},...Tr];let Us=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?em:Zl}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:Zl,imports:[kl]}),n})();var Zh=F(2381),il=F(3093),tu=F(2420);function rl(...n){const e=(0,oo.jO)(n);return(0,zn.e)((t,i)=>{const r=n.length,o=new Array(r);let l=n.map(()=>!1),h=!1;for(let p=0;p<r;p++)(0,Pt.Xf)(n[p]).subscribe((0,I.x)(i,y=>{o[p]=y,!h&&!l[p]&&(l[p]=!0,(h=l.every(dr.y))&&(l=null))},tu.Z));t.subscribe((0,I.x)(i,p=>{if(h){const y=[p,...o];i.next(e?e(...y):y)}}))})}var ol=F(3997);class MT extends Error{constructor(e,t){super(function NT(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function ON(n,e){const t=!e?.manualCleanup;t&&!e?.injector&&(0,u.gHi)(ON);const i=t?e?.injector?.get(u.ktI)??(0,u.f3M)(u.ktI):null;let r;r=(0,u.tdS)(e?.requireSync?{kind:0}:{kind:1,value:e?.initialValue});const o=n.subscribe({next:l=>r.set({kind:1,value:l}),error:l=>r.set({kind:2,error:l})});return i?.onDestroy(o.unsubscribe.bind(o)),(0,u.Flj)(()=>{const l=r();switch(l.kind){case 1:return l.value;case 2:throw l.error;case 0:throw new MT(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}})}const om={};function M0(n,e){return Object.defineProperty(e,"type",{value:n,writable:!1})}const LT="@ngrx/store/init";let nu=(()=>{class n extends Fi.X{constructor(){super({type:LT})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof t>"u")throw new TypeError("Actions must be objects");if(typeof t.type>"u")throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const O0=[nu],sm=new u.OlP("@ngrx/store Internal Root Guard"),BT=new u.OlP("@ngrx/store Internal Initial State"),ef=new u.OlP("@ngrx/store Initial State"),am=new u.OlP("@ngrx/store Reducer Factory"),gy=new u.OlP("@ngrx/store Internal Reducer Factory Provider"),R0=new u.OlP("@ngrx/store Initial Reducers"),k0=new u.OlP("@ngrx/store Internal Initial Reducers"),VT=new u.OlP("@ngrx/store Store Features"),UT=new u.OlP("@ngrx/store Internal Store Reducers"),lm=new u.OlP("@ngrx/store Internal Feature Reducers"),_y=new u.OlP("@ngrx/store Internal Feature Configs"),yy=new u.OlP("@ngrx/store Internal Store Features"),P0=new u.OlP("@ngrx/store Internal Feature Reducers Token"),F0=new u.OlP("@ngrx/store Feature Reducers"),jT=new u.OlP("@ngrx/store User Provided Meta Reducers"),cm=new u.OlP("@ngrx/store Meta Reducers"),vy=new u.OlP("@ngrx/store Internal Resolved Meta Reducers"),L0=new u.OlP("@ngrx/store User Runtime Checks Config"),by=new u.OlP("@ngrx/store Internal User Runtime Checks Config"),tf=new u.OlP("@ngrx/store Internal Runtime Checks"),um=new u.OlP("@ngrx/store Check if Action types are unique");function Ey(n,e={}){const t=Object.keys(n),i={};for(let o=0;o<t.length;o++){const l=t[o];"function"==typeof n[l]&&(i[l]=n[l])}const r=Object.keys(i);return function(l,h){l=void 0===l?e:l;let p=!1;const y={};for(let w=0;w<r.length;w++){const T=r[w],O=l[T],L=(0,i[T])(O,h);y[T]=L,p=p||L!==O}return p?y:l}}function $T(...n){return function(e){if(0===n.length)return e;const t=n[n.length-1];return n.slice(0,-1).reduceRight((r,o)=>o(r),t(e))}}function V0(n,e){return Array.isArray(e)&&e.length>0&&(n=$T.apply(null,[...e,n])),(t,i)=>{const r=n(t);return(o,l)=>r(o=void 0===o?i:o,l)}}new u.OlP("@ngrx/store Root Store Provider"),new u.OlP("@ngrx/store Feature State Provider");class nf extends jn.y{}class dm extends nu{}let rf=(()=>{class n extends Fi.X{get currentReducers(){return this.reducers}constructor(t,i,r,o){super(o(r,i)),this.dispatcher=t,this.initialState=i,this.reducers=r,this.reducerFactory=o}addFeature(t){this.addFeatures([t])}addFeatures(t){const i=t.reduce((r,{reducers:o,reducerFactory:l,metaReducers:h,initialState:p,key:y})=>{const w="function"==typeof o?function GT(n){const e=Array.isArray(n)&&n.length>0?$T(...n):t=>t;return(t,i)=>(t=e(t),(r,o)=>t(r=void 0===r?i:r,o))}(h)(o,p):V0(l,h)(o,p);return r[y]=w,r},{});this.addReducers(i)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(i=>i.key))}addReducer(t,i){this.addReducers({[t]:i})}addReducers(t){this.reducers={...this.reducers,...t},this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(i=>{this.reducers=function HT(n,e){return Object.keys(n).filter(t=>t!==e).reduce((t,i)=>Object.assign(t,{[i]:n[i]}),{})}(this.reducers,i)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:t})}ngOnDestroy(){this.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(dm),u.LFG(ef),u.LFG(R0),u.LFG(am))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const WT=[rf,{provide:nf,useExisting:rf},{provide:dm,useExisting:nu}];let hm=(()=>{class n extends tn.x{ngOnDestroy(){this.complete()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const qT=[hm];class U0 extends jn.y{}let j0=(()=>{class n extends Fi.X{constructor(t,i,r,o){super(o);const y=t.pipe((0,il.Q)(Zh.N)).pipe(rl(i)).pipe(Lo(KT,{state:o}));this.stateSubscription=y.subscribe(({state:w,action:T})=>{this.next(w),r.next(T)}),this.state=ON(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return n.INIT=LT,n.\u0275fac=function(t){return new(t||n)(u.LFG(nu),u.LFG(nf),u.LFG(hm),u.LFG(ef))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function KT(n={state:void 0},[e,t]){const{state:i}=n;return{state:t(i,e),action:e}}const Cy=[j0,{provide:U0,useExisting:j0}];let ma=(()=>{class n extends jn.y{constructor(t,i,r){super(),this.actionsObserver=i,this.reducerManager=r,this.source=t,this.state=t.state}select(t,...i){return VN.call(null,t,...i)(this)}selectSignal(t,i){return(0,u.Flj)(()=>t(this.state()),{equal:i?.equal||((r,o)=>r===o)})}lift(t){const i=new n(this,this.actionsObserver,this.reducerManager);return i.operator=t,i}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,i){this.reducerManager.addReducer(t,i)}removeReducer(t){this.reducerManager.removeReducer(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(U0),u.LFG(nu),u.LFG(rf))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const BN=[ma];function VN(n,e,...t){return function(r){let o;if("string"==typeof n){const l=[e,...t].filter(Boolean);o=r.pipe(function Qh(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return(0,Tt.U)(t=>{let i=t;for(let r=0;r<e;r++){const o=i?.[n[r]];if(!(typeof o<"u"))return;i=o}return i})}(n,...l))}else{if("function"!=typeof n)throw new TypeError(`Unexpected type '${typeof n}' in select operator, expected 'string' or 'function'`);o=r.pipe((0,Tt.U)(l=>n(l,e)))}return o.pipe((0,ol.x)())}}const fm="https://ngrx.io/guide/store/configuration/runtime-checks";function iu(n){return void 0===n}function Dy(n){return null===n}function YT(n){return Array.isArray(n)}function ZT(n){return"object"==typeof n&&null!==n}function G0(n){return"function"==typeof n}function zN(n){return n instanceof u.OlP?(0,u.f3M)(n):n}function rI(n,e){return e.map((t,i)=>{if(n[i]instanceof u.OlP){const r=(0,u.f3M)(n[i]);return{key:t.key,reducerFactory:r.reducerFactory?r.reducerFactory:Ey,metaReducers:r.metaReducers?r.metaReducers:[],initialState:r.initialState}}return t})}function al(n){return n.map(e=>e instanceof u.OlP?(0,u.f3M)(e):e)}function ls(n){return"function"==typeof n?n():n}function ga(n,e){return n.concat(e)}function oI(){if((0,u.f3M)(ma,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function q0(n){Object.freeze(n);const e=G0(n);return Object.getOwnPropertyNames(n).forEach(t=>{if(!t.startsWith("\u0275")&&function QT(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(n,t)&&(!e||"caller"!==t&&"callee"!==t&&"arguments"!==t)){const i=n[t];(ZT(i)||G0(i))&&!Object.isFrozen(i)&&q0(i)}}),n}function K0(n,e=[]){return(iu(n)||Dy(n))&&0===e.length?{path:["root"],value:n}:Object.keys(n).reduce((i,r)=>{if(i)return i;const o=n[r];return function nr(n){return G0(n)&&n.hasOwnProperty("\u0275cmp")}(o)?i:!(iu(o)||Dy(o)||function KB(n){return"number"==typeof n}(o)||function qB(n){return"boolean"==typeof n}(o)||function H0(n){return"string"==typeof n}(o)||YT(o))&&(function $0(n){if(!function UN(n){return ZT(n)&&!YT(n)}(n))return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||null===e}(o)?K0(o,[...e,r]):{path:[...e,r],value:o})},!1)}function aI(n,e){if(!1===n)return;const t=n.path.join("."),i=new Error(`Detected unserializable ${e} at "${t}". ${fm}#strict${e}serializability`);throw i.value=n.value,i.unserializablePath=t,i}function pm(n){return(0,u.X6Q)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...n}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function qN({strictActionSerializability:n,strictStateSerializability:e}){return t=>n||e?function WN(n,e){return function(t,i){e.action(i)&&aI(K0(i),"action");const r=n(t,i);return e.state()&&aI(K0(r),"state"),r}}(t,{action:i=>n&&!Z0(i),state:()=>e}):t}function lI({strictActionImmutability:n,strictStateImmutability:e}){return t=>n||e?function sI(n,e){return function(t,i){const r=e.action(i)?q0(i):i,o=n(t,r);return e.state()?q0(o):o}}(t,{action:i=>n&&!Z0(i),state:()=>e}):t}function Z0(n){return n.type.startsWith("@ngrx")}function KN({strictActionWithinNgZone:n}){return e=>n?function Y0(n,e){return function(t,i){if(e.action(i)&&!u.R0b.isInAngularZone())throw new Error(`Action '${i.type}' running outside NgZone. ${fm}#strictactionwithinngzone`);return n(t,i)}}(e,{action:t=>n&&!Z0(t)}):e}function cI(n){return[{provide:by,useValue:n},{provide:L0,useFactory:Ty,deps:[by]},{provide:tf,deps:[L0],useFactory:pm},{provide:cm,multi:!0,deps:[tf],useFactory:lI},{provide:cm,multi:!0,deps:[tf],useFactory:qN},{provide:cm,multi:!0,deps:[tf],useFactory:KN}]}function Q0(){return[{provide:um,multi:!0,deps:[tf],useFactory:YN}]}function Ty(n){return n}function YN(n){if(!n.strictActionTypeUniqueness)return;const e=Object.entries(om).filter(([,t])=>t>1).map(([t])=>t);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(t=>`"${t}"`).join(", ")}. ${fm}#strictactiontypeuniqueness`)}function J0(n={},e={}){return[{provide:sm,useFactory:oI},{provide:BT,useValue:e.initialState},{provide:ef,useFactory:ls,deps:[BT]},{provide:k0,useValue:n},{provide:UT,useExisting:n instanceof u.OlP?n:k0},{provide:R0,deps:[k0,[new u.tBr(UT)]],useFactory:zN},{provide:jT,useValue:e.metaReducers?e.metaReducers:[]},{provide:vy,deps:[cm,jT],useFactory:ga},{provide:gy,useValue:e.reducerFactory?e.reducerFactory:Ey},{provide:am,deps:[gy,vy],useFactory:V0},O0,WT,qT,Cy,BN,cI(e.runtimeChecks),Q0()]}function ew(n,e,t={}){return[{provide:_y,multi:!0,useValue:n instanceof Object?{}:t},{provide:VT,multi:!0,useValue:{key:n instanceof Object?n.name:n,reducerFactory:t instanceof u.OlP||!t.reducerFactory?Ey:t.reducerFactory,metaReducers:t instanceof u.OlP||!t.metaReducers?[]:t.metaReducers,initialState:t instanceof u.OlP||!t.initialState?void 0:t.initialState}},{provide:yy,deps:[_y,VT],useFactory:rI},{provide:lm,multi:!0,useValue:n instanceof Object?n.reducer:e},{provide:P0,multi:!0,useExisting:e instanceof u.OlP?e:lm},{provide:F0,multi:!0,deps:[lm,[new u.tBr(P0)]],useFactory:al},Q0()]}let tw=(()=>{class n{constructor(t,i,r,o,l,h){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(nu),u.LFG(nf),u.LFG(hm),u.LFG(ma),u.LFG(sm,8),u.LFG(um,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),dI=(()=>{class n{constructor(t,i,r,o,l){this.features=t,this.featureReducers=i,this.reducerManager=r;const h=t.map((p,y)=>{const T=i.shift()[y];return{...p,reducers:T,initialState:ls(p.initialState)}});r.addFeatures(h)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(yy),u.LFG(F0),u.LFG(rf),u.LFG(tw),u.LFG(um,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),hI=(()=>{class n{static forRoot(t,i){return{ngModule:tw,providers:[...J0(t,i)]}}static forFeature(t,i,r={}){return{ngModule:dI,providers:[...ew(t,i,r)]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const gI=function my(n,e){if(om[n]=(om[n]||0)+1,"function"==typeof e)return M0(n,(...i)=>({...e(...i),type:n}));switch(e?e._as:"empty"){case"empty":return M0(n,()=>({type:n}));case"props":return M0(n,i=>({...i,type:n}));default:throw new Error("Unexpected config.")}}("[Auth] Login",{_as:"props",_p:void 0}),XN=function pI(n,...e){const t=new Map;for(const i of e)for(const r of i.types){const o=t.get(r);t.set(r,o?(h,p)=>i.reducer(o(h,p),p):i.reducer)}return function(i=n,r){const o=t.get(r.type);return o?o(i,r):i}}({user:new class mI{constructor(e,t,i){this.login=e,this.password=t,this.token=i}}},function fI(...n){return{reducer:n.pop(),types:n.map(i=>i.type)}}(gI,n=>({...n,login:n.user})));var eO=F(4266);const tO=["addListener","removeListener"],nO=["addEventListener","removeEventListener"],iO=["on","off"];function Ir(n,e,t,i){if((0,ur.m)(t)&&(i=t,t=void 0),i)return Ir(n,e,t).pipe(Os(i));const[r,o]=function sO(n){return(0,ur.m)(n.addEventListener)&&(0,ur.m)(n.removeEventListener)}(n)?nO.map(l=>h=>n[l](e,h,t)):function rO(n){return(0,ur.m)(n.addListener)&&(0,ur.m)(n.removeListener)}(n)?tO.map(_I(n,e)):function oO(n){return(0,ur.m)(n.on)&&(0,ur.m)(n.off)}(n)?iO.map(_I(n,e)):[];if(!r&&(0,eO.z)(n))return(0,Ci.z)(l=>Ir(l,e,t))((0,Pt.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new jn.y(l=>{const h=(...p)=>l.next(1<p.length?p:p[0]);return r(h),()=>o(h)})}function _I(n,e){return t=>i=>n[t](e,i)}var mm=F(6321),aO=F(671);const{isArray:cO}=Array;function vI(n){return 1===n.length&&cO(n[0])?n[0]:n}var sf=F(3019);function Sy(...n){const e=(0,oo.jO)(n),t=vI(n);return t.length?new jn.y(i=>{let r=t.map(()=>[]),o=t.map(()=>!1);i.add(()=>{r=o=null});for(let l=0;!i.closed&&l<t.length;l++)(0,Pt.Xf)(t[l]).subscribe((0,I.x)(i,h=>{if(r[l].push(h),r.every(p=>p.length)){const p=r.map(y=>y.shift());i.next(e?e(...p):p),r.some((y,w)=>!y.length&&o[w])&&i.complete()}},()=>{o[l]=!0,!r[l].length&&i.complete()}));return()=>{r=o=null}}):Ei.E}function Wn(n){return(0,zn.e)((e,t)=>{(0,Pt.Xf)(n).subscribe((0,I.x)(t,()=>t.complete(),tu.Z)),!t.closed&&e.subscribe(t)})}function xy(n){return ti((e,t)=>n<=t)}let rw=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),cs=(()=>{class n extends rw{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=u.n5z(n)))(i||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const js=new u.OlP("NgValueAccessor"),JB={provide:js,useExisting:(0,u.Gpc)(()=>gm),multi:!0},XB=new u.OlP("CompositionEventMode");let gm=(()=>{class n extends rw{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ow(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(XB,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&u.NdJ("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[u._Bn([JB]),u.qOj]}),n})();function Jl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function dO(n){return null!=n&&"number"==typeof n.length}const Ii=new u.OlP("NgValidators"),ou=new u.OlP("NgAsyncValidators"),hO=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class fO{static min(e){return function vd(n){return e=>{if(Jl(e.value)||Jl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function TI(n){return e=>{if(Jl(e.value)||Jl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function _m(n){return Jl(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function ym(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function uo(n){return Jl(n.value)||hO.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function pO(n){return e=>Jl(e.value)||!dO(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function sw(n){return e=>dO(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function aw(n){if(!n)return Ay;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Jl(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return SI(e)}static composeAsync(e){return xI(e)}}function Ay(n){return null}function lw(n){return null!=n}function cw(n){return(0,u.QGY)(n)?(0,wn.D)(n):n}function uw(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function dw(n,e){return e.map(t=>t(n))}function II(n){return n.map(e=>function mO(n){return!n.validate}(e)?e:t=>e.validate(t))}function SI(n){if(!n)return null;const e=n.filter(lw);return 0==e.length?null:function(t){return uw(dw(t,e))}}function bd(n){return null!=n?SI(II(n)):null}function xI(n){if(!n)return null;const e=n.filter(lw);return 0==e.length?null:function(t){return function iw(...n){const e=(0,oo.jO)(n),{args:t,keys:i}=Ro(n),r=new jn.y(o=>{const{length:l}=t;if(!l)return void o.complete();const h=new Array(l);let p=l,y=l;for(let w=0;w<l;w++){let T=!1;(0,Pt.Xf)(t[w]).subscribe((0,I.x)(o,M=>{T||(T=!0,y--),h[w]=M},()=>p--,void 0,()=>{(!p||!T)&&(y||o.next(i?Oc(i,h):h),o.complete())}))}});return e?r.pipe(Os(e)):r}(dw(t,e).map(cw)).pipe((0,Tt.U)(uw))}}function hw(n){return null!=n?xI(II(n)):null}function AI(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function vm(n){return n._rawValidators}function fw(n){return n._rawAsyncValidators}function My(n){return n?Array.isArray(n)?n:[n]:[]}function bm(n,e){return Array.isArray(n)?n.includes(e):n===e}function MI(n,e){const t=My(e);return My(n).forEach(r=>{bm(t,r)||t.push(r)}),t}function af(n,e){return My(e).filter(t=>!bm(n,t))}class lf{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bd(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=hw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ho extends lf{get formDirective(){return null}get path(){return null}}class Xl extends lf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class NI{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let pw=(()=>{class n extends NI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xl,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[u.qOj]}),n})(),OI=(()=>{class n extends NI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ho,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&u.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[u.qOj]}),n})();const Ry="VALID",ky="INVALID",wd="PENDING",Em="DISABLED";function gw(n){return(Py(n)?n.validators:n)||null}function _w(n,e){return(Py(e)?e.asyncValidators:n)||null}function Py(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class vw{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ry}get invalid(){return this.status===ky}get pending(){return this.status==wd}get disabled(){return this.status===Em}get enabled(){return this.status!==Em}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(MI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(MI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(af(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(af(e,this._rawAsyncValidators))}hasValidator(e){return bm(this._rawValidators,e)}hasAsyncValidator(e){return bm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=wd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Em,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ry,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ry||this.status===wd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Em:Ry}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=wd,this._hasOwnPendingAsyncValidator=!0;const t=cw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?Em:this.errors?ky:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wd)?wd:this._anyControlsHaveStatus(ky)?ky:Ry}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Py(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Cm(n){return Array.isArray(n)?bd(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function PI(n){return Array.isArray(n)?hw(n):n||null}(this._rawAsyncValidators)}}class Dm extends vw{constructor(e,t,i){super(gw(t),_w(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function FI(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new u.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function yw(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new u.vHH(1e3,"");if(!i[t])throw new u.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Ed=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Tm}),Tm="always";function Cd(n,e,t=Tm){bw(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function CO(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&VI(n,e)})}(n,e),function TO(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function DO(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&VI(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function EO(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ly(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),By(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Im(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bw(n,e){const t=vm(n);null!==e.validator?n.setValidators(AI(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=fw(n);null!==e.asyncValidator?n.setAsyncValidators(AI(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Im(e._rawValidators,r),Im(e._rawAsyncValidators,r)}function By(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=vm(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(l=>l!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const r=fw(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(l=>l!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}const i=()=>{};return Im(e._rawValidators,i),Im(e._rawAsyncValidators,i),t}function VI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function UI(n,e){bw(n,e)}function Vy(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const AO={provide:ho,useExisting:(0,u.Gpc)(()=>cf)},xm=(()=>Promise.resolve())();let cf=(()=>{class n extends ho{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new Dm({},bd(t),hw(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){xm.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Cd(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){xm.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){xm.then(()=>{const i=this._findContainer(t.path),r=new Dm({});UI(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){xm.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){xm.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Vy(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ii,10),u.Y36(ou,10),u.Y36(Ed,8))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&u.NdJ("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([AO]),u.qOj]}),n})();function zI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Cw(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ll=class extends vw{constructor(e=null,t,i){super(gw(t),_w(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Py(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Cw(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Cw(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Tw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),JI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const Aw=new u.OlP("NgModelWithFormControlWarning"),BO={provide:ho,useExisting:(0,u.Gpc)(()=>Am)};let Am=(()=>{class n extends ho{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(By(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Cd(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Ly(t.control||null,t,!1),function $I(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,Vy(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(Ly(i||null,t),(n=>n instanceof ll)(r)&&(Cd(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);UI(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function jI(n,e){return By(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){bw(this.form,this),this._oldForm&&By(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ii,10),u.Y36(ou,10),u.Y36(Ed,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&u.NdJ("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([BO]),u.qOj,u.TTD]}),n})();const UO={provide:Xl,useExisting:(0,u.Gpc)(()=>Mw)};let Mw=(()=>{class n extends Xl{set isDisabled(t){}constructor(t,i,r,o,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.name=null,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function Sm(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===gm?t=o:function xO(n){return Object.getPrototypeOf(n.constructor)===cs}(o)?i=o:r=o}),r||i||t||null}(0,o)}ngOnChanges(t){this._added||this._setUpControl(),function Ew(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Fy(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(ho,13),u.Y36(Ii,10),u.Y36(ou,10),u.Y36(js,10),u.Y36(Aw,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([UO]),u.qOj,u.TTD]}),n})(),uS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[JI]}),n})(),Pw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ed,useValue:t.callSetDisabledState??Tm}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[uS]}),n})(),Fw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Aw,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ed,useValue:t.callSetDisabledState??Tm}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[uS]}),n})();Math,Math,Math;const CR=["*"],ZS=["dialog"];function cu(n){return"string"==typeof n}function tc(n){return null!=n}function _f(n){return(n||document.body).getBoundingClientRect()}const sk={animation:!0,transitionTimerDelayMs:5},rU=()=>{},{transitionTimerDelayMs:ak}=sk,ov=new Map,fs=(n,e,t,i)=>{let r=i.context||{};const o=ov.get(e);if(o)switch(i.runningTransition){case"continue":return Ei.E;case"stop":n.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),ov.delete(e)}const l=t(e,i.animation,r)||rU;if(!i.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>l()),(0,yt.of)(void 0).pipe(function rv(n){return e=>new jn.y(t=>e.subscribe({next:l=>n.run(()=>t.next(l)),error:l=>n.run(()=>t.error(l)),complete:()=>n.run(()=>t.complete())}))}(n));const h=new tn.x,p=new tn.x,y=h.pipe(function EI(...n){return e=>Ft(e,(0,yt.of)(...n))}(!0));ov.set(e,{transition$:h,complete:()=>{p.next(),p.complete()},context:r});const w=function ok(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const T=Ir(e,"transitionend").pipe(Wn(y),ti(({target:O})=>O===e));(function bI(...n){return 1===(n=vI(n)).length?(0,Pt.Xf)(n[0]):new jn.y(function wI(n){return e=>{let t=[];for(let i=0;t&&!e.closed&&i<n.length;i++)t.push((0,Pt.Xf)(n[i]).subscribe((0,I.x)(e,r=>{if(t){for(let o=0;o<t.length;o++)o!==i&&t[o].unsubscribe();t=null}e.next(r)})))}}(n))})(function yI(n=0,e,t=mm.P){let i=-1;return null!=e&&((0,aO.K)(e)?t=e:i=e),new jn.y(r=>{let o=function lO(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let l=0;return t.schedule(function(){r.closed||(r.next(l++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(w+ak).pipe(Wn(y)),T,p).pipe(Wn(y)).subscribe(()=>{ov.delete(e),n.run(()=>{l(),h.next(),h.complete()})})}),h.asObservable()};let sv=(()=>{class n{constructor(){this.animation=sk.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),Ct=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),uU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),dU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();var ni=function(n){return n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",n}(ni||{});typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const yU=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function vU(n){const e=Array.from(n.querySelectorAll(yU)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let OU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),PU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();class Vm{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}let m5=(()=>{class n{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(Bn(1)).subscribe(()=>{fs(this._zone,this._el.nativeElement,(t,i)=>{i&&_f(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return fs(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,i){2&t&&(u.Tol("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),u.ekj("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[u.jDz],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();class FU{update(e){}close(e){}dismiss(e){}}const g5=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],_5=["animation","backdropClass"];class y5{_applyWindowOptions(e,t){g5.forEach(i=>{tc(t[i])&&(e[i]=t[i])})}_applyBackdropOptions(e,t){_5.forEach(i=>{tc(t[i])&&(e[i]=t[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Wn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Wn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,t,i,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new tn.x,this._dismissed=new tn.x,this._hidden=new tn.x,e.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,l)=>{this._resolve=o,this._reject=l}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function s1(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(i=>{!1!==i&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,yt.of)(void 0);e.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Sy(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var yk=function(n){return n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",n}(yk||{});let v5=(()=>{class n{constructor(t,i,r){this._document=t,this._elRef=i,this._zone=r,this._closed$=new tn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new u.vpe,this.shown=new tn.x,this.hidden=new tn.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":cu(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Bn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},l=Sy(fs(this._zone,t,()=>t.classList.remove("show"),i),fs(this._zone,this._dialogEl.nativeElement,()=>{},i));return l.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),l}_show(){const t={animation:this.animation,runningTransition:"continue"};Sy(fs(this._zone,this._elRef.nativeElement,(o,l)=>{l&&_f(o),o.classList.add("show")},t),fs(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Ir(t,"keydown").pipe(Wn(this._closed$),ti(r=>r.which===ni.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(yk.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;Ir(this._dialogEl.nativeElement,"mousedown").pipe(Wn(this._closed$),(0,ci.b)(()=>i=!1),(0,Dn.w)(()=>Ir(t,"mouseup").pipe(Wn(this._closed$),Bn(1))),ti(({target:r})=>t===r)).subscribe(()=>{i=!0}),Ir(t,"click").pipe(Wn(this._closed$)).subscribe(({target:r})=>{t===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(yk.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),r=vU(t)[0];(i||r||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&fs(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(he),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,i){if(1&t&&u.Gf(ZS,7),2&t){let r;u.iGM(r=u.CRH())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,i){2&t&&(u.uIk("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),u.Tol("modal d-block"+(i.windowClass?" "+i.windowClass:"")),u.ekj("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[u.jDz],ngContentSelectors:CR,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,i){1&t&&(u.F$t(),u.TgZ(0,"div",0,1)(2,"div",2),u.Hsn(3),u.qZA()()),2&t&&u.Tol("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),b5=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:l}=r;if(t>0){const h=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${h+t}px`}return r.overflow="hidden",()=>{t>0&&(r.paddingRight=l),r.overflow=o}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(he))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),w5=(()=>{class n{constructor(t,i,r,o,l,h,p){this._applicationRef=t,this._injector=i,this._environmentInjector=r,this._document=o,this._scrollBar=l,this._rendererFactory=h,this._ngZone=p,this._activeWindowCmptHasChanged=new tn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new u.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const y=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,i=!1)=>{n.runOutsideAngular(()=>{const r=Ir(e,"focusin").pipe(Wn(t),(0,Tt.U)(o=>o.target));Ir(e,"keydown").pipe(Wn(t),ti(o=>o.which===ni.Tab),rl(r)).subscribe(([o,l])=>{const[h,p]=vU(e);(l===h||l===e)&&o.shiftKey&&(p.focus(),o.preventDefault()),l===p&&!o.shiftKey&&(h.focus(),o.preventDefault())}),i&&Ir(e,"click").pipe(Wn(t),rl(r),(0,Tt.U)(o=>o[1])).subscribe(o=>o.focus())})})(this._ngZone,y.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(y.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,r){const o=r.container instanceof HTMLElement?r.container:tc(r.container)?this._document.querySelector(r.container):this._document.body,l=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const h=new FU,p=(t=r.injector||t).get(u.lqb,null)||this._environmentInjector,y=this._getContentRef(t,p,i,h,r);let w=!1!==r.backdrop?this._attachBackdrop(o):void 0,T=this._attachWindowComponent(o,y.nodes),M=new y5(T,y,w,r.beforeDismiss);return this._registerModalRef(M),this._registerWindowCmpt(T),M.hidden.pipe(Bn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(l.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),h.close=O=>{M.close(O)},h.dismiss=O=>{M.dismiss(O)},h.update=O=>{M.update(O)},M.update(r),1===this._modalRefs.length&&l.addClass(this._document.body,"modal-open"),w&&w.instance&&w.changeDetectorRef.detectChanges(),T.changeDetectorRef.detectChanges(),M}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let i=(0,u.LMc)(m5,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(t,i){let r=(0,u.LMc)(v5,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_getContentRef(t,i,r,o,l){return r?r instanceof u.Rgc?this._createFromTemplateRef(r,o):cu(r)?this._createFromString(r):this._createFromComponent(t,i,r,o,l):new Vm([])}_createFromTemplateRef(t,i){const o=t.createEmbeddedView({$implicit:i,close(l){i.close(l)},dismiss(l){i.dismiss(l)}});return this._applicationRef.attachView(o),new Vm([o.rootNodes],o)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new Vm([[i]])}_createFromComponent(t,i,r,o,l){const h=u.zs3.create({providers:[{provide:FU,useValue:o}],parent:t}),p=(0,u.LMc)(r,{environmentInjector:i,elementInjector:h}),y=p.location.nativeElement;return l.scrollable&&y.classList.add("component-host-scrollable"),this._applicationRef.attachView(p.hostView),new Vm([[y]],p.hostView,p)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.z2F),u.LFG(u.zs3),u.LFG(u.lqb),u.LFG(he),u.LFG(b5),u.LFG(u.FYo),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),E5=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(sv))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C5=(()=>{class n{constructor(t,i,r){this._injector=t,this._modalStack=i,this._config=r}open(t,i={}){const r={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3),u.LFG(w5),u.LFG(E5))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[C5]}),n})(),UU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),KU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),ZU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),QU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),JU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),XU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),ej=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),tj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),nj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();new u.OlP("live announcer delay",{providedIn:"root",factory:function j5(){return 100}});let ij=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),rj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const $5=[oe,Ct,uU,dU,OU,PU,LU,UU,rj,KU,ZU,QU,JU,XU,ej,tj,nj,ij];let G5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[$5,oe,Ct,uU,dU,OU,PU,LU,UU,rj,KU,ZU,QU,JU,XU,ej,tj,nj,ij]}),n})();var oj=F(3020),Vn=F(5656),xr=F(6304),bk=(F(1128),F(3106)),ic=F(4537),Se=F(5861),ps=F(4303),B=F(9058),rc=F(7879);const sj="@firebase/database";let wk="";function lj(n){wk=n}class W5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,B.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,B.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class q5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,B.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const cj=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new W5(e)}}catch{}return new q5},Um=cj("localStorage"),Ek=cj("sessionStorage"),uv=new rc.Yd("@firebase/database"),uj=function(){let n=1;return function(){return n++}}(),dj=function(n){const e=(0,B.dS)(n),t=new B.gQ;t.update(e);const i=t.digest();return B.US.encodeByteArray(i)},hE=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=hE.apply(null,i):e+="object"==typeof i?(0,B.Pz)(i):i,e+=" "}return e};let jm=null,hj=!0;const fj=function(n,e){(0,B.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(uv.logLevel=rc.in.VERBOSE,jm=uv.log.bind(uv),e&&Ek.set("logging_enabled",!0)):"function"==typeof n?jm=n:(jm=null,Ek.remove("logging_enabled"))},Vr=function(...n){if(!0===hj&&(hj=!1,null===jm&&!0===Ek.get("logging_enabled")&&fj(!0)),jm){const e=hE.apply(null,n);jm(e)}},fE=function(n){return function(...e){Vr(n,...e)}},Ck=function(...n){const e="FIREBASE INTERNAL ERROR: "+hE(...n);uv.error(e)},uu=function(...n){const e=`FIREBASE FATAL ERROR: ${hE(...n)}`;throw uv.error(e),new Error(e)},Uo=function(...n){const e="FIREBASE WARNING: "+hE(...n);uv.warn(e)},E1=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Nd="[MIN_NAME]",du="[MAX_NAME]",Hm=function(n,e){if(n===e)return 0;if(n===Nd||e===du)return-1;if(e===Nd||n===du)return 1;{const t=C1(n),i=C1(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},Z5=function(n,e){return n===e?0:n<e?-1:1},pE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,B.Pz)(e))},Dk=function(n){if("object"!=typeof n||null===n)return(0,B.Pz)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,B.Pz)(e[i]),t+=":",t+=Dk(n[e[i]]);return t+="}",t},pj=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Ur(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const mj=function(n){(0,B.hu)(!E1(n),"Invalid JSON number");const i=1023;let r,o,l,h,p;0===n?(o=0,l=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=h+i,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(r?1:0),y.reverse();const w=y.join("");let T="";for(p=0;p<64;p+=8){let M=parseInt(w.substr(p,8),2).toString(16);1===M.length&&(M="0"+M),T+=M}return T.toLowerCase()},eq=new RegExp("^-?(0*)\\d{1,10}$"),gj=-2147483648,Tk=2147483647,C1=function(n){if(eq.test(n)){const e=Number(n);if(e>=gj&&e<=Tk)return e}return null},dv=function(n){try{n()}catch(e){setTimeout(()=>{throw Uo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},mE=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class nq{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Uo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class iq{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Vr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Uo(e)}}let gE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const wj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Dj="websocket",Tj="long_polling";class Sk{constructor(e,t,i,r,o=!1,l="",h=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Um.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Um.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ij(n,e,t){let i;if((0,B.hu)("string"==typeof e,"typeof type must == string"),(0,B.hu)("object"==typeof t,"typeof params must == object"),e===Dj)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Tj)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function rq(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Ur(t,(o,l)=>{r.push(o+"="+l)}),i+r.join("&")}class oq{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,B.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,B.p$)(this.counters_)}}const xk={},Ak={};function Mk(n){const e=n.toString();return xk[e]||(xk[e]=new oq),xk[e]}class aq{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&dv(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class yf{constructor(e,t,i,r,o,l,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fE(e),this.stats_=Mk(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),Ij(t,Tj,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new aq(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,B.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Nk((...o)=>{const[l,h,p,y,w]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&wj.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yf.forceAllow_=!0}static forceDisallow(){yf.forceDisallow_=!0}static isAvailable(){return!((0,B.Yr)()||!yf.forceAllow_&&(yf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,B.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,B.h$)(t),r=pj(i,1840);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,B.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,B.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Nk{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=uj(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Nk.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Vr("frame writing exception"),h.stack&&Vr(h.stack),Vr(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Vr("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,B.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Vr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let T1=null;typeof MozWebSocket<"u"?T1=MozWebSocket:typeof WebSocket<"u"&&(T1=WebSocket);let hv=(()=>{class n{constructor(t,i,r,o,l,h,p){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fE(this.connId),this.stats_=Mk(i),this.connURL=n.connectionURL_(i,h,p,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,o,l){const h={v:"5"};return!(0,B.Yr)()&&typeof location<"u"&&location.hostname&&wj.test(location.hostname)&&(h.r="f"),i&&(h.s=i),r&&(h.ls=r),o&&(h.ac=o),l&&(h.p=l),Ij(t,Dj,h)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Um.set("previous_websocket_failure",!0);try{let r;if((0,B.Yr)()){r={headers:{"User-Agent":`Firebase/5/${wk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(r.proxy={origin:h})}this.mySock=new T1(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==T1&&!n.forceDisallow_}static previouslyFailed(){return Um.isInMemoryStorage||!0===Um.get("previous_websocket_failure")}markConnectionHealthy(){Um.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,B.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,B.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,B.Pz)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=pj(i,16384);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Rj=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[yf,hv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=hv&&hv.isAvailable();let r=i&&!hv.previouslyFailed();if(t.webSocketOnly&&(i||Uo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hv];else{const o=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class Uj{constructor(e,t,i,r,o,l,h,p,y,w){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fE("c:"+this.id+":"),this.transportManager_=new Rj(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=mE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=pE("t",e),i=pE("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=pE("t",e),i=pE("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=pE("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?Ck("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ck("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Uo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),mE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):mE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Um.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class jj{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class Hj{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,B.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===t&&(!i||i===r[o].context))return void r.splice(o,1)}validateEventType_(e){(0,B.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class I1 extends Hj{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,B.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new I1}getInitialEvent(e){return(0,B.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Hn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Rn(){return new Hn("")}function _n(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function vf(n){return n.pieces_.length-n.pieceNum_}function ii(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Hn(n.pieces_,e)}function Rk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function _E(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function zj(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Hn(e,0)}function xi(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Hn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Hn(t,0)}function yn(n){return n.pieceNum_>=n.pieces_.length}function ms(n,e){const t=_n(n),i=_n(e);if(null===t)return e;if(t===i)return ms(ii(n),ii(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Aq(n,e){const t=_E(n,0),i=_E(e,0);for(let r=0;r<t.length&&r<i.length;r++){const o=Hm(t[r],i[r]);if(0!==o)return o}return t.length===i.length?0:t.length<i.length?-1:1}function kk(n,e){if(vf(n)!==vf(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function hl(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(vf(n)>vf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Mq{constructor(e,t){this.errorPrefix_=t,this.parts_=_E(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,B.ug)(this.parts_[i]);Wj(this)}}function Wj(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$m(n))}function $m(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Pk extends Hj{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Pk}getInitialEvent(e){return(0,B.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const yE=1e3;let x1,Gm=(()=>{class n extends jj{constructor(t,i,r,o,l,h,p,y){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=fE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,B.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Pk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&I1.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const o=++this.requestNumber_,l={r:o,a:t,b:i};this.log_((0,B.Pz)(l)),(0,B.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();const i=new B.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const p=h.d;"ok"===h.s?i.resolve(p):i.reject(p)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,o){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,B.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:i,query:t,tag:r};this.listens.get(h).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const l={p:r};t.tag&&(l.q=i._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const y=p.d,w=p.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(r,o),t.onComplete&&t.onComplete(w,y))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,B.r3)(t,"w")){const r=(0,B.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();Uo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,B.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,B.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const l=o.s,h=o.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),(0,B.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,i)}sendUnlisten_(t,i,r,o){this.log_("Unlisten on "+t+" for "+i);const l={p:t};o&&(l.q=r,l.t=o),this.sendRequest("n",l)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,o){const l={p:i,d:r};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,i,r,o){this.putInternal("p",t,i,r,o)}merge(t,i,r,o){this.putInternal("m",t,i,r,o)}putInternal(t,i,r,o,l){this.initConnection_();const h={p:i,d:r};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,B.Pz)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):Ck("Unrecognized action received from server: "+(0,B.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,B.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=yE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=yE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Se.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,y=null;const w=function(){y?y.close():(p=!0,o())};t.realtime_={close:w,sendRequest:function(O){(0,B.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(O)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,L]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);p?Vr("getToken() completed but was canceled"):(Vr("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=L&&L.token,y=new Uj(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,o,H=>{Uo(H+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(O){t.log_("Failed to get token: "+O),p||(t.repoInfo_.nodeAdmin&&Uo(O),w())}}})()}interrupt(t){Vr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Vr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,B.xb)(this.interruptReasons_)&&(this.reconnectDelay_=yE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(l=>Dk(l)).join("$"):"default";const o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const r=new Hn(t).toString();let o;if(this.listens.has(r)){const l=this.listens.get(r);o=l.get(i),l.delete(i),0===l.size&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,i){Vr("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Vr("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,B.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+wk.replace(/\./g,"-")]=1,(0,B.uI)()?t["framework.cordova"]=1:(0,B.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=I1.getInstance().currentlyOnline();return(0,B.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class bn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new bn(e,t)}}class S1{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new bn(Nd,e),r=new bn(Nd,t);return 0!==this.compare(i,r)}minPost(){return bn.MIN}}class Yj extends S1{static get __EMPTY_NODE(){return x1}static set __EMPTY_NODE(e){x1=e}compare(e,t){return Hm(e.name,t.name)}isDefinedOn(e){throw(0,B.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return bn.MIN}maxPost(){return new bn(du,x1)}makePost(e,t){return(0,B.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new bn(e,x1)}toString(){return".key"}}const hu=new Yj;class A1{constructor(e,t,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,r&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Lk,oc=(()=>{class n{constructor(t,i,r,o,l){this.key=t,this.value=i,this.color=r??n.RED,this.left=o??$s.EMPTY_NODE,this.right=l??$s.EMPTY_NODE}copy(t,i,r,o,l){return new n(t??this.key,i??this.value,r??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const l=r(t,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(t,i,r),null):0===l?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return $s.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,o;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return $s.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class $s{constructor(e,t=$s.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new $s(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,oc.BLACK,null,null))}remove(e){return new $s(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,oc.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new A1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new A1(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new A1(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new A1(this.root_,null,this.comparator_,!0,e)}}function Bq(n,e){return Hm(n.name,e.name)}function Fk(n,e){return Hm(n,e)}$s.EMPTY_NODE=new class Lq{copy(e,t,i,r,o){return this}insert(e,t,i){return new oc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Zj=function(n){return"number"==typeof n?"number:"+mj(n):"string:"+n},Qj=function(n){if(n.isLeafNode()){const e=n.val();(0,B.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,B.r3)(e,".sv"),"Priority must be a string or number.")}else(0,B.hu)(n===Lk||n.isEmpty(),"priority of unexpected type.");(0,B.hu)(n===Lk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Jj,Xj,eH,fv=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,B.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qj(this.priorityNode_)}static set __childrenNodeConstructor(t){Jj=t}static get __childrenNodeConstructor(){return Jj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return yn(t)?this:".priority"===_n(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=_n(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,B.hu)(".priority"!==r||1===vf(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ii(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Zj(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?mj(this.value_):this.value_,this.lazyHash_=dj(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,B.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(r);return(0,B.hu)(o>=0,"Unknown leaf type: "+i),(0,B.hu)(l>=0,"Unknown leaf type: "+r),o===l?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ui=new class Hq extends S1{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),o=i.compareTo(r);return 0===o?Hm(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return bn.MIN}maxPost(){return new bn(du,new fv("[PRIORITY-POST]",eH))}makePost(e,t){const i=Xj(e);return new bn(t,new fv("[PRIORITY-POST]",i))}toString(){return".priority"}},$q=Math.log(2);class Gq{constructor(e){this.count=parseInt(Math.log(e+1)/$q,10),this.current_=this.count-1;const r=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const M1=function(n,e,t,i){n.sort(e);const r=function(p,y){const w=y-p;let T,M;if(0===w)return null;if(1===w)return T=n[p],M=t?t(T):T,new oc(M,T.node,oc.BLACK,null,null);{const O=parseInt(w/2,10)+p,L=r(p,O),H=r(O+1,y);return T=n[O],M=t?t(T):T,new oc(M,T.node,oc.BLACK,L,H)}},h=function(p){let y=null,w=null,T=n.length;const M=function(L,H){const te=T-L,Te=T;T-=L;const Ne=r(te+1,Te),je=n[te],xe=t?t(je):je;O(new oc(xe,je.node,H,null,Ne))},O=function(L){y?(y.left=L,y=L):(w=L,y=L)};for(let L=0;L<p.count;++L){const H=p.nextBitIsOne(),te=Math.pow(2,p.count-(L+1));H?M(te,oc.BLACK):(M(te,oc.BLACK),M(te,oc.RED))}return w}(new Gq(n.length));return new $s(i||e,h)};let Bk;const pv={};class Od{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,B.hu)(pv&&ui,"ChildrenNode.ts has not been loaded"),Bk=Bk||new Od({".priority":pv},{".priority":ui}),Bk}get(e){const t=(0,B.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof $s?t:null}hasIndex(e){return(0,B.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,B.hu)(e!==hu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=t.getIterator(bn.Wrap);let h,l=o.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=o.getNext();h=r?M1(i,e.getCompare()):pv;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const w=Object.assign({},this.indexes_);return w[p]=h,new Od(w,y)}addToIndexes(e,t){const i=(0,B.UI)(this.indexes_,(r,o)=>{const l=(0,B.DV)(this.indexSet_,o);if((0,B.hu)(l,"Missing index implementation for "+o),r===pv){if(l.isDefinedOn(e.node)){const h=[],p=t.getIterator(bn.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&h.push(y),y=p.getNext();return h.push(e),M1(h,l.getCompare())}return pv}{const h=t.get(e.name);let p=r;return h&&(p=p.remove(new bn(e.name,h))),p.insert(e,e.node)}});return new Od(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,B.UI)(this.indexes_,r=>{if(r===pv)return r;{const o=t.get(e.name);return o?r.remove(new bn(e.name,o)):r}});return new Od(i,this.indexSet_)}}let vE,an=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Qj(this.priorityNode_),this.children_.isEmpty()&&(0,B.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vE||(vE=new n(new $s(Fk),null,Od.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?vE:i}}getChild(t){const i=_n(t);return null===i?this:this.getImmediateChild(i).getChild(ii(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,B.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new bn(t,i);let o,l;i.isEmpty()?(o=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,i),l=this.indexMap_.addToIndexes(r,this.children_));const h=o.isEmpty()?vE:this.priorityNode_;return new n(o,h,l)}}updateChild(t,i){const r=_n(t);if(null===r)return i;{(0,B.hu)(".priority"!==_n(t)||1===vf(t),".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(ii(t),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,o=0,l=!0;if(this.forEachChild(ui,(h,p)=>{i[h]=p.val(t),r++,l&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):l=!1}),!t&&l&&o<2*r){const h=[];for(const p in i)h[p]=i[p];return h}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Zj(this.getPriority().val())+":"),this.forEachChild(ui,(i,r)=>{const o=r.hash();""!==o&&(t+=":"+i+":"+o)}),this.lazyHash_=""===t?"":dj(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const o=this.resolveIndex_(r);if(o){const l=o.getPredecessorKey(new bn(t,i));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new bn(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new bn(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,bn.Wrap);let l=o.peek();for(;null!=l&&i.compare(l,t)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,bn.Wrap);let l=o.peek();for(;null!=l&&i.compare(l,t)>0;)o.getNext(),l=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===bE?-1:0}withIndex(t){if(t===hu||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===hu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(ui),o=i.getIterator(ui);let l=r.getNext(),h=o.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=r.getNext(),h=o.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===hu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const bE=new class zq extends an{constructor(){super(new $s(Fk),an.EMPTY_NODE,Od.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return an.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(bn,{MIN:{value:new bn(Nd,an.EMPTY_NODE)},MAX:{value:new bn(du,bE)}}),Yj.__EMPTY_NODE=an.EMPTY_NODE,fv.__childrenNodeConstructor=an,function Vq(n){Lk=n}(bE),function jq(n){eH=n}(bE);const Wq=!0;function Vi(n,e=null){if(null===n)return an.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,B.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new fv(n,Vi(e));if(n instanceof Array||!Wq){let t=an.EMPTY_NODE;return Ur(n,(i,r)=>{if((0,B.r3)(n,i)&&"."!==i.substring(0,1)){const o=Vi(r);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(Vi(e))}{const t=[];let i=!1;if(Ur(n,(l,h)=>{if("."!==l.substring(0,1)){const p=Vi(h);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),t.push(new bn(l,p)))}}),0===t.length)return an.EMPTY_NODE;const o=M1(t,Bq,l=>l.name,Fk);if(i){const l=M1(t,ui.getCompare());return new an(o,Vi(e),new Od({".priority":l},{".priority":ui}))}return new an(o,Vi(e),Od.Default)}}!function Uq(n){Xj=n}(Vi);class Vk extends S1{constructor(e){super(),this.indexPath_=e,(0,B.hu)(!yn(e)&&".priority"!==_n(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),o=i.compareTo(r);return 0===o?Hm(e.name,t.name):o}makePost(e,t){const i=Vi(e),r=an.EMPTY_NODE.updateChild(this.indexPath_,i);return new bn(t,r)}maxPost(){const e=an.EMPTY_NODE.updateChild(this.indexPath_,bE);return new bn(du,e)}toString(){return _E(this.indexPath_,0).join("/")}}const Uk=new class qq extends S1{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Hm(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return bn.MIN}maxPost(){return bn.MAX}makePost(e,t){const i=Vi(e);return new bn(t,i)}toString(){return".value"}},mv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Kq=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const o=new Array(8);for(r=7;r>=0;r--)o[r]=mv.charAt(t%64),t=Math.floor(t/64);(0,B.hu)(0===t,"Cannot push at time == 0");let l=o.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)l+=mv.charAt(e[r]);return(0,B.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),iH=function(n){if(n===""+Tk)return"-";const e=C1(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let i=t.length-1;for(;i>=0&&"z"===t[i];)i--;if(-1===i)return du;const o=mv.charAt(mv.indexOf(t[i])+1);return t[i]=o,t.slice(0,i+1).join("")},rH=function(n){if(n===""+gj)return Nd;const e=C1(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return"-"===t[t.length-1]?1===t.length?""+Tk:(delete t[t.length-1],t.join("")):(t[t.length-1]=mv.charAt(mv.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function oH(n){return{type:"value",snapshotNode:n}}function gv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function wE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function EE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Hk{constructor(e){this.index_=e}updateChild(e,t,i,r,o,l){(0,B.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(null!=l&&(i.isEmpty()?e.hasChild(t)?l.trackChildChange(wE(t,h)):(0,B.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(gv(t,i)):l.trackChildChange(EE(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(ui,(r,o)=>{t.hasChild(r)||i.trackChildChange(wE(r,o))}),t.isLeafNode()||t.forEachChild(ui,(r,o)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(o)||i.trackChildChange(EE(r,o,l))}else i.trackChildChange(gv(r,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?an.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class CE{constructor(e){this.indexedFilter_=new Hk(e.getIndex()),this.index_=e.getIndex(),this.startPost_=CE.getStartPost_(e),this.endPost_=CE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,o,l){return this.matches(new bn(t,i))||(i=an.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,o,l)}updateFullNode(e,t,i){t.isLeafNode()&&(t=an.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(an.EMPTY_NODE);const o=this;return t.forEachChild(ui,(l,h)=>{o.matches(new bn(l,h))||(r=r.updateImmediateChild(l,an.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Zq{constructor(e){this.rangedFilter_=new CE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,o,l){return this.rangedFilter_.matches(new bn(t,i))||(i=an.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,o,l):this.fullLimitUpdateChild_(e,t,i,o,l)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=an.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;r=an.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const h=o.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(h.name,h.node),l++}}else{let o,l,h,p;if(r=t.withIndex(this.index_),r=r.updatePriority(an.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();h=(M,O)=>T(O,M)}else p=r.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,w=!1;for(;p.hasNext();){const T=p.getNext();!w&&h(o,T)<=0&&(w=!0),w&&y<this.limit_&&h(T,l)<=0?y++:r=r.updateImmediateChild(T.name,an.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,o){let l;if(this.reverse_){const T=this.index_.getCompare();l=(M,O)=>T(O,M)}else l=this.index_.getCompare();const h=e;(0,B.hu)(h.numChildren()===this.limit_,"");const p=new bn(t,i),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(h.hasChild(t)){const T=h.getImmediateChild(t);let M=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===t||h.hasChild(M.name));)M=r.getChildAfterChild(this.index_,M,this.reverse_);const O=null==M?1:l(M,p);if(w&&!i.isEmpty()&&O>=0)return o?.trackChildChange(EE(t,i,T)),h.updateImmediateChild(t,i);{o?.trackChildChange(wE(t,T));const H=h.updateImmediateChild(t,an.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(o?.trackChildChange(gv(M.name,M.node)),H.updateImmediateChild(M.name,M.node)):H}}return i.isEmpty()?e:w&&l(y,p)>=0?(null!=o&&(o.trackChildChange(wE(y.name,y.node)),o.trackChildChange(gv(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(y.name,an.EMPTY_NODE)):e}}class N1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ui}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:du}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,B.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ui}copy(){const e=new N1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $k(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function Gk(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function O1(n,e){const t=n.copy();return t.index_=e,t}function sH(n){const e={};if(n.isDefault())return e;let t;return n.index_===ui?t="$priority":n.index_===Uk?t="$value":n.index_===hu?t="$key":((0,B.hu)(n.index_ instanceof Vk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,B.Pz)(t),n.startSet_&&(e.startAt=(0,B.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,B.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,B.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,B.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function aH(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ui&&(e.i=n.index_.toString()),e}class R1 extends jj{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=fE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,B.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=R1.getListenId_(e,i),h={};this.listens_[l]=h;const p=sH(e._queryParams);this.restRequest_(o+".json",p,(y,w)=>{let T=w;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(o,T,!1,i),(0,B.DV)(this.listens_,l)===h){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(M,null)}})}unlisten(e,t){const i=R1.getListenId_(e,t);delete this.listens_[i]}get(e){const t=sH(e._queryParams),i=e._path.toString(),r=new B.BH;return this.restRequest_(i+".json",t,(o,l)=>{let h=l;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(t.auth=r.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,B.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,B.cI)(h.responseText)}catch{Uo("Failed to parse JSON response for "+l+": "+h.responseText)}i(null,p)}else 401!==h.status&&404!==h.status&&Uo("Got unsuccessful REST response for "+l+" Status: "+h.status),i(h.status);i=null}},h.open("GET",l,!0),h.send()})}}class nK{constructor(){this.rootNode_=an.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function k1(){return{value:null,children:new Map}}function _v(n,e,t){if(yn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=_n(e);n.children.has(i)||n.children.set(i,k1()),_v(n.children.get(i),e=ii(e),t)}}function zk(n,e){if(yn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ui,(i,r)=>{_v(n,new Hn(i),r)}),zk(n,e)}}if(n.children.size>0){const t=_n(e);return e=ii(e),n.children.has(t)&&zk(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Wk(n,e,t){null!==n.value?t(e,n.value):function iK(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{Wk(r,new Hn(e.toString()+"/"+i),t)})}class rK{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ur(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class aK{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new rK(e);const i=1e4+2e4*Math.random();mE(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Ur(e,(r,o)=>{o>0&&(0,B.r3)(this.statsToReport_,r)&&(t[r]=o,i=!0)}),i&&this.server_.reportStats(t),mE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var fu=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(fu||{});function Yk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class P1{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=fu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(yn(this.path)){if(null!=this.affectedTree.value)return(0,B.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Hn(e));return new P1(Rn(),t,this.revert)}}return(0,B.hu)(_n(this.path)===e,"operationForChild called for unrelated child."),new P1(ii(this.path),this.affectedTree,this.revert)}}class DE{constructor(e,t){this.source=e,this.path=t,this.type=fu.LISTEN_COMPLETE}operationForChild(e){return yn(this.path)?new DE(this.source,Rn()):new DE(this.source,ii(this.path))}}class zm{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=fu.OVERWRITE}operationForChild(e){return yn(this.path)?new zm(this.source,Rn(),this.snap.getImmediateChild(e)):new zm(this.source,ii(this.path),this.snap)}}class yv{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=fu.MERGE}operationForChild(e){if(yn(this.path)){const t=this.children.subtree(new Hn(e));return t.isEmpty()?null:t.value?new zm(this.source,Rn(),t.value):new yv(this.source,Rn(),t)}return(0,B.hu)(_n(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new yv(this.source,ii(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class bf{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(yn(e))return this.isFullyInitialized()&&!this.filtered_;const t=_n(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class lK{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function TE(n,e,t,i,r,o){const l=i.filter(h=>h.type===t);l.sort((h,p)=>function dK(n,e,t){if(null==e.childName||null==t.childName)throw(0,B.g5)("Should only compare child_ events.");const i=new bn(e.childName,e.snapshotNode),r=new bn(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,h,p)),l.forEach(h=>{const p=function uK(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);r.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(p,n.query_))})})}function F1(n,e){return{eventCache:n,serverCache:e}}function IE(n,e,t,i){return F1(new bf(e,t,i),n.serverCache)}function cH(n,e,t,i){return F1(n.eventCache,new bf(e,t,i))}function L1(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wm(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Zk;class di{constructor(e,t=(()=>(Zk||(Zk=new $s(Z5)),Zk))()){this.value=e,this.children=t}static fromObject(e){let t=new di(null);return Ur(e,(i,r)=>{t=t.set(new Hn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Rn(),value:this.value};if(yn(e))return null;{const i=_n(e),r=this.children.get(i);if(null!==r){const o=r.findRootMostMatchingPathAndValue(ii(e),t);return null!=o?{path:xi(new Hn(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(yn(e))return this;{const t=_n(e),i=this.children.get(t);return null!==i?i.subtree(ii(e)):new di(null)}}set(e,t){if(yn(e))return new di(t,this.children);{const i=_n(e),o=(this.children.get(i)||new di(null)).set(ii(e),t),l=this.children.insert(i,o);return new di(this.value,l)}}remove(e){if(yn(e))return this.children.isEmpty()?new di(null):new di(null,this.children);{const t=_n(e),i=this.children.get(t);if(i){const r=i.remove(ii(e));let o;return o=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&o.isEmpty()?new di(null):new di(this.value,o)}return this}}get(e){if(yn(e))return this.value;{const t=_n(e),i=this.children.get(t);return i?i.get(ii(e)):null}}setTree(e,t){if(yn(e))return t;{const i=_n(e),o=(this.children.get(i)||new di(null)).setTree(ii(e),t);let l;return l=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new di(this.value,l)}}fold(e){return this.fold_(Rn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(xi(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Rn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(yn(e))return null;{const o=_n(e),l=this.children.get(o);return l?l.findOnPath_(ii(e),xi(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Rn(),t)}foreachOnPath_(e,t,i){if(yn(e))return this;{this.value&&i(t,this.value);const r=_n(e),o=this.children.get(r);return o?o.foreachOnPath_(ii(e),xi(t,r),i):new di(null)}}foreach(e){this.foreach_(Rn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(xi(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class sc{constructor(e){this.writeTree_=e}static empty(){return new sc(new di(null))}}function SE(n,e,t){if(yn(e))return new sc(new di(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let o=i.value;const l=ms(r,e);return o=o.updateChild(l,t),new sc(n.writeTree_.set(r,o))}{const r=new di(t),o=n.writeTree_.setTree(e,r);return new sc(o)}}}function Qk(n,e,t){let i=n;return Ur(t,(r,o)=>{i=SE(i,xi(e,r),o)}),i}function uH(n,e){if(yn(e))return sc.empty();{const t=n.writeTree_.setTree(e,new di(null));return new sc(t)}}function Jk(n,e){return null!=qm(n,e)}function qm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ms(t.path,e)):null}function dH(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ui,(i,r)=>{e.push(new bn(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new bn(i,r.value))}),e}function wf(n,e){if(yn(e))return n;{const t=qm(n,e);return new sc(null!=t?new di(t):n.writeTree_.subtree(e))}}function Xk(n){return n.writeTree_.isEmpty()}function vv(n,e){return hH(Rn(),n.writeTree_,e)}function hH(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{".priority"===r?((0,B.hu)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):t=hH(xi(n,r),o,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(xi(n,".priority"),i)),t}}function B1(n,e){return _H(e,n)}function _K(n,e){if(n.snap)return hl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&hl(xi(n.path,t),e))return!0;return!1}function vK(n){return n.visible}function fH(n,e,t){let i=sc.empty();for(let r=0;r<n.length;++r){const o=n[r];if(e(o)){const l=o.path;let h;if(o.snap)hl(t,l)?(h=ms(t,l),i=SE(i,h,o.snap)):hl(l,t)&&(h=ms(l,t),i=SE(i,Rn(),o.snap.getChild(h)));else{if(!o.children)throw(0,B.g5)("WriteRecord should have .snap or .children");if(hl(t,l))h=ms(t,l),i=Qk(i,h,o.children);else if(hl(l,t))if(h=ms(l,t),yn(h))i=Qk(i,Rn(),o.children);else{const p=(0,B.DV)(o.children,_n(h));if(p){const y=p.getChild(ii(h));i=SE(i,Rn(),y)}}}}}return i}function pH(n,e,t,i,r){if(i||r){const o=wf(n.visibleWrites,e);return!r&&Xk(o)?t:r||null!=t||Jk(o,Rn())?vv(fH(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(hl(y.path,e)||hl(e,y.path))},e),t||an.EMPTY_NODE):null}{const o=qm(n.visibleWrites,e);if(null!=o)return o;{const l=wf(n.visibleWrites,e);return Xk(l)?t:null!=t||Jk(l,Rn())?vv(l,t||an.EMPTY_NODE):null}}}function V1(n,e,t,i){return pH(n.writeTree,n.treePath,e,t,i)}function eP(n,e){return function bK(n,e,t){let i=an.EMPTY_NODE;const r=qm(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(ui,(o,l)=>{i=i.updateImmediateChild(o,l)}),i;if(t){const o=wf(n.visibleWrites,e);return t.forEachChild(ui,(l,h)=>{const p=vv(wf(o,new Hn(l)),h);i=i.updateImmediateChild(l,p)}),dH(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return dH(wf(n.visibleWrites,e)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,e)}function mH(n,e,t,i){return function wK(n,e,t,i,r){(0,B.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=xi(e,t);if(Jk(n.visibleWrites,o))return null;{const l=wf(n.visibleWrites,o);return Xk(l)?r.getChild(t):vv(l,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function U1(n,e){return function CK(n,e){return qm(n.visibleWrites,e)}(n.writeTree,xi(n.treePath,e))}function tP(n,e,t){return function EK(n,e,t,i){const r=xi(e,t),o=qm(n.visibleWrites,r);return null!=o?o:i.isCompleteForChild(t)?vv(wf(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function gH(n,e){return _H(xi(n.treePath,e),n.writeTree)}function _H(n,e){return{treePath:n,writeTree:e}}class SK{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,B.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,B.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(i,EE(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(i,wE(i,r.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(i,gv(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,B.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,EE(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const yH=new class xK{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class nP{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new bf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tP(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wm(this.viewCache_),o=function IK(n,e,t,i,r,o){return function DK(n,e,t,i,r,o,l){let h;const p=wf(n.visibleWrites,e),y=qm(p,Rn());if(null!=y)h=y;else{if(null==t)return[];h=vv(p,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const w=[],T=l.getCompare(),M=o?h.getReverseIteratorFrom(i,l):h.getIteratorFrom(i,l);let O=M.getNext();for(;O&&w.length<r;)0!==T(O,i)&&w.push(O),O=M.getNext();return w}}(n.writeTree,n.treePath,e,t,i,r,o)}(this.writes_,r,t,1,i,e);return 0===o.length?null:o[0]}}function vH(n,e,t,i,r,o){const l=e.eventCache;if(null!=U1(i,t))return e;{let h,p;if(yn(t))if((0,B.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Wm(e),T=eP(i,y instanceof an?y:an.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),T,o)}else{const y=V1(i,Wm(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=_n(t);if(".priority"===y){(0,B.hu)(1===vf(t),"Can't have a priority with additional path components");const w=l.getNode();p=e.serverCache.getNode();const T=mH(i,t,w,p);h=null!=T?n.filter.updatePriority(w,T):l.getNode()}else{const w=ii(t);let T;if(l.isCompleteForChild(y)){p=e.serverCache.getNode();const M=mH(i,t,l.getNode(),p);T=null!=M?l.getNode().getImmediateChild(y).updateChild(w,M):l.getNode().getImmediateChild(y)}else T=tP(i,y,e.serverCache);h=null!=T?n.filter.updateChild(l.getNode(),y,T,w,r,o):l.getNode()}}return IE(e,h,l.isFullyInitialized()||yn(t),n.filter.filtersNodes())}}function j1(n,e,t,i,r,o,l,h){const p=e.serverCache;let y;const w=l?n.filter:n.filter.getIndexedFilter();if(yn(t))y=w.updateFullNode(p.getNode(),i,null);else if(w.filtersNodes()&&!p.isFiltered()){const O=p.getNode().updateChild(t,i);y=w.updateFullNode(p.getNode(),O,null)}else{const O=_n(t);if(!p.isCompleteForPath(t)&&vf(t)>1)return e;const L=ii(t),te=p.getNode().getImmediateChild(O).updateChild(L,i);y=".priority"===O?w.updatePriority(p.getNode(),te):w.updateChild(p.getNode(),O,te,L,yH,null)}const T=cH(e,y,p.isFullyInitialized()||yn(t),w.filtersNodes());return vH(n,T,t,r,new nP(r,T,o),h)}function iP(n,e,t,i,r,o,l){const h=e.eventCache;let p,y;const w=new nP(r,e,o);if(yn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),i,l),p=IE(e,y,!0,n.filter.filtersNodes());else{const T=_n(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),i),p=IE(e,y,h.isFullyInitialized(),h.isFiltered());else{const M=ii(t),O=h.getNode().getImmediateChild(T);let L;if(yn(M))L=i;else{const H=w.getCompleteChild(T);L=null!=H?".priority"===Rk(M)&&H.getChild(zj(M)).isEmpty()?H:H.updateChild(M,i):an.EMPTY_NODE}p=O.equals(L)?e:IE(e,n.filter.updateChild(h.getNode(),T,L,M,w,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function bH(n,e){return n.eventCache.isCompleteForChild(e)}function wH(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function rP(n,e,t,i,r,o,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=yn(t)?i:new di(null).setTree(t,i);const w=e.serverCache.getNode();return y.children.inorderTraversal((T,M)=>{if(w.hasChild(T)){const L=wH(0,e.serverCache.getNode().getImmediateChild(T),M);p=j1(n,p,new Hn(T),L,r,o,l,h)}}),y.children.inorderTraversal((T,M)=>{const O=!e.serverCache.isCompleteForChild(T)&&null===M.value;if(!w.hasChild(T)&&!O){const H=wH(0,e.serverCache.getNode().getImmediateChild(T),M);p=j1(n,p,new Hn(T),H,r,o,l,h)}}),p}class LK{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Hk(i.getIndex()),o=function Qq(n){return n.loadsAllData()?new Hk(n.getIndex()):n.hasLimit()?new Zq(n):new CE(n)}(i);this.processor_=function AK(n){return{filter:n}}(o);const l=t.serverCache,h=t.eventCache,p=r.updateFullNode(an.EMPTY_NODE,l.getNode(),null),y=o.updateFullNode(an.EMPTY_NODE,h.getNode(),null),w=new bf(p,l.isFullyInitialized(),r.filtersNodes()),T=new bf(y,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=F1(T,w),this.eventGenerator_=new lK(this.query_)}get query(){return this.query_}}function UK(n,e){const t=Wm(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!yn(e)&&!t.getImmediateChild(_n(e)).isEmpty())?t.getChild(e):null}function EH(n){return 0===n.eventRegistrations_.length}function CH(n,e,t){const i=[];if(t){(0,B.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(t,r);l&&i.push(l)})}if(e){let r=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(l.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(o+1));break}}else r.push(l)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function DH(n,e,t,i){e.type===fu.MERGE&&null!==e.source.queryId&&((0,B.hu)(Wm(n.viewCache_),"We should always have a full cache before handling merges"),(0,B.hu)(L1(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,o=function NK(n,e,t,i,r){const o=new SK;let l,h;if(t.type===fu.OVERWRITE){const y=t;y.source.fromUser?l=iP(n,e,y.path,y.snap,i,r,o):((0,B.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!yn(y.path),l=j1(n,e,y.path,y.snap,i,r,h,o))}else if(t.type===fu.MERGE){const y=t;y.source.fromUser?l=function RK(n,e,t,i,r,o,l){let h=e;return i.foreach((p,y)=>{const w=xi(t,p);bH(e,_n(w))&&(h=iP(n,h,w,y,r,o,l))}),i.foreach((p,y)=>{const w=xi(t,p);bH(e,_n(w))||(h=iP(n,h,w,y,r,o,l))}),h}(n,e,y.path,y.children,i,r,o):((0,B.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),l=rP(n,e,y.path,y.children,i,r,h,o))}else if(t.type===fu.ACK_USER_WRITE){const y=t;l=y.revert?function FK(n,e,t,i,r,o){let l;if(null!=U1(i,t))return e;{const h=new nP(i,e,r),p=e.eventCache.getNode();let y;if(yn(t)||".priority"===_n(t)){let w;if(e.serverCache.isFullyInitialized())w=V1(i,Wm(e));else{const T=e.serverCache.getNode();(0,B.hu)(T instanceof an,"serverChildren would be complete if leaf node"),w=eP(i,T)}y=n.filter.updateFullNode(p,w,o)}else{const w=_n(t);let T=tP(i,w,e.serverCache);null==T&&e.serverCache.isCompleteForChild(w)&&(T=p.getImmediateChild(w)),y=null!=T?n.filter.updateChild(p,w,T,ii(t),h,o):e.eventCache.getNode().hasChild(w)?n.filter.updateChild(p,w,an.EMPTY_NODE,ii(t),h,o):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=V1(i,Wm(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,o)))}return l=e.serverCache.isFullyInitialized()||null!=U1(i,Rn()),IE(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,i,r,o):function kK(n,e,t,i,r,o,l){if(null!=U1(r,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=i.value){if(yn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return j1(n,e,t,p.getNode().getChild(t),r,o,h,l);if(yn(t)){let y=new di(null);return p.getNode().forEachChild(hu,(w,T)=>{y=y.set(new Hn(w),T)}),rP(n,e,t,y,r,o,h,l)}return e}{let y=new di(null);return i.foreach((w,T)=>{const M=xi(t,w);p.isCompleteForPath(M)&&(y=y.set(w,p.getNode().getChild(M)))}),rP(n,e,t,y,r,o,h,l)}}(n,e,y.path,y.affectedTree,i,r,o)}else{if(t.type!==fu.LISTEN_COMPLETE)throw(0,B.g5)("Unknown operation type: "+t.type);l=function PK(n,e,t,i,r){const o=e.serverCache;return vH(n,cH(e,o.getNode(),o.isFullyInitialized()||yn(t),o.isFiltered()),t,i,yH,r)}(n,e,t.path,i,o)}const p=o.getChanges();return function OK(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=L1(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(oH(L1(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,r,e,t,i);return function MK(n,e){(0,B.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,B.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,B.hu)(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,TH(n,o.changes,o.viewCache.eventCache.getNode(),null)}function TH(n,e,t,i){return function cK(n,e,t,i){const r=[],o=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function Yq(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),TE(n,r,"child_removed",e,i,t),TE(n,r,"child_added",e,i,t),TE(n,r,"child_moved",o,i,t),TE(n,r,"child_changed",e,i,t),TE(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let H1,G1;class IH{constructor(){this.views=new Map}}function oP(n,e,t,i){const r=e.source.queryId;if(null!==r){const o=n.views.get(r);return(0,B.hu)(null!=o,"SyncTree gave us an op for an invalid query."),DH(o,e,t,i)}{let o=[];for(const l of n.views.values())o=o.concat(DH(l,e,t,i));return o}}function SH(n,e,t,i,r){const l=n.views.get(e._queryIdentifier);if(!l){let h=V1(t,r?i:null),p=!1;h?p=!0:i instanceof an?(h=eP(t,i),p=!1):(h=an.EMPTY_NODE,p=!1);const y=F1(new bf(h,p,!1),new bf(i,r,!1));return new LK(e,y)}return l}function xH(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ef(n,e){let t=null;for(const i of n.views.values())t=t||UK(i,e);return t}function AH(n,e){return e._queryParams.loadsAllData()?$1(n):n.views.get(e._queryIdentifier)}function MH(n,e){return null!=AH(n,e)}function Cf(n){return null!=$1(n)}function $1(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let ZK=1;class NH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new di(null),this.pendingWriteTree_=function TK(){return{visibleWrites:sc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sP(n,e,t,i,r){return function fK(n,e,t,i,r){(0,B.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=SE(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?bv(n,new zm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Df(n,e,t=!1){const i=function mK(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function gK(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,B.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,o=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&_K(h,i.path)?r=!1:hl(i.path,h.path)&&(o=!0)),l--}return!!r&&(o?(function yK(n){n.visibleWrites=fH(n.allWrites,vK,Rn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=uH(n.visibleWrites,i.path):Ur(i.children,p=>{n.visibleWrites=uH(n.visibleWrites,xi(i.path,p))}),!0))}(n.pendingWriteTree_,e)){let o=new di(null);return null!=i.snap?o=o.set(Rn(),!0):Ur(i.children,l=>{o=o.set(new Hn(l),!0)}),bv(n,new P1(i.path,o,t))}return[]}function xE(n,e,t){return bv(n,new zm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function z1(n,e,t,i,r=!1){const o=e._path,l=n.syncPointTree_.get(o);let h=[];if(l&&("default"===e._queryIdentifier||MH(l,e))){const p=function qK(n,e,t,i){const r=e._queryIdentifier,o=[];let l=[];const h=Cf(n);if("default"===r)for(const[p,y]of n.views.entries())l=l.concat(CH(y,t,i)),EH(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||o.push(y.query));else{const p=n.views.get(r);p&&(l=l.concat(CH(p,t,i)),EH(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||o.push(p.query)))}return h&&!Cf(n)&&o.push(new(function GK(){return(0,B.hu)(H1,"Reference.ts has not been loaded"),H1}())(e._repo,e._path)),{removed:o,events:l}}(l,e,t,i);(function zK(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=p.removed;if(h=p.events,!r){const w=-1!==y.findIndex(M=>M._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(o,(M,O)=>Cf(O));if(w&&!T){const M=n.syncPointTree_.subtree(o);if(!M.isEmpty()){const O=function i7(n){return n.fold((e,t,i)=>{if(t&&Cf(t))return[$1(t)];{let r=[];return t&&(r=xH(t)),Ur(i,(o,l)=>{r=r.concat(l)}),r}})}(M);for(let L=0;L<O.length;++L){const H=O[L],te=H.query,Te=PH(n,H);n.listenProvider_.startListening(ME(te),AE(n,te),Te.hashFn,Te.onComplete)}}}!T&&y.length>0&&!i&&(w?n.listenProvider_.stopListening(ME(e),null):y.forEach(M=>{const O=n.queryToTagMap.get(q1(M));n.listenProvider_.stopListening(ME(M),O)}))}!function r7(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=q1(i),o=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(o)}}}(n,y)}return h}function OH(n,e,t,i){const r=lP(n,i);if(null!=r){const o=cP(r),l=o.path,h=o.queryId,p=ms(l,e);return uP(n,l,new zm(Yk(h),p,t))}return[]}function aP(n,e,t,i=!1){const r=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(r,(M,O)=>{const L=ms(M,r);o=o||Ef(O,L),l=l||Cf(O)});let p,h=n.syncPointTree_.get(r);h?(l=l||Cf(h),o=o||Ef(h,Rn())):(h=new IH,n.syncPointTree_=n.syncPointTree_.set(r,h)),null!=o?p=!0:(p=!1,o=an.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,L)=>{const H=Ef(L,Rn());H&&(o=o.updateImmediateChild(O,H))}));const y=MH(h,e);if(!y&&!e._queryParams.loadsAllData()){const M=q1(e);(0,B.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const O=function o7(){return ZK++}();n.queryToTagMap.set(M,O),n.tagToQueryMap.set(O,M)}let T=function WK(n,e,t,i,r,o){const l=SH(n,e,i,r,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function jK(n,e){n.eventRegistrations_.push(e)}(l,t),function HK(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ui,(o,l)=>{i.push(gv(o,l))}),t.isFullyInitialized()&&i.push(oH(t.getNode())),TH(n,i,t.getNode(),e)}(l,t)}(h,e,t,B1(n.pendingWriteTree_,r),o,p);if(!y&&!l&&!i){const M=AH(h,e);T=T.concat(function s7(n,e,t){const i=e._path,r=AE(n,e),o=PH(n,t),l=n.listenProvider_.startListening(ME(e),r,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(i);if(r)(0,B.hu)(!Cf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,w,T)=>{if(!yn(y)&&w&&Cf(w))return[$1(w).query];{let M=[];return w&&(M=M.concat(xH(w).map(O=>O.query))),Ur(T,(O,L)=>{M=M.concat(L)}),M}});for(let y=0;y<p.length;++y){const w=p[y];n.listenProvider_.stopListening(ME(w),AE(n,w))}}return l}(n,e,M))}return T}function W1(n,e,t){const r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,h)=>{const y=Ef(h,ms(l,e));if(y)return y});return pH(r,e,o,t,!0)}function bv(n,e){return RH(e,n.syncPointTree_,null,B1(n.pendingWriteTree_,Rn()))}function RH(n,e,t,i){if(yn(n.path))return kH(n,e,t,i);{const r=e.get(Rn());null==t&&null!=r&&(t=Ef(r,Rn()));let o=[];const l=_n(n.path),h=n.operationForChild(l),p=e.children.get(l);if(p&&h){const y=t?t.getImmediateChild(l):null,w=gH(i,l);o=o.concat(RH(h,p,y,w))}return r&&(o=o.concat(oP(r,n,i,t))),o}}function kH(n,e,t,i){const r=e.get(Rn());null==t&&null!=r&&(t=Ef(r,Rn()));let o=[];return e.children.inorderTraversal((l,h)=>{const p=t?t.getImmediateChild(l):null,y=gH(i,l),w=n.operationForChild(l);w&&(o=o.concat(kH(w,h,p,y)))}),r&&(o=o.concat(oP(r,n,i,t))),o}function PH(n,e){const t=e.query,i=AE(n,t);return{hashFn:()=>(function BK(n){return n.viewCache_.serverCache.getNode()}(e)||an.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function e7(n,e,t){const i=lP(n,t);if(i){const r=cP(i),o=r.path,l=r.queryId,h=ms(o,e);return uP(n,o,new DE(Yk(l),h))}return[]}(n,t._path,i):function XK(n,e){return bv(n,new DE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function X5(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return z1(n,t,null,o)}}}}function AE(n,e){const t=q1(e);return n.queryToTagMap.get(t)}function q1(n){return n._path.toString()+"$"+n._queryIdentifier}function lP(n,e){return n.tagToQueryMap.get(e)}function cP(n){const e=n.indexOf("$");return(0,B.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Hn(n.substr(0,e))}}function uP(n,e,t){const i=n.syncPointTree_.get(e);return(0,B.hu)(i,"Missing sync point for query tag that we're tracking"),oP(i,t,B1(n.pendingWriteTree_,e),null)}function ME(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function YK(){return(0,B.hu)(G1,"Reference.ts has not been loaded"),G1}())(n._repo,n._path):n}class dP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new dP(t)}node(){return this.node_}}class hP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=xi(this.path_,e);return new hP(this.syncTree_,t)}node(){return W1(this.syncTree_,this.path_)}}const a7=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},FH=function(n,e,t){return n&&"object"==typeof n?((0,B.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?l7(n[".sv"],e,t):"object"==typeof n[".sv"]?c7(n[".sv"],e):void(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},l7=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,B.hu)(!1,"Unexpected server value: "+n)},c7=function(n,e,t){n.hasOwnProperty("increment")||(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,B.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,B.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return"number"!=typeof l?i:l+i},LH=function(n,e,t,i){return pP(e,new hP(t,n),i)},fP=function(n,e,t){return pP(n,new dP(e),t)};function pP(n,e,t){const i=n.getPriority().val(),r=FH(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,h=FH(l.getValue(),e,t);return h!==l.getValue()||r!==l.getPriority().val()?new fv(h,Vi(r)):n}{const l=n;return o=l,r!==l.getPriority().val()&&(o=o.updatePriority(new fv(r))),l.forEachChild(ui,(h,p)=>{const y=pP(p,e.getImmediateChild(h),t);y!==p&&(o=o.updateImmediateChild(h,y))}),o}}class mP{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function K1(n,e){let t=e instanceof Hn?e:new Hn(e),i=n,r=_n(t);for(;null!==r;){const o=(0,B.DV)(i.node.children,r)||{children:{},childCount:0};i=new mP(r,i,o),t=ii(t),r=_n(t)}return i}function Km(n){return n.node.value}function gP(n,e){n.node.value=e,_P(n)}function BH(n){return n.node.childCount>0}function Y1(n,e){Ur(n.node.children,(t,i)=>{e(new mP(t,n,i))})}function VH(n,e,t,i){t&&!i&&e(n),Y1(n,r=>{VH(r,e,!0,i)}),t&&i&&e(n)}function NE(n){return new Hn(null===n.parent?n.name:NE(n.parent)+"/"+n.name)}function _P(n){null!==n.parent&&function h7(n,e,t){const i=function u7(n){return void 0===Km(n)&&!BH(n)}(t),r=(0,B.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,_P(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,_P(n))}(n.parent,n.name,n)}const f7=/[\[\].#$\/\u0000-\u001F\u007F]/,p7=/[\[\].#$\u0000-\u001F\u007F]/,yP=10485760,Z1=function(n){return"string"==typeof n&&0!==n.length&&!f7.test(n)},UH=function(n){return"string"==typeof n&&0!==n.length&&!p7.test(n)},OE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!E1(n)||n&&"object"==typeof n&&(0,B.r3)(n,".sv")},pu=function(n,e,t,i){i&&void 0===e||RE((0,B.gK)(n,"value"),e,t)},RE=function(n,e,t){const i=t instanceof Hn?new Mq(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+$m(i));if("function"==typeof e)throw new Error(n+"contains a function "+$m(i)+" with contents = "+e.toString());if(E1(e))throw new Error(n+"contains "+e.toString()+" "+$m(i));if("string"==typeof e&&e.length>yP/3&&(0,B.ug)(e)>yP)throw new Error(n+"contains a string greater than "+yP+" utf8 bytes "+$m(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,o=!1;if(Ur(e,(l,h)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!Z1(l)))throw new Error(n+" contains an invalid key ("+l+") "+$m(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Nq(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,B.ug)(e),Wj(n)})(i,l),RE(n,h,i),function Oq(n){const e=n.parts_.pop();n.byteLength_-=(0,B.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&o)throw new Error(n+' contains ".value" child '+$m(i)+" in addition to actual children.")}},jH=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,B.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];Ur(e,(l,h)=>{const p=new Hn(l);if(RE(r,h,xi(t,p)),".priority"===Rk(p)&&!OE(h))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(p)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const o=_E(i);for(let l=0;l<o.length;l++)if((".priority"!==o[l]||l!==o.length-1)&&!Z1(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Aq);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&hl(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,o)},vP=function(n,e,t){if(!t||void 0!==e){if(E1(e))throw new Error((0,B.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!OE(e))throw new Error((0,B.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},kE=function(n,e,t,i){if(!(i&&void 0===t||Z1(t)))throw new Error((0,B.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},PE=function(n,e,t,i){if(!(i&&void 0===t||UH(t)))throw new Error((0,B.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_7=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),PE(n,e,t,i)},fl=function(n,e){if(".info"===_n(e))throw new Error(n+" failed = Can't modify data under /.info/")},HH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Z1(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),UH(n)}(t))throw new Error((0,B.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class y7{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Q1(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();null!==t&&!kk(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(r)}t&&n.eventLists_.push(t)}function $H(n,e,t){Q1(n,t),GH(n,i=>kk(i,e))}function wa(n,e,t){Q1(n,t),GH(n,i=>hl(i,e)||hl(e,i))}function GH(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(v7(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function v7(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();jm&&Vr("event: "+t.toString()),dv(i)}}}const zH="repo_interrupt",b7=25;class w7{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new y7,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=k1(),this.transactionQueueTree_=new mP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function WH(n){const t=n.infoData_.getNode(new Hn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function FE(n){return a7({timestamp:WH(n)})}function qH(n,e,t,i,r){n.dataUpdateCount++;const o=new Hn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(r)if(i){const p=(0,B.UI)(t,y=>Vi(y));l=function t7(n,e,t,i){const r=lP(n,i);if(r){const o=cP(r),l=o.path,h=o.queryId,p=ms(l,e),y=di.fromObject(t);return uP(n,l,new yv(Yk(h),p,y))}return[]}(n.serverSyncTree_,o,p,r)}else{const p=Vi(t);l=OH(n.serverSyncTree_,o,p,r)}else if(i){const p=(0,B.UI)(t,y=>Vi(y));l=function JK(n,e,t){const i=di.fromObject(t);return bv(n,new yv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,o,p)}else{const p=Vi(t);l=xE(n.serverSyncTree_,o,p)}let h=o;l.length>0&&(h=Ev(n,o)),wa(n.eventQueue_,h,l)}function KH(n,e){bP(n,"connected",e),!1===e&&function I7(n){wv(n,"onDisconnectEvents");const e=FE(n),t=k1();Wk(n.onDisconnect_,Rn(),(r,o)=>{const l=LH(r,o,n.serverSyncTree_,e);_v(t,r,l)});let i=[];Wk(t,Rn(),(r,o)=>{i=i.concat(xE(n.serverSyncTree_,r,o));const l=DP(n,r);Ev(n,l)}),n.onDisconnect_=k1(),wa(n.eventQueue_,Rn(),i)}(n)}function bP(n,e,t){const i=new Hn("/.info/"+e),r=Vi(t);n.infoData_.updateSnapshot(i,r);const o=xE(n.infoSyncTree_,i,r);wa(n.eventQueue_,i,o)}function J1(n){return n.nextWriteId_++}function wP(n,e,t,i,r){wv(n,"set",{path:e.toString(),value:t,priority:i});const o=FE(n),l=Vi(t,i),h=W1(n.serverSyncTree_,e),p=fP(l,h,o),y=J1(n),w=sP(n.serverSyncTree_,e,p,y,!0);Q1(n.eventQueue_,w),n.server_.put(e.toString(),l.val(!0),(M,O)=>{const L="ok"===M;L||Uo("set at "+e+" failed: "+M);const H=Df(n.serverSyncTree_,y,!L);wa(n.eventQueue_,e,H),Tf(0,r,M,O)});const T=DP(n,e);Ev(n,T),wa(n.eventQueue_,T,[])}function S7(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&zk(n.onDisconnect_,e),Tf(0,t,i,r)})}function YH(n,e,t,i){const r=Vi(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(o,l)=>{"ok"===o&&_v(n.onDisconnect_,e,r),Tf(0,i,o,l)})}function EP(n,e,t){let i;i=".info"===_n(e._path)?z1(n.infoSyncTree_,e,t):z1(n.serverSyncTree_,e,t),$H(n.eventQueue_,e._path,i)}function ZH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(zH)}function wv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Vr(t,...e)}function Tf(n,e,t,i){e&&dv(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let o=r;i&&(o+=": "+i);const l=new Error(o);l.code=r,e(l)}})}function CP(n,e,t){return W1(n.serverSyncTree_,e,t)||an.EMPTY_NODE}function X1(n,e=n.transactionQueueTree_){if(e||ex(n,e),Km(e)){const t=JH(n,e);(0,B.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function R7(n,e,t){const i=t.map(y=>y.currentWriteId),r=CP(n,e,i);let o=r;const l=r.hash();for(let y=0;y<t.length;y++){const w=t[y];(0,B.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const T=ms(e,w.path);o=o.updateChild(T,w.currentOutputSnapshotRaw)}const h=o.val(!0),p=e;n.server_.put(p.toString(),h,y=>{wv(n,"transaction put response",{path:p.toString(),status:y});let w=[];if("ok"===y){const T=[];for(let M=0;M<t.length;M++)t[M].status=2,w=w.concat(Df(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&T.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();ex(n,K1(n.transactionQueueTree_,e)),X1(n,n.transactionQueueTree_),wa(n.eventQueue_,e,w);for(let M=0;M<T.length;M++)dv(T[M])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Uo("transaction at "+p.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}Ev(n,e)}},l)}(n,NE(e),t)}else BH(e)&&Y1(e,t=>{X1(n,t)})}function Ev(n,e){const t=QH(n,e),i=NE(t);return function k7(n,e,t){if(0===e.length)return;const i=[];let r=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],y=ms(t,p.path);let T,w=!1;if((0,B.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,T=p.abortReason,r=r.concat(Df(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=b7)w=!0,T="maxretry",r=r.concat(Df(n.serverSyncTree_,p.currentWriteId,!0));else{const M=CP(n,p.path,l);p.currentInputSnapshot=M;const O=e[h].update(M.val());if(void 0!==O){RE("transaction failed: Data returned ",O,p.path);let L=Vi(O);"object"==typeof O&&null!=O&&(0,B.r3)(O,".priority")||(L=L.updatePriority(M.getPriority()));const te=p.currentWriteId,Te=FE(n),Ne=fP(L,M,Te);p.currentOutputSnapshotRaw=L,p.currentOutputSnapshotResolved=Ne,p.currentWriteId=J1(n),l.splice(l.indexOf(te),1),r=r.concat(sP(n.serverSyncTree_,p.path,Ne,p.currentWriteId,p.applyLocally)),r=r.concat(Df(n.serverSyncTree_,te,!0))}else w=!0,T="nodata",r=r.concat(Df(n.serverSyncTree_,p.currentWriteId,!0))}wa(n.eventQueue_,t,r),r=[],w&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&i.push("nodata"===T?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(T),!1,null)))}ex(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)dv(i[h]);X1(n,n.transactionQueueTree_)}(n,JH(n,t),i),i}function QH(n,e){let t,i=n.transactionQueueTree_;for(t=_n(e);null!==t&&void 0===Km(i);)i=K1(i,t),t=_n(e=ii(e));return i}function JH(n,e){const t=[];return XH(n,e,t),t.sort((i,r)=>i.order-r.order),t}function XH(n,e,t){const i=Km(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);Y1(e,r=>{XH(n,r,t)})}function ex(n,e){const t=Km(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,gP(e,t.length>0?t:void 0)}Y1(e,i=>{ex(n,i)})}function DP(n,e){const t=NE(QH(n,e)),i=K1(n.transactionQueueTree_,e);return function d7(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{TP(n,r)}),TP(n,i),VH(i,r=>{TP(n,r)}),t}function TP(n,e){const t=Km(e);if(t){const i=[];let r=[],o=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,B.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):((0,B.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),r=r.concat(Df(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&i.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?gP(e,void 0):t.length=o+1,wa(n.eventQueue_,NE(e),r);for(let l=0;l<i.length;l++)dv(i[l])}}const IP=function(n,e){const t=L7(n),i=t.namespace;return"firebase.com"===t.domain&&uu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&uu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Uo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Sk(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Hn(t.pathString)}},L7=function(n){let e="",t="",i="",r="",o="",l=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let w=n.indexOf("/");-1===w&&(w=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(w,T)),w<T&&(r=function P7(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(w,T)));const M=function F7(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Uo(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(l="https"===h||"wss"===h,p=parseInt(e.substring(y+1),10)):y=e.length;const O=e.slice(0,y);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const L=e.indexOf(".");i=e.substring(0,L).toLowerCase(),t=e.substring(L+1),o=i}"ns"in M&&(o=M.ns)}return{host:e,port:p,domain:t,subdomain:i,secure:l,scheme:h,pathString:r,namespace:o}};class e${constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,B.Pz)(this.snapshot.exportVal())}}class t${constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class SP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,B.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class n${constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new B.BH;return S7(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){fl("OnDisconnect.remove",this._path);const e=new B.BH;return YH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){fl("OnDisconnect.set",this._path),pu("OnDisconnect.set",e,this._path,!1);const t=new B.BH;return YH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){fl("OnDisconnect.setWithPriority",this._path),pu("OnDisconnect.setWithPriority",e,this._path,!1),vP("OnDisconnect.setWithPriority",t,!1);const i=new B.BH;return function x7(n,e,t,i,r){const o=Vi(t,i);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,h)=>{"ok"===l&&_v(n.onDisconnect_,e,o),Tf(0,r,l,h)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){fl("OnDisconnect.update",this._path),jH("OnDisconnect.update",e,this._path,!1);const t=new B.BH;return function A7(n,e,t,i){if((0,B.xb)(t))return Vr("onDisconnect().update() called with empty data.  Don't do anything."),void Tf(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,o)=>{"ok"===r&&Ur(t,(l,h)=>{const p=Vi(h);_v(n.onDisconnect_,xi(e,l),p)}),Tf(0,i,r,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Gs{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return yn(this._path)?null:Rk(this._path)}get ref(){return new pl(this._repo,this._path)}get _queryIdentifier(){const e=aH(this._queryParams),t=Dk(e);return"{}"===t?"default":t}get _queryObject(){return aH(this._queryParams)}isEqual(e){if(!((e=(0,B.m9)(e))instanceof Gs))return!1;const t=this._repo===e._repo,i=kk(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function xq(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function tx(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function If(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===hu){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Nd)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==du)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===ui){if(null!=e&&!OE(e)||null!=t&&!OE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,B.hu)(n.getIndex()instanceof Vk||n.getIndex()===Uk,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function nx(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class pl extends Gs{constructor(e,t){super(e,t,new N1,!1)}get parent(){const e=zj(this._path);return null===e?null:new pl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ym{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Hn(e),i=Zm(this.ref,e);return new Ym(this._node.getChild(t),i,ui)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Ym(r,Zm(this.ref,i),ui)))}hasChild(e){const t=new Hn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function i$(n,e){return(n=(0,B.m9)(n))._checkNotDeleted("ref"),void 0!==e?Zm(n._root,e):n._root}function r$(n,e){(n=(0,B.m9)(n))._checkNotDeleted("refFromURL");const t=IP(e,n._repo.repoInfo_.nodeAdmin);HH("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&uu("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),i$(n,t.path.toString())}function Zm(n,e){return null===_n((n=(0,B.m9)(n))._path)?_7("child","path",e,!1):PE("child","path",e,!1),new pl(n._repo,xi(n._path,e))}function xP(n,e){n=(0,B.m9)(n),fl("set",n._path),pu("set",e,n._path,!1);const t=new B.BH;return wP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function H7(n,e){jH("update",e,n._path,!1);const t=new B.BH;return function T7(n,e,t,i){wv(n,"update",{path:e.toString(),value:t});let r=!0;const o=FE(n),l={};if(Ur(t,(h,p)=>{r=!1,l[h]=LH(xi(e,h),Vi(p),n.serverSyncTree_,o)}),r)Vr("update() called with empty data.  Don't do anything."),Tf(0,i,"ok",void 0);else{const h=J1(n),p=function QK(n,e,t,i){!function pK(n,e,t,i){(0,B.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=Qk(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=di.fromObject(t);return bv(n,new yv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,l,h);Q1(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,w)=>{const T="ok"===y;T||Uo("update at "+e+" failed: "+y);const M=Df(n.serverSyncTree_,h,!T),O=M.length>0?Ev(n,e):e;wa(n.eventQueue_,O,M),Tf(0,i,y,w)}),Ur(t,y=>{const w=DP(n,xi(e,y));Ev(n,w)}),wa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function $7(n){n=(0,B.m9)(n);const e=new SP(()=>{}),t=new LE(e);return function D7(n,e,t){const i=function n7(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(y,w)=>{const T=ms(y,t);i=i||Ef(w,T)});let r=n.syncPointTree_.get(t);r?i=i||Ef(r,Rn()):(r=new IH,n.syncPointTree_=n.syncPointTree_.set(t,r));const o=null!=i,l=o?new bf(i,!0,!1):null;return function VK(n){return L1(n.viewCache_)}(SH(r,e,B1(n.pendingWriteTree_,e._path),o?l.getNode():an.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const o=Vi(r).withIndex(e._queryParams.getIndex());let l;if(aP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=xE(n.serverSyncTree_,e._path,o);else{const h=AE(n.serverSyncTree_,e);l=OH(n.serverSyncTree_,e._path,o,h)}return wa(n.eventQueue_,e._path,l),z1(n.serverSyncTree_,e,t,null,!0),o},r=>(wv(n,"get for query "+(0,B.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new Ym(i,new pl(n._repo,n._path),n._queryParams.getIndex()))}class LE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new e$("value",this,new Ym(e.snapshotNode,new pl(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new t$(this,e,t):null}matches(e){return e instanceof LE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ix{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new t$(this,e,t):null}createEvent(e,t){(0,B.hu)(null!=e.childName,"Child events should have a childName.");const i=Zm(new pl(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new e$(e.type,this,new Ym(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ix&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function BE(n,e,t,i,r){let o;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){const p=t,y=(w,T)=>{EP(n._repo,n,h),p(w,T)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new SP(t,o||void 0),h="value"===e?new LE(l):new ix(e,l);return function M7(n,e,t){let i;i=".info"===_n(e._path)?aP(n.infoSyncTree_,e,t):aP(n.serverSyncTree_,e,t),$H(n.eventQueue_,e._path,i)}(n._repo,n,h),()=>EP(n._repo,n,h)}function AP(n,e,t,i){return BE(n,"value",e,t,i)}function o$(n,e,t,i){return BE(n,"child_added",e,t,i)}function s$(n,e,t,i){return BE(n,"child_changed",e,t,i)}function a$(n,e,t,i){return BE(n,"child_moved",e,t,i)}function l$(n,e,t,i){return BE(n,"child_removed",e,t,i)}function c$(n,e,t){let i=null;const r=t?new SP(t):null;"value"===e?i=new LE(r):e&&(i=new ix(e,r)),EP(n._repo,n,i)}class ac{}class u$ extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){pu("endAt",this._value,e._path,!0);const t=Gk(e._queryParams,this._value,this._key);if(nx(t),If(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Gs(e._repo,e._path,t,e._orderByCalled)}}class z7 extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){pu("endBefore",this._value,e._path,!1);const t=function tK(n,e,t){let i,r;return n.index_===hu?("string"==typeof e&&(e=rH(e)),r=Gk(n,e,t)):(i=null==t?Nd:rH(t),r=Gk(n,e,i)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(nx(t),If(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Gs(e._repo,e._path,t,e._orderByCalled)}}class d$ extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){pu("startAt",this._value,e._path,!0);const t=$k(e._queryParams,this._value,this._key);if(nx(t),If(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Gs(e._repo,e._path,t,e._orderByCalled)}}class K7 extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){pu("startAfter",this._value,e._path,!1);const t=function eK(n,e,t){let i;if(n.index_===hu)"string"==typeof e&&(e=iH(e)),i=$k(n,e,t);else{let r;r=null==t?du:iH(t),i=$k(n,e,r)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(nx(t),If(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Gs(e._repo,e._path,t,e._orderByCalled)}}class Z7 extends ac{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Gs(e._repo,e._path,function Jq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class J7 extends ac{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Gs(e._repo,e._path,function Xq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class eY extends ac{constructor(e){super(),this._path=e}_apply(e){tx(e,"orderByChild");const t=new Hn(this._path);if(yn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new Vk(t),r=O1(e._queryParams,i);return If(r),new Gs(e._repo,e._path,r,!0)}}class nY extends ac{_apply(e){tx(e,"orderByKey");const t=O1(e._queryParams,hu);return If(t),new Gs(e._repo,e._path,t,!0)}}class rY extends ac{_apply(e){tx(e,"orderByPriority");const t=O1(e._queryParams,ui);return If(t),new Gs(e._repo,e._path,t,!0)}}class sY extends ac{_apply(e){tx(e,"orderByValue");const t=O1(e._queryParams,Uk);return If(t),new Gs(e._repo,e._path,t,!0)}}class lY extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(pu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new u$(this._value,this._key)._apply(new d$(this._value,this._key)._apply(e))}}function lc(n,...e){let t=(0,B.m9)(n);for(const i of e)t=i._apply(t);return t}(function $K(n){(0,B.hu)(!H1,"__referenceConstructor has already been defined"),H1=n})(pl),function KK(n){(0,B.hu)(!G1,"__referenceConstructor has already been defined"),G1=n}(pl);const MP={};function f$(n,e,t,i,r){let o=i||n.options.databaseURL;void 0===o&&(n.options.projectId||uu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vr("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,l=IP(o,r),h=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,o=`http://${y}?ns=${h.namespace}`,l=IP(o,r),h=l.repoInfo):p=!l.repoInfo.secure;const w=r&&p?new gE(gE.OWNER):new iq(n.name,n.options,e);HH("Invalid Firebase Database URL",l),yn(l.path)||uu("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function fY(n,e,t,i){let r=MP[e.name];r||(r={},MP[e.name]=r);let o=r[n.toURLString()];return o&&uu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new w7(n,false,t,i),r[n.toURLString()]=o,o}(h,n,w,new nq(n.name,t));return new mY(T,n)}class mY{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function E7(n,e,t){if(n.stats_=Mk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new R1(n.repoInfo_,(i,r,o,l)=>{qH(n,i,r,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>KH(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.Pz)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Gm(n.repoInfo_,e,(i,r,o,l)=>{qH(n,i,r,o,l)},i=>{KH(n,i)},i=>{!function C7(n,e){Ur(e,(t,i)=>{bP(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function sq(n,e){const t=n.toString();return Ak[t]||(Ak[t]=e()),Ak[t]}(n.repoInfo_,()=>new aK(n.stats_,n.server_)),n.infoData_=new nK,n.infoSyncTree_=new NH({startListening:(i,r,o,l)=>{let h=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(h=xE(n.infoSyncTree_,i._path,p),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),bP(n,"connected",!1),n.serverSyncTree_=new NH({startListening:(i,r,o,l)=>(n.server_.listen(i,o,r,(h,p)=>{const y=l(h,p);wa(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pl(this._repo,Rn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function hY(n,e){const t=MP[e];(!t||t[n.key]!==n)&&uu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),ZH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&uu("Cannot call "+e+" on a deleted database.")}}function p$(){Rj.IS_TRANSPORT_INITIALIZED&&Uo("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function gY(){p$(),yf.forceDisallow()}function _Y(){p$(),hv.forceDisallow(),yf.forceAllow()}function wY(n,e){fj(n,e)}const CY={".sv":"timestamp"};class IY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Gm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Gm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function EY(n){lj(ps.SDK_VERSION),(0,ps._registerComponent)(new ic.wA("database",(e,{instanceIdentifier:t})=>f$(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ps.registerVersion)(sj,"0.13.5",n),(0,ps.registerVersion)(sj,"0.13.5","esm2017")}();const MY=new rc.Yd("@firebase/database-compat"),m$=function(n){MY.warn("FIREBASE WARNING: "+n)};class RY{constructor(e){this._delegate=e}cancel(e){(0,B.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,B.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,B.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,B.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,B.Dv)("OnDisconnect.set",1,2,arguments.length),(0,B.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,B.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,B.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),o=>i(o)),r}update(e,t){if((0,B.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let o=0;o<e.length;++o)r[""+o]=e[o];e=r,m$("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,B.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class kY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,B.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Sf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,B.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,B.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,B.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,B.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,B.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),PE("DataSnapshot.child","path",e,!1),new Sf(this._database,this._delegate.child(e))}hasChild(e){return(0,B.Dv)("DataSnapshot.hasChild",1,1,arguments.length),PE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,B.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,B.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,B.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Sf(this._database,t)))}hasChildren(){return(0,B.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,B.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,B.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ea(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class _o{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var o;(0,B.Dv)("Query.on",2,4,arguments.length),(0,B.Wj)("Query.on","callback",t,!1);const l=_o.getCancelAndContextArgs_("Query.on",i,r),h=(y,w)=>{t.call(l.context,new Sf(this.database,y),w)};h.userCallback=t,h.context=l.context;const p=null===(o=l.cancel)||void 0===o?void 0:o.bind(l.context);switch(e){case"value":return AP(this._delegate,h,p),t;case"child_added":return o$(this._delegate,h,p),t;case"child_removed":return l$(this._delegate,h,p),t;case"child_changed":return s$(this._delegate,h,p),t;case"child_moved":return a$(this._delegate,h,p),t;default:throw new Error((0,B.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,B.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,B.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,B.Wj)("Query.off","callback",t,!0),(0,B.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,c$(this._delegate,e,r)}else c$(this._delegate,e)}get(){return $7(this._delegate).then(e=>new Sf(this.database,e))}once(e,t,i,r){(0,B.Dv)("Query.once",1,4,arguments.length),(0,B.Wj)("Query.once","callback",t,!0);const o=_o.getCancelAndContextArgs_("Query.once",i,r),l=new B.BH,h=(y,w)=>{const T=new Sf(this.database,y);t&&t.call(o.context,T,w),l.resolve(T)};h.userCallback=t,h.context=o.context;const p=y=>{o.cancel&&o.cancel.call(o.context,y),l.reject(y)};switch(e){case"value":AP(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":o$(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":l$(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":s$(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":a$(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,B.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,B.Dv)("Query.limitToFirst",1,1,arguments.length),new _o(this.database,lc(this._delegate,function Q7(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Z7(n)}(e)))}limitToLast(e){return(0,B.Dv)("Query.limitToLast",1,1,arguments.length),new _o(this.database,lc(this._delegate,function X7(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new J7(n)}(e)))}orderByChild(e){return(0,B.Dv)("Query.orderByChild",1,1,arguments.length),new _o(this.database,lc(this._delegate,function tY(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return PE("orderByChild","path",n,!1),new eY(n)}(e)))}orderByKey(){return(0,B.Dv)("Query.orderByKey",0,0,arguments.length),new _o(this.database,lc(this._delegate,function iY(){return new nY}()))}orderByPriority(){return(0,B.Dv)("Query.orderByPriority",0,0,arguments.length),new _o(this.database,lc(this._delegate,function oY(){return new rY}()))}orderByValue(){return(0,B.Dv)("Query.orderByValue",0,0,arguments.length),new _o(this.database,lc(this._delegate,function aY(){return new sY}()))}startAt(e=null,t){return(0,B.Dv)("Query.startAt",0,2,arguments.length),new _o(this.database,lc(this._delegate,function q7(n=null,e){return kE("startAt","key",e,!0),new d$(n,e)}(e,t)))}startAfter(e=null,t){return(0,B.Dv)("Query.startAfter",0,2,arguments.length),new _o(this.database,lc(this._delegate,function Y7(n,e){return kE("startAfter","key",e,!0),new K7(n,e)}(e,t)))}endAt(e=null,t){return(0,B.Dv)("Query.endAt",0,2,arguments.length),new _o(this.database,lc(this._delegate,function G7(n,e){return kE("endAt","key",e,!0),new u$(n,e)}(e,t)))}endBefore(e=null,t){return(0,B.Dv)("Query.endBefore",0,2,arguments.length),new _o(this.database,lc(this._delegate,function W7(n,e){return kE("endBefore","key",e,!0),new z7(n,e)}(e,t)))}equalTo(e,t){return(0,B.Dv)("Query.equalTo",1,2,arguments.length),new _o(this.database,lc(this._delegate,function cY(n,e){return kE("equalTo","key",e,!0),new lY(n,e)}(e,t)))}toString(){return(0,B.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,B.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,B.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof _o))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,B.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,B.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,B.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new Ea(this.database,new pl(this._delegate._repo,this._delegate._path))}}class Ea extends _o{constructor(e,t){super(e,new Gs(t._repo,t._path,new N1,!1)),this.database=e,this._delegate=t}getKey(){return(0,B.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,B.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ea(this.database,Zm(this._delegate,e))}getParent(){(0,B.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ea(this.database,e):null}getRoot(){return(0,B.Dv)("Reference.root",0,0,arguments.length),new Ea(this.database,this._delegate.root)}set(e,t){(0,B.Dv)("Reference.set",1,2,arguments.length),(0,B.Wj)("Reference.set","onComplete",t,!0);const i=xP(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,B.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let o=0;o<e.length;++o)r[""+o]=e[o];e=r,m$("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fl("Reference.update",this._delegate._path),(0,B.Wj)("Reference.update","onComplete",t,!0);const i=H7(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,B.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,B.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function j7(n,e,t){if(fl("setWithPriority",n._path),pu("setWithPriority",e,n._path,!1),vP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new B.BH;return wP(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),o=>i(o)),r}remove(e){(0,B.Dv)("Reference.remove",0,1,arguments.length),(0,B.Wj)("Reference.remove","onComplete",e,!0);const t=function V7(n){return fl("remove",n._path),xP(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,B.Dv)("Reference.transaction",1,3,arguments.length),(0,B.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,B.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,B.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function SY(n,e,t){var i;if(n=(0,B.m9)(n),fl("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=t?.applyLocally)||void 0===i||i,o=new B.BH,h=AP(n,()=>{});return function O7(n,e,t,i,r,o){wv(n,"transaction on "+e);const l={path:e,update:t,onComplete:i,status:null,order:uj(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=CP(n,e,void 0);l.currentInputSnapshot=h;const p=l.update(h.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{RE("transaction failed: Data returned ",p,l.path),l.status=0;const y=K1(n.transactionQueueTree_,e),w=Km(y)||[];let T;w.push(l),gP(y,w),"object"==typeof p&&null!==p&&(0,B.r3)(p,".priority")?(T=(0,B.DV)(p,".priority"),(0,B.hu)(OE(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(W1(n.serverSyncTree_,e)||an.EMPTY_NODE).getPriority().val();const M=FE(n),O=Vi(p,T),L=fP(O,h,M);l.currentOutputSnapshotRaw=O,l.currentOutputSnapshotResolved=L,l.currentWriteId=J1(n);const H=sP(n.serverSyncTree_,e,L,l.currentWriteId,l.applyLocally);wa(n.eventQueue_,e,H),X1(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,w)=>{let T=null;p?o.reject(p):(T=new Ym(w,new pl(n._repo,n._path),ui),o.resolve(new IY(y,T)))},h,r),o.promise}(this._delegate,e,{applyLocally:i}).then(o=>new kY(o.committed,new Sf(this.database,o.snapshot)));return t&&r.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),r}setPriority(e,t){(0,B.Dv)("Reference.setPriority",1,2,arguments.length),(0,B.Wj)("Reference.setPriority","onComplete",t,!0);const i=function U7(n,e){n=(0,B.m9)(n),fl("setPriority",n._path),vP("setPriority",e,!1);const t=new B.BH;return wP(n._repo,xi(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,B.Dv)("Reference.push",0,2,arguments.length),(0,B.Wj)("Reference.push","onComplete",t,!0);const i=function B7(n,e){n=(0,B.m9)(n),fl("push",n._path),pu("push",e,n._path,!0);const t=WH(n._repo),i=Kq(t),r=Zm(n,i),o=Zm(n,i);let l;return l=null!=e?xP(o,e).then(()=>o):Promise.resolve(o),r.then=l.then.bind(l),r.catch=l.then.bind(l,void 0),r}(this._delegate,e),r=i.then(l=>new Ea(this.database,l));t&&r.then(()=>t(null),l=>t(l));const o=new Ea(this.database,i);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return fl("Reference.onDisconnect",this._delegate._path),new RY(new n$(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class VE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:gY,forceLongPolling:_Y}}useEmulator(e,t,i={}){!function yY(n,e,t,i={}){(n=(0,B.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&uu("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&uu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new gE(gE.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,B.Sg)(i.mockUserToken,n.app.options.projectId);o=new gE(l)}!function dY(n,e,t,i){n.repoInfo_=new Sk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,o)}(this._delegate,e,t,i)}ref(e){if((0,B.Dv)("database.ref",0,1,arguments.length),e instanceof Ea){const t=r$(this._delegate,e.toString());return new Ea(this,t)}{const t=i$(this._delegate,e);return new Ea(this,t)}}refFromURL(e){(0,B.Dv)("database.refFromURL",1,1,arguments.length);const i=r$(this._delegate,e);return new Ea(this,i)}goOffline(){return(0,B.Dv)("database.goOffline",0,0,arguments.length),function vY(n){(n=(0,B.m9)(n))._checkNotDeleted("goOffline"),ZH(n._repo)}(this._delegate)}goOnline(){return(0,B.Dv)("database.goOnline",0,0,arguments.length),function bY(n){(n=(0,B.m9)(n))._checkNotDeleted("goOnline"),function N7(n){n.persistentConnection_&&n.persistentConnection_.resume(zH)}(n._repo)}(this._delegate)}}VE.ServerValue={TIMESTAMP:function DY(){return CY}(),increment:n=>function TY(n){return{".sv":{increment:n}}}(n)};var FY=Object.freeze({__proto__:null,initStandalone:function PY({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:o=!1}){lj(t);const l=new ic.zt("auth-internal",new ic.H0("database-standalone"));return l.setComponent(new ic.wA("auth-internal",()=>i,"PRIVATE")),{instance:new VE(f$(n,l,void 0,e,o),n),namespace:r}}});const LY=VE.ServerValue;!function BY(n){n.INTERNAL.registerComponent(new ic.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new VE(r,i)},"PUBLIC").setServiceProps({Reference:Ea,Query:_o,Database:VE,DataSnapshot:Sf,enableLogging:wY,INTERNAL:FY,ServerValue:LY}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.5")}(bk.Z);var VY=F(4552);class UY extends tn.x{constructor(e=1/0,t=1/0,i=VY.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:l}=this;t||(i.push(e),!r&&i.push(o.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let l=0;l<o.length&&!e.closed;l+=i?1:2)e.next(o[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){const l=t.now();let h=0;for(let p=1;p<i.length&&i[p]<=l;p+=2)h=p;h&&i.splice(0,h+1)}}}function NP(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,(0,oj.B)({connector:()=>new UY(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function g$(n,e){return(0,ur.m)(e)?(0,Dn.w)(()=>n,e):(0,Dn.w)(()=>n)}var OP=F(5137);F(301);const y$=new Map,zY={activated:!1,tokenObservers:[]},WY={initialized:!1,enabled:!1};function jr(n){return y$.get(n)||zY}function cc(n,e){y$.set(n,e)}function ox(){return WY}const kP="https://content-firebaseappcheck.googleapis.com/v1",YY="exchangeDebugToken",v$={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class QY{constructor(e,t,i,r,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Se.Z)(function*(){t.stop();try{t.pending=new B.BH,yield function JY(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new B.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const gs=new B.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function LP(){return(LP=(0,Se.Z)(function*({url:n,body:e},t){var i,r;const o={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const O=yield l.getHeartbeatsHeader();O&&(o["X-Firebase-Client"]=O)}const h={method:"POST",body:JSON.stringify(e),headers:o};let p,y;try{p=yield fetch(n,h)}catch(O){throw gs.create("fetch-network-error",{originalErrorMessage:null===(i=O)||void 0===i?void 0:i.message})}if(200!==p.status)throw gs.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(O){throw gs.create("fetch-parse-error",{originalErrorMessage:null===(r=O)||void 0===r?void 0:r.message})}const w=y.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw gs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const T=1e3*Number(w[1]),M=Date.now();return{token:y.token,expireTimeMillis:M+T,issuedAtTimeMillis:M}})).apply(this,arguments)}const iZ="firebase-app-check-database",rZ=1,UE="firebase-app-check-store";let lx=null;function BP(){return(BP=(0,Se.Z)(function*(n,e){const i=(yield function E$(){return lx||(lx=new Promise((n,e)=>{var t;try{const i=indexedDB.open(iZ,rZ);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var o;e(gs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(UE,{keyPath:"compositeKey"})}}catch(i){e(gs.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}}),lx)}()).transaction(UE,"readwrite"),o=i.objectStore(UE).put({compositeKey:n,value:e});return new Promise((l,h)=>{o.onsuccess=p=>{l()},i.onerror=p=>{var y;h(gs.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const jE=new rc.Yd("@firebase/app-check");function I$(n,e){return(0,B.hl)()?function sZ(n,e){return function C$(n,e){return BP.apply(this,arguments)}(function T$(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{jE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function HP(){return(HP=(0,Se.Z)(function*(){const n=ox();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const hZ={error:"UNKNOWN_ERROR"};function fZ(n){return B.US.encodeString(JSON.stringify(n),!1)}function cx(n){return $P.apply(this,arguments)}function $P(){return($P=(0,Se.Z)(function*(n,e=!1){const t=n.app;!function b$(n){if(!jr(n).activated)throw gs.create("use-before-activation",{appName:n.name})}(t);const i=jr(t);let o,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&ux(p)&&(r=p)}if(!e&&r&&ux(r))return{token:r.token};let h,l=!1;if(function S$(){return ox().enabled}()){i.exchangeTokenPromise||(i.exchangeTokenPromise=function FP(n,e){return LP.apply(this,arguments)}(function nZ(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${kP}/projects/${t}/apps/${i}:${YY}?key=${r}`,body:{debug_token:e}}}(t,yield function x$(){return HP.apply(this,arguments)}()),n.heartbeatServiceProvider).then(y=>(i.exchangeTokenPromise=void 0,y)),l=!0);const p=yield i.exchangeTokenPromise;return yield I$(t,p),cc(t,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),l=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?jE.warn(p.message):jE.error(p),o=p}return r?(h={token:r.token},cc(t,Object.assign(Object.assign({},i),{token:r})),yield I$(t,r)):h=function mZ(n){return{token:fZ(hZ),error:n}}(o),l&&function M$(n,e){const t=jr(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function zP(n,e){const t=jr(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),cc(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function A$(n){const{app:e}=n,t=jr(e);let i=t.tokenRefresher;i||(i=function pZ(n){const{app:e}=n;return new QY((0,Se.Z)(function*(){let i;if(i=jr(e).token?yield cx(n,!0):yield cx(n),i.error)throw i.error}),()=>!0,()=>{const t=jr(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},v$.RETRIAL_MIN_WAIT,v$.RETRIAL_MAX_WAIT)}(n),cc(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function ux(n){return n.expireTimeMillis-Date.now()>0}class gZ{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=jr(this.app);for(const t of e)zP(this.app,t.next);return Promise.resolve()}}const B$="app-check-internal";!function MZ(){(0,ps._registerComponent)(new ic.wA("app-check",n=>function _Z(n,e){return new gZ(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(B$).initialize()})),(0,ps._registerComponent)(new ic.wA(B$,n=>function yZ(n){return{getToken:e=>cx(n,e),addTokenListener:e=>function GP(n,e,t,i){const{app:r}=n,o=jr(r),l={next:t,error:i,type:e};if(cc(r,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,l]})),o.token&&ux(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),A$(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>A$(n))}(n,"INTERNAL",e),removeTokenListener:e=>zP(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ps.registerVersion)("@firebase/app-check","0.5.12")}();class HE{constructor(){return(0,Vn.vb)("app-check")}}typeof window<"u"&&window;var ZP=F(3071);const QP=new u.OlP("angularfire2.auth.use-emulator"),JP=new u.OlP("angularfire2.auth.settings"),XP=new u.OlP("angularfire2.auth.tenant-id"),eF=new u.OlP("angularfire2.auth.langugage-code"),tF=new u.OlP("angularfire2.auth.use-device-language"),nF=new u.OlP("angularfire.auth.persistence"),iF=(n,e,t,i,r,o,l,h)=>(0,xr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),i&&(p.tenantId=i),p.languageCode=r,o&&p.useDeviceLanguage(),l)for(const[y,w]of Object.entries(l))p.settings[y]=w;return h&&p.setPersistence(h),p},[t,i,r,o,l,h]);let rF=(()=>{class n{constructor(t,i,r,o,l,h,p,y,w,T,M,O){const L=new tn.x,H=(0,yt.of)(void 0).pipe((0,il.Q)(l.outsideAngular),(0,Dn.w)(()=>o.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,1128)))),(0,Tt.U)(()=>(0,xr.on)(t,o,i)),(0,Tt.U)(te=>iF(te,o,h,y,w,T,p,M)),NP({bufferSize:1,refCount:!1}));if(gi(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,yt.of)(null);else{H.pipe(Fo()).subscribe();const Te=H.pipe((0,Dn.w)(xe=>xe.getRedirectResult().then(Qe=>Qe,()=>null)),Vn.iC,NP({bufferSize:1,refCount:!1})),Ne=H.pipe((0,Dn.w)(xe=>new jn.y(Qe=>({unsubscribe:o.runOutsideAngular(()=>xe.onAuthStateChanged(ot=>Qe.next(ot),ot=>Qe.error(ot),()=>Qe.complete()))})))),je=H.pipe((0,Dn.w)(xe=>new jn.y(Qe=>({unsubscribe:o.runOutsideAngular(()=>xe.onIdTokenChanged(ot=>Qe.next(ot),ot=>Qe.error(ot),()=>Qe.complete()))}))));this.authState=Te.pipe(g$(Ne),(0,OP.R)(l.outsideAngular),(0,il.Q)(l.insideAngular)),this.user=Te.pipe(g$(je),(0,OP.R)(l.outsideAngular),(0,il.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Dn.w)(xe=>xe?(0,wn.D)(xe.getIdToken()):(0,yt.of)(null))),this.idTokenResult=this.user.pipe((0,Dn.w)(xe=>xe?(0,wn.D)(xe.getIdTokenResult()):(0,yt.of)(null))),this.credential=(0,sf.T)(Te,L,this.authState.pipe(ti(xe=>!xe))).pipe((0,Tt.U)(xe=>xe?.user?xe:null),(0,OP.R)(l.outsideAngular),(0,il.Q)(l.insideAngular))}return(0,xr.pX)(this,H,o,{spy:{apply:(te,Te,Ne)=>{(te.startsWith("signIn")||te.startsWith("createUser"))&&Ne.then(je=>L.next(je))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xr.Dh),u.LFG(xr.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Vn.HU),u.LFG(QP,8),u.LFG(JP,8),u.LFG(XP,8),u.LFG(eF,8),u.LFG(tF,8),u.LFG(nF,8),u.LFG(HE,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function U$(n){return null==n}function j$(n){return"function"==typeof n.set}function H$(n,e){return j$(e)?e:n.ref(e)}function $$(n,e){if(function FZ(n){return"string"==typeof n}(n))return e.stringCase();if(j$(n))return e.firebaseCase();if(function LZ(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function $E(n,e,t="on",i=mm.z){return new jn.y(r=>{let o=null;return o=n[t](e,(l,h)=>{i.schedule(()=>{r.next({snapshot:l,prevKey:h})}),"once"===t&&i.schedule(()=>r.complete())},l=>{i.schedule(()=>r.error(l))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Tt.U)(r=>{const{snapshot:o,prevKey:l}=r;let h=null;return o.exists()&&(h=o.key),{type:e,payload:o,prevKey:l,key:h}}),(0,oj.B)())}function G$(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function UZ(n,e){const{payload:t,prevKey:i,key:r}=e,o=G$(n,r),l=function VZ(n,e){if(U$(e))return 0;{const t=G$(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==i&&(n=n.filter(p=>p.payload.key!==t.key)).splice(l,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===r?e:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function z$(n){return(U$(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function W$(n,e,t){return function BZ(n,e,t){return $E(n,"value","once",t).pipe((0,Dn.w)(i=>{const r=[(0,yt.of)(i)];return e.forEach(o=>r.push($E(n,o,"on",t))),(0,sf.T)(...r).pipe(Lo(UZ,[]))}),(0,ol.x)())}(n,e=z$(e),t)}function q$(n,e,t){const i=(e=z$(e)).map(r=>$E(n,r,"on",t));return(0,sf.T)(...i)}function K$(n,e){return function(i,r){return $$(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function GZ(n){return function(t){return t?$$(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Y$(n,e){return function(){return $E(n,"value","on",e)}}const qZ=new u.OlP("angularfire2.realtimeDatabaseURL"),KZ=new u.OlP("angularfire2.database.use-emulator");let Z$=(()=>{class n{constructor(t,i,r,o,l,h,p,y,w,T,M,O,L,H,te){this.schedulers=h;const Te=p,Ne=(0,xr.on)(t,l,i);y&&iF(Ne,l,w,M,O,L,T,H),this.database=(0,xr.cc)(`${Ne.name}.database.${r}`,"AngularFireDatabase",Ne.name,()=>{const je=l.runOutsideAngular(()=>Ne.database(r||void 0));return Te&&je.useEmulator(...Te),je},[Te])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>H$(this.database,t));let o=r;return i&&(o=i(r)),function zZ(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:K$(i,"update"),set:K$(i,"set"),push:r=>i.push(r),remove:GZ(i),snapshotChanges:r=>W$(n,r,t).pipe(Vn.iC),stateChanges:r=>q$(n,r,t).pipe(Vn.iC),auditTrail:r=>function jZ(n,e,t){return function $Z(n,e,t){return function HZ(n,e){return $E(n,"value","on",e).pipe((0,Tt.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(rl(e),(0,Tt.U)(([r,o])=>{const l=r.lastKeyToLoad,h=o.map(p=>p.key);return{actions:o,lastKeyToLoad:l,loadedKeys:h}}),function z5(n){return(0,zn.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,I.x)(t,o=>(i||(i=!n(o,r++)))&&t.next(o)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,Tt.U)(r=>r.actions))}(n,q$(n,e).pipe(Lo((r,o)=>[...r,o],[])),t)}(n,r,t).pipe(Vn.iC),valueChanges:(r,o)=>W$(n,r,t).pipe((0,Tt.U)(h=>h.map(p=>o&&o.idField?Object.assign(Object.assign({},p.payload.val()),{[o.idField]:p.key}):p.payload.val())),Vn.iC)}}(o,this)}object(t){return function WZ(n,e){return{query:n,snapshotChanges:()=>Y$(n,e.schedulers.outsideAngular)().pipe(Vn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Y$(n,e.schedulers.outsideAngular)().pipe(Vn.iC,(0,Tt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>H$(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xr.Dh),u.LFG(xr.xv,8),u.LFG(qZ,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Vn.HU),u.LFG(KZ,8),u.LFG(rF,8),u.LFG(QP,8),u.LFG(JP,8),u.LFG(XP,8),u.LFG(eF,8),u.LFG(tF,8),u.LFG(nF,8),u.LFG(HE,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YZ=(()=>{class n{constructor(){ZP.Z.registerVersion("angularfire",Vn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Z$]}),n})();function oF(){return(0,zn.e)((n,e)=>{let t,i=!1;n.subscribe((0,I.x)(e,r=>{const o=t;t=r,i&&e.next([o,r]),i=!0}))})}var vt,ZZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Rd={},sF=sF||{},Jt=ZZ||self;function hx(){}function aF(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function GE(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var lF="closure_uid_"+(1e9*Math.random()>>>0),JZ=0;function XZ(n,e,t){return n.call.apply(n.bind,arguments)}function e9(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function yo(n,e,t){return(yo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?XZ:e9).apply(null,arguments)}function fx(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function vo(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(i,r,o){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[r].apply(i,l)}}function xf(){this.s=this.s,this.o=this.o}var n9={};xf.prototype.s=!1,xf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function QZ(n){return Object.prototype.hasOwnProperty.call(n,lF)&&n[lF]||(n[lF]=++JZ)}(this);delete n9[n]}},xf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Q$=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},J$=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const i=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<i;o++)o in r&&e.call(t,r[o],o,n)};function X$(n){return Array.prototype.concat.apply([],arguments)}function cF(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function px(n){return/^[\s\xa0]*$/.test(n)}var ys,e3=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function _s(n,e){return-1!=n.indexOf(e)}function uF(n,e){return n<e?-1:n>e?1:0}e:{var t3=Jt.navigator;if(t3){var n3=t3.userAgent;if(n3){ys=n3;break e}}ys=""}function dF(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function r3(n){const e={};for(const t in n)e[t]=n[t];return e}var o3="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function s3(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let o=0;o<o3.length;o++)t=o3[o],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function hF(n){return hF[" "](n),n}hF[" "]=hx;var mx,n,o9=_s(ys,"Opera"),Cv=_s(ys,"Trident")||_s(ys,"MSIE"),a3=_s(ys,"Edge"),fF=a3||Cv,l3=_s(ys,"Gecko")&&!(_s(ys.toLowerCase(),"webkit")&&!_s(ys,"Edge"))&&!(_s(ys,"Trident")||_s(ys,"MSIE"))&&!_s(ys,"Edge"),s9=_s(ys.toLowerCase(),"webkit")&&!_s(ys,"Edge");function c3(){var n=Jt.document;return n?n.documentMode:void 0}e:{var pF="",mF=(n=ys,l3?/rv:([^\);]+)(\)|;)/.exec(n):a3?/Edge\/([\d\.]+)/.exec(n):Cv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):s9?/WebKit\/(\S+)/.exec(n):o9?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(mF&&(pF=mF?mF[1]:""),Cv){var gF=c3();if(null!=gF&&gF>parseFloat(pF)){mx=String(gF);break e}}mx=pF}var a9={};var c9=Jt.document&&Cv&&(c3()||parseInt(mx,10))||void 0,u9=function(){if(!Jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Jt.addEventListener("test",hx,e),Jt.removeEventListener("test",hx,e)}catch{}return n}();function jo(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function zE(n,e){if(jo.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(l3){e:{try{hF(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:d9[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&zE.Z.h.call(this)}}jo.prototype.h=function(){this.defaultPrevented=!0},vo(zE,jo);var d9={2:"touch",3:"pen",4:"mouse"};zE.prototype.h=function(){zE.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var WE="closure_listenable_"+(1e6*Math.random()|0),h9=0;function f9(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ia=r,this.key=++h9,this.ca=this.fa=!1}function gx(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function _x(n){this.src=n,this.g={},this.h=0}function yF(n,e){var t=e.type;if(t in n.g){var o,i=n.g[t],r=Q$(i,e);(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(gx(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function vF(n,e,t,i){for(var r=0;r<n.length;++r){var o=n[r];if(!o.ca&&o.listener==e&&o.capture==!!t&&o.ia==i)return r}return-1}_x.prototype.add=function(n,e,t,i,r){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var l=vF(n,e,i,r);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new f9(e,this.src,o,!!i,r)).fa=t,n.push(e)),e};var bF="closure_lm_"+(1e6*Math.random()|0),wF={};function d3(n,e,t,i,r){if(i&&i.once)return f3(n,e,t,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)d3(n,e[o],t,i,r);return null}return t=TF(t),n&&n[WE]?n.N(e,t,GE(i)?!!i.capture:!!i,r):h3(n,e,t,!1,i,r)}function h3(n,e,t,i,r,o){if(!e)throw Error("Invalid event type");var l=GE(r)?!!r.capture:!!r,h=CF(n);if(h||(n[bF]=h=new _x(n)),(t=h.add(e,t,i,l,o)).proxy)return t;if(i=function p9(){var e=m9;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)u9||(r=l),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(m3(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function f3(n,e,t,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)f3(n,e[o],t,i,r);return null}return t=TF(t),n&&n[WE]?n.O(e,t,GE(i)?!!i.capture:!!i,r):h3(n,e,t,!0,i,r)}function p3(n,e,t,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)p3(n,e[o],t,i,r);else i=GE(i)?!!i.capture:!!i,t=TF(t),n&&n[WE]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=vF(o=n.g[e],t,i,r))&&(gx(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=CF(n))&&(e=n.g[e.toString()],n=-1,e&&(n=vF(e,t,i,r)),(t=-1<n?e[n]:null)&&EF(t))}function EF(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[WE])yF(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(m3(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=CF(e))?(yF(t,n),0==t.h&&(t.src=null,e[bF]=null)):gx(n)}}}function m3(n){return n in wF?wF[n]:wF[n]="on"+n}function m9(n,e){if(n.ca)n=!0;else{e=new zE(e,this);var t=n.listener,i=n.ia||n.src;n.fa&&EF(n),n=t.call(i,e)}return n}function CF(n){return(n=n[bF])instanceof _x?n:null}var DF="__closure_events_fn_"+(1e9*Math.random()>>>0);function TF(n){return"function"==typeof n?n:(n[DF]||(n[DF]=function(e){return n.handleEvent(e)}),n[DF])}function Hr(){xf.call(this),this.i=new _x(this),this.P=this,this.I=null}function bo(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new jo(e,n);else if(e instanceof jo)e.target=e.target||n;else{var r=e;s3(e=new jo(i,n),r)}if(r=!0,t)for(var o=t.length-1;0<=o;o--){var l=e.g=t[o];r=yx(l,i,!0,e)&&r}if(r=yx(l=e.g=n,i,!0,e)&&r,r=yx(l,i,!1,e)&&r,t)for(o=0;o<t.length;o++)r=yx(l=e.g=t[o],i,!1,e)&&r}function yx(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.ca&&l.capture==t){var h=l.listener,p=l.ia||l.src;l.fa&&yF(n.i,l),r=!1!==h.call(p,i)&&r}}return r&&!i.defaultPrevented}vo(Hr,xf),Hr.prototype[WE]=!0,Hr.prototype.removeEventListener=function(n,e,t,i){p3(this,n,e,t,i)},Hr.prototype.M=function(){if(Hr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)gx(t[i]);delete n.g[e],n.h--}}this.I=null},Hr.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Hr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var IF=Jt.JSON.stringify;function g9(){var n=_3;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var xF,g3=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new y9,n=>n.reset());class y9{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function v9(n){Jt.setTimeout(()=>{throw n},0)}function SF(n,e){xF||function b9(){var n=Jt.Promise.resolve(void 0);xF=function(){n.then(w9)}}(),AF||(xF(),AF=!0),_3.add(n,e)}var AF=!1,_3=new class _9{constructor(){this.h=this.g=null}add(e,t){const i=g3.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function w9(){for(var n;n=g9();){try{n.h.call(n.g)}catch(t){v9(t)}var e=g3;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}AF=!1}function vx(n,e){Hr.call(this),this.h=n||1,this.g=e||Jt,this.j=yo(this.kb,this),this.l=Date.now()}function MF(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function NF(n,e,t){if("function"==typeof n)t&&(n=yo(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=yo(n.handleEvent,n)}return 2147483647<Number(e)?-1:Jt.setTimeout(n,e||0)}function y3(n){n.g=NF(()=>{n.g=null,n.i&&(n.i=!1,y3(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}vo(vx,Hr),(vt=vx.prototype).da=!1,vt.S=null,vt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),bo(this,"tick"),this.da&&(MF(this),this.start()))}},vt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},vt.M=function(){vx.Z.M.call(this),MF(this),delete this.g};class E9 extends xf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:y3(this)}M(){super.M(),this.g&&(Jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qE(n){xf.call(this),this.h=n,this.g={}}vo(qE,xf);var v3=[];function b3(n,e,t,i){Array.isArray(t)||(t&&(v3[0]=t.toString()),t=v3);for(var r=0;r<t.length;r++){var o=d3(e,t[r],i||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function w3(n){dF(n.g,function(e,t){this.g.hasOwnProperty(t)&&EF(e)},n),n.g={}}function bx(){this.g=!0}function Dv(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function I9(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var l=1;l<r.length;l++)r[l]=""}}}return IF(t)}catch{return e}}(n,t)+(i?" "+i:"")})}qE.prototype.M=function(){qE.Z.M.call(this),w3(this)},qE.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bx.prototype.Aa=function(){this.g=!1},bx.prototype.info=function(){};var Qm={},E3=null;function wx(){return E3=E3||new Hr}function C3(n){jo.call(this,Qm.Ma,n)}function KE(n){const e=wx();bo(e,new C3(e,n))}function D3(n,e){jo.call(this,Qm.STAT_EVENT,n),this.stat=e}function vs(n){const e=wx();bo(e,new D3(e,n))}function T3(n,e){jo.call(this,Qm.Na,n),this.size=e}function YE(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Jt.setTimeout(function(){n()},e)}Qm.Ma="serverreachability",vo(C3,jo),Qm.STAT_EVENT="statevent",vo(D3,jo),Qm.Na="timingevent",vo(T3,jo);var Ex={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},I3={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function OF(){}function x3(){}OF.prototype.h=null;var PF,ZE={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function RF(){jo.call(this,"d")}function kF(){jo.call(this,"c")}function Cx(){}function QE(n,e,t,i){this.l=n,this.j=e,this.m=t,this.X=i||1,this.V=new qE(this),this.P=S9,this.W=new vx(n=fF?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new A3}function A3(){this.i=null,this.g="",this.h=!1}vo(RF,jo),vo(kF,jo),vo(Cx,OF),Cx.prototype.g=function(){return new XMLHttpRequest},Cx.prototype.i=function(){return{}},PF=new Cx;var S9=45e3,FF={},Dx={};function LF(n,e,t){n.K=1,n.v=Ax(kd(e)),n.s=t,n.U=!0,M3(n,null)}function M3(n,e){n.F=Date.now(),JE(n),n.A=kd(n.v);var t=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),V3(t.h,"t",i),n.C=0,t=n.l.H,n.h=new A3,n.g=lG(n.l,t?e:null,!n.s),0<n.O&&(n.L=new E9(yo(n.Ia,n,n.g),n.O)),b3(n.V,n.g,"readystatechange",n.gb),e=n.H?r3(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),KE(1),function C9(n,e,t,i,r,o){n.info(function(){if(n.g)if(o)for(var l="",h=o.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var w=y[0];y=y[1];var T=w.split("_");l=2<=T.length&&"type"==T[1]?l+(w+"=")+y+"&":l+(w+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function N3(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function O3(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=x9(n,t),r==Dx){4==e&&(n.o=4,vs(14),i=!1),Dv(n.j,n.m,null,"[Incomplete Response]");break}if(r==FF){n.o=4,vs(15),Dv(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}Dv(n.j,n.m,r,null),BF(n,r)}N3(n)&&r!=Dx&&r!=FF&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,vs(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),YF(e),e.L=!0,vs(11))):(Dv(n.j,n.m,t,"[Invalid Chunked Response]"),Jm(n),XE(n))}function x9(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?Dx:(t=Number(e.substring(t,i)),isNaN(t)?FF:(i+=1)+t>e.length?Dx:(e=e.substr(i,t),n.C=i+t,e))}function JE(n){n.Y=Date.now()+n.P,R3(n,n.P)}function R3(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=YE(yo(n.eb,n),e)}function Tx(n){n.B&&(Jt.clearTimeout(n.B),n.B=null)}function XE(n){0==n.l.G||n.I||rG(n.l,n)}function Jm(n){Tx(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,MF(n.W),w3(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function BF(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||jF(t.i,n)))if(t.I=n.N,!n.J&&jF(t.i,n)&&3==t.G){try{var i=t.Ca.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Px(t),Rx(t)}KF(t),vs(18)}}else t.ta=r[1],0<t.ta-t.U&&37500>r[2]&&t.N&&0==t.A&&!t.v&&(t.v=YE(yo(t.ab,t),6e3));if(1>=H3(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else tg(t,11)}else if((n.J||t.g==n)&&Px(t),!px(e))for(r=t.Ca.g.parse(e),e=0;e<r.length;e++){let y=r[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const w=y[3];null!=w&&(t.ma=w,t.h.info("VER="+t.ma));const T=y[4];null!=T&&(t.za=T,t.h.info("SVER="+t.za));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(t.K=i=1.5*M,t.h.info("backChannelRequestTimeoutMs_="+i)),i=t;const O=n.g;if(O){const L=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(L){var o=i.i;!o.g&&(_s(L,"spdy")||_s(L,"quic")||_s(L,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(HF(o,o.h),o.h=null))}if(i.D){const H=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;H&&(i.sa=H,Ai(i.F,i.D,H))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((i=t).oa=aG(i,i.H?i.la:null,i.W),l.J){$3(i.i,l);var h=l,p=i.K;p&&h.setTimeout(p),h.B&&(Tx(h),JE(h)),i.g=l}else nG(i);0<t.l.length&&kx(t)}else"stop"!=y[0]&&"close"!=y[0]||tg(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?tg(t,7):WF(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}KE(4)}catch{}}function VF(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(aF(n)||"string"==typeof n)J$(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(aF(n)||"string"==typeof n){t=[];for(var i=n.length,r=0;r<i;r++)t.push(r)}else for(r in t=[],i=0,n)t[i++]=r;i=function A9(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(aF(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length;for(var o=0;o<r;o++)e.call(void 0,i[o],t&&t[o],n)}}function Tv(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var i=0;i<t;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof Tv)for(t=n.T(),i=0;i<t.length;i++)this.set(t[i],n.get(t[i]));else for(i in n)this.set(i,n[i])}function UF(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var i=n.g[e];Xm(n.h,i)&&(n.g[t++]=i),e++}n.g.length=t}if(n.i!=n.g.length){var r={};for(t=e=0;e<n.g.length;)Xm(r,i=n.g[e])||(n.g[t++]=i,r[i]=1),e++;n.g.length=t}}function Xm(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(vt=QE.prototype).setTimeout=function(n){this.P=n},vt.gb=function(n){n=n.target;const e=this.L;e&&3==Pd(n)?e.l():this.Ia(n)},vt.Ia=function(n){try{if(n==this.g)e:{const w=Pd(this.g);var e=this.g.Da();const T=this.g.ba();if(!(3>w)&&(3!=w||fF||this.g&&(this.h.h||this.g.ga()||Q3(this.g)))){this.I||4!=w||7==e||KE(8==e||0>=T?3:2),Tx(this);var t=this.g.ba();this.N=t;t:if(N3(this)){var i=Q3(this.g);n="";var r=i.length,o=4==Pd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Jm(this),XE(this);var l="";break t}this.h.i=new Jt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function D9(n,e,t,i,r,o,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+o+" "+l})}(this.j,this.u,this.A,this.m,this.X,w,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!px(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,vs(12),Jm(this),XE(this);break e}Dv(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,BF(this,t)}this.U?(O3(this,w,l),fF&&this.i&&3==w&&(b3(this.V,this.W,"tick",this.fb),this.W.start())):(Dv(this.j,this.m,l,null),BF(this,l)),4==w&&Jm(this),this.i&&!this.I&&(4==w?rG(this.l,this):(this.i=!1,JE(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,vs(12)):(this.o=0,vs(13)),Jm(this),XE(this)}}}catch{}},vt.fb=function(){if(this.g){var n=Pd(this.g),e=this.g.ga();this.C<e.length&&(Tx(this),O3(this,n,e),this.i&&4!=n&&JE(this))}},vt.cancel=function(){this.I=!0,Jm(this)},vt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function T9(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(KE(3),vs(17)),Jm(this),this.o=2,XE(this)):R3(this,this.Y-n)},(vt=Tv.prototype).R=function(){UF(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},vt.T=function(){return UF(this),this.g.concat()},vt.get=function(n,e){return Xm(this.h,n)?this.h[n]:e},vt.set=function(n,e){Xm(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},vt.forEach=function(n,e){for(var t=this.T(),i=0;i<t.length;i++){var r=t[i],o=this.get(r);n.call(e,o,r,this)}};var k3=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function eg(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof eg){this.g=void 0!==e?e:n.g,Ix(this,n.j),this.s=n.s,Sx(this,n.i),xx(this,n.m),this.l=n.l,e=n.h;var t=new nC;t.i=e.i,e.g&&(t.g=new Tv(e.g),t.h=e.h),P3(this,t),this.o=n.o}else n&&(t=String(n).match(k3))?(this.g=!!e,Ix(this,t[1]||"",!0),this.s=eC(t[2]||""),Sx(this,t[3]||"",!0),xx(this,t[4]),this.l=eC(t[5]||"",!0),P3(this,t[6]||"",!0),this.o=eC(t[7]||"")):(this.g=!!e,this.h=new nC(null,this.g))}function kd(n){return new eg(n)}function Ix(n,e,t){n.j=t?eC(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Sx(n,e,t){n.i=t?eC(e,!0):e}function xx(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function P3(n,e,t){e instanceof nC?(n.h=e,function B9(n,e){e&&!n.j&&(Af(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(L3(this,i),V3(this,r,t))},n)),n.j=e}(n.h,n.g)):(t||(e=tC(e,F9)),n.h=new nC(e,n.g))}function Ai(n,e,t){n.h.set(e,t)}function Ax(n){return Ai(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function eC(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function tC(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,R9),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function R9(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}eg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(tC(e,F3,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(tC(e,F3,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(tC(t,"/"==t.charAt(0)?P9:k9,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",tC(t,L9)),n.join("")};var F3=/[#\/\?@]/g,k9=/[#\?:]/g,P9=/[#\?]/g,F9=/[#\?@]/g,L9=/#/g;function nC(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Af(n){n.g||(n.g=new Tv,n.h=0,n.i&&function M9(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var o=n[t].substring(0,i);r=n[t].substring(i+1)}else o=n[t];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function L3(n,e){Af(n),e=Iv(n,e),Xm(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Xm((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&UF(n)))}function B3(n,e){return Af(n),e=Iv(n,e),Xm(n.g.h,e)}function V3(n,e,t){L3(n,e),0<t.length&&(n.i=null,n.g.set(Iv(n,e),cF(t)),n.h+=t.length)}function Iv(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function U3(n){this.l=n||U9,n=Jt.PerformanceNavigationTiming?0<(n=Jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Jt.g&&Jt.g.Ea&&Jt.g.Ea()&&Jt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(vt=nC.prototype).add=function(n,e){Af(this),this.i=null,n=Iv(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},vt.forEach=function(n,e){Af(this),this.g.forEach(function(t,i){J$(t,function(r){n.call(e,r,i,this)},this)},this)},vt.T=function(){Af(this);for(var n=this.g.R(),e=this.g.T(),t=[],i=0;i<e.length;i++)for(var r=n[i],o=0;o<r.length;o++)t.push(e[i]);return t},vt.R=function(n){Af(this);var e=[];if("string"==typeof n)B3(this,n)&&(e=X$(e,this.g.get(Iv(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=X$(e,n[t])}return e},vt.set=function(n,e){return Af(this),this.i=null,B3(this,n=Iv(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},vt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},vt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var i=e[t],r=encodeURIComponent(String(i));i=this.R(i);for(var o=0;o<i.length;o++){var l=r;""!==i[o]&&(l+="="+encodeURIComponent(String(i[o]))),n.push(l)}}return this.i=n.join("&")};var U9=10;function j3(n){return!!n.h||!!n.g&&n.g.size>=n.j}function H3(n){return n.h?1:n.g?n.g.size:0}function jF(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function HF(n,e){n.g?n.g.add(e):n.h=e}function $3(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function G3(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return cF(n.i)}function $F(){}function j9(){this.g=new $F}function H9(n,e,t){const i=t||"";try{VF(n,function(r,o){let l=r;GE(r)&&(l=IF(r)),e.push(i+o+"="+encodeURIComponent(l))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Mx(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function iC(n){this.l=n.$b||null,this.j=n.ib||!1}function Nx(n,e){Hr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=GF,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}U3.prototype.cancel=function(){if(this.i=G3(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},$F.prototype.stringify=function(n){return Jt.JSON.stringify(n,void 0)},$F.prototype.parse=function(n){return Jt.JSON.parse(n,void 0)},vo(iC,OF),iC.prototype.g=function(){return new Nx(this.l,this.j)},iC.prototype.i=function(n){return function(){return n}}({}),vo(Nx,Hr);var GF=0;function z3(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function rC(n){n.readyState=4,n.l=null,n.j=null,n.A=null,oC(n)}function oC(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(vt=Nx.prototype).open=function(n,e){if(this.readyState!=GF)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,oC(this)},vt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Jt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},vt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rC(this)),this.readyState=GF},vt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,oC(this)),this.g&&(this.readyState=3,oC(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;z3(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},vt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?rC(this):oC(this),3==this.readyState&&z3(this)}},vt.Ua=function(n){this.g&&(this.response=this.responseText=n,rC(this))},vt.Ta=function(n){this.g&&(this.response=n,rC(this))},vt.ha=function(){this.g&&rC(this)},vt.setRequestHeader=function(n,e){this.v.append(n,e)},vt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},vt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Nx.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var G9=Jt.JSON.parse;function pr(n){Hr.call(this),this.headers=new Tv,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=W3,this.K=this.L=!1}vo(pr,Hr);var W3="",z9=/^https?$/i,W9=["POST","PUT"];function K9(n){return"content-type"==n.toLowerCase()}function q3(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,K3(n),Ox(n)}function K3(n){n.D||(n.D=!0,bo(n,"complete"),bo(n,"error"))}function Y3(n){if(n.h&&typeof sF<"u"&&(!n.C[1]||4!=Pd(n)||2!=n.ba()))if(n.v&&4==Pd(n))NF(n.Fa,0,n);else if(bo(n,"readystatechange"),4==Pd(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===h){var r=String(n.H).match(k3)[1]||null;if(!r&&Jt.self&&Jt.self.location){var o=Jt.self.location.protocol;r=o.substr(0,o.length-1)}i=!z9.test(r?r.toLowerCase():"")}t=i}if(t)bo(n,"complete"),bo(n,"success");else{n.m=6;try{var l=2<Pd(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.ba()+"]",K3(n)}}finally{Ox(n)}}}function Ox(n,e){if(n.g){Z3(n);const t=n.g,i=n.C[0]?hx:null;n.g=null,n.C=null,e||bo(n,"ready");try{t.onreadystatechange=i}catch{}}}function Z3(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Jt.clearTimeout(n.A),n.A=null)}function Pd(n){return n.g?n.g.readyState:0}function Q3(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case W3:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function zF(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=function Y9(n){let e="";return dF(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ai(n,e,t))}function sC(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function J3(n){this.za=0,this.l=[],this.h=new bx,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=sC("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=sC("baseRetryDelayMs",5e3,n),this.$a=sC("retryDelaySeedMs",1e4,n),this.Ya=sC("forwardChannelMaxRetries",2,n),this.ra=sC("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new U3(n&&n.concurrentRequestLimit),this.Ca=new j9,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function WF(n){if(X3(n),3==n.G){var e=n.V++,t=kd(n.F);Ai(t,"SID",n.J),Ai(t,"RID",e),Ai(t,"TYPE","terminate"),aC(n,t),(e=new QE(n,n.h,e,void 0)).K=2,e.v=Ax(kd(t)),t=!1,Jt.navigator&&Jt.navigator.sendBeacon&&(t=Jt.navigator.sendBeacon(e.v.toString(),"")),!t&&Jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=lG(e.l,null),e.g.ea(e.v)),e.F=Date.now(),JE(e)}sG(n)}function Rx(n){n.g&&(YF(n),n.g.cancel(),n.g=null)}function X3(n){Rx(n),n.u&&(Jt.clearTimeout(n.u),n.u=null),Px(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Jt.clearTimeout(n.m),n.m=null)}function qF(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&kx(n)}function kx(n){j3(n.i)||n.m||(n.m=!0,SF(n.Ha,n),n.C=0)}function eG(n,e){var t;t=e?e.m:n.V++;const i=kd(n.F);Ai(i,"SID",n.J),Ai(i,"RID",t),Ai(i,"AID",n.U),aC(n,i),n.o&&n.s&&zF(i,n.o,n.s),t=new QE(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=tG(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),HF(n.i,t),LF(t,i,e)}function aC(n,e){n.j&&VF({},function(t,i){Ai(e,i,t)})}function tG(n,e,t){t=Math.min(n.l.length,t);var i=n.j?yo(n.j.Oa,n.j,n):null;e:{var r=n.l;let o=-1;for(;;){const l=["count="+t];-1==o?0<t?(o=r[0].h,l.push("ofs="+o)):o=0:l.push("ofs="+o);let h=!0;for(let p=0;p<t;p++){let y=r[p].h;const w=r[p].g;if(y-=o,0>y)o=Math.max(0,r[p].h-100),h=!1;else try{H9(w,l,"req"+y+"_")}catch{i&&i(w)}}if(h){i=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,i}function nG(n){n.g||n.u||(n.Y=1,SF(n.Ga,n),n.A=0)}function KF(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=YE(yo(n.Ga,n),oG(n,n.A)),n.A++,0))}function YF(n){null!=n.B&&(Jt.clearTimeout(n.B),n.B=null)}function iG(n){n.g=new QE(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=kd(n.oa);Ai(e,"RID","rpc"),Ai(e,"SID",n.J),Ai(e,"CI",n.N?"0":"1"),Ai(e,"AID",n.U),aC(n,e),Ai(e,"TYPE","xmlhttp"),n.o&&n.s&&zF(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Ax(kd(e)),t.s=null,t.U=!0,M3(t,n)}function Px(n){null!=n.v&&(Jt.clearTimeout(n.v),n.v=null)}function rG(n,e){var t=null;if(n.g==e){Px(n),YF(n),n.g=null;var i=2}else{if(!jF(n.i,e))return;t=e.D,$3(n.i,e),i=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;bo(i=wx(),new T3(i,t,e,r)),kx(n)}else nG(n);else if(3==(r=e.o)||0==r&&0<n.I||!(1==i&&function Z9(n,e){return!(H3(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=YE(yo(n.Ha,n,e),oG(n,n.C)),n.C++,0)))}(n,e)||2==i&&KF(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:tg(n,5);break;case 4:tg(n,10);break;case 3:tg(n,6);break;default:tg(n,2)}}function oG(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function tg(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var i=yo(n.jb,n);t||(t=new eg("//www.google.com/images/cleardot.gif"),Jt.location&&"http"==Jt.location.protocol||Ix(t,"https"),Ax(t)),function $9(n,e){const t=new bx;if(Jt.Image){const i=new Image;i.onload=fx(Mx,t,i,"TestLoadImage: loaded",!0,e),i.onerror=fx(Mx,t,i,"TestLoadImage: error",!1,e),i.onabort=fx(Mx,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=fx(Mx,t,i,"TestLoadImage: timeout",!1,e),Jt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else vs(2);n.G=0,n.j&&n.j.va(e),sG(n),X3(n)}function sG(n){n.G=0,n.I=-1,n.j&&((0!=G3(n.i).length||0!=n.l.length)&&(n.i.i.length=0,cF(n.l),n.l.length=0),n.j.ua())}function aG(n,e,t){let i=function N9(n){return n instanceof eg?kd(n):new eg(n,void 0)}(t);if(""!=i.i)e&&Sx(i,e+"."+i.i),xx(i,i.m);else{const r=Jt.location;i=function O9(n,e,t,i){var r=new eg(null,void 0);return n&&Ix(r,n),e&&Sx(r,e),t&&xx(r,t),i&&(r.l=i),r}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,t)}return n.aa&&dF(n.aa,function(r,o){Ai(i,o,r)}),t=n.sa,(e=n.D)&&t&&Ai(i,e,t),Ai(i,"VER",n.ma),aC(n,i),i}function lG(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pr(t&&n.Ba&&!n.qa?new iC({ib:!0}):n.qa)).L=n.H,e}function cG(){}function Fx(){if(Cv&&!(10<=Number(c9)))throw Error("Environmental error: no available transport.")}function Ca(n,e){Hr.call(this),this.g=new J3(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!px(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!px(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Sv(this)}function uG(n){RF.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function dG(){kF.call(this),this.status=1}function Sv(n){this.g=n}(vt=pr.prototype).ea=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():PF.g(),this.C=function S3(n){return n.h||(n.h=n.i())}(this.u?this.u:PF),this.g.onreadystatechange=yo(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void q3(this,o)}n=t||"";const r=new Tv(this.headers);i&&VF(i,function(o,l){r.set(l,o)}),i=function i9(n){e:{var e=K9;const t=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<t;r++)if(r in i&&e.call(void 0,i[r],r,n)){e=r;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(r.T()),t=Jt.FormData&&n instanceof Jt.FormData,!(0<=Q$(W9,e))||i||t||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(o,l){this.g.setRequestHeader(l,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Z3(this),0<this.B&&((this.K=function q9(n){return Cv&&function l9(){return function r9(n){var e=a9;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=e3(String(mx)).split("."),t=e3("9").split("."),i=Math.max(e.length,t.length);for(let l=0;0==n&&l<i;l++){var r=e[l]||"",o=t[l]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==r[0].length&&0==o[0].length)break;n=uF(0==r[1].length?0:parseInt(r[1],10),0==o[1].length?0:parseInt(o[1],10))||uF(0==r[2].length,0==o[2].length)||uF(r[2],o[2]),r=r[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yo(this.pa,this)):this.A=NF(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){q3(this,o)}},vt.pa=function(){typeof sF<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bo(this,"timeout"),this.abort(8))},vt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,bo(this,"complete"),bo(this,"abort"),Ox(this))},vt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ox(this,!0)),pr.Z.M.call(this)},vt.Fa=function(){this.s||(this.F||this.v||this.l?Y3(this):this.cb())},vt.cb=function(){Y3(this)},vt.ba=function(){try{return 2<Pd(this)?this.g.status:-1}catch{return-1}},vt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},vt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),G9(e)}},vt.Da=function(){return this.m},vt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(vt=J3.prototype).ma=8,vt.G=1,vt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},vt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new QE(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=r3(o),s3(o,this.P)):o=this.P),null===this.o&&(r.H=o),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var i=this.l[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=tG(this,r,e),Ai(t=kd(this.F),"RID",n),Ai(t,"CVER",22),this.D&&Ai(t,"X-HTTP-Session-Id",this.D),aC(this,t),this.o&&o&&zF(t,this.o,o),HF(this.i,r),this.Ra&&Ai(t,"TYPE","init"),this.ja?(Ai(t,"$req",e),Ai(t,"SID","null"),r.$=!0,LF(r,t,null)):LF(r,t,e),this.G=2}}else 3==this.G&&(n?eG(this,n):0==this.l.length||j3(this.i)||eG(this))},vt.Ga=function(){if(this.u=null,iG(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=YE(yo(this.bb,this),n)}},vt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,vs(10),Rx(this),iG(this))},vt.ab=function(){null!=this.v&&(this.v=null,Rx(this),KF(this),vs(19))},vt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),vs(2)):(this.h.info("Failed to ping google.com"),vs(1))},(vt=cG.prototype).xa=function(){},vt.wa=function(){},vt.va=function(){},vt.ua=function(){},vt.Oa=function(){},Fx.prototype.g=function(n,e){return new Ca(n,e)},vo(Ca,Hr),Ca.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),SF(yo(n.hb,n,e))),vs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=aG(n,null,n.W),kx(n)},Ca.prototype.close=function(){WF(this.g)},Ca.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,qF(this.g,e)}else this.v?((e={}).__data__=IF(n),qF(this.g,e)):qF(this.g,n)},Ca.prototype.M=function(){this.g.j=null,delete this.j,WF(this.g),delete this.g,Ca.Z.M.call(this)},vo(uG,RF),vo(dG,kF),vo(Sv,cG),Sv.prototype.xa=function(){bo(this.g,"a")},Sv.prototype.wa=function(n){bo(this.g,new uG(n))},Sv.prototype.va=function(n){bo(this.g,new dG(n))},Sv.prototype.ua=function(){bo(this.g,"b")},Fx.prototype.createWebChannel=Fx.prototype.g,Ca.prototype.send=Ca.prototype.u,Ca.prototype.open=Ca.prototype.m,Ca.prototype.close=Ca.prototype.close,Ex.NO_ERROR=0,Ex.TIMEOUT=8,Ex.HTTP_ERROR=6,I3.COMPLETE="complete",x3.EventType=ZE,ZE.OPEN="a",ZE.CLOSE="b",ZE.ERROR="c",ZE.MESSAGE="d",Hr.prototype.listen=Hr.prototype.N,pr.prototype.listenOnce=pr.prototype.O,pr.prototype.getLastError=pr.prototype.La,pr.prototype.getLastErrorCode=pr.prototype.Da,pr.prototype.getStatus=pr.prototype.ba,pr.prototype.getResponseJson=pr.prototype.Qa,pr.prototype.getResponseText=pr.prototype.ga,pr.prototype.send=pr.prototype.ea;var Q9=Rd.createWebChannelTransport=function(){return new Fx},J9=Rd.getStatEventTarget=function(){return wx()},ZF=Rd.ErrorCode=Ex,X9=Rd.EventType=I3,eQ=Rd.Event=Qm,hG=Rd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},tQ=Rd.FetchXmlHttpFactory=iC,Lx=Rd.WebChannel=x3,nQ=Rd.XhrIo=pr;const fG="@firebase/firestore";class $r{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$r.UNAUTHENTICATED=new $r(null),$r.GOOGLE_CREDENTIALS=new $r("google-credentials-uid"),$r.FIRST_PARTY=new $r("first-party-uid"),$r.MOCK_USER=new $r("mock-user");let xv="9.9.2";const Mf=new rc.Yd("@firebase/firestore");function QF(){return Mf.logLevel}function Ze(n,...e){if(Mf.logLevel<=rc.in.DEBUG){const t=e.map(JF);Mf.debug(`Firestore (${xv}): ${n}`,...t)}}function ir(n,...e){if(Mf.logLevel<=rc.in.ERROR){const t=e.map(JF);Mf.error(`Firestore (${xv}): ${n}`,...t)}}function ng(n,...e){if(Mf.logLevel<=rc.in.WARN){const t=e.map(JF);Mf.warn(`Firestore (${xv}): ${n}`,...t)}}function JF(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function bt(n="Unexpected state"){const e=`FIRESTORE (${xv}) INTERNAL ASSERTION FAILED: `+n;throw ir(e),new Error(e)}function Wt(n,e){n||bt()}function dt(n,e){return n}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends B.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class pG{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($r.UNAUTHENTICATED))}shutdown(){}}class sQ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class aQ{constructor(e){this.t=e,this.currentUser=$r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const o=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let l=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Gr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=l;e.enqueueRetryable((0,Se.Z)(function*(){yield y.promise,yield o(i.currentUser)}))},p=y=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Gr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Wt("string"==typeof i.accessToken),new pG(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Wt(null===e||"string"==typeof e),new $r(e)}}class lQ{constructor(e,t,i){this.type="FirstParty",this.user=$r.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class cQ{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new lQ(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t($r.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uQ{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const i=o=>{null!=o.error&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.p;return this.p=o.token,Ze("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?r(o):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Wt("string"==typeof t.token),this.p=t.token,new mG(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function dQ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class gG{static I(){const t=62*Math.floor(256/62);let i="";for(;i.length<20;){const r=dQ(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[o]%62))}return i}}function Xt(n,e){return n<e?-1:n>e?1:0}function Av(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function _G(n){return n+"\0"}class Mi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ge(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ge(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ge(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mi.fromMillis(Date.now())}static fromDate(e){return Mi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Mi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class zt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new zt(e)}static min(){return new zt(new Mi(0,0))}static max(){return new zt(new Mi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class lC{constructor(e,t,i){void 0===t?t=0:t>e.length&&bt(),void 0===i?i=e.length-t:i>e.length-t&&bt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===lC.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lC?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=e.get(r),l=t.get(r);if(o<l)return-1;if(o>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class An extends lC{construct(e,t,i){return new An(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ge(we.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new An(t)}static emptyPath(){return new An([])}}const hQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ki extends lC{construct(e,t,i){return new Ki(e,t,i)}static isValidIdentifier(e){return hQ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ki.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ki(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(0===i.length)throw new Ge(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const h=e[r];if("\\"===h){if(r+1===e.length)throw new Ge(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ge(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,r+=2}else"`"===h?(l=!l,r++):"."!==h||l?(i+=h,r++):(o(),r++)}if(o(),l)throw new Ge(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ki(t)}static emptyPath(){return new Ki([])}}class at{constructor(e){this.path=e}static fromPath(e){return new at(An.fromString(e))}static fromName(e){return new at(An.fromString(e).popFirst(5))}static empty(){return new at(An.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===An.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return An.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new An(e.slice()))}}class Bx{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function XF(n){return n.fields.find(e=>2===e.kind)}function ig(n){return n.fields.filter(e=>2!==e.kind)}Bx.UNKNOWN_ID=-1;class Vx{constructor(e,t){this.fieldPath=e,this.kind=t}}class cC{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new cC(0,Da.min())}}function yG(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=zt.fromTimestamp(1e9===i?new Mi(t+1,0):new Mi(t,i));return new Da(r,at.empty(),e)}function vG(n){return new Da(n.readTime,n.key,-1)}class Da{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Da(zt.min(),at.empty(),-1)}static max(){return new Da(zt.max(),at.empty(),-1)}}function eL(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=at.comparator(n.documentKey,e.documentKey),0!==t?t:Xt(n.largestBatchId,e.largestBatchId))}const bG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Nf(n){return tL.apply(this,arguments)}function tL(){return tL=(0,Se.Z)(function*(n){if(n.code!==we.FAILED_PRECONDITION||n.message!==bG)throw n;Ze("LocalStore","Unexpectedly lost primary lease")}),tL.apply(this,arguments)}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,i)=>{t(e)})}static reject(e){return new me((t,i)=>{i(e)})}static waitFor(e){return new me((t,i)=>{let r=0,o=0,l=!1;e.forEach(h=>{++r,h.next(()=>{++o,l&&o===r&&t()},p=>i(p))}),l=!0,o===r&&t()})}static or(e){let t=me.resolve(!1);for(const i of e)t=t.next(r=>r?me.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,o)=>{i.push(t.call(this,r,o))}),this.waitFor(i)}static mapArray(e,t){return new me((i,r)=>{const o=e.length,l=new Array(o);let h=0;for(let p=0;p<o;p++){const y=p;t(e[y]).next(w=>{l[y]=w,++h,h===o&&i(l)},w=>r(w))}})}static doWhile(e,t){return new me((i,r)=>{const o=()=>{!0===e()?t().next(()=>{o()},r):i()};o()})}}class Ux{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Gr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new uC(e,t.error)):this.T.resolve()},this.transaction.onerror=i=>{const r=nL(i.target.error);this.T.reject(new uC(e,r))}}static open(e,t,i,r){try{return new Ux(t,e.transaction(r,i))}catch(o){throw new uC(t,o)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gQ(t)}}class uc{constructor(e,t,i){this.name=e,this.version=t,this.P=i,12.2===uc.v((0,B.z$)())&&ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ze("SimpleDb","Removing database:",e),rg(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,B.hl)())return!1;if(uc.S())return!0;const e=(0,B.z$)(),t=uc.v(e),i=0<t&&t<10,r=uc.D(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static D(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}k(e){var t=this;return(0,Se.Z)(function*(){return t.db||(Ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=l=>{i(l.target.result)},o.onblocked=()=>{r(new uC(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=l=>{const h=l.target.error;r("VersionError"===h.name?new Ge(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ge(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new uC(e,h))},o.onupgradeneeded=l=>{Ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.P.M(l.target.result,o.transaction,l.oldVersion,t.version).next(()=>{Ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=i=>t.O(i)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var o=this;return(0,Se.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{o.db=yield o.k(e);const p=Ux.open(o.db,e,l?"readonly":"readwrite",i),y=r(p).next(w=>(p.R(),w)).catch(w=>(p.abort(w),me.reject(w))).toPromise();return y.catch(()=>{}),yield p.A,y}catch(p){const y=p,w="FirebaseError"!==y.name&&h<3;if(Ze("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),o.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class mQ{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return rg(this.$.delete())}}class uC extends Ge{constructor(e,t){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Of(n){return"IndexedDbTransactionError"===n.name}class gQ{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Ze("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),rg(i)}add(e){return Ze("SimpleDb","ADD",this.store.name,e,e),rg(this.store.add(e))}get(e){return rg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ze("SimpleDb","DELETE",this.store.name,e),rg(this.store.delete(e))}count(){return Ze("SimpleDb","COUNT",this.store.name),rg(this.store.count())}K(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),o=[];return this.G(r,(l,h)=>{o.push(h)}).next(()=>o)}{const r=this.store.getAll(i.range);return new me((o,l)=>{r.onerror=h=>{l(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}}j(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new me((r,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}W(e,t){Ze("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.H=!1;const r=this.cursor(i);return this.G(r,(o,l,h)=>h.delete())}J(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.G(r,t)}Y(e){const t=this.cursor({});return new me((i,r)=>{t.onerror=o=>{const l=nL(o.target.error);r(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():i()}):i()}})}G(e,t){const i=[];return new me((r,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void r();const p=new mQ(h),y=t(h.primaryKey,h.value,p);if(y instanceof me){const w=y.catch(T=>(p.done(),me.reject(T)));i.push(w)}p.isDone?r():null===p.U?h.continue():h.continue(p.U)}}).next(()=>me.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rg(n){return new me((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=nL(i.target.error);t(r)}})}let EG=!1;function nL(n){const e=uc.v((0,B.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return EG||(EG=!0,setTimeout(()=>{throw i},0)),i}}return n}class _Q{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Se.Z)(function*(){t.task=null;try{Ze("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(i){Of(i)?Ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Nf(i)}yield t.Z(1)}))}}class yQ{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Se.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.et(i,e))})()}et(e,t){const i=new Set;let r=t,o=!0;return me.doWhile(()=>!0===o&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!i.has(l))return Ze("IndexBackiller",`Processing collection: ${l}`),this.nt(e,l,r).next(h=>{r-=h,i.add(l)});o=!1})).next(()=>t-r)}nt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.st(r,o)).next(h=>(Ze("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}st(e,t){let i=e;return t.changes.forEach((r,o)=>{const l=vG(o);eL(l,i)>0&&(i=l)}),new Da(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class zs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.it(i),this.rt=i=>t.writeSequenceNumber(i))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function CG(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function og(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function DG(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}zs.ot=-1;class Yi{constructor(e,t){this.comparator=e,this.root=t||wo.EMPTY}insert(e,t){return new Yi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wo.BLACK,null,null))}remove(e){return new Yi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jx(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jx(this.root,e,this.comparator,!1)}getReverseIterator(){return new jx(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jx(this.root,e,this.comparator,!0)}}class jx{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wo{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??wo.RED,this.left=r??wo.EMPTY,this.right=o??wo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new wo(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return wo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return wo.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bt();const e=this.left.check();if(e!==this.right.check())throw bt();return e+(this.isRed()?0:1)}}wo.EMPTY=null,wo.RED=!0,wo.BLACK=!1,wo.EMPTY=new class{constructor(){this.size=0}get key(){throw bt()}get value(){throw bt()}get color(){throw bt()}get left(){throw bt()}get right(){throw bt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new wo(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ei{constructor(e){this.comparator=e,this.data=new Yi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new TG(this.data.getIterator())}getIteratorFrom(e){return new TG(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof ei)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(0!==this.comparator(r,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ei(this.comparator);return t.data=e,t}}class TG{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Mv(n){return n.hasNext()?n.getNext():void 0}class Ta{constructor(e){this.fields=e,e.sort(Ki.comparator)}static empty(){return new Ta([])}unionWith(e){let t=new ei(Ki.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ta(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Av(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class Ar{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ar(t)}static fromUint8Array(e){const t=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new Ar(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ar.EMPTY_BYTE_STRING=new Ar("");const bQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rf(n){if(Wt(!!n),"string"==typeof n){let e=0;const t=bQ.exec(n);if(Wt(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Zi(n.seconds),nanos:Zi(n.nanos)}}function Zi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function sg(n){return"string"==typeof n?Ar.fromBase64String(n):Ar.fromUint8Array(n)}function iL(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function IG(n){const e=n.mapValue.fields.__previous_value__;return iL(e)?IG(e):e}function dC(n){const e=Rf(n.mapValue.fields.__local_write_time__.timestampValue);return new Mi(e.seconds,e.nanos)}class wQ{constructor(e,t,i,r,o,l,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class Fd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fd&&e.projectId===this.projectId&&e.database===this.database}}function hC(n){return null==n}function fC(n){return 0===n&&1/n==-1/0}function SG(n){return"number"==typeof n&&Number.isInteger(n)&&!fC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const kf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hx={nullValue:"NULL_VALUE"};function ag(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?iL(n)?4:NG(n)?9007199254740991:10:bt()}function mu(n,e){if(n===e)return!0;const t=ag(n);if(t!==ag(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dC(n).isEqual(dC(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Rf(i.timestampValue),l=Rf(r.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,sg(n.bytesValue).isEqual(sg(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Zi(i.geoPointValue.latitude)===Zi(r.geoPointValue.latitude)&&Zi(i.geoPointValue.longitude)===Zi(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Zi(i.integerValue)===Zi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Zi(i.doubleValue),l=Zi(r.doubleValue);return o===l?fC(o)===fC(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return Av(n.arrayValue.values||[],e.arrayValue.values||[],mu);case 10:return function(i,r){const o=i.mapValue.fields||{},l=r.mapValue.fields||{};if(CG(o)!==CG(l))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===l[h]||!mu(o[h],l[h])))return!1;return!0}(n,e);default:return bt()}var r}function pC(n,e){return void 0!==(n.values||[]).find(t=>mu(t,e))}function Pf(n,e){if(n===e)return 0;const t=ag(n),i=ag(e);if(t!==i)return Xt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xt(n.booleanValue,e.booleanValue);case 2:return function(r,o){const l=Zi(r.integerValue||r.doubleValue),h=Zi(o.integerValue||o.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return xG(n.timestampValue,e.timestampValue);case 4:return xG(dC(n),dC(e));case 5:return Xt(n.stringValue,e.stringValue);case 6:return function(r,o){const l=sg(r),h=sg(o);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(r,o){const l=r.split("/"),h=o.split("/");for(let p=0;p<l.length&&p<h.length;p++){const y=Xt(l[p],h[p]);if(0!==y)return y}return Xt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,o){const l=Xt(Zi(r.latitude),Zi(o.latitude));return 0!==l?l:Xt(Zi(r.longitude),Zi(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,o){const l=r.values||[],h=o.values||[];for(let p=0;p<l.length&&p<h.length;++p){const y=Pf(l[p],h[p]);if(y)return y}return Xt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,o){if(r===kf.mapValue&&o===kf.mapValue)return 0;if(r===kf.mapValue)return 1;if(o===kf.mapValue)return-1;const l=r.fields||{},h=Object.keys(l),p=o.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let w=0;w<h.length&&w<y.length;++w){const T=Xt(h[w],y[w]);if(0!==T)return T;const M=Pf(l[h[w]],p[y[w]]);if(0!==M)return M}return Xt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw bt()}}function xG(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Xt(n,e);const t=Rf(n),i=Rf(e),r=Xt(t.seconds,i.seconds);return 0!==r?r:Xt(t.nanos,i.nanos)}function Nv(n){return rL(n)}function rL(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Rf(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sg(n.bytesValue).toBase64():"referenceValue"in n?at.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",o=!0;for(const l of i.values||[])o?o=!1:r+=",",r+=rL(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",l=!0;for(const h of r)l?l=!1:o+=",",o+=`${h}:${rL(i.fields[h])}`;return o+"}"}(n.mapValue):bt();var e}function lg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function oL(n){return!!n&&"integerValue"in n}function mC(n){return!!n&&"arrayValue"in n}function AG(n){return!!n&&"nullValue"in n}function MG(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $x(n){return!!n&&"mapValue"in n}function gC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return og(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=gC(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gC(n.arrayValue.values[t]);return e}return Object.assign({},n)}function NG(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function EQ(n){return"nullValue"in n?Hx:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?lg(Fd.empty(),at.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:bt()}function CQ(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?lg(Fd.empty(),at.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?kf:bt()}function OG(n,e){const t=Pf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function RG(n,e){const t=Pf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Eo{constructor(e){this.value=e}static empty(){return new Eo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!$x(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gC(t)}setAll(e){let t=Ki.emptyPath(),i={},r=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,r),i={},r=[],t=h.popLast()}l?i[h.lastSegment()]=gC(l):r.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());$x(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];$x(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){og(t,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Eo(gC(this.value))}}function kG(n){const e=[];return og(n.fields,(t,i)=>{const r=new Ki([t]);if($x(i)){const o=kG(i.mapValue).fields;if(0===o.length)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)}),new Ta(e)}class hi{constructor(e,t,i,r,o,l){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=o,this.documentState=l}static newInvalidDocument(e){return new hi(e,0,zt.min(),zt.min(),Eo.empty(),0)}static newFoundDocument(e,t,i){return new hi(e,1,t,zt.min(),i,0)}static newNoDocument(e,t){return new hi(e,2,t,zt.min(),Eo.empty(),0)}static newUnknownDocument(e,t){return new hi(e,3,t,zt.min(),Eo.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Eo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Eo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hi(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class DQ{constructor(e,t=null,i=[],r=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=h,this.ut=null}}function PG(n,e=null,t=[],i=[],r=null,o=null,l=null){return new DQ(n,e,t,i,r,o,l)}function cg(n){const e=dt(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+Nv(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),hC(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Nv(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Nv(i)).join(",")),e.ut=t}return e.ut}function _C(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!RQ(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!mu(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UG(n.startAt,e.startAt)&&UG(n.endAt,e.endAt)}function Gx(n){return at.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function zx(n,e){return n.filters.filter(t=>t instanceof Co&&t.field.isEqual(e))}function FG(n,e,t){let i=Hx,r=!0;for(const o of zx(n,e)){let l=Hx,h=!0;switch(o.op){case"<":case"<=":l=EQ(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,h=!1;break;case"!=":case"not-in":l=Hx}OG({value:i,inclusive:r},{value:l,inclusive:h})<0&&(i=l,r=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];OG({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}function LG(n,e,t){let i=kf,r=!0;for(const o of zx(n,e)){let l=kf,h=!0;switch(o.op){case">=":case">":l=CQ(o.value),h=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,h=!1;break;case"!=":case"not-in":l=kf}RG({value:i,inclusive:r},{value:l,inclusive:h})>0&&(i=l,r=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];RG({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}class Co extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,i):new IQ(e,t,i):"array-contains"===t?new AQ(e,i):"in"===t?new MQ(e,i):"not-in"===t?new NQ(e,i):"array-contains-any"===t?new OQ(e,i):new Co(e,t,i)}static ct(e,t,i){return"in"===t?new SQ(e,i):new xQ(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Pf(t,this.value)):null!==t&&ag(this.value)===ag(t)&&this.at(Pf(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return bt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class IQ extends Co{constructor(e,t,i){super(e,t,i),this.key=at.fromName(i.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.at(t)}}class SQ extends Co{constructor(e,t){super(e,"in",t),this.keys=BG(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xQ extends Co{constructor(e,t){super(e,"not-in",t),this.keys=BG(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function BG(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>at.fromName(i.referenceValue))}class AQ extends Co{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mC(t)&&pC(t.arrayValue,this.value)}}class MQ extends Co{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pC(this.value.arrayValue,t)}}class NQ extends Co{constructor(e,t){super(e,"not-in",t)}matches(e){if(pC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pC(this.value.arrayValue,t)}}class OQ extends Co{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>pC(this.value.arrayValue,i))}}class Ff{constructor(e,t){this.position=e,this.inclusive=t}}class Ov{constructor(e,t="asc"){this.field=e,this.dir=t}}function RQ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function VG(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],l=n.position[r];if(i=o.field.isKeyField()?at.comparator(at.fromName(l.referenceValue),t.key):Pf(l,t.data.field(o.field)),"desc"===o.dir&&(i*=-1),0!==i)break}return i}function UG(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mu(n.position[t],e.position[t]))return!1;return!0}class Ld{constructor(e,t=null,i=[],r=[],o=null,l="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=p,this.lt=null,this.ft=null}}function jG(n,e,t,i,r,o,l,h){return new Ld(n,e,t,i,r,o,l,h)}function Rv(n){return new Ld(n)}function HG(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function sL(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function aL(n){for(const e of n.filters)if(e.ht())return e.field;return null}function lL(n){return null!==n.collectionGroup}function kv(n){const e=dt(n);if(null===e.lt){e.lt=[];const t=aL(e),i=sL(e);if(null!==t&&null===i)t.isKeyField()||e.lt.push(new Ov(t)),e.lt.push(new Ov(Ki.keyField(),"asc"));else{let r=!1;for(const o of e.explicitOrderBy)e.lt.push(o),o.field.isKeyField()&&(r=!0);if(!r){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Ov(Ki.keyField(),o))}}}return e.lt}function Ws(n){const e=dt(n);if(!e.ft)if("F"===e.limitType)e.ft=PG(e.path,e.collectionGroup,kv(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of kv(e))t.push(new Ov(o.field,"desc"===o.dir?"asc":"desc"));const i=e.endAt?new Ff(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ff(e.startAt.position,e.startAt.inclusive):null;e.ft=PG(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.ft}function Wx(n,e,t){return new Ld(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yC(n,e){return _C(Ws(n),Ws(e))&&n.limitType===e.limitType}function $G(n){return`${cg(Ws(n))}|lt:${n.limitType}`}function cL(n){return`Query(target=${function TQ(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${Nv(i.value)}`;var i}).join(", ")}]`),hC(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Nv(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Nv(t)).join(",")),`Target(${e})`}(Ws(n))}; limitType=${n.limitType})`}function uL(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):at.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,o,l){const h=VG(r,o,l);return r.inclusive?h<=0:h<0}(t.startAt,kv(t),i)||t.endAt&&!function(r,o,l){const h=VG(r,o,l);return r.inclusive?h>=0:h>0}(t.endAt,kv(t),i)));var t,i}function GG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zG(n){return(e,t)=>{let i=!1;for(const r of kv(n)){const o=kQ(r,e,t);if(0!==o)return o;i=i||r.field.isKeyField()}return 0}}function kQ(n,e,t){const i=n.field.isKeyField()?at.comparator(e.key,t.key):function(r,o,l){const h=o.data.field(r),p=l.data.field(r);return null!==h&&null!==p?Pf(h,p):bt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return bt()}}function WG(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fC(e)?"-0":e}}function qG(n){return{integerValue:""+n}}function KG(n,e){return SG(e)?qG(e):WG(n,e)}class qx{constructor(){this._=void 0}}function PQ(n,e,t){return n instanceof Pv?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(o.fields.__previous_value__=r),{mapValue:o}}(t,e):n instanceof ug?ZG(n,e):n instanceof dg?QG(n,e):function(i,r){const o=YG(i,r),l=JG(o)+JG(i._t);return oL(o)&&oL(i._t)?qG(l):WG(i.wt,l)}(n,e)}function FQ(n,e,t){return n instanceof ug?ZG(n,e):n instanceof dg?QG(n,e):t}function YG(n,e){return n instanceof Fv?oL(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class Pv extends qx{}class ug extends qx{constructor(e){super(),this.elements=e}}function ZG(n,e){const t=XG(e);for(const i of n.elements)t.some(r=>mu(r,i))||t.push(i);return{arrayValue:{values:t}}}class dg extends qx{constructor(e){super(),this.elements=e}}function QG(n,e){let t=XG(e);for(const i of n.elements)t=t.filter(r=>!mu(r,i));return{arrayValue:{values:t}}}class Fv extends qx{constructor(e,t){super(),this.wt=e,this._t=t}}function JG(n){return Zi(n.integerValue||n.doubleValue)}function XG(n){return mC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class vC{constructor(e,t){this.field=e,this.transform=t}}class BQ{constructor(e,t){this.version=e,this.transformResults=t}}class Ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ui}static exists(e){return new Ui(void 0,e)}static updateTime(e){return new Ui(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kx(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Yx{}function ez(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Bv(n.key,Ui.none()):new Lv(n.key,n.data,Ui.none());{const t=n.data,i=Eo.empty();let r=new ei(Ki.comparator);for(let o of e.fields)if(!r.has(o)){let l=t.field(o);null===l&&o.length>1&&(o=o.popLast(),l=t.field(o)),null===l?i.delete(o):i.set(o,l),r=r.add(o)}return new Bd(n.key,i,new Ta(r.toArray()),Ui.none())}}function VQ(n,e,t){n instanceof Lv?function(i,r,o){const l=i.value.clone(),h=iz(i.fieldTransforms,r,o.transformResults);l.setAll(h),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Bd?function(i,r,o){if(!Kx(i.precondition,r))return void r.convertToUnknownDocument(o.version);const l=iz(i.fieldTransforms,r,o.transformResults),h=r.data;h.setAll(nz(i)),h.setAll(l),r.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function bC(n,e,t,i){return n instanceof Lv?function(r,o,l,h){if(!Kx(r.precondition,o))return l;const p=r.value.clone(),y=rz(r.fieldTransforms,h,o);return p.setAll(y),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null}(n,e,t,i):n instanceof Bd?function(r,o,l,h){if(!Kx(r.precondition,o))return l;const p=rz(r.fieldTransforms,h,o),y=o.data;return y.setAll(nz(r)),y.setAll(p),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===l?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(w=>w.field))}(n,e,t,i):(l=t,Kx(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l);var o,l}function UQ(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=YG(i.transform,r||null);null!=o&&(null===t&&(t=Eo.empty()),t.set(i.field,o))}return t||null}function tz(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Av(t,i,(r,o)=>function LQ(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof ug&&i instanceof ug||t instanceof dg&&i instanceof dg?Av(t.elements,i.elements,mu):t instanceof Fv&&i instanceof Fv?mu(t._t,i._t):t instanceof Pv&&i instanceof Pv);var t,i}(r,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Lv extends Yx{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Bd extends Yx{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function nz(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function iz(n,e,t){const i=new Map;Wt(n.length===t.length);for(let r=0;r<t.length;r++){const o=n[r],l=o.transform,h=e.data.field(o.field);i.set(o.field,FQ(l,h,t[r]))}return i}function rz(n,e,t){const i=new Map;for(const r of n){const o=r.transform,l=t.data.field(r.field);i.set(r.field,PQ(o,l,e))}return i}class Bv extends Yx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dL extends Yx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jQ{constructor(e){this.count=e}}var mr,Mn;function oz(n){switch(n){default:return bt();case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0}}function sz(n){if(void 0===n)return ir("GRPC error has no .code"),we.UNKNOWN;switch(n){case mr.OK:return we.OK;case mr.CANCELLED:return we.CANCELLED;case mr.UNKNOWN:return we.UNKNOWN;case mr.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case mr.INTERNAL:return we.INTERNAL;case mr.UNAVAILABLE:return we.UNAVAILABLE;case mr.UNAUTHENTICATED:return we.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case mr.NOT_FOUND:return we.NOT_FOUND;case mr.ALREADY_EXISTS:return we.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return we.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case mr.ABORTED:return we.ABORTED;case mr.OUT_OF_RANGE:return we.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return we.UNIMPLEMENTED;case mr.DATA_LOSS:return we.DATA_LOSS;default:return bt()}}(Mn=mr||(mr={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";class Lf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,o]of i)if(this.equalsFn(r,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){og(this.inner,(t,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return DG(this.inner)}size(){return this.innerSize}}const HQ=new Yi(at.comparator);function qs(){return HQ}const az=new Yi(at.comparator);function wC(...n){let e=az;for(const t of n)e=e.insert(t.key,t);return e}function lz(n){let e=az;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function gu(){return EC()}function cz(){return EC()}function EC(){return new Lf(n=>n.toString(),(n,e)=>n.isEqual(e))}const $Q=new Yi(at.comparator),GQ=new ei(at.comparator);function cn(...n){let e=GQ;for(const t of n)e=e.add(t);return e}const zQ=new ei(Xt);function Zx(){return zQ}class CC{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t){const i=new Map;return i.set(e,DC.createSynthesizedTargetChangeForCurrentChange(e,t)),new CC(zt.min(),i,Zx(),qs(),cn())}}class DC{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t){return new DC(Ar.EMPTY_BYTE_STRING,t,cn(),cn(),cn())}}class Qx{constructor(e,t,i,r){this.gt=e,this.removedTargetIds=t,this.key=i,this.yt=r}}class uz{constructor(e,t){this.targetId=e,this.It=t}}class dz{constructor(e,t,i=Ar.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class hz{constructor(){this.Tt=0,this.Et=pz(),this.At=Ar.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=cn(),t=cn(),i=cn();return this.Et.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:bt()}}),new DC(this.At,this.Rt,e,t,i)}Dt(){this.bt=!1,this.Et=pz()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class WQ{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=qs(),this.Bt=fz(),this.Lt=new ei(Xt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const i=this.Qt(t);switch(e.state){case 0:this.jt(t)&&i.Vt(e.resumeToken);break;case 1:i.kt(),i.Pt||i.Dt(),i.Vt(e.resumeToken);break;case 2:i.kt(),i.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(i.Mt(),i.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),i.Vt(e.resumeToken));break;default:bt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((i,r)=>{this.jt(r)&&t(r)})}zt(e){const t=e.targetId,i=e.It.count,r=this.Ht(t);if(r){const o=r.target;if(Gx(o))if(0===i){const l=new at(o.path);this.Kt(t,l,hi.newNoDocument(l,zt.min()))}else Wt(1===i);else this.Jt(t)!==i&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((o,l)=>{const h=this.Ht(l);if(h){if(o.current&&Gx(h.target)){const p=new at(h.target.path);null!==this.$t.get(p)||this.Xt(l,p)||this.Kt(l,p,hi.newNoDocument(p,e))}o.vt&&(t.set(l,o.St()),o.Dt())}});let i=cn();this.Bt.forEach((o,l)=>{let h=!0;l.forEachWhile(p=>{const y=this.Ht(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(i=i.add(o))}),this.$t.forEach((o,l)=>l.setReadTime(e));const r=new CC(e,t,this.Lt,this.$t,i);return this.$t=qs(),this.Bt=fz(),this.Lt=new ei(Xt),r}qt(e,t){if(!this.jt(e))return;const i=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,i),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,i){if(!this.jt(e))return;const r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),i&&(this.$t=this.$t.insert(t,i))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new hz,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new ei(Xt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ze("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new hz),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function fz(){return new Yi(at.comparator)}function pz(){return new Yi(at.comparator)}const qQ={asc:"ASCENDING",desc:"DESCENDING"},KQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class YQ{constructor(e,t){this.databaseId=e,this.dt=t}}function TC(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mz(n,e){return n.dt?e.toBase64():e.toUint8Array()}function ZQ(n,e){return TC(n,e.toTimestamp())}function zr(n){return Wt(!!n),zt.fromTimestamp(function(e){const t=Rf(e);return new Mi(t.seconds,t.nanos)}(n))}function hL(n,e){return(t=n,new An(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function gz(n){const e=An.fromString(n);return Wt(Tz(e)),e}function IC(n,e){return hL(n.databaseId,e.path)}function _u(n,e){const t=gz(e);if(t.get(1)!==n.databaseId.projectId)throw new Ge(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ge(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new at(yz(t))}function fL(n,e){return hL(n.databaseId,e)}function _z(n){const e=gz(n);return 4===e.length?An.emptyPath():yz(e)}function SC(n){return new An(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yz(n){return Wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function vz(n,e,t){return{name:IC(n,e),fields:t.value.mapValue.fields}}function bz(n,e,t){const i=_u(n,e.name),r=zr(e.updateTime),o=new Eo({mapValue:{fields:e.fields}}),l=hi.newFoundDocument(i,r,o);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function xC(n,e){let t;if(e instanceof Lv)t={update:vz(n,e.key,e.value)};else if(e instanceof Bv)t={delete:IC(n,e.key)};else if(e instanceof Bd)t={update:vz(n,e.key,e.data),updateMask:oJ(e.fieldMask)};else{if(!(e instanceof dL))return bt();t={verify:IC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const l=o.transform;if(l instanceof Pv)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ug)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof dg)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Fv)return{fieldPath:o.field.canonicalString(),increment:l._t};throw bt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:ZQ(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:bt()),t;var r}function pL(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?Ui.updateTime(zr(r.updateTime)):void 0!==r.exists?Ui.exists(r.exists):Ui.none():Ui.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,l){let h=null;"setToServerValue"in l?(Wt("REQUEST_TIME"===l.setToServerValue),h=new Pv):"appendMissingElements"in l?h=new ug(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new dg(l.removeAllFromArray.values||[]):"increment"in l?h=new Fv(o,l.increment):bt();const p=Ki.fromServerFormat(l.fieldPath);return new vC(p,h)}(n,r)):[];var r;if(e.update){const r=_u(n,e.update.name),o=new Eo({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ta((e.updateMask.fieldPaths||[]).map(y=>Ki.fromServerFormat(y)));return new Bd(r,o,l,t,i)}return new Lv(r,o,t,i)}if(e.delete){const r=_u(n,e.delete);return new Bv(r,t)}if(e.verify){const r=_u(n,e.verify);return new dL(r,t)}return bt()}function wz(n,e){return{documents:[fL(n,e.path)]}}function Ez(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=fL(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=fL(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const y=p.map(w=>function(T){if("=="===T.op){if(MG(T.value))return{unaryFilter:{field:Vv(T.field),op:"IS_NAN"}};if(AG(T.value))return{unaryFilter:{field:Vv(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(MG(T.value))return{unaryFilter:{field:Vv(T.field),op:"IS_NOT_NAN"}};if(AG(T.value))return{unaryFilter:{field:Vv(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vv(T.field),op:nJ(T.op),value:T.value}}}(w));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);r&&(t.structuredQuery.where=r);const o=function(p){if(0!==p.length)return p.map(y=>{return{field:Vv((w=y).field),direction:tJ(w.dir)};var w})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=(y=e.limit,n.dt||hC(y)?y:{value:y});var y,h,p;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function Cz(n){let e=_z(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Wt(1===i);const w=t.from[0];w.allDescendants?r=w.collectionId:e=e.child(w.collectionId)}let o=[];t.where&&(o=Dz(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(w=>{return new Ov(Uv((T=w).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let h=null;t.limit&&(h=function(w){let T;return T="object"==typeof w?w.value:w,hC(T)?null:T}(t.limit));let p=null;var w;t.startAt&&(p=new Ff((w=t.startAt).values||[],!!w.before));let y=null;return t.endAt&&(y=function(w){return new Ff(w.values||[],!w.before)}(t.endAt)),jG(e,r,l,o,h,"F",p,y)}function Dz(n){return n?void 0!==n.unaryFilter?[rJ(n)]:void 0!==n.fieldFilter?[iJ(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Dz(e)).reduce((e,t)=>e.concat(t)):bt():[]}function tJ(n){return qQ[n]}function nJ(n){return KQ[n]}function Vv(n){return{fieldPath:n.canonicalString()}}function Uv(n){return Ki.fromServerFormat(n.fieldPath)}function iJ(n){return Co.create(Uv(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bt()}}(n.fieldFilter.op),n.fieldFilter.value)}function rJ(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Uv(n.unaryFilter.field);return Co.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Uv(n.unaryFilter.field);return Co.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Uv(n.unaryFilter.field);return Co.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Uv(n.unaryFilter.field);return Co.create(r,"!=",{nullValue:"NULL_VALUE"});default:return bt()}}function oJ(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Tz(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function bs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Iz(e)),e=sJ(n.get(t),e);return Iz(e)}function sJ(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function Iz(n){return n+"\x01\x01"}function yu(n){const e=n.length;if(Wt(e>=2),2===e)return Wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),An.emptyPath();const t=e-2,i=[];let r="";for(let o=0;o<e;){const l=n.indexOf("\x01",o);switch((l<0||l>t)&&bt(),n.charAt(l+1)){case"\x01":const h=n.substring(o,l);let p;0===r.length?p=h:(r+=h,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(o,l),r+="\0";break;case"\x11":r+=n.substring(o,l+1);break;default:bt()}o=l+2}return new An(i)}const Sz=["userId","batchId"];function Jx(n,e){return[n,bs(e)]}function xz(n,e,t){return[n,bs(e),t]}const aJ={},lJ=["prefixPath","collectionGroup","readTime","documentId"],cJ=["prefixPath","collectionGroup","documentId"],uJ=["collectionGroup","readTime","prefixPath","documentId"],dJ=["canonicalId","targetId"],hJ=["targetId","path"],fJ=["path","targetId"],pJ=["collectionId","parent"],mJ=["indexId","uid"],gJ=["uid","sequenceNumber"],_J=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yJ=["indexId","uid","orderedDocumentKey"],vJ=["userId","collectionPath","documentId"],bJ=["userId","collectionPath","largestBatchId"],wJ=["userId","collectionGroup","largestBatchId"],Az=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],EJ=[...Az,"documentOverlays"],Mz=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nz=Mz,CJ=[...Nz,"indexConfiguration","indexState","indexEntries"];class mL extends wG{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Wr(n,e){const t=dt(n);return uc.N(t.ee,e)}class gL{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&VQ(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=bC(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=bC(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=cz();return this.mutations.forEach(r=>{const o=e.get(r.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=t.has(r.key)?null:h;const p=ez(l,h);null!==p&&i.set(r.key,p),l.isValidDocument()||l.convertToNoDocument(zt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cn())}isEqual(e){return this.batchId===e.batchId&&Av(this.mutations,e.mutations,(t,i)=>tz(t,i))&&Av(this.baseMutations,e.baseMutations,(t,i)=>tz(t,i))}}class _L{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Wt(e.mutations.length===i.length);let r=$Q;const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new _L(e,t,i,r)}}class yL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Bf{constructor(e,t,i,r,o=zt.min(),l=zt.min(),h=Ar.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Bf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Bf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Bf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Oz{constructor(e){this.ne=e}}function Rz(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Xx(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:IC(r=n.ne,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:TC(r,o.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:hg(e.version)};else{if(!e.isUnknownDocument())return bt();i.unknownDocument={path:t.path.toArray(),version:hg(e.version)}}var r,o;return i}function Xx(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function hg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fg(n){const e=new Mi(n.seconds,n.nanoseconds);return zt.fromTimestamp(e)}function pg(n,e){const t=(e.baseMutations||[]).map(o=>pL(n.ne,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const i=e.mutations.map(o=>pL(n.ne,o)),r=Mi.fromMillis(e.localWriteTimeMs);return new gL(e.batchId,r,t,i)}function AC(n){const e=fg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?fg(n.lastLimboFreeSnapshotVersion):zt.min();let i;var r;return void 0!==n.query.documents?(Wt(1===(r=n.query).documents.length),i=Ws(Rv(_z(r.documents[0])))):i=Ws(Cz(n.query)),new Bf(i,n.targetId,0,n.lastListenSequenceNumber,e,t,Ar.fromBase64String(n.resumeToken))}function kz(n,e){const t=hg(e.snapshotVersion),i=hg(e.lastLimboFreeSnapshotVersion);let r;r=Gx(e.target)?wz(n.ne,e.target):Ez(n.ne,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cg(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function vL(n){const e=Cz({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Wx(e,e.limit,"L"):e}function bL(n,e){return new yL(e.largestBatchId,pL(n.ne,e.overlayMutation))}function Pz(n,e){const t=e.path.lastSegment();return[n,bs(e.path.popLast()),t]}function Fz(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:hg(i.readTime),documentKey:bs(i.documentKey.path),largestBatchId:i.largestBatchId}}class TJ{getBundleMetadata(e,t){return Lz(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:fg(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return Lz(e).put({bundleId:(i=t).id,createTime:hg(zr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Bz(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:vL(r.bundledQuery),readTime:fg(r.readTime)};var r})}saveNamedQuery(e,t){return Bz(e).put({name:(i=t).name,readTime:hg(zr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Lz(n){return Wr(n,"bundles")}function Bz(n){return Wr(n,"namedQueries")}class eA{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new eA(e,t.uid||"")}getOverlay(e,t){return MC(e).get(Pz(this.userId,t)).next(i=>i?bL(this.wt,i):null)}getOverlays(e,t){const i=gu();return me.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((o,l)=>{const h=new yL(t,l);r.push(this.ie(e,h))}),me.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(l=>r.add(bs(l.getCollectionPath())));const o=[];return r.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);o.push(MC(e).W("collectionPathOverlayIndex",h))}),me.waitFor(o)}getOverlaysForCollection(e,t,i){const r=gu(),o=bs(t),l=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return MC(e).K("collectionPathOverlayIndex",l).next(h=>{for(const p of h){const y=bL(this.wt,p);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const o=gu();let l;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return MC(e).J({index:"collectionGroupOverlayIndex",range:h},(p,y,w)=>{const T=bL(this.wt,y);o.size()<r||T.largestBatchId===l?(o.set(T.getKey(),T),l=T.largestBatchId):w.done()}).next(()=>o)}ie(e,t){return MC(e).put(function(i,r,o){const[l,h,p]=Pz(r,o.mutation.key);return{userId:r,collectionPath:h,documentId:p,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:xC(i.ne,o.mutation)}}(this.wt,this.userId,t))}}function MC(n){return Wr(n,"documentOverlays")}class mg{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Zi(e.integerValue));else if("doubleValue"in e){const i=Zi(e.doubleValue);isNaN(i)?this.ce(t,13):(this.ce(t,15),fC(i)?t.ae(0):t.ae(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ce(t,20),"string"==typeof i?t.he(i):(t.he(`${i.seconds||""}`),t.ae(i.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(sg(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?NG(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):bt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const i=e.fields||{};this.ce(t,55);for(const r of Object.keys(i))this.le(r,t),this.oe(i[r],t)}me(e,t){const i=e.values||[];this.ce(t,50);for(const r of i)this.oe(r,t)}_e(e,t){this.ce(t,37),at.fromName(e).path.forEach(i=>{this.ce(t,60),this.ge(i,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function IJ(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Vz(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const o=IJ(255&t[r]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}mg.ye=new mg;class SJ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ie(i.value),i=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{const r=t.codePointAt(0);this.Ie(240|r>>>18),this.Ie(128|63&r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r)}}this.Te()}Pe(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=t.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}ve(e){const t=this.Ve(e),i=Vz(t);this.Se(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}De(e){const t=this.Ve(e),i=Vz(t);this.Se(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(r){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,r,!1),new Uint8Array(o.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class xJ{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class AJ{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class NC{constructor(){this.Oe=new SJ,this.Fe=new xJ(this.Oe),this.$e=new AJ(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class gg{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new gg(this.indexId,this.documentKey,this.arrayValue,i)}}function _g(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Uz(n.arrayValue,e.arrayValue),0!==t?t:(t=Uz(n.directionalValue,e.directionalValue),0!==t?t:at.comparator(n.documentKey,e.documentKey)))}function Uz(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class MJ{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const i=t;i.ht()?this.Ke=i:this.qe.push(i)}}Ge(e){const t=XF(e);if(void 0!==t&&!this.Qe(t))return!1;const i=ig(e);let r=0,o=0;for(;r<i.length&&this.Qe(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Ke){const l=i[r];if(!this.je(this.Ke,l)||!this.We(this.Ue[o++],l))return!1;++r}for(;r<i.length;++r)if(o>=this.Ue.length||!this.We(this.Ue[o++],i[r]))return!1;return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class NJ{constructor(){this.ze=new wL}addToCollectionParentIndex(e,t){return this.ze.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Da.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(Da.min())}updateCollectionGroup(e,t,i){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class wL{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ei(An.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ei(An.comparator)).toArray()}}const tA=new Uint8Array(0);class OJ{constructor(e,t){this.user=e,this.databaseId=t,this.He=new wL,this.Je=new Lf(i=>cg(i),(i,r)=>_C(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const o={collectionId:i,parent:bs(r)};return jz(e).put(o)}return me.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[_G(t),""],!1,!0);return jz(e).K(r).next(o=>{for(const l of o){if(l.collectionId!==t)break;i.push(yu(l.parent))}return i})}addFieldIndex(e,t){const i=nA(e),r={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete r.indexId;const o=i.add(r);if(t.indexState){const l=RC(e);return o.next(h=>{l.put(Fz(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const i=nA(e),r=RC(e),o=OC(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=OC(e);let r=!0;const o=new Map;return me.forEach(this.Ye(t),l=>this.Xe(e,l).next(h=>{r&&(r=!!h),o.set(l,h)})).next(()=>{if(r){let l=cn();const h=[];return me.forEach(o,(p,y)=>{var w;Ze("IndexedDbIndexManager",`Using index ${w=p,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(je=>`${je.fieldPath}:${je.kind}`).join(",")}`} to execute ${cg(t)}`);const T=function(je,xe){const Qe=XF(xe);if(void 0===Qe)return null;for(const ot of zx(je,Qe.fieldPath))switch(ot.op){case"array-contains-any":return ot.value.arrayValue.values||[];case"array-contains":return[ot.value]}return null}(y,p),M=function(je,xe){const Qe=new Map;for(const ot of ig(xe))for(const wt of zx(je,ot.fieldPath))switch(wt.op){case"==":case"in":Qe.set(ot.fieldPath.canonicalString(),wt.value);break;case"not-in":case"!=":return Qe.set(ot.fieldPath.canonicalString(),wt.value),Array.from(Qe.values())}return null}(y,p),O=function(je,xe){const Qe=[];let ot=!0;for(const wt of ig(xe)){const qt=0===wt.kind?FG(je,wt.fieldPath,je.startAt):LG(je,wt.fieldPath,je.startAt);Qe.push(qt.value),ot&&(ot=qt.inclusive)}return new Ff(Qe,ot)}(y,p),L=function(je,xe){const Qe=[];let ot=!0;for(const wt of ig(xe)){const qt=0===wt.kind?LG(je,wt.fieldPath,je.endAt):FG(je,wt.fieldPath,je.endAt);Qe.push(qt.value),ot&&(ot=qt.inclusive)}return new Ff(Qe,ot)}(y,p),H=this.Ze(p,y,O),te=this.Ze(p,y,L),Te=this.tn(p,y,M),Ne=this.en(p.indexId,T,H,O.inclusive,te,L.inclusive,Te);return me.forEach(Ne,je=>i.j(je,t.limit).next(xe=>{xe.forEach(Qe=>{const ot=at.fromSegments(Qe.documentKey);l.has(ot)||(l=l.add(ot),h.push(ot))})}))}).next(()=>h)}return me.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,i,r,o,l,h){const p=(null!=t?t.length:1)*Math.max(i.length,o.length),y=p/(null!=t?t.length:1),w=[];for(let T=0;T<p;++T){const M=t?this.nn(t[T/y]):tA,O=this.sn(e,M,i[T%y],r),L=this.rn(e,M,o[T%y],l),H=h.map(te=>this.sn(e,M,te,!0));w.push(...this.createRange(O,L,H))}return w}sn(e,t,i,r){const o=new gg(e,at.empty(),t,i);return r?o:o.Le()}rn(e,t,i,r){const o=new gg(e,at.empty(),t,i);return r?o.Le():o}Xe(e,t){const i=new MJ(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let l=null;for(const h of o)i.Ge(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let i=2;return me.forEach(this.Ye(t),r=>this.Xe(e,r).next(o=>{o?0!==i&&o.fields.length<function(l){let h=new ei(Ki.comparator),p=!1;for(const y of l.filters){const w=y;w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?p=!0:h=h.add(w.field))}for(const y of l.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}on(e,t){const i=new NC;for(const r of ig(e)){const o=t.data.field(r.fieldPath);if(null==o)return null;const l=i.Be(r.kind);mg.ye.re(o,l)}return i.Me()}nn(e){const t=new NC;return mg.ye.re(e,t.Be(0)),t.Me()}un(e,t){const i=new NC;return mg.ye.re(lg(this.databaseId,t),i.Be(function(r){const o=ig(r);return 0===o.length?0:o[o.length-1].kind}(e))),i.Me()}tn(e,t,i){if(null===i)return[];let r=[];r.push(new NC);let o=0;for(const l of ig(e)){const h=i[o++];for(const p of r)if(this.cn(t,l.fieldPath)&&mC(h))r=this.an(r,l,h);else{const y=p.Be(l.kind);mg.ye.re(h,y)}}return this.hn(r)}Ze(e,t,i){return this.tn(e,t,i.position)}hn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Me();return t}an(e,t,i){const r=[...e],o=[];for(const l of i.arrayValue.values||[])for(const h of r){const p=new NC;p.seed(h.Me()),mg.ye.re(l,p.Be(t.kind)),o.push(p)}return o}cn(e,t){return!!e.filters.find(i=>i instanceof Co&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=nA(e),r=RC(e);return(t?i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.K()).next(o=>{const l=[];return me.forEach(o,h=>r.get([h.indexId,this.uid]).next(p=>{l.push(function(y,w){const T=w?new cC(w.sequenceNumber,new Da(fg(w.readTime),new at(yu(w.documentKey)),w.largestBatchId)):cC.empty(),M=y.fields.map(([O,L])=>new Vx(Ki.fromServerFormat(O),L));return new Bx(y.indexId,y.collectionGroup,M,T)}(h,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==o?o:Xt(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=nA(e),o=RC(e);return this.ln(e).next(l=>r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>me.forEach(h,p=>o.put(Fz(p.indexId,this.user,l,i)))))}updateIndexEntries(e,t){const i=new Map;return me.forEach(t,(r,o)=>{const l=i.get(r.collectionGroup);return(l?me.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),me.forEach(h,p=>this.fn(e,r,p).next(y=>{const w=this.dn(o,p);return y.isEqual(w)?me.resolve():this._n(e,o,p,y,w)}))))})}wn(e,t,i,r){return OC(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(i,t.key),documentKey:t.key.path.toArray()})}mn(e,t,i,r){return OC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(i,t.key),t.key.path.toArray()])}fn(e,t,i){const r=OC(e);let o=new ei(_g);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.un(i,t)])},(l,h)=>{o=o.add(new gg(i.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}dn(e,t){let i=new ei(_g);const r=this.on(t,e);if(null==r)return i;const o=XF(t);if(null!=o){const l=e.data.field(o.fieldPath);if(mC(l))for(const h of l.arrayValue.values||[])i=i.add(new gg(t.indexId,e.key,this.nn(h),r))}else i=i.add(new gg(t.indexId,e.key,tA,r));return i}_n(e,t,i,r,o){Ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,p,y,w,T){const M=h.getIterator(),O=p.getIterator();let L=Mv(M),H=Mv(O);for(;L||H;){let te=!1,Te=!1;if(L&&H){const Ne=y(L,H);Ne<0?Te=!0:Ne>0&&(te=!0)}else null!=L?Te=!0:te=!0;te?(w(H),H=Mv(O)):Te?(T(L),L=Mv(M)):(L=Mv(M),H=Mv(O))}}(r,o,_g,h=>{l.push(this.wn(e,t,i,h))},h=>{l.push(this.mn(e,t,i,h))}),me.waitFor(l)}ln(e){let t=1;return RC(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((l,h)=>_g(l,h)).filter((l,h,p)=>!h||0!==_g(l,p[h-1]));const r=[];r.push(e);for(const l of i){const h=_g(l,e),p=_g(l,t);if(0===h)r[0]=e.Le();else if(h>0&&p<0)r.push(l),r.push(l.Le());else if(p>0)break}r.push(t);const o=[];for(let l=0;l<r.length;l+=2)o.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,tA,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,tA,[]]));return o}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Hz)}getMinOffset(e,t){return me.mapArray(this.Ye(t),i=>this.Xe(e,i).next(r=>r||bt())).next(Hz)}}function jz(n){return Wr(n,"collectionParents")}function OC(n){return Wr(n,"indexEntries")}function nA(n){return Wr(n,"indexConfiguration")}function RC(n){return Wr(n,"indexState")}function Hz(n){Wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;eL(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Da(e.readTime,e.documentKey,t)}const $z={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ks{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Ks(e,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Gz(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),o=[],l=IDBKeyRange.only(t.batchId);let h=0;const p=i.J({range:l},(w,T,M)=>(h++,M.delete()));o.push(p.next(()=>{Wt(1===h)}));const y=[];for(const w of t.mutations){const T=xz(e,w.key.path,t.batchId);o.push(r.delete(T)),y.push(w.key)}return me.waitFor(o).next(()=>y)}function iA(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw bt();e=n.noDocument}return JSON.stringify(e).length}Ks.DEFAULT_COLLECTION_PERCENTILE=10,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ks.DEFAULT=new Ks(41943040,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ks.DISABLED=new Ks(-1,0,0);class rA{constructor(e,t,i,r){this.userId=e,this.wt=t,this.indexManager=i,this.referenceDelegate=r,this.gn={}}static se(e,t,i,r){Wt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new rA(o,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vf(e).J({index:"userMutationsIndex",range:i},(r,o,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const o=jv(e),l=Vf(e);return l.add({}).next(h=>{Wt("number"==typeof h);const p=new gL(h,t,i,r),y=function(M,O,L){const H=L.baseMutations.map(Te=>xC(M.ne,Te)),te=L.mutations.map(Te=>xC(M.ne,Te));return{userId:O,batchId:L.batchId,localWriteTimeMs:L.localWriteTime.toMillis(),baseMutations:H,mutations:te}}(this.wt,this.userId,p),w=[];let T=new ei((M,O)=>Xt(M.canonicalString(),O.canonicalString()));for(const M of r){const O=xz(this.userId,M.key.path,h);T=T.add(M.key.path.popLast()),w.push(l.put(y)),w.push(o.put(O,aJ))}return T.forEach(M=>{w.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.gn[h]=p.keys()}),me.waitFor(w).next(()=>p)})}lookupMutationBatch(e,t){return Vf(e).get(t).next(i=>i?(Wt(i.userId===this.userId),pg(this.wt,i)):null)}yn(e,t){return this.gn[t]?me.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.gn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return Vf(e).J({index:"userMutationsIndex",range:r},(l,h,p)=>{h.userId===this.userId&&(Wt(h.batchId>=i),o=pg(this.wt,h)),p.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Vf(e).J({index:"userMutationsIndex",range:t,reverse:!0},(r,o,l)=>{i=o.batchId,l.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vf(e).K("userMutationsIndex",t).next(i=>i.map(r=>pg(this.wt,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Jx(this.userId,t.path),r=IDBKeyRange.lowerBound(i),o=[];return jv(e).J({range:r},(l,h,p)=>{const[y,w,T]=l,M=yu(w);if(y===this.userId&&t.path.isEqual(M))return Vf(e).get(T).next(O=>{if(!O)throw bt();Wt(O.userId===this.userId),o.push(pg(this.wt,O))});p.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ei(Xt);const r=[];return t.forEach(o=>{const l=Jx(this.userId,o.path),h=IDBKeyRange.lowerBound(l),p=jv(e).J({range:h},(y,w,T)=>{const[M,O,L]=y,H=yu(O);M===this.userId&&o.path.isEqual(H)?i=i.add(L):T.done()});r.push(p)}),me.waitFor(r).next(()=>this.pn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,o=Jx(this.userId,i),l=IDBKeyRange.lowerBound(o);let h=new ei(Xt);return jv(e).J({range:l},(p,y,w)=>{const[T,M,O]=p,L=yu(M);T===this.userId&&i.isPrefixOf(L)?L.length===r&&(h=h.add(O)):w.done()}).next(()=>this.pn(e,h))}pn(e,t){const i=[],r=[];return t.forEach(o=>{r.push(Vf(e).get(o).next(l=>{if(null===l)throw bt();Wt(l.userId===this.userId),i.push(pg(this.wt,l))}))}),me.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return Gz(e.ee,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),me.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return jv(e).J({range:i},(o,l,h)=>{if(o[0]===this.userId){const p=yu(o[1]);r.push(p)}else h.done()}).next(()=>{Wt(0===r.length)})})}containsKey(e,t){return zz(e,this.userId,t)}Tn(e){return Wz(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function zz(n,e,t){const i=Jx(e,t.path),r=i[1],o=IDBKeyRange.lowerBound(i);let l=!1;return jv(n).J({range:o,H:!0},(h,p,y)=>{const[w,T,M]=h;w===e&&T===r&&(l=!0),y.done()}).next(()=>l)}function Vf(n){return Wr(n,"mutations")}function jv(n){return Wr(n,"documentMutations")}function Wz(n){return Wr(n,"mutationQueues")}class yg{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new yg(0)}static Rn(){return new yg(-1)}}class RJ{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const i=new yg(t.highestTargetId);return t.highestTargetId=i.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>zt.fromTimestamp(new Mi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.bn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Pn(e,r)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(i=>(i.targetCount+=1,this.Vn(t,i),this.Pn(e,i))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hv(e).delete(t.targetId)).next(()=>this.bn(e)).next(i=>(Wt(i.targetCount>0),i.targetCount-=1,this.Pn(e,i)))}removeTargets(e,t,i){let r=0;const o=[];return Hv(e).J((l,h)=>{const p=AC(h);p.sequenceNumber<=t&&null===i.get(p.targetId)&&(r++,o.push(this.removeTargetData(e,p)))}).next(()=>me.waitFor(o)).next(()=>r)}forEachTarget(e,t){return Hv(e).J((i,r)=>{const o=AC(r);t(o)})}bn(e){return qz(e).get("targetGlobalKey").next(t=>(Wt(null!==t),t))}Pn(e,t){return qz(e).put("targetGlobalKey",t)}vn(e,t){return Hv(e).put(kz(this.wt,t))}Vn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=cg(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Hv(e).J({range:r,index:"queryTargetsIndex"},(l,h,p)=>{const y=AC(h);_C(t,y.target)&&(o=y,p.done())}).next(()=>o)}addMatchingKeys(e,t,i){const r=[],o=Uf(e);return t.forEach(l=>{const h=bs(l.path);r.push(o.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(e,i,l))}),me.waitFor(r)}removeMatchingKeys(e,t,i){const r=Uf(e);return me.forEach(t,o=>{const l=bs(o.path);return me.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,t){const i=Uf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Uf(e);let o=cn();return r.J({range:i,H:!0},(l,h,p)=>{const y=yu(l[1]),w=new at(y);o=o.add(w)}).next(()=>o)}containsKey(e,t){const i=bs(t.path),r=IDBKeyRange.bound([i],[_G(i)],!1,!0);let o=0;return Uf(e).J({index:"documentTargetsIndex",H:!0,range:r},([l,h],p,y)=>{0!==l&&(o++,y.done())}).next(()=>o>0)}te(e,t){return Hv(e).get(t).next(i=>i?AC(i):null)}}function Hv(n){return Wr(n,"targets")}function qz(n){return Wr(n,"targetGlobal")}function Uf(n){return Wr(n,"targetDocuments")}function Kz([n,e],[t,i]){const r=Xt(n,t);return 0===r?Xt(e,i):r}class kJ{constructor(e){this.Sn=e,this.buffer=new ei(Kz),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Kz(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PJ{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Se.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Of(i)?Ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Nf(i)}yield t.kn(3e5)}))}}class FJ{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return me.resolve(zs.ot);const i=new kJ(t);return this.Mn.forEachTarget(e,r=>i.xn(r.sequenceNumber)).next(()=>this.Mn.Fn(e,r=>i.xn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Mn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve($z)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$z):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let i,r,o,l,h,p,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,l=Date.now(),this.nthSequenceNumber(e,r))).next(T=>(i=T,h=Date.now(),this.removeTargets(e,i,t))).next(T=>(o=T,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(y=Date.now(),QF()<=rc.in.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-w}ms\n\tDetermined least recently used ${r} in `+(h-l)+`ms\n\tRemoved ${o} targets in `+(p-h)+`ms\n\tRemoved ${T} documents in `+(y-p)+`ms\nTotal Duration: ${y-w}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:T})))}}class LJ{constructor(e,t){this.db=e,this.garbageCollector=new FJ(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Bn(e){let t=0;return this.Fn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(i,r)=>t(r))}addReference(e,t,i){return oA(e,i)}removeReference(e,t,i){return oA(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return oA(e,t)}Un(e,t){return function(i,r){let o=!1;return Wz(i).Y(l=>zz(i,l,r).next(h=>(h&&(o=!0),me.resolve(!h)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Ln(e,(l,h)=>{if(h<=t){const p=this.Un(e,l).next(y=>{if(!y)return o++,i.getEntry(e,l).next(()=>(i.removeEntry(l,zt.min()),Uf(e).delete([0,bs(l.path)])))});r.push(p)}}).next(()=>me.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return oA(e,t)}Ln(e,t){const i=Uf(e);let r,o=zs.ot;return i.J({index:"documentTargetsIndex"},([l,h],{path:p,sequenceNumber:y})=>{0===l?(o!==zs.ot&&t(new at(yu(r)),o),o=y,r=p):o=zs.ot}).next(()=>{o!==zs.ot&&t(new at(yu(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function oA(n,e){return Uf(n).put((i=n.currentSequenceNumber,{targetId:0,path:bs(e.path),sequenceNumber:i}));var i}class Yz{constructor(){this.changes=new Lf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?me.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BJ{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return vg(e).put(i)}removeEntry(e,t,i){return vg(e).delete(function(r,o){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Xx(o),l[l.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.qn(e,i)))}getEntry(e,t){let i=hi.newInvalidDocument(t);return vg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kC(t))},(r,o)=>{i=this.Kn(t,o)}).next(()=>i)}Gn(e,t){let i={size:0,document:hi.newInvalidDocument(t)};return vg(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kC(t))},(r,o)=>{i={document:this.Kn(t,o),size:iA(o)}}).next(()=>i)}getEntries(e,t){let i=qs();return this.Qn(e,t,(r,o)=>{const l=this.Kn(r,o);i=i.insert(r,l)}).next(()=>i)}jn(e,t){let i=qs(),r=new Yi(at.comparator);return this.Qn(e,t,(o,l)=>{const h=this.Kn(o,l);i=i.insert(o,h),r=r.insert(o,iA(l))}).next(()=>({documents:i,Wn:r}))}Qn(e,t,i){if(t.isEmpty())return me.resolve();let r=new ei(Xz);t.forEach(p=>r=r.add(p));const o=IDBKeyRange.bound(kC(r.first()),kC(r.last())),l=r.getIterator();let h=l.getNext();return vg(e).J({index:"documentKeyIndex",range:o},(p,y,w)=>{const T=at.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&Xz(h,T)<0;)i(h,null),h=l.getNext();h&&h.isEqual(T)&&(i(h,y),h=l.hasNext()?l.getNext():null),h?w.q(kC(h)):w.done()}).next(()=>{for(;h;)i(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),Xx(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vg(e).K(IDBKeyRange.bound(r,o,!0)).next(l=>{let h=qs();for(const p of l){const y=this.Kn(at.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,i,r){let o=qs();const l=Jz(t,i),h=Jz(t,Da.max());return vg(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(p,y,w)=>{const T=this.Kn(at.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(T.key,T),o.size===r&&w.done()}).next(()=>o)}newChangeBuffer(e){return new VJ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Qz(e).get("remoteDocumentGlobalKey").next(t=>(Wt(!!t),t))}qn(e,t){return Qz(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const i=function DJ(n,e){let t;if(e.document)t=bz(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=at.fromSegments(e.noDocument.path),r=fg(e.noDocument.readTime);t=hi.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return bt();{const i=at.fromSegments(e.unknownDocument.path),r=fg(e.unknownDocument.version);t=hi.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new Mi(i[0],i[1]);return zt.fromTimestamp(r)}(e.readTime)),t}(this.wt,t);if(!i.isNoDocument()||!i.version.isEqual(zt.min()))return i}return hi.newInvalidDocument(e)}}function Zz(n){return new BJ(n)}class VJ extends Yz{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Lf(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new ei((o,l)=>Xt(o.canonicalString(),l.canonicalString()));return this.changes.forEach((o,l)=>{const h=this.Hn.get(o);if(t.push(this.zn.removeEntry(e,o,h.readTime)),l.isValidDocument()){const p=Rz(this.zn.wt,l);r=r.add(o.path.popLast());const y=iA(p);i+=y-h.size,t.push(this.zn.addEntry(e,o,p))}else if(i-=h.size,this.trackRemovals){const p=Rz(this.zn.wt,l.convertToNoDocument(zt.min()));t.push(this.zn.addEntry(e,o,p))}}),r.forEach(o=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.zn.updateMetadata(e,i)),me.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(i=>(this.Hn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:i,Wn:r})=>(r.forEach((o,l)=>{this.Hn.set(o,{size:l,readTime:i.get(o).readTime})}),i))}}function Qz(n){return Wr(n,"remoteDocumentGlobal")}function vg(n){return Wr(n,"remoteDocumentsV14")}function kC(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Jz(n,e){const t=e.documentKey.path.toArray();return[n,Xx(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Xz(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(r=Xt(t[o],i[o]),r)return r;return r=Xt(t.length,i.length),r||(r=Xt(t[t.length-2],i[i.length-2]),r||Xt(t[t.length-1],i[i.length-1]))}class UJ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class e6{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.getBaseDocument(e,t,i))).next(r=>(null!==i&&bC(i.mutation,r,Ta.empty(),Mi.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,cn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=cn()){const r=gu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(o=>{let l=wC();return o.forEach((h,p)=>{l=l.insert(h,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const i=gu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,cn()))}populateOverlays(e,t,i){const r=[];return i.forEach(o=>{t.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,i,r){let o=qs();const l=EC(),h=EC();return t.forEach((p,y)=>{const w=i.get(y.key);r.has(y.key)&&(void 0===w||w.mutation instanceof Bd)?o=o.insert(y.key,y):void 0!==w&&(l.set(y.key,w.mutation.getFieldMask()),bC(w.mutation,y,w.mutation.getFieldMask(),Mi.now()))}),this.recalculateAndSaveOverlays(e,o).next(p=>(p.forEach((y,w)=>l.set(y,w)),t.forEach((y,w)=>{var T;return h.set(y,new UJ(w,null!==(T=l.get(y))&&void 0!==T?T:null))}),h))}recalculateAndSaveOverlays(e,t){const i=EC();let r=new Yi((l,h)=>l-h),o=cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let w=i.get(p)||Ta.empty();w=h.applyToLocalView(y,w),i.set(p,w);const T=(r.get(h.batchId)||cn()).add(p);r=r.insert(h.batchId,T)})}).next(()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,w=p.value,T=cz();w.forEach(M=>{if(!o.has(M)){const O=ez(t.get(M),i.get(M));null!==O&&T.set(M,O),o=o.add(M)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,T))}return me.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return at.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):lL(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):me.resolve(gu());let h=-1,p=o;return l.next(y=>me.forEach(y,(w,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),o.get(w)?me.resolve():this.getBaseDocument(e,w,T).next(M=>{p=p.insert(w,M)}))).next(()=>this.populateOverlays(e,y,o)).next(()=>this.computeViews(e,p,y,cn())).next(w=>({batchId:h,changes:lz(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new at(t)).next(i=>{let r=wC();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let o=wC();return this.indexManager.getCollectionParents(e,r).next(l=>me.forEach(l,h=>{const p=(y=t,w=h.child(r),new Ld(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,w;return this.getDocumentsMatchingCollectionQuery(e,p,i).next(y=>{y.forEach((w,T)=>{o=o.insert(w,T)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(o=>(r=o,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(o=>{o.forEach((h,p)=>{const y=p.getKey();null===r.get(y)&&(r=r.insert(y,hi.newInvalidDocument(y)))});let l=wC();return r.forEach((h,p)=>{const y=o.get(h);void 0!==y&&bC(y.mutation,p,Ta.empty(),Mi.now()),uL(t,p)&&(l=l.insert(h,p))}),l})}getBaseDocument(e,t,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,t):me.resolve(hi.newInvalidDocument(t))}}class jJ{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return me.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var i;return this.Jn.set(t.id,{id:(i=t).id,version:i.version,createTime:zr(i.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(i=t).name,query:vL(i.bundledQuery),readTime:zr(i.readTime)}),me.resolve();var i}}class HJ{constructor(){this.overlays=new Yi(at.comparator),this.Xn=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const i=gu();return me.forEach(t,r=>this.getOverlay(e,r).next(o=>{null!==o&&i.set(r,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,o)=>{this.ie(e,t,o)}),me.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Xn.get(i);return void 0!==r&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Xn.delete(i)),me.resolve()}getOverlaysForCollection(e,t,i){const r=gu(),o=t.length+1,l=new at(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&p.largestBatchId>i&&r.set(p.getKey(),p)}return me.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new Yi((y,w)=>y-w);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let w=o.get(y.largestBatchId);null===w&&(w=gu(),o=o.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const h=gu(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,w)=>h.set(y,w)),!(h.size()>=r)););return me.resolve(h)}ie(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const l=this.Xn.get(r.largestBatchId).delete(i.key);this.Xn.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new yL(t,i));let o=this.Xn.get(t);void 0===o&&(o=cn(),this.Xn.set(t,o)),this.Xn.set(t,o.add(i.key))}}class EL{constructor(){this.Zn=new ei(qr.ts),this.es=new ei(qr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const i=new qr(e,t);this.Zn=this.Zn.add(i),this.es=this.es.add(i)}ss(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.rs(new qr(e,t))}os(e,t){e.forEach(i=>this.removeReference(i,t))}us(e){const t=new at(new An([])),i=new qr(t,e),r=new qr(t,e+1),o=[];return this.es.forEachInRange([i,r],l=>{this.rs(l),o.push(l.key)}),o}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new at(new An([])),i=new qr(t,e),r=new qr(t,e+1);let o=cn();return this.es.forEachInRange([i,r],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new qr(e,0),i=this.Zn.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class qr{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return at.comparator(e.key,t.key)||Xt(e.ls,t.ls)}static ns(e,t){return Xt(e.ls,t.ls)||at.comparator(e.key,t.key)}}class $J{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new ei(qr.ts)}checkEmpty(e){return me.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const o=this.fs;this.fs++;const l=new gL(o,t,i,r);this.mutationQueue.push(l);for(const h of r)this.ds=this.ds.add(new qr(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return me.resolve(l)}lookupMutationBatch(e,t){return me.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.ws(t+1),o=r<0?0:r;return me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new qr(t,0),r=new qr(t,Number.POSITIVE_INFINITY),o=[];return this.ds.forEachInRange([i,r],l=>{const h=this._s(l.ls);o.push(h)}),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ei(Xt);return t.forEach(r=>{const o=new qr(r,0),l=new qr(r,Number.POSITIVE_INFINITY);this.ds.forEachInRange([o,l],h=>{i=i.add(h.ls)})}),me.resolve(this.gs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;at.isDocumentKey(o)||(o=o.child(""));const l=new qr(new at(o),0);let h=new ei(Xt);return this.ds.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(h=h.add(p.ls)),!0)},l),me.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(i=>{const r=this._s(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Wt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let i=this.ds;return me.forEach(t.mutations,r=>{const o=new qr(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=i})}In(e){}containsKey(e,t){const i=new qr(t,0),r=this.ds.firstAfterOrEqual(i);return me.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return me.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class GJ{constructor(e){this.ps=e,this.docs=new Yi(at.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,l=this.ps(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return me.resolve(i?i.document.mutableCopy():hi.newInvalidDocument(t))}getEntries(e,t){let i=qs();return t.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():hi.newInvalidDocument(r))}),me.resolve(i)}getAllFromCollection(e,t,i){let r=qs();const o=new at(t.child("")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:h,value:{document:p}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||eL(vG(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return me.resolve(r)}getAllFromCollectionGroup(e,t,i,r){bt()}Is(e,t){return me.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new zJ(this)}getSize(e){return me.resolve(this.size)}}class zJ extends Yz{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.zn.addEntry(e,r)):this.zn.removeEntry(i)}),me.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class WJ{constructor(e){this.persistence=e,this.Ts=new Lf(t=>cg(t),_C),this.lastRemoteSnapshotVersion=zt.min(),this.highestTargetId=0,this.Es=0,this.As=new EL,this.targetCount=0,this.Rs=yg.An()}forEachTarget(e,t){return this.Ts.forEach((i,r)=>t(r)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Es&&(this.Es=t),me.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new yg(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.vn(t),me.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.Ts.forEach((l,h)=>{h.sequenceNumber<=t&&null===i.get(h.targetId)&&(this.Ts.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),me.waitFor(o).next(()=>r)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const i=this.Ts.get(t)||null;return me.resolve(i)}addMatchingKeys(e,t,i){return this.As.ss(t,i),me.resolve()}removeMatchingKeys(e,t,i){this.As.os(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(l=>{o.push(r.markPotentiallyOrphaned(e,l))}),me.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),me.resolve()}getMatchingKeysForTargetId(e,t){const i=this.As.hs(t);return me.resolve(i)}containsKey(e,t){return me.resolve(this.As.containsKey(t))}}class t6{constructor(e,t){this.bs={},this.overlays={},this.Ps=new zs(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new WJ(this),this.indexManager=new NJ,this.remoteDocumentCache=new GJ(i=>this.referenceDelegate.Ss(i)),this.wt=new Oz(t),this.Ds=new jJ(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HJ,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.bs[e.toKey()];return i||(i=new $J(t,this.referenceDelegate),this.bs[e.toKey()]=i),i}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,i){Ze("MemoryPersistence","Starting transaction:",e);const r=new qJ(this.Ps.next());return this.referenceDelegate.Cs(),i(r).next(o=>this.referenceDelegate.xs(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ns(e,t){return me.or(Object.values(this.bs).map(i=>()=>i.containsKey(e,t)))}}class qJ extends wG{constructor(e){super(),this.currentSequenceNumber=e}}class sA{constructor(e){this.persistence=e,this.ks=new EL,this.Ms=null}static Os(e){return new sA(e)}get Fs(){if(this.Ms)return this.Ms;throw bt()}addReference(e,t,i){return this.ks.addReference(i,t),this.Fs.delete(i.toString()),me.resolve()}removeReference(e,t,i){return this.ks.removeReference(i,t),this.Fs.add(i.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),me.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(r=>this.Fs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(o=>this.Fs.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Fs,i=>{const r=at.fromPath(i);return this.$s(e,r).next(o=>{o||t.removeEntry(r,zt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(i=>{i?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return me.or([()=>me.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class KJ{constructor(e){this.wt=e}M(e,t,i,r){const o=new Ux("createOrUpgrade",t);var h;i<1&&r>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sz,{unique:!0}),h.createObjectStore("documentMutations"),n6(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=me.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),n6(e)),l=l.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:zt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(o))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(h,p){return p.store("mutations").K().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sz,{unique:!0});const w=p.store("mutations"),T=y.map(M=>w.put(M));return me.waitFor(T)})}(e,o))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(l=l.next(()=>this.Bs(o))),i<6&&r>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(o)))),i<7&&r>=7&&(l=l.next(()=>this.Us(o))),i<8&&r>=8&&(l=l.next(()=>this.qs(e,o))),i<9&&r>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(l=l.next(()=>this.Ks(o))),i<11&&r>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(l=l.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:vJ});p.createIndex("collectionPathOverlayIndex",bJ,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",wJ,{unique:!1})}(e)})),i<13&&r>=13&&(l=l.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:lJ});p.createIndex("documentKeyIndex",cJ),p.createIndex("collectionGroupIndex",uJ)}(e)).next(()=>this.Gs(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>this.Qs(e,o))),i<15&&r>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:mJ}).createIndex("sequenceNumberIndex",gJ,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:_J}).createIndex("documentKeyIndex",yJ,{unique:!1})}(e))),l}Ls(e){let t=0;return e.store("remoteDocuments").J((i,r)=>{t+=iA(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Bs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.K().next(r=>me.forEach(r,o=>{const l=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.K("userMutationsIndex",l).next(h=>me.forEach(h,p=>{Wt(p.userId===o.userId);const y=pg(this.wt,p);return Gz(e,o.userId,y).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const o=[];return i.J((l,h)=>{const p=new An(l),y=[0,bs(p)];o.push(t.get(y).next(w=>w?me.resolve():t.put({targetId:0,path:bs(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>me.waitFor(o))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:pJ});const i=t.store("collectionParents"),r=new wL,o=l=>{if(r.add(l)){const h=l.lastSegment(),p=l.popLast();return i.put({collectionId:h,parent:bs(p)})}};return t.store("remoteDocuments").J({H:!0},(l,h)=>{const p=new An(l);return o(p.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,h,p],y)=>{const w=yu(h);return o(w.popLast())}))}Ks(e){const t=e.store("targets");return t.J((i,r)=>{const o=AC(r),l=kz(this.wt,o);return t.put(l)})}Gs(e,t){const i=t.store("remoteDocuments"),r=[];return i.J((o,l)=>{const h=t.store("remoteDocumentsV14"),p=(y=l,y.document?new at(An.fromString(y.document.name).popFirst(5)):y.noDocument?at.fromSegments(y.noDocument.path):y.unknownDocument?at.fromSegments(y.unknownDocument.path):bt()).path.toArray();var y;const w={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(h.put(w))}).next(()=>me.waitFor(r))}Qs(e,t){const i=t.store("mutations"),r=Zz(this.wt),o=new t6(sA.Os,this.wt.ne);return i.K().next(l=>{const h=new Map;return l.forEach(p=>{var y;let w=null!==(y=h.get(p.userId))&&void 0!==y?y:cn();pg(this.wt,p).keys().forEach(T=>w=w.add(T)),h.set(p.userId,w)}),me.forEach(h,(p,y)=>{const w=new $r(y),T=eA.se(this.wt,w),M=o.getIndexManager(w),O=rA.se(w,this.wt,M,o.referenceDelegate);return new e6(r,O,T,M).recalculateAndSaveOverlaysForDocumentKeys(new mL(t,zs.ot),p).next()})})}}function n6(n){n.createObjectStore("targetDocuments",{keyPath:hJ}).createIndex("documentTargetsIndex",fJ,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dJ,{unique:!0}),n.createObjectStore("targetGlobal")}const CL="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class DL{constructor(e,t,i,r,o,l,h,p,y,w,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.js=o,this.window=l,this.document=h,this.Ws=y,this.zs=w,this.Hs=T,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=M=>Promise.resolve(),!DL.V())throw new Ge(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LJ(this,r),this.ei=t+"main",this.wt=new Oz(p),this.ni=new uc(this.ei,this.Hs,new KJ(this.wt)),this.Vs=new RJ(this.referenceDelegate,this.wt),this.remoteDocumentCache=Zz(this.wt),this.Ds=new TJ,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===w&&ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ge(we.FAILED_PRECONDITION,CL);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new zs(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var i=(0,Se.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Se.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Se.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>aA(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Of(e))return Ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return PC(e).get("owner").next(t=>me.resolve(this.di(t)))}_i(e){return aA(e).delete(this.clientId)}wi(){var e=this;return(0,Se.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Wr(i,"clientMetadata");return r.K().next(o=>{const l=e.gi(o,18e5),h=o.filter(p=>-1===l.indexOf(p));return me.forEach(h,p=>r.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const i of t)e.si.removeItem(e.yi(i.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?me.resolve(!0):PC(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Ge(we.FAILED_PRECONDITION,CL);return!1}}return!(!this.networkEnabled||!this.inForeground)||aA(e).K().next(i=>void 0===this.gi(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Se.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new mL(t,zs.ot);return e.li(i).next(()=>e._i(i))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(i=>this.mi(i.updateTimeMs,t)&&!this.pi(i.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>aA(e).K().next(t=>this.gi(t,18e5).map(i=>i.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return rA.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OJ(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return eA.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,i){Ze("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",o=15===(l=this.Hs)?CJ:14===l?Nz:13===l?Mz:12===l?EJ:11===l?Az:void bt();var l;let h;return this.ni.runTransaction(e,r,o,p=>(h=new mL(p,this.Ps?this.Ps.next():zs.ot),"readwrite-primary"===t?this.ai(h).next(y=>!!y||this.hi(h)).next(y=>{if(!y)throw ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ge(we.FAILED_PRECONDITION,bG);return i(h)}).next(y=>this.fi(h).next(()=>y)):this.bi(h).next(()=>i(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}bi(e){return PC(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ge(we.FAILED_PRECONDITION,CL)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return PC(e).put("owner",t)}static V(){return uc.V()}li(e){const t=PC(e);return t.get("owner").next(i=>this.di(i)?(Ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}mi(e,t){const i=Date.now();return!(e<i-t||e>i&&(ir(`Detected an update time that is in the future: ${e} > ${i}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,B.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const i=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ze("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ir("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){ir("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function PC(n){return Wr(n,"owner")}function aA(n){return Wr(n,"clientMetadata")}function TL(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class IL{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Pi=i,this.vi=r}static Vi(e,t){let i=cn(),r=cn();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new IL(e,t.fromCache,i,r)}}class i6{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ci(e,t).next(o=>o||this.xi(e,t,r,i)).next(o=>o||this.Ni(e,t))}Ci(e,t){if(HG(t))return me.resolve(null);let i=Ws(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Wx(t,null,"F"),i=Ws(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=cn(...o);return this.Di.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.ki(t,h);return this.Mi(t,y,l,p.readTime)?this.Ci(e,Wx(t,null,"F")):this.Oi(e,y,t,p)}))})))}xi(e,t,i,r){return HG(t)||r.isEqual(zt.min())?this.Ni(e,t):this.Di.getDocuments(e,i).next(o=>{const l=this.ki(t,o);return this.Mi(t,l,i,r)?this.Ni(e,t):(QF()<=rc.in.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cL(t)),this.Oi(e,l,t,yG(r,-1)))})}ki(e,t){let i=new ei(zG(e));return t.forEach((r,o)=>{uL(e,o)&&(i=i.add(o))}),i}Mi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ni(e,t){return QF()<=rc.in.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",cL(t)),this.Di.getDocumentsMatchingQuery(e,t,Da.min())}Oi(e,t,i,r){return this.Di.getDocumentsMatchingQuery(e,i,r).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}class YJ{constructor(e,t,i,r){this.persistence=e,this.Fi=t,this.wt=r,this.$i=new Yi(Xt),this.Bi=new Lf(o=>cg(o),_C),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(i)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e6(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function r6(n,e,t,i){return new YJ(n,e,t,i)}function o6(n,e){return SL.apply(this,arguments)}function SL(){return SL=(0,Se.Z)(function*(n,e){const t=dt(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,t.qi(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let p=cn();for(const y of r){l.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of o){h.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Ki:y,removedBatchIds:l,addedBatchIds:h}))})})}),SL.apply(this,arguments)}function s6(n){const e=dt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function a6(n,e,t){let i=cn(),r=cn();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let l=qs();return t.forEach((h,p)=>{const y=o.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(r=r.add(h)),p.isNoDocument()&&p.version.isEqual(zt.min())?(e.removeEntry(h,p.readTime),l=l.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),l=l.insert(h,p)):Ze("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)}),{Gi:l,Qi:r}})}function JJ(n,e){const t=dt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function $v(n,e){const t=dt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Vs.getTargetData(i,e).next(o=>o?(r=o,me.resolve(r)):t.Vs.allocateTargetId(i).next(l=>(r=new Bf(e,l,0,i.currentSequenceNumber),t.Vs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.$i.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.$i=t.$i.insert(i.targetId,i),t.Bi.set(e,i.targetId)),i})}function Gv(n,e,t){return xL.apply(this,arguments)}function xL(){return xL=(0,Se.Z)(function*(n,e,t){const i=dt(n),r=i.$i.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Of(l))throw l;Ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.$i=i.$i.remove(e),i.Bi.delete(r.target)}),xL.apply(this,arguments)}function lA(n,e,t){const i=dt(n);let r=zt.min(),o=cn();return i.persistence.runTransaction("Execute query","readonly",l=>function(h,p,y){const w=dt(h),T=w.Bi.get(y);return void 0!==T?me.resolve(w.$i.get(T)):w.Vs.getTargetData(p,y)}(i,l,Ws(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Vs.getMatchingKeysForTargetId(l,h.targetId).next(p=>{o=p})}).next(()=>i.Fi.getDocumentsMatchingQuery(l,e,t?r:zt.min(),t?o:cn())).next(h=>(u6(i,GG(e),h),{documents:h,ji:o})))}function l6(n,e){const t=dt(n),i=dt(t.Vs),r=t.$i.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",o=>i.te(o,e).next(l=>l?l.target:null))}function c6(n,e){const t=dt(n),i=t.Li.get(e)||zt.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Ui.getAllFromCollectionGroup(r,e,yG(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(u6(t,e,r),r))}function u6(n,e,t){let i=zt.min();t.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Li.set(e,i)}function AL(){return AL=(0,Se.Z)(function*(n,e,t,i){const r=dt(n);let o=cn(),l=qs();for(const y of t){const w=e.Wi(y.metadata.name);y.document&&(o=o.add(w));const T=e.zi(y);T.setReadTime(e.Hi(y.metadata.readTime)),l=l.insert(w,T)}const h=r.Ui.newChangeBuffer({trackRemovals:!0}),p=yield $v(r,(y=i,Ws(Rv(An.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>a6(y,h,l).next(w=>(h.apply(y),w)).next(w=>r.Vs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>r.Vs.addMatchingKeys(y,o,p.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(y,w.Gi,w.Qi)).next(()=>w.Gi)))}),AL.apply(this,arguments)}function eX(n,e){return ML.apply(this,arguments)}function ML(){return ML=(0,Se.Z)(function*(n,e,t=cn()){const i=yield $v(n,Ws(vL(e.bundledQuery))),r=dt(n);return r.persistence.runTransaction("Save named query","readwrite",o=>{const l=zr(e.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.Ds.saveNamedQuery(o,e);const h=i.withResumeToken(Ar.EMPTY_BYTE_STRING,l);return r.$i=r.$i.insert(h.targetId,h),r.Vs.updateTargetData(o,h).next(()=>r.Vs.removeMatchingKeysForTargetId(o,i.targetId)).next(()=>r.Vs.addMatchingKeys(o,t,i.targetId)).next(()=>r.Ds.saveNamedQuery(o,e))})}),ML.apply(this,arguments)}function d6(n,e){return`firestore_clients_${n}_${e}`}function h6(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function NL(n,e){return`firestore_targets_${n}_${e}`}class cA{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ji(e,t,i){const r=JSON.parse(i);let o,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Ge(r.error.code,r.error.message))),l?new cA(e,t,r.state,o):(ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class FC{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ji(e,t){const i=JSON.parse(t);let r,o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(r=new Ge(i.error.code,i.error.message))),o?new FC(e,i.state,r):(ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uA{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,o=Zx();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=SG(i.activeTargetIds[l]),o=o.add(i.activeTargetIds[l]);return r?new uA(e,o):(ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class OL{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new OL(t.clientId,t.onlineState):(ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class RL{constructor(){this.activeTargetIds=Zx()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kL{constructor(e,t,i,r,o){this.window=e,this.js=t,this.persistenceKey=i,this.tr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Yi(Xt),this.started=!1,this.ir=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.rr=d6(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new RL),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Se.Z)(function*(){const t=yield e.syncEngine.Ri();for(const r of t){if(r===e.tr)continue;const o=e.getItem(d6(e.persistenceKey,r));if(o){const l=uA.Ji(r,o);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const i=e.storage.getItem(e.lr);if(i){const r=e.wr(i);r&&e.mr(r)}for(const r of e.ir)e.nr(r);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,i){this.yr(e,t,i),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(NL(this.persistenceKey,e));if(i){const r=FC.Ji(e,i);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(NL(this.persistenceKey,e))}updateQueryState(e,t,i){this.Tr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.pr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ze("SharedClientState","READ",e,t),t}setItem(e,t){Ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Ze("SharedClientState","EVENT",i.key,i.newValue),i.key===this.rr)return void ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Se.Z)(function*(){if(t.started){if(null!==i.key)if(t.cr.test(i.key)){if(null==i.newValue){const r=t.Rr(i.key);return t.br(r,null)}{const r=t.Pr(i.key,i.newValue);if(r)return t.br(r.clientId,r)}}else if(t.ar.test(i.key)){if(null!==i.newValue){const r=t.vr(i.key,i.newValue);if(r)return t.Vr(r)}}else if(t.hr.test(i.key)){if(null!==i.newValue){const r=t.Sr(i.key,i.newValue);if(r)return t.Dr(r)}}else if(i.key===t.lr){if(null!==i.newValue){const r=t.wr(i.newValue);if(r)return t.mr(r)}}else if(i.key===t.ur){const r=function(o){let l=zs.ot;if(null!=o)try{const h=JSON.parse(o);Wt("number"==typeof h),l=h}catch(h){ir("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(i.newValue);r!==zs.ot&&t.sequenceNumberHandler(r)}else if(i.key===t.dr){const r=t.Cr(i.newValue);yield Promise.all(r.map(o=>t.syncEngine.Nr(o)))}}else t.ir.push(i)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,i){const r=new cA(this.currentUser,e,t,i),o=h6(this.persistenceKey,this.currentUser,e);this.setItem(o,r.Yi())}pr(e){const t=h6(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,i){const r=NL(this.persistenceKey,e),o=new FC(e,t,i);this.setItem(r,o.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const i=this.Rr(e);return uA.Ji(i,t)}vr(e,t){const i=this.ar.exec(e),r=Number(i[1]);return cA.Ji(new $r(void 0!==i[2]?i[2]:null),r,t)}Sr(e,t){const i=this.hr.exec(e),r=Number(i[1]);return FC.Ji(r,t)}wr(e){return OL.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Se.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const i=t?this.sr.insert(e,t):this.sr.remove(e),r=this.gr(this.sr),o=this.gr(i),l=[],h=[];return o.forEach(p=>{r.has(p)||l.push(p)}),r.forEach(p=>{o.has(p)||h.push(p)}),this.syncEngine.Or(l,h).then(()=>{this.sr=i})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Zx();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class f6{constructor(){this.Fr=new RL,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,i){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new RL,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tX{Br(e){}shutdown(){}}class p6{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const nX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class iX{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class rX extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,i,r,o){const l=this.oo(e,t);Ze("RestConnection","Sending: ",l,i);const h={};return this.uo(h,r,o),this.co(e,l,h,i).then(p=>(Ze("RestConnection","Received: ",p),p),p=>{throw ng("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",i),p})}ao(e,t,i,r,o,l){return this.ro(e,t,i,r,o)}uo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+xv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}oo(e,t){return`${this.so}/v1/${t}:${nX[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,i,r){return new Promise((o,l)=>{const h=new nQ;h.listenOnce(X9.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ZF.NO_ERROR:const y=h.getResponseJson();Ze("Connection","XHR received:",JSON.stringify(y)),o(y);break;case ZF.TIMEOUT:Ze("Connection",'RPC "'+e+'" timed out'),l(new Ge(we.DEADLINE_EXCEEDED,"Request time out"));break;case ZF.HTTP_ERROR:const w=h.getStatus();if(Ze("Connection",'RPC "'+e+'" failed with status:',w,"response text:",h.getResponseText()),w>0){const T=h.getResponseJson().error;if(T&&T.status&&T.message){const M=function(O){const L=O.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(L)>=0?L:we.UNKNOWN}(T.status);l(new Ge(M,T.message))}else l(new Ge(we.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Ge(we.UNAVAILABLE,"Connection failed."));break;default:bt()}}finally{Ze("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(r);h.send(t,"POST",p,i,15)})}ho(e,t,i){const r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Q9(),l=J9(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new tQ({})),this.uo(h.initMessageHeaders,t,i),(0,B.uI)()||(0,B.b$)()||(0,B.d)()||(0,B.w1)()||(0,B.Mn)()||(0,B.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");Ze("Connection","Creating WebChannel: "+p,h);const y=o.createWebChannel(p,h);let w=!1,T=!1;const M=new iX({jr:L=>{T?Ze("Connection","Not sending because WebChannel is closed:",L):(w||(Ze("Connection","Opening WebChannel transport."),y.open(),w=!0),Ze("Connection","WebChannel sending:",L),y.send(L))},Wr:()=>y.close()}),O=(L,H,te)=>{L.listen(H,Te=>{try{te(Te)}catch(Ne){setTimeout(()=>{throw Ne},0)}})};return O(y,Lx.EventType.OPEN,()=>{T||Ze("Connection","WebChannel transport opened.")}),O(y,Lx.EventType.CLOSE,()=>{T||(T=!0,Ze("Connection","WebChannel transport closed"),M.eo())}),O(y,Lx.EventType.ERROR,L=>{T||(T=!0,ng("Connection","WebChannel transport errored:",L),M.eo(new Ge(we.UNAVAILABLE,"The operation could not be completed")))}),O(y,Lx.EventType.MESSAGE,L=>{var H;if(!T){const te=L.data[0];Wt(!!te);const Ne=te.error||(null===(H=te[0])||void 0===H?void 0:H.error);if(Ne){Ze("Connection","WebChannel received error:",Ne);const je=Ne.status;let xe=function(ot){const wt=mr[ot];if(void 0!==wt)return sz(wt)}(je),Qe=Ne.message;void 0===xe&&(xe=we.INTERNAL,Qe="Unknown error status: "+je+" with message "+Ne.message),T=!0,M.eo(new Ge(xe,Qe)),y.close()}else Ze("Connection","WebChannel received:",te),M.no(te)}}),O(l,eQ.STAT_EVENT,L=>{L.stat===hG.PROXY?Ze("Connection","Detected buffering proxy"):L.stat===hG.NOPROXY&&Ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.Zr()},0),M}}function m6(){return typeof window<"u"?window:null}function dA(){return typeof document<"u"?document:null}function LC(n){return new YQ(n,!0)}class PL{constructor(e,t,i=1e3,r=1.5,o=6e4){this.js=e,this.timerId=t,this.lo=i,this.fo=r,this._o=o,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),i=Math.max(0,Date.now()-this.yo),r=Math.max(0,t-i);r>0&&Ze("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,r,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class g6{constructor(e,t,i,r,o,l,h,p){this.js=e,this.Ao=i,this.Ro=r,this.bo=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new PL(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Se.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,Se.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var i=this;return(0,Se.Z)(function*(){i.Fo(),i.$o(),i.So.cancel(),i.Po++,4!==e?i.So.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(ir(t.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),i.So.po()):t&&t.code===we.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Bo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Po===t&&this.Uo(i,r)},i=>{e(()=>{const r=new Ge(we.UNKNOWN,"Fetching auth token failed: "+i.message);return this.qo(r)})})}Uo(e,t){const i=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{i(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(r=>{i(()=>this.qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}xo(){var e=this;this.state=5,this.So.Io((0,Se.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oX extends g6{constructor(e,t,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.wt=o}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function JQ(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:bt(),r=e.targetChange.targetIds||[],o=function(p,y){return p.dt?(Wt(void 0===y||"string"==typeof y),Ar.fromBase64String(y||"")):(Wt(void 0===y||y instanceof Uint8Array),Ar.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const y=void 0===p.code?we.UNKNOWN:sz(p.code);return new Ge(y,p.message||"")}(l);t=new dz(i,r,o,h||null)}else if("documentChange"in e){const i=e.documentChange,r=_u(n,i.document.name),o=zr(i.document.updateTime),l=new Eo({mapValue:{fields:i.document.fields}}),h=hi.newFoundDocument(r,o,l);t=new Qx(i.targetIds||[],i.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const i=e.documentDelete,r=_u(n,i.document),o=i.readTime?zr(i.readTime):zt.min(),l=hi.newNoDocument(r,o);t=new Qx([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const i=e.documentRemove,r=_u(n,i.document);t=new Qx([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return bt();{const i=e.filter,o=new jQ(i.count||0);t=new uz(i.targetId,o)}}var p;return t}(this.wt,e),i=function(r){if(!("targetChange"in r))return zt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?zt.min():o.readTime?zr(o.readTime):zt.min()}(e);return this.listener.Go(t,i)}Qo(e){const t={};t.database=SC(this.wt),t.addTarget=function(r,o){let l;const h=o.target;return l=Gx(h)?{documents:wz(r,h)}:{query:Ez(r,h)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?l.resumeToken=mz(r,o.resumeToken):o.snapshotVersion.compareTo(zt.min())>0&&(l.readTime=TC(r,o.snapshotVersion.toTimestamp())),l}(this.wt,e);const i=function eJ(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return bt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Oo(t)}jo(e){const t={};t.database=SC(this.wt),t.removeTarget=e,this.Oo(t)}}class sX extends g6{constructor(e,t,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.wt=o,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function XQ(n,e){return n&&n.length>0?(Wt(void 0!==e),n.map(t=>function(i,r){let o=zr(i.updateTime?i.updateTime:r);return o.isEqual(zt.min())&&(o=zr(r)),new BQ(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=zr(e.commitTime);return this.listener.Jo(i,t)}return Wt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=SC(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>xC(this.wt,i))};this.Oo(t)}}class aX extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=i,this.wt=r,this.Zo=!1}tu(){if(this.Zo)throw new Ge(we.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.bo.ro(e,t,i,r,o)).catch(r=>{throw"FirebaseError"===r.name?(r.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ge(we.UNKNOWN,r.toString())})}ao(e,t,i,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.bo.ao(e,t,i,o,l,r)).catch(o=>{throw"FirebaseError"===o.name?(o.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ge(we.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class lX{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ir(t),this.su=!1):Ze("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class cX{constructor(e,t,i,r,o){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=o,this.du.Br(h=>{i.enqueueAndForget((0,Se.Z)(function*(){var p;jf(l)&&(Ze("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Se.Z)(function*(y){const w=dt(y);w.lu.add(4),yield zv(w),w._u.set("Unknown"),w.lu.delete(4),yield BC(w)}),function(y){return p.apply(this,arguments)})(l))}))}),this._u=new lX(i,r)}}function BC(n){return FL.apply(this,arguments)}function FL(){return FL=(0,Se.Z)(function*(n){if(jf(n))for(const e of n.fu)yield e(!0)}),FL.apply(this,arguments)}function zv(n){return LL.apply(this,arguments)}function LL(){return LL=(0,Se.Z)(function*(n){for(const e of n.fu)yield e(!1)}),LL.apply(this,arguments)}function hA(n,e){const t=dt(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),UL(t)?VL(t):qv(t).Co()&&BL(t,e))}function VC(n,e){const t=dt(n),i=qv(t);t.hu.delete(e),i.Co()&&_6(t,e),0===t.hu.size&&(i.Co()?i.ko():jf(t)&&t._u.set("Unknown"))}function BL(n,e){n.wu.Nt(e.targetId),qv(n).Qo(e)}function _6(n,e){n.wu.Nt(e),qv(n).jo(e)}function VL(n){n.wu=new WQ({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),qv(n).start(),n._u.iu()}function UL(n){return jf(n)&&!qv(n).Do()&&n.hu.size>0}function jf(n){return 0===dt(n).lu.size}function y6(n){n.wu=void 0}function uX(n){return jL.apply(this,arguments)}function jL(){return jL=(0,Se.Z)(function*(n){n.hu.forEach((e,t)=>{BL(n,e)})}),jL.apply(this,arguments)}function dX(n,e){return HL.apply(this,arguments)}function HL(){return HL=(0,Se.Z)(function*(n,e){y6(n),UL(n)?(n._u.uu(e),VL(n)):n._u.set("Unknown")}),HL.apply(this,arguments)}function hX(n,e,t){return $L.apply(this,arguments)}function $L(){return $L=(0,Se.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof dz&&2===e.state&&e.cause)try{yield(i=(0,Se.Z)(function*(r,o){const l=o.cause;for(const h of o.targetIds)r.hu.has(h)&&(yield r.remoteSyncer.rejectListen(h,l),r.hu.delete(h),r.wu.removeTarget(h))}),function(r,o){return i.apply(this,arguments)})(n,e)}catch(i){Ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield fA(n,i)}else if(e instanceof Qx?n.wu.Ut(e):e instanceof uz?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(zt.min()))try{const i=yield s6(n.localStore);t.compareTo(i)>=0&&(yield function(r,o){const l=r.wu.Yt(o);return l.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=r.hu.get(p);y&&r.hu.set(p,y.withResumeToken(h.resumeToken,o))}}),l.targetMismatches.forEach(h=>{const p=r.hu.get(h);if(!p)return;r.hu.set(h,p.withResumeToken(Ar.EMPTY_BYTE_STRING,p.snapshotVersion)),_6(r,h);const y=new Bf(p.target,h,1,p.sequenceNumber);BL(r,y)}),r.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(i){Ze("RemoteStore","Failed to raise snapshot:",i),yield fA(n,i)}var i}),$L.apply(this,arguments)}function fA(n,e,t){return GL.apply(this,arguments)}function GL(){return GL=(0,Se.Z)(function*(n,e,t){if(!Of(e))throw e;n.lu.add(1),yield zv(n),n._u.set("Offline"),t||(t=()=>s6(n.localStore)),n.asyncQueue.enqueueRetryable((0,Se.Z)(function*(){Ze("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield BC(n)}))}),GL.apply(this,arguments)}function v6(n,e){return e().catch(t=>fA(n,t,e))}function Wv(n){return zL.apply(this,arguments)}function zL(){return zL=(0,Se.Z)(function*(n){const e=dt(n),t=Hf(e);let i=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;fX(e);)try{const r=yield JJ(e.localStore,i);if(null===r){0===e.au.length&&t.ko();break}i=r.batchId,pX(e,r)}catch(r){yield fA(e,r)}b6(e)&&w6(e)}),zL.apply(this,arguments)}function fX(n){return jf(n)&&n.au.length<10}function pX(n,e){n.au.push(e);const t=Hf(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function b6(n){return jf(n)&&!Hf(n).Do()&&n.au.length>0}function w6(n){Hf(n).start()}function mX(n){return WL.apply(this,arguments)}function WL(){return WL=(0,Se.Z)(function*(n){Hf(n).Xo()}),WL.apply(this,arguments)}function gX(n){return qL.apply(this,arguments)}function qL(){return qL=(0,Se.Z)(function*(n){const e=Hf(n);for(const t of n.au)e.Ho(t.mutations)}),qL.apply(this,arguments)}function _X(n,e,t){return KL.apply(this,arguments)}function KL(){return KL=(0,Se.Z)(function*(n,e,t){const i=n.au.shift(),r=_L.from(i,e,t);yield v6(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Wv(n)}),KL.apply(this,arguments)}function yX(n,e){return YL.apply(this,arguments)}function YL(){return YL=(0,Se.Z)(function*(n,e){var t;e&&Hf(n).zo&&(yield(t=(0,Se.Z)(function*(i,r){if(oz(o=r.code)&&o!==we.ABORTED){const l=i.au.shift();Hf(i).No(),yield v6(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield Wv(i)}var o}),function(i,r){return t.apply(this,arguments)})(n,e)),b6(n)&&w6(n)}),YL.apply(this,arguments)}function E6(n,e){return ZL.apply(this,arguments)}function ZL(){return ZL=(0,Se.Z)(function*(n,e){const t=dt(n);t.asyncQueue.verifyOperationInProgress(),Ze("RemoteStore","RemoteStore received new credentials");const i=jf(t);t.lu.add(3),yield zv(t),i&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield BC(t)}),ZL.apply(this,arguments)}function QL(n,e){return JL.apply(this,arguments)}function JL(){return JL=(0,Se.Z)(function*(n,e){const t=dt(n);e?(t.lu.delete(2),yield BC(t)):e||(t.lu.add(2),yield zv(t),t._u.set("Unknown"))}),JL.apply(this,arguments)}function qv(n){return n.mu||(n.mu=function(e,t,i){const r=dt(e);return r.tu(),new oX(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:uX.bind(null,n),Jr:dX.bind(null,n),Go:hX.bind(null,n)}),n.fu.push(function(){var e=(0,Se.Z)(function*(t){t?(n.mu.No(),UL(n)?VL(n):n._u.set("Unknown")):(yield n.mu.stop(),y6(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Hf(n){return n.gu||(n.gu=function(e,t,i){const r=dt(e);return r.tu(),new sX(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,i)}(n.datastore,n.asyncQueue,{zr:mX.bind(null,n),Jr:yX.bind(null,n),Yo:gX.bind(null,n),Jo:_X.bind(null,n)}),n.fu.push(function(){var e=(0,Se.Z)(function*(t){t?(n.gu.No(),yield Wv(n)):(yield n.gu.stop(),n.au.length>0&&(Ze("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class XL{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,i,r,o){const l=Date.now()+i,h=new XL(e,t,l,r,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ge(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kv(n,e){if(ir("AsyncQueue",`${e}: ${n}`),Of(n))return new Ge(we.UNAVAILABLE,`${e}: ${n}`);throw n}class Yv{constructor(e){this.comparator=e?(t,i)=>e(t,i)||at.comparator(t.key,i.key):(t,i)=>at.comparator(t.key,i.key),this.keyedMap=wC(),this.sortedSet=new Yi(this.comparator)}static emptySet(e){return new Yv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Yv;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class C6{constructor(){this.yu=new Yi(at.comparator)}track(e){const t=e.doc.key,i=this.yu.get(t);i?0!==e.type&&3===i.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==i.type?this.yu=this.yu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.yu=this.yu.remove(t):1===e.type&&2===i.type?this.yu=this.yu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):bt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,i)=>{e.push(i)}),e}}class Zv{constructor(e,t,i,r,o,l,h,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,i,r){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new Zv(e,t,Yv.emptySet(t),o,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class vX{constructor(){this.Iu=void 0,this.listeners=[]}}class bX{constructor(){this.queries=new Lf(e=>$G(e),yC),this.onlineState="Unknown",this.Tu=new Set}}function e2(n,e){return t2.apply(this,arguments)}function t2(){return t2=(0,Se.Z)(function*(n,e){const t=dt(n),i=e.query;let r=!1,o=t.queries.get(i);if(o||(r=!0,o=new vX),r)try{o.Iu=yield t.onListen(i)}catch(l){const h=Kv(l,`Initialization of query '${cL(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,o),o.listeners.push(e),e.Eu(t.onlineState),o.Iu&&e.Au(o.Iu)&&r2(t)}),t2.apply(this,arguments)}function n2(n,e){return i2.apply(this,arguments)}function i2(){return i2=(0,Se.Z)(function*(n,e){const t=dt(n),i=e.query;let r=!1;const o=t.queries.get(i);if(o){const l=o.listeners.indexOf(e);l>=0&&(o.listeners.splice(l,1),r=0===o.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),i2.apply(this,arguments)}function wX(n,e){const t=dt(n);let i=!1;for(const r of e){const l=t.queries.get(r.query);if(l){for(const h of l.listeners)h.Au(r)&&(i=!0);l.Iu=r}}i&&r2(t)}function EX(n,e,t){const i=dt(n),r=i.queries.get(e);if(r)for(const o of r.listeners)o.onError(t);i.queries.delete(e)}function r2(n){n.Tu.forEach(e=>{e.next()})}class o2{constructor(e,t,i){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}Au(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new Zv(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Zv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class CX{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class D6{constructor(e){this.wt=e}Wi(e){return _u(this.wt,e)}zi(e){return e.metadata.exists?bz(this.wt,e.document,!1):hi.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return zr(e)}}class DX{constructor(e,t,i){this.xu=e,this.localStore=t,this.wt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=T6(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=An.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,i=new D6(this.wt);for(const r of e)if(r.metadata.queries){const o=i.Wi(r.metadata.name);for(const l of r.metadata.queries){const h=(t.get(l)||cn()).add(o);t.set(l,h)}}return t}complete(){var e=this;return(0,Se.Z)(function*(){const t=yield function XJ(n,e,t,i){return AL.apply(this,arguments)}(e.localStore,new D6(e.wt),e.documents,e.xu.id),i=e.ku(e.documents);for(const r of e.queries)yield eX(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function T6(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class I6{constructor(e){this.key=e}}class S6{constructor(e){this.key=e}}class x6{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=cn(),this.mutatedKeys=cn(),this.Lu=zG(e),this.Uu=new Yv(this.Lu)}get qu(){return this.Fu}Ku(e,t){const i=t?t.Gu:new C6,r=t?t.Uu:this.Uu;let o=t?t.mutatedKeys:this.mutatedKeys,l=r,h=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((w,T)=>{const M=r.get(w),O=uL(this.query,T)?T:null,L=!!M&&this.mutatedKeys.has(M.key),H=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let te=!1;M&&O?M.data.isEqual(O.data)?L!==H&&(i.track({type:3,doc:O}),te=!0):this.Qu(M,O)||(i.track({type:2,doc:O}),te=!0,(p&&this.Lu(O,p)>0||y&&this.Lu(O,y)<0)&&(h=!0)):!M&&O?(i.track({type:0,doc:O}),te=!0):M&&!O&&(i.track({type:1,doc:M}),te=!0,(p||y)&&(h=!0)),te&&(O?(l=l.add(O),o=H?o.add(w):o.delete(w)):(l=l.delete(w),o=o.delete(w)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const w="F"===this.query.limitType?l.last():l.first();l=l.delete(w.key),o=o.delete(w.key),i.track({type:1,doc:w})}return{Uu:l,Gu:i,Mi:h,mutatedKeys:o}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const o=e.Gu.pu();o.sort((y,w)=>function(T,M){const O=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt()}};return O(T)-O(M)}(y.type,w.type)||this.Lu(y.doc,w.doc)),this.ju(i);const l=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,p=h!==this.$u;return this.$u=h,0!==o.length||p?{snapshot:new Zv(this.query,e.Uu,r,o,e.mutatedKeys,0===h,p,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new C6,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=cn(),this.Uu.forEach(i=>{this.Hu(i.key)&&(this.Bu=this.Bu.add(i.key))});const t=[];return e.forEach(i=>{this.Bu.has(i)||t.push(new S6(i))}),this.Bu.forEach(i=>{e.has(i)||t.push(new I6(i))}),t}Ju(e){this.Fu=e.ji,this.Bu=cn();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Zv.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class TX{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class IX{constructor(e){this.key=e,this.Xu=!1}}class SX{constructor(e,t,i,r,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new Lf(h=>$G(h),yC),this.ec=new Map,this.nc=new Set,this.sc=new Yi(at.comparator),this.ic=new Map,this.rc=new EL,this.oc={},this.uc=new Map,this.cc=yg.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function xX(n,e){return s2.apply(this,arguments)}function s2(){return s2=(0,Se.Z)(function*(n,e){const t=A2(n);let i,r;const o=t.tc.get(e);if(o)i=o.targetId,t.sharedClientState.addLocalQueryTarget(i),r=o.view.Yu();else{const l=yield $v(t.localStore,Ws(e));t.isPrimaryClient&&hA(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield a2(t,e,i,"current"===h)}return r}),s2.apply(this,arguments)}function a2(n,e,t,i){return l2.apply(this,arguments)}function l2(){return l2=(0,Se.Z)(function*(n,e,t,i){n.hc=(w,T,M)=>{return(O=(0,Se.Z)(function*(L,H,te,Te){let Ne=H.view.Ku(te);Ne.Mi&&(Ne=yield lA(L.localStore,H.query,!1).then(({documents:Qe})=>H.view.Ku(Qe,Ne)));const je=Te&&Te.targetChanges.get(H.targetId),xe=H.view.applyChanges(Ne,L.isPrimaryClient,je);return y2(L,H.targetId,xe.zu),xe.snapshot}),function(L,H,te,Te){return O.apply(this,arguments)})(n,w,T,M);var O};const r=yield lA(n.localStore,e,!0),o=new x6(e,r.ji),l=o.Ku(r.documents),h=DC.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState),p=o.applyChanges(l,n.isPrimaryClient,h);y2(n,t,p.zu);const y=new TX(e,t,o);return n.tc.set(e,y),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),p.snapshot}),l2.apply(this,arguments)}function AX(n,e){return c2.apply(this,arguments)}function c2(){return c2=(0,Se.Z)(function*(n,e){const t=dt(n),i=t.tc.get(e),r=t.ec.get(i.targetId);if(r.length>1)return t.ec.set(i.targetId,r.filter(o=>!yC(o,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Gv(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),VC(t.remoteStore,i.targetId),Qv(t,i.targetId)}).catch(Nf))):(Qv(t,i.targetId),yield Gv(t.localStore,i.targetId,!0))}),c2.apply(this,arguments)}function u2(){return u2=(0,Se.Z)(function*(n,e,t){const i=M2(n);try{const r=yield function(o,l){const h=dt(o),p=Mi.now(),y=l.reduce((M,O)=>M.add(O.key),cn());let w,T;return h.persistence.runTransaction("Locally write mutations","readwrite",M=>{let O=qs(),L=cn();return h.Ui.getEntries(M,y).next(H=>{O=H,O.forEach((te,Te)=>{Te.isValidDocument()||(L=L.add(te))})}).next(()=>h.localDocuments.getOverlayedDocuments(M,O)).next(H=>{w=H;const te=[];for(const Te of l){const Ne=UQ(Te,w.get(Te.key).overlayedDocument);null!=Ne&&te.push(new Bd(Te.key,Ne,kG(Ne.value.mapValue),Ui.exists(!0)))}return h.mutationQueue.addMutationBatch(M,p,te,l)}).next(H=>{T=H;const te=H.applyToLocalDocumentSet(w,L);return h.documentOverlayCache.saveOverlays(M,H.batchId,te)})}).then(()=>({batchId:T.batchId,changes:lz(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,l,h){let p=o.oc[o.currentUser.toKey()];p||(p=new Yi(Xt)),p=p.insert(l,h),o.oc[o.currentUser.toKey()]=p}(i,r.batchId,t),yield Vd(i,r.changes),yield Wv(i.remoteStore)}catch(r){const o=Kv(r,"Failed to persist write");t.reject(o)}}),u2.apply(this,arguments)}function A6(n,e){return d2.apply(this,arguments)}function d2(){return d2=(0,Se.Z)(function*(n,e){const t=dt(n);try{const i=yield function QJ(n,e){const t=dt(n),i=e.snapshotVersion;let r=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Ui.newChangeBuffer({trackRemovals:!0});r=t.$i;const h=[];e.targetChanges.forEach((w,T)=>{const M=r.get(T);if(!M)return;h.push(t.Vs.removeMatchingKeys(o,w.removedDocuments,T).next(()=>t.Vs.addMatchingKeys(o,w.addedDocuments,T)));let O=M.withSequenceNumber(o.currentSequenceNumber);var L,H,te;e.targetMismatches.has(T)?O=O.withResumeToken(Ar.EMPTY_BYTE_STRING,zt.min()).withLastLimboFreeSnapshotVersion(zt.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),r=r.insert(T,O),H=O,te=w,(0===(L=M).resumeToken.approximateByteSize()||H.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8||te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(o,O))});let p=qs(),y=cn();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,w))}),h.push(a6(o,l,e.documentUpdates).next(w=>{p=w.Gi,y=w.Qi})),!i.isEqual(zt.min())){const w=t.Vs.getLastRemoteSnapshotVersion(o).next(T=>t.Vs.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(w)}return me.waitFor(h).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,p,y)).next(()=>p)}).then(o=>(t.$i=r,o))}(t.localStore,e);e.targetChanges.forEach((r,o)=>{const l=t.ic.get(o);l&&(Wt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.Xu=!0:r.modifiedDocuments.size>0?Wt(l.Xu):r.removedDocuments.size>0&&(Wt(l.Xu),l.Xu=!1))}),yield Vd(t,i,e)}catch(i){yield Nf(i)}}),d2.apply(this,arguments)}function M6(n,e,t){const i=dt(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.tc.forEach((o,l)=>{const h=l.view.Eu(e);h.snapshot&&r.push(h.snapshot)}),function(o,l){const h=dt(o);h.onlineState=l;let p=!1;h.queries.forEach((y,w)=>{for(const T of w.listeners)T.Eu(l)&&(p=!0)}),p&&r2(h)}(i.eventManager,e),r.length&&i.Zu.Go(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function NX(n,e,t){return h2.apply(this,arguments)}function h2(){return h2=(0,Se.Z)(function*(n,e,t){const i=dt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.ic.get(e),o=r&&r.key;if(o){let l=new Yi(at.comparator);l=l.insert(o,hi.newNoDocument(o,zt.min()));const h=cn().add(o),p=new CC(zt.min(),new Map,new ei(Xt),l,h);yield A6(i,p),i.sc=i.sc.remove(o),i.ic.delete(e),v2(i)}else yield Gv(i.localStore,e,!1).then(()=>Qv(i,e,t)).catch(Nf)}),h2.apply(this,arguments)}function OX(n,e){return f2.apply(this,arguments)}function f2(){return f2=(0,Se.Z)(function*(n,e){const t=dt(n),i=e.batch.batchId;try{const r=yield function ZJ(n,e){const t=dt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=t.Ui.newChangeBuffer({trackRemovals:!0});return function(l,h,p,y){const w=p.batch,T=w.keys();let M=me.resolve();return T.forEach(O=>{M=M.next(()=>y.getEntry(h,O)).next(L=>{const H=p.docVersions.get(O);Wt(null!==H),L.version.compareTo(H)<0&&(w.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),y.addEntry(L)))})}),M.next(()=>l.mutationQueue.removeMutationBatch(h,w))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let h=cn();for(let p=0;p<l.mutationResults.length;++p)l.mutationResults[p].transformResults.length>0&&(h=h.add(l.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);_2(t,i,null),g2(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Vd(t,r)}catch(r){yield Nf(r)}}),f2.apply(this,arguments)}function RX(n,e,t){return p2.apply(this,arguments)}function p2(){return p2=(0,Se.Z)(function*(n,e,t){const i=dt(n);try{const r=yield function(o,l){const h=dt(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.mutationQueue.lookupMutationBatch(p,l).next(w=>(Wt(null!==w),y=w.keys(),h.mutationQueue.removeMutationBatch(p,w))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>h.localDocuments.getDocuments(p,y))})}(i.localStore,e);_2(i,e,t),g2(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Vd(i,r)}catch(r){yield Nf(r)}}),p2.apply(this,arguments)}function m2(){return m2=(0,Se.Z)(function*(n,e){const t=dt(n);jf(t.remoteStore)||Ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(o){const l=dt(o);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===i)return void e.resolve();const r=t.uc.get(i)||[];r.push(e),t.uc.set(i,r)}catch(i){const r=Kv(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),m2.apply(this,arguments)}function g2(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function _2(n,e,t){const i=dt(n);let r=i.oc[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.oc[i.currentUser.toKey()]=r}}function Qv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.ec.get(e))n.tc.delete(i),t&&n.Zu.lc(i,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(i=>{n.rc.containsKey(i)||N6(n,i)})}function N6(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(VC(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),v2(n))}function y2(n,e,t){for(const i of t)i instanceof I6?(n.rc.addReference(i.key,e),PX(n,i)):i instanceof S6?(Ze("SyncEngine","Document no longer in limbo: "+i.key),n.rc.removeReference(i.key,e),n.rc.containsKey(i.key)||N6(n,i.key)):bt()}function PX(n,e){const t=e.key,i=t.path.canonicalString();n.sc.get(t)||n.nc.has(i)||(Ze("SyncEngine","New document in limbo: "+t),n.nc.add(i),v2(n))}function v2(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new at(An.fromString(e)),i=n.cc.next();n.ic.set(i,new IX(t)),n.sc=n.sc.insert(t,i),hA(n.remoteStore,new Bf(Ws(Rv(t.path)),i,2,zs.ot))}}function Vd(n,e,t){return b2.apply(this,arguments)}function b2(){return b2=(0,Se.Z)(function*(n,e,t){const i=dt(n),r=[],o=[],l=[];var h;i.tc.isEmpty()||(i.tc.forEach((h,p)=>{l.push(i.hc(p,e,t).then(y=>{if(y){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),r.push(y);const w=IL.Vi(p.targetId,y);o.push(w)}}))}),yield Promise.all(l),i.Zu.Go(r),yield(h=(0,Se.Z)(function*(p,y){const w=dt(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>me.forEach(y,M=>me.forEach(M.Pi,O=>w.persistence.referenceDelegate.addReference(T,M.targetId,O)).next(()=>me.forEach(M.vi,O=>w.persistence.referenceDelegate.removeReference(T,M.targetId,O)))))}catch(T){if(!Of(T))throw T;Ze("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const M=T.targetId;if(!T.fromCache){const O=w.$i.get(M),H=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);w.$i=w.$i.insert(M,H)}}}),function(p,y){return h.apply(this,arguments)})(i.localStore,o))}),b2.apply(this,arguments)}function FX(n,e){return w2.apply(this,arguments)}function w2(){return w2=(0,Se.Z)(function*(n,e){const t=dt(n);if(!t.currentUser.isEqual(e)){Ze("SyncEngine","User change. New user:",e.toKey());const i=yield o6(t.localStore,e);t.currentUser=e,(r=t).uc.forEach(l=>{l.forEach(h=>{h.reject(new Ge(we.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.uc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Vd(t,i.Ki)}var r}),w2.apply(this,arguments)}function LX(n,e){const t=dt(n),i=t.ic.get(e);if(i&&i.Xu)return cn().add(i.key);{let r=cn();const o=t.ec.get(e);if(!o)return r;for(const l of o){const h=t.tc.get(l);r=r.unionWith(h.view.qu)}return r}}function BX(n,e){return E2.apply(this,arguments)}function E2(){return E2=(0,Se.Z)(function*(n,e){const t=dt(n),i=yield lA(t.localStore,e.query,!0),r=e.view.Ju(i);return t.isPrimaryClient&&y2(t,e.targetId,r.zu),r}),E2.apply(this,arguments)}function VX(n,e){return C2.apply(this,arguments)}function C2(){return C2=(0,Se.Z)(function*(n,e){const t=dt(n);return c6(t.localStore,e).then(i=>Vd(t,i))}),C2.apply(this,arguments)}function UX(n,e,t,i){return D2.apply(this,arguments)}function D2(){return D2=(0,Se.Z)(function*(n,e,t,i){const r=dt(n),o=yield function(l,h){const p=dt(l),y=dt(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",w=>y.yn(w,h).next(T=>T?p.localDocuments.getDocuments(w,T):me.resolve(null)))}(r.localStore,e);var h;null!==o?("pending"===t?yield Wv(r.remoteStore):"acknowledged"===t||"rejected"===t?(_2(r,e,i||null),g2(r,e),h=e,dt(dt(r.localStore).mutationQueue).In(h)):bt(),yield Vd(r,o)):Ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),D2.apply(this,arguments)}function T2(){return T2=(0,Se.Z)(function*(n,e){const t=dt(n);if(A2(t),M2(t),!0===e&&!0!==t.ac){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield O6(t,i.toArray());t.ac=!0,yield QL(t.remoteStore,!0);for(const o of r)hA(t.remoteStore,o)}else if(!1===e&&!1!==t.ac){const i=[];let r=Promise.resolve();t.ec.forEach((o,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(Qv(t,l),Gv(t.localStore,l,!0))),VC(t.remoteStore,l)}),yield r,yield O6(t,i),function(o){const l=dt(o);l.ic.forEach((h,p)=>{VC(l.remoteStore,p)}),l.rc.cs(),l.ic=new Map,l.sc=new Yi(at.comparator)}(t),t.ac=!1,yield QL(t.remoteStore,!1)}}),T2.apply(this,arguments)}function O6(n,e,t){return I2.apply(this,arguments)}function I2(){return I2=(0,Se.Z)(function*(n,e,t){const i=dt(n),r=[],o=[];for(const l of e){let h;const p=i.ec.get(l);if(p&&0!==p.length){h=yield $v(i.localStore,Ws(p[0]));for(const y of p){const w=i.tc.get(y),T=yield BX(i,w);T.snapshot&&o.push(T.snapshot)}}else{const y=yield l6(i.localStore,l);h=yield $v(i.localStore,y),yield a2(i,R6(y),l,!1)}r.push(h)}return i.Zu.Go(o),r}),I2.apply(this,arguments)}function R6(n){return jG(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function HX(n){const e=dt(n);return dt(dt(e.localStore).persistence).Ri()}function $X(n,e,t,i){return S2.apply(this,arguments)}function S2(){return S2=(0,Se.Z)(function*(n,e,t,i){const r=dt(n);if(r.ac)return void Ze("SyncEngine","Ignoring unexpected query state notification.");const o=r.ec.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const l=yield c6(r.localStore,GG(o[0])),h=CC.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Vd(r,l,h);break}case"rejected":yield Gv(r.localStore,e,!0),Qv(r,e,i);break;default:bt()}}),S2.apply(this,arguments)}function GX(n,e,t){return x2.apply(this,arguments)}function x2(){return x2=(0,Se.Z)(function*(n,e,t){const i=A2(n);if(i.ac){for(const r of e){if(i.ec.has(r)){Ze("SyncEngine","Adding an already active target "+r);continue}const o=yield l6(i.localStore,r),l=yield $v(i.localStore,o);yield a2(i,R6(o),l.targetId,!1),hA(i.remoteStore,l)}for(const r of t)i.ec.has(r)&&(yield Gv(i.localStore,r,!1).then(()=>{VC(i.remoteStore,r),Qv(i,r)}).catch(Nf))}}),x2.apply(this,arguments)}function A2(n){const e=dt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=A6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LX.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NX.bind(null,e),e.Zu.Go=wX.bind(null,e.eventManager),e.Zu.lc=EX.bind(null,e.eventManager),e}function M2(n){const e=dt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OX.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RX.bind(null,e),e}class k6{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Se.Z)(function*(){t.wt=LC(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return r6(this.persistence,new i6,e.initialUser,this.wt)}_c(e){return new t6(sA.Os,this.wt)}dc(e){return new f6}terminate(){var e=this;return(0,Se.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class P6 extends k6{constructor(e,t,i){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Se.Z)(function*(){yield t().call(i,e),yield i.yc.initialize(i,e),yield M2(i.yc.syncEngine),yield Wv(i.yc.remoteStore),yield i.persistence.ci(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return r6(this.persistence,new i6,e.initialUser,this.wt)}mc(e,t){return new PJ(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const i=new yQ(t,this.persistence);return new _Q(e.asyncQueue,i)}_c(e){const t=TL(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Ks.withCacheSize(this.cacheSizeBytes):Ks.DEFAULT;return new DL(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,m6(),dA(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new f6}}class WX extends P6{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Se.Z)(function*(){yield t().call(i,e);const r=i.yc.syncEngine;i.sharedClientState instanceof kL&&(i.sharedClientState.syncEngine={kr:UX.bind(null,r),Mr:$X.bind(null,r),Or:GX.bind(null,r),Ri:HX.bind(null,r),Nr:VX.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.ci(function(){var o=(0,Se.Z)(function*(l){yield function jX(n,e){return T2.apply(this,arguments)}(i.yc.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return o.apply(this,arguments)}}())})()}dc(e){const t=m6();if(!kL.V(t))throw new Ge(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=TL(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kL(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class N2{initialize(e,t){var i=this;return(0,Se.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>M6(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=FX.bind(null,i.syncEngine),yield QL(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new bX}createDatastore(e){const t=LC(e.databaseInfo.databaseId),i=new rX(e.databaseInfo);return new aX(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,o=h=>M6(this.syncEngine,h,0),l=p6.V()?new p6:new tX,new cX(t,i,r,o,l);var t,i,r,o,l}createSyncEngine(e,t){return function(i,r,o,l,h,p,y){const w=new SX(i,r,o,l,h,p);return y&&(w.ac=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Se.Z)(function*(t){const i=dt(t);Ze("RemoteStore","RemoteStore shutting down."),i.lu.add(5),yield zv(i),i.du.shutdown(),i._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function F6(n,e=10240){let t=0;return{read:()=>(0,Se.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Se.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class pA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qX{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Gr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(i=>{i&&i.Cu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Se.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Se.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Se.Z)(function*(){const t=yield e.bc();if(null===t)return null;const i=e.Ac.decode(t),r=Number(i);isNaN(r)&&e.Pc(`length string (${i}) is not valid number`);const o=yield e.vc(r);return new CX(JSON.parse(o),t.length+r)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Se.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}vc(e){var t=this;return(0,Se.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const i=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Se.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class KX{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Se.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ge(we.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Se.Z)(function*(o,l){const h=dt(o),p=SC(h.wt)+"/documents",y={documents:l.map(O=>IC(h.wt,O))},w=yield h.ao("BatchGetDocuments",p,y,l.length),T=new Map;w.forEach(O=>{const L=function QQ(n,e){return"found"in e?function(t,i){Wt(!!i.found);const r=_u(t,i.found.name),o=zr(i.found.updateTime),l=new Eo({mapValue:{fields:i.found.fields}});return hi.newFoundDocument(r,o,l)}(n,e):"missing"in e?function(t,i){Wt(!!i.missing),Wt(!!i.readTime);const r=_u(t,i.missing),o=zr(i.readTime);return hi.newNoDocument(r,o)}(n,e):bt()}(h.wt,O);T.set(L.key.toString(),L)});const M=[];return l.forEach(O=>{const L=T.get(O.toString());Wt(!!L),M.push(L)}),M}),function(o,l){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Se.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const o=at.fromPath(r);e.mutations.push(new dL(o,e.precondition(o)))}),yield(i=(0,Se.Z)(function*(r,o){const l=dt(r),h=SC(l.wt)+"/documents",p={writes:o.map(y=>xC(l.wt,y))};yield l.ro("Commit",h,p)}),function(r,o){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw bt();t=zt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Ge(we.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ui.updateTime(t):Ui.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(zt.min()))throw new Ge(we.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ui.updateTime(t)}return Ui.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class YX{constructor(e,t,i,r,o){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=o,this.Dc=i.maxAttempts,this.So=new PL(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Se.Z)(function*(){const t=new KX(e.datastore),i=e.xc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(o=>{e.Nc(o)}))}).catch(r=>{e.Nc(r)})}))}xc(e){try{const t=this.updateFunction(e);return!hC(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!oz(t)}return!1}}class ZX{constructor(e,t,i,r){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=$r.UNAUTHENTICATED,this.clientId=gG.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,Se.Z)(function*(h){Ze("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(Ze("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Se.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ge(we.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Kv(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function L6(n,e){return O2.apply(this,arguments)}function O2(){return O2=(0,Se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,Se.Z)(function*(o){i.isEqual(o)||(yield o6(e.localStore,o),i=o)});return function(o){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),O2.apply(this,arguments)}function B6(n,e){return R2.apply(this,arguments)}function R2(){return R2=(0,Se.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield k2(n);Ze("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>E6(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,o)=>E6(e.remoteStore,o)),n.onlineComponents=e}),R2.apply(this,arguments)}function k2(n){return P2.apply(this,arguments)}function P2(){return P2=(0,Se.Z)(function*(n){return n.offlineComponents||(Ze("FirestoreClient","Using default OfflineComponentProvider"),yield L6(n,new k6)),n.offlineComponents}),P2.apply(this,arguments)}function mA(n){return F2.apply(this,arguments)}function F2(){return F2=(0,Se.Z)(function*(n){return n.onlineComponents||(Ze("FirestoreClient","Using default OnlineComponentProvider"),yield B6(n,new N2)),n.onlineComponents}),F2.apply(this,arguments)}function V6(n){return k2(n).then(e=>e.persistence)}function gA(n){return k2(n).then(e=>e.localStore)}function U6(n){return mA(n).then(e=>e.remoteStore)}function L2(n){return mA(n).then(e=>e.syncEngine)}function Jv(n){return B2.apply(this,arguments)}function B2(){return B2=(0,Se.Z)(function*(n){const e=yield mA(n),t=e.eventManager;return t.onListen=xX.bind(null,e.syncEngine),t.onUnlisten=AX.bind(null,e.syncEngine),t}),B2.apply(this,arguments)}function j6(n,e,t={}){const i=new Gr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(r,o,l,h,p){const y=new pA({next:T=>{o.enqueueAndForget(()=>n2(r,w));const M=T.docs.has(l);!M&&T.fromCache?p.reject(new Ge(we.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&T.fromCache&&h&&"server"===h.source?p.reject(new Ge(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),w=new o2(Rv(l.path),y,{includeMetadataChanges:!0,Du:!0});return e2(r,w)}(yield Jv(n),n.asyncQueue,e,t,i)})),i.promise}function H6(n,e,t={}){const i=new Gr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function(r,o,l,h,p){const y=new pA({next:T=>{o.enqueueAndForget(()=>n2(r,w)),T.fromCache&&"server"===h.source?p.reject(new Ge(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),w=new o2(l,y,{includeMetadataChanges:!0,Du:!0});return e2(r,w)}(yield Jv(n),n.asyncQueue,e,t,i)})),i.promise}const $6=new Map;function V2(n,e,t){if(!t)throw new Ge(we.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function G6(n,e,t,i){if(!0===e&&!0===i)throw new Ge(we.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function z6(n){if(!at.isDocumentKey(n))throw new Ge(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function W6(n){if(at.isDocumentKey(n))throw new Ge(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _A(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":bt()}function Tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ge(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_A(n);throw new Ge(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function q6(n,e){if(e<=0)throw new Ge(we.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class K6{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ge(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ge(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,G6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class UC{constructor(e,t,i){this._authCredentials=t,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K6({}),this._settingsFrozen=!1,e instanceof Fd?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Ge(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fd(r.options.projectId)}(e))}get app(){if(!this._app)throw new Ge(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ge(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K6(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new oQ;switch(t.type){case"gapi":const i=t.client;return Wt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new cQ(i,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ge(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$6.get(e);t&&(Ze("ComponentProvider","Removing Datastore"),$6.delete(e),t.terminate())}(this),Promise.resolve()}}class yi{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yi(this.firestore,e,this._key)}}class Ho{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ho(this.firestore,e,this._query)}}class vu extends Ho{constructor(e,t,i){super(e,t,Rv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yi(this.firestore,null,new at(e))}withConverter(e){return new vu(this.firestore,e,this._path)}}function Y6(n,e,...t){if(n=(0,B.m9)(n),V2("collection","path",e),n instanceof UC){const i=An.fromString(e,...t);return W6(i),new vu(n,null,i)}{if(!(n instanceof yi||n instanceof vu))throw new Ge(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(An.fromString(e,...t));return W6(i),new vu(n.firestore,null,i)}}function yA(n,e,...t){if(n=(0,B.m9)(n),1===arguments.length&&(e=gG.I()),V2("doc","path",e),n instanceof UC){const i=An.fromString(e,...t);return z6(i),new yi(n,null,new at(i))}{if(!(n instanceof yi||n instanceof vu))throw new Ge(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(An.fromString(e,...t));return z6(i),new yi(n.firestore,n instanceof vu?n.converter:null,new at(i))}}function Z6(n,e){return n=(0,B.m9)(n),e=(0,B.m9)(e),(n instanceof yi||n instanceof vu)&&(e instanceof yi||e instanceof vu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Q6(n,e){return n=(0,B.m9)(n),e=(0,B.m9)(e),n instanceof Ho&&e instanceof Ho&&n.firestore===e.firestore&&yC(n._query,e._query)&&n.converter===e.converter}class aee{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new PL(this,"async_queue_retry"),this.Kc=()=>{const t=dA();t&&Ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=dA();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=dA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Gr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,Se.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!Of(t))throw t;Ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(i=>{throw this.Bc=i,this.Lc=!1,ir("INTERNAL UNHANDLED ERROR: ",function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),l}(i)),i}).then(i=>(this.Lc=!1,i))));return this.Mc=t,t}enqueueAfterDelay(e,t,i){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const r=XL.createAndSchedule(this,e,t,i,o=>this.Wc(o));return this.$c.push(r),r}Gc(){this.Bc&&bt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Se.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function U2(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class lee{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ni extends UC{constructor(e,t,i){super(e,t,i),this.type="firestore",this._queue=new aee,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||J6(this),this._firestoreClient.terminate()}}function gr(n){return n._firestoreClient||J6(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function J6(n){var e;const t=n._freezeSettings(),i=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new wQ(n._databaseId,o,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var o,h;n._firestoreClient=new ZX(n._authCredentials,n._appCheckCredentials,n._queue,i)}function X6(n,e,t){const i=new Gr;return n.asyncQueue.enqueue((0,Se.Z)(function*(){try{yield L6(n,t),yield B6(n,e),i.resolve()}catch(r){const o=r;if(!("FirebaseError"===(l=o).name?l.code===we.FAILED_PRECONDITION||l.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;ng("Error enabling offline persistence. Falling back to persistence disabled: "+o),i.reject(o)}var l})).then(()=>i.promise)}function e4(n){if(n._initialized||n._terminated)throw new Ge(we.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ud{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ge(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ki(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bu(Ar.fromBase64String(e))}catch(t){throw new Ge(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bu(Ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bg{constructor(e){this._methodName=e}}class vA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ge(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ge(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}}const yee=/^__.*__$/;class vee{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Bd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lv(e,this.data,t,this.fieldTransforms)}}class t4{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Bd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function n4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt()}}class bA{constructor(e,t,i,r,o,l){this.settings=e,this.databaseId=t,this.wt=i,this.ignoreUndefinedProperties=r,void 0===o&&this.Xc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new bA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:i,na:!1});return r.sa(e),r}ia(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:i,na:!1});return r.Xc(),r}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return CA(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(n4(this.Zc)&&yee.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class bee{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=i||LC(e)}aa(e,t,i,r=!1){return new bA({Zc:e,methodName:t,ca:i,path:Ki.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function wg(n){const e=n._freezeSettings(),t=LC(n._databaseId);return new bee(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wA(n,e,t,i,r,o={}){const l=n.aa(o.merge||o.mergeFields?2:0,e,t,r);G2("Data must be an object, but it was:",l,i);const h=o4(i,l);let p,y;if(o.merge)p=new Ta(l.fieldMask),y=l.fieldTransforms;else if(o.mergeFields){const w=[];for(const T of o.mergeFields){const M=z2(e,T,t);if(!l.contains(M))throw new Ge(we.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);a4(w,M)||w.push(M)}p=new Ta(w),y=l.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=l.fieldTransforms;return new vee(new Eo(h),p,y)}class jC extends bg{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jC}}function i4(n,e,t){return new bA({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class j2 extends bg{_toFieldTransform(e){return new vC(e.path,new Pv)}isEqual(e){return e instanceof j2}}class wee extends bg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=i4(this,e,!0),i=this.ha.map(o=>Eg(o,t)),r=new ug(i);return new vC(e.path,r)}isEqual(e){return this===e}}class Eee extends bg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=i4(this,e,!0),i=this.ha.map(o=>Eg(o,t)),r=new dg(i);return new vC(e.path,r)}isEqual(e){return this===e}}class Cee extends bg{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Fv(e.wt,KG(e.wt,this.la));return new vC(e.path,t)}isEqual(e){return this===e}}function H2(n,e,t,i){const r=n.aa(1,e,t);G2("Data must be an object, but it was:",r,i);const o=[],l=Eo.empty();og(i,(p,y)=>{const w=EA(e,p,t);y=(0,B.m9)(y);const T=r.ia(w);if(y instanceof jC)o.push(w);else{const M=Eg(y,T);null!=M&&(o.push(w),l.set(w,M))}});const h=new Ta(o);return new t4(l,h,r.fieldTransforms)}function $2(n,e,t,i,r,o){const l=n.aa(1,e,t),h=[z2(e,i,t)],p=[r];if(o.length%2!=0)throw new Ge(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<o.length;M+=2)h.push(z2(e,o[M])),p.push(o[M+1]);const y=[],w=Eo.empty();for(let M=h.length-1;M>=0;--M)if(!a4(y,h[M])){const O=h[M];let L=p[M];L=(0,B.m9)(L);const H=l.ia(O);if(L instanceof jC)y.push(O);else{const te=Eg(L,H);null!=te&&(y.push(O),w.set(O,te))}}const T=new Ta(y);return new t4(w,T,l.fieldTransforms)}function r4(n,e,t,i=!1){return Eg(t,n.aa(i?4:3,e))}function Eg(n,e){if(s4(n=(0,B.m9)(n)))return G2("Unsupported field value:",e,n),o4(n,e);if(n instanceof bg)return function(t,i){if(!n4(i.Zc))throw i.oa(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.oa(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,i){const r=[];let o=0;for(const l of t){let h=Eg(l,i.ra(o));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),o++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,B.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return KG(i.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Mi.fromDate(t);return{timestampValue:TC(i.wt,r)}}if(t instanceof Mi){const r=new Mi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:TC(i.wt,r)}}if(t instanceof vA)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bu)return{bytesValue:mz(i.wt,t._byteString)};if(t instanceof yi){const r=i.databaseId,o=t.firestore._databaseId;if(!o.isEqual(r))throw i.oa(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:hL(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.oa(`Unsupported field value: ${_A(t)}`)}(n,e)}function o4(n,e){const t={};return DG(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):og(n,(i,r)=>{const o=Eg(r,e.ea(i));null!=o&&(t[i]=o)}),{mapValue:{fields:t}}}function s4(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Mi||n instanceof vA||n instanceof bu||n instanceof yi||n instanceof bg)}function G2(n,e,t){if(!s4(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=_A(t);throw e.oa("an object"===i?n+" a custom object":n+" "+i)}var i}function z2(n,e,t){if((e=(0,B.m9)(e))instanceof Ud)return e._internalPath;if("string"==typeof e)return EA(n,e);throw CA("Field path arguments must be of type string or ",n,!1,void 0,t)}const Dee=new RegExp("[~\\*/\\[\\]]");function EA(n,e,t){if(e.search(Dee)>=0)throw CA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ud(...e.split("."))._internalPath}catch{throw CA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function CA(n,e,t,i,r){const o=i&&!i.isEmpty(),l=void 0!==r;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(o||l)&&(p+=" (found",o&&(p+=` in field ${i}`),l&&(p+=` in document ${r}`),p+=")"),new Ge(we.INVALID_ARGUMENT,h+n+p)}function a4(n,e){return n.some(t=>t.isEqual(e))}class HC{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new yi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Tee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(DA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Tee extends HC{data(){return super.data()}}function DA(n,e){return"string"==typeof e?EA(n,e):e instanceof Ud?e._internalPath:e._delegate._internalPath}class Cg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jd extends HC{constructor(e,t,i,r,o,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $C(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(DA("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class $C extends jd{data(e={}){return super.data(e)}}class $f{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Cg(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new $C(this._firestore,this._userDataWriter,i.key,i,new Cg(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ge(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new $C(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Cg(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const h=new $C(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Cg(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return 0!==l.type&&(p=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),1!==l.type&&(o=o.add(l.doc),y=o.indexOf(l.doc.key)),{type:Iee(l.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Iee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt()}}function l4(n,e){return n instanceof jd&&e instanceof jd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof $f&&e instanceof $f&&n._firestore===e._firestore&&Q6(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function c4(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ge(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GC{}function Gf(n,...e){for(const t of e)n=t._apply(n);return n}class See extends GC{constructor(e,t,i){super(),this.fa=e,this.da=t,this._a=i,this.type="where"}_apply(e){const t=wg(e.firestore),i=function(r,o,l,h,p,y,w){let T;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ge(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){m4(w,y);const O=[];for(const L of w)O.push(p4(h,r,L));T={arrayValue:{values:O}}}else T=p4(h,r,w)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||m4(w,y),T=r4(l,"where",w,"in"===y||"not-in"===y);const M=Co.create(p,y,T);return function(O,L){if(L.ht()){const te=aL(O);if(null!==te&&!te.isEqual(L.field))throw new Ge(we.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${te.toString()}' and '${L.field.toString()}'`);const Te=sL(O);null!==Te&&g4(0,L.field,Te)}const H=function(te,Te){for(const Ne of te.filters)if(Te.indexOf(Ne.op)>=0)return Ne.op;return null}(O,function(te){switch(te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(L.op));if(null!==H)throw new Ge(we.INVALID_ARGUMENT,H===L.op?`Invalid query. You cannot use more than one '${L.op.toString()}' filter.`:`Invalid query. You cannot use '${L.op.toString()}' filters with '${H.toString()}' filters.`)}(r,M),M}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Ho(e.firestore,e.converter,function(r,o){const l=r.filters.concat([o]);return new Ld(r.path,r.collectionGroup,r.explicitOrderBy.slice(),l,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class Aee extends GC{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(i,r,o){if(null!==i.startAt)throw new Ge(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ge(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Ov(r,o);return function(h,p){if(null===sL(h)){const y=aL(h);null!==y&&g4(0,y,p.field)}}(i,l),l}(e._query,this.fa,this.wa);return new Ho(e.firestore,e.converter,function(i,r){const o=i.explicitOrderBy.concat([r]);return new Ld(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class u4 extends GC{constructor(e,t,i){super(),this.type=e,this.ma=t,this.ga=i}_apply(e){return new Ho(e.firestore,e.converter,Wx(e._query,this.ma,this.ga))}}class d4 extends GC{constructor(e,t,i){super(),this.type=e,this.ya=t,this.pa=i}_apply(e){const t=f4(e,this.type,this.ya,this.pa);return new Ho(e.firestore,e.converter,(r=t,new Ld((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class h4 extends GC{constructor(e,t,i){super(),this.type=e,this.ya=t,this.pa=i}_apply(e){const t=f4(e,this.type,this.ya,this.pa);return new Ho(e.firestore,e.converter,(r=t,new Ld((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function f4(n,e,t,i){if(t[0]=(0,B.m9)(t[0]),t[0]instanceof HC)return function(r,o,l,h,p){if(!h)throw new Ge(we.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const w of kv(r))if(w.field.isKeyField())y.push(lg(o,h.key));else{const T=h.data.field(w.field);if(iL(T))throw new Ge(we.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const M=w.field.canonicalString();throw new Ge(we.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}y.push(T)}return new Ff(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=wg(n.firestore);return function(o,l,h,p,y,w){const T=o.explicitOrderBy;if(y.length>T.length)throw new Ge(we.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let O=0;O<y.length;O++){const L=y[O];if(T[O].field.isKeyField()){if("string"!=typeof L)throw new Ge(we.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof L}`);if(!lL(o)&&-1!==L.indexOf("/"))throw new Ge(we.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${L}' contains a slash.`);const H=o.path.child(An.fromString(L));if(!at.isDocumentKey(H))throw new Ge(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${H}' is not because it contains an odd number of segments.`);const te=new at(H);M.push(lg(l,te))}else{const H=r4(h,p,L);M.push(H)}}return new Ff(M,w)}(n._query,n.firestore._databaseId,r,e,t,i)}}function p4(n,e,t){if("string"==typeof(t=(0,B.m9)(t))){if(""===t)throw new Ge(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lL(e)&&-1!==t.indexOf("/"))throw new Ge(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(An.fromString(t));if(!at.isDocumentKey(i))throw new Ge(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return lg(n,new at(i))}if(t instanceof yi)return lg(n,t._key);throw new Ge(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_A(t)}.`)}function m4(n,e){if(!Array.isArray(n)||0===n.length)throw new Ge(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ge(we.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function g4(n,e,t){if(!t.isEqual(e))throw new Ge(we.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Lee={maxAttempts:5};class W2{convertValue(e,t="none"){switch(ag(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw bt()}}convertObject(e,t){const i={};return og(e.fields,(r,o)=>{i[r]=this.convertValue(o,t)}),i}convertGeoPoint(e){return new vA(Zi(e.latitude),Zi(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=IG(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(dC(e));default:return null}}convertTimestamp(e){const t=Rf(e);return new Mi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=An.fromString(e);Wt(Tz(i));const r=new Fd(i.get(1),i.get(3)),o=new at(i.popFirst(5));return r.isEqual(t)||ir(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function TA(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Bee extends W2{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yi(this.firestore,null,t)}}class _4{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wg(e)}set(e,t,i){this._verifyNotCommitted();const r=zf(e,this._firestore),o=TA(r.converter,t,i),l=wA(this._dataReader,"WriteBatch.set",r._key,o,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,Ui.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const o=zf(e,this._firestore);let l;return l="string"==typeof(t=(0,B.m9)(t))||t instanceof Ud?$2(this._dataReader,"WriteBatch.update",o._key,t,i,r):H2(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(l.toMutation(o._key,Ui.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zf(e,this._firestore);return this._mutations=this._mutations.concat(new Bv(t._key,Ui.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ge(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zf(n,e){if((n=(0,B.m9)(n)).firestore!==e)throw new Ge(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Dg extends W2{constructor(e){super(),this.firestore=e}convertBytes(e){return new bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new yi(this.firestore,null,t)}}function y4(n,e,t){n=Tn(n,yi);const i=Tn(n.firestore,Ni),r=TA(n.converter,e,t);return Xv(i,[wA(wg(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,Ui.none())])}function v4(n,e,t,...i){n=Tn(n,yi);const r=Tn(n.firestore,Ni),o=wg(r);let l;return l="string"==typeof(e=(0,B.m9)(e))||e instanceof Ud?$2(o,"updateDoc",n._key,e,t,i):H2(o,"updateDoc",n._key,e),Xv(r,[l.toMutation(n._key,Ui.exists(!0))])}function b4(n,...e){var t,i,r;n=(0,B.m9)(n);let o={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||U2(e[l])||(o=e[l],l++);const h={includeMetadataChanges:o.includeMetadataChanges};if(U2(e[l])){const T=e[l];e[l]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[l+1]=null===(i=T.error)||void 0===i?void 0:i.bind(T),e[l+2]=null===(r=T.complete)||void 0===r?void 0:r.bind(T)}let p,y,w;if(n instanceof yi)y=Tn(n.firestore,Ni),w=Rv(n._key.path),p={next:T=>{e[l]&&e[l](q2(y,n,T))},error:e[l+1],complete:e[l+2]};else{const T=Tn(n,Ho);y=Tn(T.firestore,Ni),w=T._query;const M=new Dg(y);p={next:O=>{e[l]&&e[l](new $f(y,M,T,O))},error:e[l+1],complete:e[l+2]},c4(n._query)}return function(T,M,O,L){const H=new pA(L),te=new o2(M,H,O);return T.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return e2(yield Jv(T),te)})),()=>{H.Tc(),T.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return n2(yield Jv(T),te)}))}}(gr(y),w,h,p)}function Xv(n,e){return function(t,i){const r=new Gr;return t.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function MX(n,e,t){return u2.apply(this,arguments)}(yield L2(t),i,r)})),r.promise}(gr(n),e)}function q2(n,e,t){const i=t.docs.get(e._key),r=new Dg(n);return new jd(n,r,e._key,i,new Cg(t.hasPendingWrites,t.fromCache),e.converter)}class Kee extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wg(e)}get(e){const t=zf(e,this._firestore),i=new Bee(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return bt();const o=r[0];if(o.isFoundDocument())return new HC(this._firestore,i,o.key,o,t.converter);if(o.isNoDocument())return new HC(this._firestore,i,t._key,null,t.converter);throw bt()})}set(e,t,i){const r=zf(e,this._firestore),o=TA(r.converter,t,i),l=wA(this._dataReader,"Transaction.set",r._key,o,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(e,t,i,...r){const o=zf(e,this._firestore);let l;return l="string"==typeof(t=(0,B.m9)(t))||t instanceof Ud?$2(this._dataReader,"Transaction.update",o._key,t,i,r):H2(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,l),this}delete(e){const t=zf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zf(e,this._firestore),i=new Dg(this._firestore);return super.get(e).then(r=>new jd(this._firestore,i,t._key,r._document,new Cg(!1,!1),t.converter))}}function K2(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function E4(){if(typeof Uint8Array>"u")throw new Ge("unimplemented","Uint8Arrays are not available in this environment.")}function C4(){if(!function vQ(){return typeof atob<"u"}())throw new Ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){xv=ps.SDK_VERSION,(0,ps._registerComponent)(new ic.wA("firestore",(t,{options:i})=>{const r=t.getProvider("app").getImmediate(),o=new Ni(r,new aQ(t.getProvider("auth-internal")),new uQ(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC")),(0,ps.registerVersion)(fG,"3.4.14",n),(0,ps.registerVersion)(fG,"3.4.14","esm2017")}();class zC{constructor(e){this._delegate=e}static fromBase64String(e){return C4(),new zC(bu.fromBase64String(e))}static fromUint8Array(e){return E4(),new zC(bu.fromUint8Array(e))}toBase64(){return C4(),this._delegate.toBase64()}toUint8Array(){return E4(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Y2(n){return function ite(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class rte{enableIndexedDbPersistence(e,t){return function uee(n,e){e4(n=Tn(n,Ni));const t=gr(n),i=n._freezeSettings(),r=new N2;return X6(t,r,new P6(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function dee(n){e4(n=Tn(n,Ni));const e=gr(n),t=n._freezeSettings(),i=new N2;return X6(e,i,new WX(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function hee(n){if(n._initialized&&!n._terminated)throw new Ge(we.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Se.Z)(function*(){try{yield(t=(0,Se.Z)(function*(i){if(!uc.V())return Promise.resolve();const r=i+"main";yield uc.delete(r)}),function(i){return t.apply(this,arguments)})(TL(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class D4{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ng("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function oee(n,e,t,i={}){var r;const o=(n=Tn(n,UC))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&ng("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let l,h;if("string"==typeof i.mockUserToken)l=i.mockUserToken,h=$r.MOCK_USER;else{l=(0,B.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Ge(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new $r(p)}n._authCredentials=new sQ(new pG(l,h))}}(this._delegate,e,t,i)}enableNetwork(){return function pee(n){return function QX(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const e=yield V6(n),t=yield U6(n);return e.setNetworkEnabled(!0),function(i){const r=dt(i);return r.lu.delete(0),BC(r)}(t)}))}(gr(n=Tn(n,Ni)))}(this._delegate)}disableNetwork(){return function mee(n){return function JX(n){return n.asyncQueue.enqueue((0,Se.Z)(function*(){const e=yield V6(n),t=yield U6(n);return e.setNetworkEnabled(!1),(i=(0,Se.Z)(function*(r){const o=dt(r);o.lu.add(0),yield zv(o),o._u.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(gr(n=Tn(n,Ni)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,G6("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function fee(n){return function(e){const t=new Gr;return e.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return function kX(n,e){return m2.apply(this,arguments)}(yield L2(e),t)})),t.promise}(gr(n=Tn(n,Ni)))}(this._delegate)}onSnapshotsInSync(e){return function qee(n,e){return function tee(n,e){const t=new pA(e);return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return i=yield Jv(n),r=t,dt(i).Tu.add(r),void r.next();var i,r})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return i=yield Jv(n),r=t,void dt(i).Tu.delete(r);var i,r}))}}(gr(n=Tn(n,Ni)),U2(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new eb(this,Y6(this._delegate,e))}catch(t){throw ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new ml(this,yA(this._delegate,e))}catch(t){throw ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Es(this,function see(n,e){if(n=Tn(n,UC),V2("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ge(we.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ho(n,null,(t=e,new Ld(An.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Yee(n,e,t){n=Tn(n,Ni);const i=Object.assign(Object.assign({},Lee),t);return function(r){if(r.maxAttempts<1)throw new Ge(we.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function nee(n,e,t){const i=new Gr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){const r=yield(o=n,mA(o).then(l=>l.datastore));var o;new YX(n.asyncQueue,r,t,e,i).run()})),i.promise}(gr(n),r=>e(new Kee(n,r)),i)}(this._delegate,t=>e(new T4(this,t)))}batch(){return gr(this._delegate),new I4(new _4(this._delegate,e=>Xv(this._delegate,e)))}loadBundle(e){return function gee(n,e){const t=gr(n=Tn(n,Ni)),i=new lee;return function iee(n,e,t,i){const r=function(o,l){let h;return h="string"==typeof o?(new TextEncoder).encode(o):o,p=function(p,y){if(p instanceof Uint8Array)return F6(p,y);if(p instanceof ArrayBuffer)return F6(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new qX(p,l);var p}(t,LC(e));n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){!function zX(n,e,t){const i=dt(n);var r;(r=(0,Se.Z)(function*(o,l,h){try{const p=yield l.getMetadata();if(yield function(M,O){const L=dt(M),H=zr(O.createTime);return L.persistence.runTransaction("hasNewerBundle","readonly",te=>L.Ds.getBundleMetadata(te,O.id)).then(te=>!!te&&te.createTime.compareTo(H)>=0)}(o.localStore,p))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(M=p).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);h._updateProgress(T6(p));const y=new DX(p,o.localStore,l.wt);let w=yield l.fc();for(;w;){const M=yield y.Nu(w);M&&h._updateProgress(M),w=yield l.fc()}const T=yield y.complete();return yield Vd(o,T.Ou,void 0),yield function(M,O){const L=dt(M);return L.persistence.runTransaction("Save bundle","readwrite",H=>L.Ds.saveBundleMetadata(H,O))}(o.localStore,p),h._completeWith(T.progress),Promise.resolve(T.Mu)}catch(p){return ng("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var M}),function(o,l,h){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield L2(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function _ee(n,e){return function ree(n,e){return n.asyncQueue.enqueue((0,Se.Z)(function*(){return function(t,i){const r=dt(t);return r.persistence.runTransaction("Get named query","readonly",o=>r.Ds.getNamedQuery(o,i))}(yield gA(n),e)}))}(gr(n=Tn(n,Ni)),e).then(t=>t?new Ho(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Es(this,t):null)}}class IA extends W2{constructor(e){super(),this.firestore=e}convertBytes(e){return new zC(new bu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ml.forKey(t,this.firestore,null)}}class T4{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new IA(e)}get(e){const t=Ig(e);return this._delegate.get(t).then(i=>new WC(this._firestore,new jd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Ig(e);return i?(K2("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=Ig(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=Ig(e);return this._delegate.delete(t),this}}class I4{constructor(e){this._delegate=e}set(e,t,i){const r=Ig(e);return i?(K2("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const o=Ig(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,i,...r),this}delete(e){const t=Ig(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tg{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new $C(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qC(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Tg.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(t);return o||(o=new Tg(e,new IA(e),t),r.set(t,o)),o}}Tg.INSTANCES=new WeakMap;class ml{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new IA(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ml(t,new yi(t._delegate,i,new at(e)))}static forKey(e,t,i){return new ml(t,new yi(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new eb(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new eb(this.firestore,Y6(this._delegate,e))}catch(t){throw ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,B.m9)(e))instanceof yi&&Z6(this._delegate,e)}set(e,t){t=K2("DocumentReference.set",t);try{return t?y4(this._delegate,e,t):y4(this._delegate,e)}catch(i){throw ws(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?v4(this._delegate,e):v4(this._delegate,e,t,...i)}catch(r){throw ws(r,"updateDoc()","DocumentReference.update()")}}delete(){return function zee(n){return Xv(Tn(n.firestore,Ni),[new Bv(n._key,Ui.none())])}(this._delegate)}onSnapshot(...e){const t=S4(e),i=x4(e,r=>new WC(this.firestore,new jd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return b4(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function Uee(n){n=Tn(n,yi);const e=Tn(n.firestore,Ni),t=gr(e),i=new Dg(e);return function XX(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(i=(0,Se.Z)(function*(r,o,l){try{const h=yield function(p,y){const w=dt(p);return w.persistence.runTransaction("read document","readonly",T=>w.localDocuments.getDocument(T,y))}(r,o);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Ge(we.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=Kv(h,`Failed to get document '${o} from cache`);l.reject(p)}}),function(r,o,l){return i.apply(this,arguments)})(yield gA(n),e,t);var i})),t.promise}(t,n._key).then(r=>new jd(e,i,n._key,r,new Cg(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function jee(n){n=Tn(n,yi);const e=Tn(n.firestore,Ni);return j6(gr(e),n._key,{source:"server"}).then(t=>q2(e,n,t))}(this._delegate):function Vee(n){n=Tn(n,yi);const e=Tn(n.firestore,Ni);return j6(gr(e),n._key).then(t=>q2(e,n,t))}(this._delegate),t.then(i=>new WC(this.firestore,new jd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new ml(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}function ws(n,e,t){return n.message=n.message.replace(e,t),n}function S4(n){for(const e of n)if("object"==typeof e&&!Y2(e))return e;return{}}function x4(n,e){var t,i;let r;return r=Y2(n[0])?n[0]:Y2(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(e(o))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class WC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ml(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return l4(this._delegate,e._delegate)}}class qC extends WC{data(e){const t=this._delegate.data(e);return function rQ(n,e){n||bt()}(void 0!==t),t}}class Es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new IA(e)}where(e,t,i){try{return new Es(this.firestore,Gf(this._delegate,function xee(n,e,t){const i=e,r=DA("where",n);return new See(r,i,t)}(e,t,i)))}catch(r){throw ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Es(this.firestore,Gf(this._delegate,function Mee(n,e="asc"){const t=e,i=DA("orderBy",n);return new Aee(i,t)}(e,t)))}catch(i){throw ws(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Es(this.firestore,Gf(this._delegate,function Nee(n){return q6("limit",n),new u4("limit",n,"F")}(e)))}catch(t){throw ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Es(this.firestore,Gf(this._delegate,function Oee(n){return q6("limitToLast",n),new u4("limitToLast",n,"L")}(e)))}catch(t){throw ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Es(this.firestore,Gf(this._delegate,function Ree(...n){return new d4("startAt",n,!0)}(...e)))}catch(t){throw ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Es(this.firestore,Gf(this._delegate,function kee(...n){return new d4("startAfter",n,!1)}(...e)))}catch(t){throw ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Es(this.firestore,Gf(this._delegate,function Pee(...n){return new h4("endBefore",n,!1)}(...e)))}catch(t){throw ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Es(this.firestore,Gf(this._delegate,function Fee(...n){return new h4("endAt",n,!0)}(...e)))}catch(t){throw ws(t,"endAt()","Query.endAt()")}}isEqual(e){return Q6(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function $ee(n){n=Tn(n,Ho);const e=Tn(n.firestore,Ni),t=gr(e),i=new Dg(e);return function eee(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,Se.Z)(function*(){return(i=(0,Se.Z)(function*(r,o,l){try{const h=yield lA(r,o,!0),p=new x6(o,h.ji),y=p.Ku(h.documents),w=p.applyChanges(y,!1);l.resolve(w.snapshot)}catch(h){const p=Kv(h,`Failed to execute query '${o} against cache`);l.reject(p)}}),function(r,o,l){return i.apply(this,arguments)})(yield gA(n),e,t);var i})),t.promise}(t,n._query).then(r=>new $f(e,i,n,r))}(this._delegate):"server"===e?.source?function Gee(n){n=Tn(n,Ho);const e=Tn(n.firestore,Ni),t=gr(e),i=new Dg(e);return H6(t,n._query,{source:"server"}).then(r=>new $f(e,i,n,r))}(this._delegate):function Hee(n){n=Tn(n,Ho);const e=Tn(n.firestore,Ni),t=gr(e),i=new Dg(e);return c4(n._query),H6(t,n._query).then(r=>new $f(e,i,n,r))}(this._delegate),t.then(i=>new Z2(this.firestore,new $f(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=S4(e),i=x4(e,r=>new Z2(this.firestore,new $f(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return b4(this._delegate,t,i)}withConverter(e){return new Es(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}class ste{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new qC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Z2{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new qC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ste(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new qC(this._firestore,i))})}isEqual(e){return l4(this._delegate,e._delegate)}}class eb extends Es{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ml(this.firestore,e):null}doc(e){try{return new ml(this.firestore,void 0===e?yA(this._delegate):yA(this._delegate,e))}catch(t){throw ws(t,"doc()","CollectionReference.doc()")}}add(e){return function Wee(n,e){const t=Tn(n.firestore,Ni),i=yA(n),r=TA(n.converter,e);return Xv(t,[wA(wg(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,Ui.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new ml(this.firestore,t))}isEqual(e){return Z6(this._delegate,e._delegate)}withConverter(e){return new eb(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}function Ig(n){return Tn(n,yi)}class Q2{constructor(...e){this._delegate=new Ud(...e)}static documentId(){return new Q2(Ki.keyField().canonicalString())}isEqual(e){return(e=(0,B.m9)(e))instanceof Ud&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Qee(){return new j2("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sg(e)}static delete(){const e=function Zee(){return new jC("deleteField")}();return e._methodName="FieldValue.delete",new Sg(e)}static arrayUnion(...e){const t=function Jee(...n){return new wee("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Sg(t)}static arrayRemove(...e){const t=function Xee(...n){return new Eee("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Sg(t)}static increment(e){const t=function ete(n){return new Cee("increment",n)}(e);return t._methodName="FieldValue.increment",new Sg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ate={Firestore:D4,GeoPoint:vA,Timestamp:Mi,Blob:zC,Transaction:T4,WriteBatch:I4,DocumentReference:ml,DocumentSnapshot:WC,Query:Es,QueryDocumentSnapshot:qC,QuerySnapshot:Z2,CollectionReference:eb,FieldPath:Q2,FieldValue:Sg,setLogLevel:function ote(n){!function iQ(n){Mf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function A4(n,e){return function ute(n,e=mm.z){return new jn.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function J2(n,e){return A4(n,e).pipe((0,Tt.U)(t=>({payload:t,type:"query"})))}function SA(n,e){return J2(n,e).pipe(Fr(void 0),oF(),(0,Tt.U)(([t,i])=>{const r=i.payload.docChanges(),o=r.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,h)=>{const p=r.find(w=>w.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(w=>w.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),o}))}function M4(n,e,t){return SA(n,t).pipe(Lo((i,r)=>function hte(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function fte(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return X2(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return X2(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return X2(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(o=>o.payload),e),[]),(0,ol.x)(),(0,Tt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function X2(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function N4(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function cte(n){(function lte(n,e){n.INTERNAL.registerComponent(new ic.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},ate)))})(n,(e,t)=>new D4(e,t,new rte)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(bk.Z);class O4{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=SA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Tt.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Fr(void 0),oF(),ti(([i,r])=>r.length>0||!i),(0,Tt.U)(([i,r])=>r),Vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Lo((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=N4(e);return M4(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}valueChanges(e={}){return J2(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),Vn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(Vn.iC)}add(e){return this.ref.add(e)}doc(e){return new R4(this.ref.doc(e),this.afs)}}class R4{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:o}=F4(i,t);return new O4(r,o,this.afs)}snapshotChanges(){return function dte(n,e){return A4(n,e).pipe(Fr(void 0),oF(),(0,Tt.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,wn.D)(this.ref.get(e)).pipe(Vn.iC)}}class pte{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?SA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),ti(t=>t.length>0),Vn.iC):SA(this.query,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Lo((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=N4(e);return M4(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vn.iC)}valueChanges(e={}){return J2(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),Vn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(Vn.iC)}}const k4=new u.OlP("angularfire2.enableFirestorePersistence"),P4=new u.OlP("angularfire2.firestore.persistenceSettings"),mte=new u.OlP("angularfire2.firestore.settings"),gte=new u.OlP("angularfire2.firestore.use-emulator");function F4(n,e=(t=>t)){return{query:e(n),ref:n}}let eB,L4=(()=>{class n{constructor(t,i,r,o,l,h,p,y,w,T,M,O,L,H,te,Te,Ne){this.schedulers=p;const je=(0,xr.on)(t,h,i),xe=w;T&&iF(je,h,M,L,H,te,O,Te),[this.firestore,this.persistenceEnabled$]=(0,xr.cc)(`${je.name}.firestore`,"AngularFirestore",je.name,()=>{const Qe=h.runOutsideAngular(()=>je.firestore());if(o&&Qe.settings(o),xe&&Qe.useEmulator(...xe),r&&!gi(l)){const ot=()=>{try{return(0,wn.D)(Qe.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(wt){return typeof console<"u"&&console.warn(wt),(0,yt.of)(!1)}};return[Qe,h.runOutsideAngular(ot)]}return[Qe,(0,yt.of)(!1)]},[o,xe,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:l}=F4(r,i),h=this.schedulers.ngZone.run(()=>o);return new O4(h,l,this)}collectionGroup(t,i){const r=i||(l=>l),o=this.firestore.collectionGroup(t);return new pte(r(o),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new R4(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xr.Dh),u.LFG(xr.xv,8),u.LFG(k4,8),u.LFG(mte,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Vn.HU),u.LFG(P4,8),u.LFG(gte,8),u.LFG(rF,8),u.LFG(QP,8),u.LFG(JP,8),u.LFG(XP,8),u.LFG(eF,8),u.LFG(tF,8),u.LFG(nF,8),u.LFG(HE,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_te=(()=>{class n{constructor(){ZP.Z.registerVersion("angularfire",Vn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:k4,useValue:!0},{provide:P4,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[L4]}),n})();try{eB=typeof Intl<"u"&&Intl.v8BreakIterator}catch{eB=!1}let tb,wu=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Oa(n){return n===Yo}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!eB)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const B4=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function V4(){if(tb)return tb;if("object"!=typeof document||!document)return tb=new Set(B4),tb;let n=document.createElement("input");return tb=new Set(B4.filter(e=>(n.setAttribute("type",e),n.type===e))),tb}let KC,tB;function YC(n){return function yte(){if(null==KC&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>KC=!0}))}finally{KC=KC||!1}return KC}()?n:!!n.capture}function nb(n){return n.composedPath?n.composedPath()[0]:n.target}function ib(n){return null!=n&&"false"!=`${n}`}function U4(n){return Array.isArray(n)?n:[n]}function Ag(n){return n instanceof u.SBq?n.nativeElement:n}function j4(n,e=mm.z){return(0,zn.e)((t,i)=>{let r=null,o=null,l=null;const h=()=>{if(r){r.unsubscribe(),r=null;const y=o;o=null,i.next(y)}};function p(){const y=l+n,w=e.now();if(w<y)return r=this.schedule(void 0,y-w),void i.add(r);h()}t.subscribe((0,I.x)(i,y=>{o=y,l=e.now(),r||(r=e.schedule(p,n),i.add(r))},()=>{h(),i.complete()},void 0,()=>{o=r=null}))})}const H4=new Set;let Mg,xte=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Mte}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Ate(n,e){if(!H4.has(n))try{Mg||(Mg=document.createElement("style"),e&&(Mg.nonce=e),Mg.setAttribute("type","text/css"),document.head.appendChild(Mg)),Mg.sheet&&(Mg.sheet.insertRule(`@media ${n} {body{ }}`,0),H4.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wu),u.LFG(u.Ojb,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Mte(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Nte=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new tn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return $4(U4(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=k($4(U4(t)).map(l=>this._registerQuery(l).observable));return o=Ft(o.pipe(Bn(1)),o.pipe(xy(1),j4(0))),o.pipe((0,Tt.U)(l=>{const h={matches:!1,breakpoints:{}};return l.forEach(({matches:p,query:y})=>{h.matches=h.matches||p,h.breakpoints[y]=p}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new jn.y(l=>{const h=p=>this._zone.run(()=>l.next(p));return i.addListener(h),()=>{i.removeListener(h)}}).pipe(Fr(i),(0,Tt.U)(({matches:l})=>({query:t,matches:l})),Wn(this._destroySubject)),mql:i};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xte),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $4(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function q4(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function K4(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Vte=new u.OlP("cdk-input-modality-detector-options"),Ute={ignoreKeys:[18,17,224,91,16]},rb=YC({passive:!0,capture:!0});let jte=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new Fi.X(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(h=>h===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=nb(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(q4(l)?"keyboard":"mouse"),this._mostRecentTarget=nb(l))},this._onTouchstart=l=>{K4(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=nb(l))},this._options={...Ute,...o},this.modalityDetected=this._modality.pipe(xy(1)),this.modalityChanged=this.modalityDetected.pipe((0,ol.x)()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,rb),r.addEventListener("mousedown",this._onMousedown,rb),r.addEventListener("touchstart",this._onTouchstart,rb)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,rb),document.removeEventListener("mousedown",this._onMousedown,rb),document.removeEventListener("touchstart",this._onTouchstart,rb))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wu),u.LFG(u.R0b),u.LFG(he),u.LFG(Vte,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $te=new u.OlP("cdk-focus-monitor-default-options"),AA=YC({passive:!0,capture:!0});let Gte=(()=>{class n{constructor(t,i,r,o,l){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new tn.x,this._rootNodeFocusAndBlurListener=h=>{for(let y=nb(h);y;y=y.parentElement)"focus"===h.type?this._onFocus(h,y):this._onBlur(h,y)},this._document=o,this._detectionMode=l?.detectionMode||0}monitor(t,i=!1){const r=Ag(t);if(!this._platform.isBrowser||1!==r.nodeType)return(0,yt.of)();const o=function bte(n){if(function vte(){if(null==tB){const n=typeof document<"u"?document.head:null;tB=!(!n||!n.createShadowRoot&&!n.attachShadow)}return tB}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),l=this._elementInfo.get(r);if(l)return i&&(l.checkChildren=!0),l.subject;const h={checkChildren:i,subject:new tn.x,rootNode:o};return this._elementInfo.set(r,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const i=Ag(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const o=Ag(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([h,p])=>this._originChanged(h,i,p)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),o=nb(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,AA),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,AA)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Wn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,AA),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,AA),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let l=0;l<o.length;l++)if(o[l].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.R0b),u.LFG(wu),u.LFG(jte),u.LFG(he,8),u.LFG($te,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Z4="cdk-high-contrast-black-on-white",Q4="cdk-high-contrast-white-on-black",nB="cdk-high-contrast-active";let zte=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=(0,u.f3M)(Nte).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(nB,Z4,Q4),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(nB,Z4):2===i&&t.add(nB,Q4)}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wu),u.LFG(he))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wte=new u.OlP("cdk-dir-doc",{providedIn:"root",factory:function qte(){return(0,u.f3M)(he)}}),Kte=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Zte=(()=>{class n{constructor(t){this.value="ltr",this.change=new u.vpe,t&&(this.value=function Yte(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Kte.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wte,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),J4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const Jte=new u.OlP("mat-sanity-checks",{providedIn:"root",factory:function Qte(){return!0}});let Wf=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function wte(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zte),u.LFG(Jte,8),u.LFG(he))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[J4,J4]}),n})();function Xte(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=ib(e)}constructor(...e){super(...e),this._disabled=!1}}}function ene(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function tne(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=ib(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function nne(n){return class extends n{updateErrorState(){const e=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==e&&(this.errorState=o,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let rne=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class one{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const tW=YC({passive:!0,capture:!0});class sne{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=nb(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const l=o.get(i);l?l.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,tW)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);o&&(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,tW)))}}const nW={enterDuration:225,exitDuration:150},iW=YC({passive:!0,capture:!0}),rW=["mousedown","touchstart"],oW=["mouseup","mouseleave","touchend","touchcancel"];class ob{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ag(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...nW,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const l=i.radius||function lne(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),h=e-r.left,p=t-r.top,y=o.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=h-l+"px",w.style.top=p-l+"px",w.style.height=2*l+"px",w.style.width=2*l+"px",null!=i.color&&(w.style.backgroundColor=i.color),w.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(w);const T=window.getComputedStyle(w),O=T.transitionDuration,L="none"===T.transitionProperty||"0s"===O||"0s, 0s"===O||0===r.width&&0===r.height,H=new one(this,w,i,L);w.style.transform="scale3d(1, 1, 1)",H.state=0,i.persistent||(this._mostRecentTransientRipple=H);let te=null;return!L&&(y||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Te=()=>this._finishRippleTransition(H),Ne=()=>this._destroyRipple(H);w.addEventListener("transitionend",Te),w.addEventListener("transitioncancel",Ne),te={onTransitionEnd:Te,onTransitionCancel:Ne}}),this._activeRipples.set(H,te),(L||!y)&&this._finishRippleTransition(H),H}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...nW,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Ag(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,rW.forEach(i=>{ob._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{oW.forEach(t=>{this._triggerElement.addEventListener(t,this,iW)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=q4(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!K4(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(rW.forEach(t=>ob._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&oW.forEach(t=>e.removeEventListener(t,this,iW)))}}ob._eventManager=new sne;const sW=new u.OlP("mat-ripple-global-options");let cne=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,o,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new ob(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b),u.Y36(wu),u.Y36(sW,8),u.Y36(u.QbO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),une=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Wf,Wf]}),n})();const dne=["mat-button",""],hne=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],fne=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],aW={capture:!0},lW=["focus","click","mouseenter","touchstart"],QC="mat-button-ripple-uninitialized";let pne=(()=>{class n{constructor(){this._document=(0,u.f3M)(he,{optional:!0}),this._animationMode=(0,u.f3M)(u.QbO,{optional:!0}),this._globalRippleOptions=(0,u.f3M)(sW,{optional:!0}),this._platform=(0,u.f3M)(wu),this._ngZone=(0,u.f3M)(u.R0b),this._onInteraction=t=>{if(t.target===this._document)return;const r=t.target.closest(`[${QC}]`);r&&(r.removeAttribute(QC),this._appendRipple(r))},this._ngZone.runOutsideAngular(()=>{for(const t of lW)this._document?.addEventListener(t,this._onInteraction,aW)})}ngOnDestroy(){for(const t of lW)this._document?.removeEventListener(t,this._onInteraction,aW)}_appendRipple(t){if(!this._document)return;const i=this._document.createElement("span");i.classList.add("mat-mdc-button-ripple");const r=new mne(t,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);r.rippleConfig.centered=t.hasAttribute("mat-icon-button"),new ob(r,this._ngZone,i,this._platform).setupTriggerEvents(t),t.append(i)}_createMatRipple(t){if(!this._document)return;t.querySelector(".mat-mdc-button-ripple")?.remove(),t.removeAttribute(QC);const i=this._document.createElement("span");i.classList.add("mat-mdc-button-ripple");const r=new cne(new u.SBq(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return r._isInitialized=!0,r.trigger=t,t.append(i),r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class mne{constructor(e,t,i){this._button=e,this._globalRippleOptions=t,this._setRippleConfig(t,i)}_setRippleConfig(e,t){this.rippleConfig=e||{},"NoopAnimations"===t&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get rippleDisabled(){return this._button.hasAttribute("disabled")||!!this._globalRippleOptions?.disabled}}const gne=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],_ne=ene(Xte(tne(class{constructor(n){this._elementRef=n}})));let yne=(()=>{class n extends _ne{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement)),this._ripple}set ripple(t){this._ripple=t}constructor(t,i,r,o){super(t),this._platform=i,this._ngZone=r,this._animationMode=o,this._focusMonitor=(0,u.f3M)(Gte),this._rippleLoader=(0,u.f3M)(pne),this._isFab=!1;const l=t.nativeElement.classList;for(const h of gne)this._hasHostAttributes(h.selector)&&h.mdcClasses.forEach(p=>{l.add(p)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnChanges(){this._ripple&&(this._ripple.disabled=this.disableRipple||this.disabled)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...t){return t.some(i=>this._elementRef.nativeElement.hasAttribute(i))}}return n.\u0275fac=function(t){u.$Z()},n.\u0275dir=u.lG2({type:n,features:[u.qOj,u.TTD]}),n})(),bne=(()=>{class n extends yne{constructor(t,i,r,o){super(t,i,r,o)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(wu),u.Y36(u.R0b),u.Y36(u.QbO,8))},n.\u0275cmp=u.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(t,i){2&t&&(u.uIk("disabled",i.disabled||null),u.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[u.qOj],attrs:dne,ngContentSelectors:fne,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){1&t&&(u.F$t(hne),u._UZ(0,"span",0),u.Hsn(1),u.TgZ(2,"span",1),u.Hsn(3,1),u.qZA(),u.Hsn(4,2),u._UZ(5,"span",2)(6,"span",3)),2&t&&u.ekj("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),Ene=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Wf,une,Wf]}),n})();const cW=YC({passive:!0});let Cne=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Ei.E;const i=Ag(t),r=this._monitoredElements.get(i);if(r)return r.subject;const o=new tn.x,l="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||i.classList.contains(l)?"cdk-text-field-autofill-end"===p.animationName&&i.classList.contains(l)&&(i.classList.remove(l),this._ngZone.run(()=>o.next({target:p.target,isAutofilled:!1}))):(i.classList.add(l),this._ngZone.run(()=>o.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",h,cW),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:o,unlisten:()=>{i.removeEventListener("animationstart",h,cW)}}),o}stopMonitoring(t){const i=Ag(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wu),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Dne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();class Tne{constructor(e){this._box=e,this._destroyed=new tn.x,this._resizeSubject=new tn.x,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new jn.y(t=>{const i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(ti(t=>t.some(i=>i.target===e)),NP({bufferSize:1,refCount:!0}),Wn(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let Ine=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=(0,u.f3M)(u.R0b)}ngOnDestroy(){for(const[,t]of this._observers)t.destroy();this._observers.clear()}observe(t,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new Tne(r)),this._observers.get(r).observe(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sne=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Sne]}),n})();const Ane=["notch"],Mne=["matFormFieldNotchedOutline",""],Nne=["*"],One=["textField"],Rne=["iconPrefixContainer"],kne=["textPrefixContainer"];function Pne(n,e){1&n&&u._UZ(0,"span",19)}function Fne(n,e){if(1&n&&(u.TgZ(0,"label",17),u.Hsn(1,1),u.YNc(2,Pne,1,0,"span",18),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),u.uIk("for",t._control.id)("aria-owns",t._control.id),u.xp6(2),u.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required)}}function Lne(n,e){if(1&n&&u.YNc(0,Fne,3,6,"label",16),2&n){const t=u.oxw();u.Q6J("ngIf",t._hasFloatingLabel())}}function Bne(n,e){1&n&&u._UZ(0,"div",20)}function Vne(n,e){}function Une(n,e){if(1&n&&u.YNc(0,Vne,0,0,"ng-template",22),2&n){u.oxw(2);const t=u.MAs(1);u.Q6J("ngTemplateOutlet",t)}}function jne(n,e){if(1&n&&(u.TgZ(0,"div",21),u.YNc(1,Une,1,1,"ng-template",9),u.qZA()),2&n){const t=u.oxw();u.Q6J("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),u.xp6(1),u.Q6J("ngIf",!t._forceDisplayInfixLabel())}}function Hne(n,e){1&n&&(u.TgZ(0,"div",23,24),u.Hsn(2,2),u.qZA())}function $ne(n,e){1&n&&(u.TgZ(0,"div",25,26),u.Hsn(2,3),u.qZA())}function Gne(n,e){}function zne(n,e){if(1&n&&u.YNc(0,Gne,0,0,"ng-template",22),2&n){u.oxw();const t=u.MAs(1);u.Q6J("ngTemplateOutlet",t)}}function Wne(n,e){1&n&&(u.TgZ(0,"div",27),u.Hsn(1,4),u.qZA())}function qne(n,e){1&n&&(u.TgZ(0,"div",28),u.Hsn(1,5),u.qZA())}function Kne(n,e){1&n&&u._UZ(0,"div",29)}function Yne(n,e){if(1&n&&(u.TgZ(0,"div",30),u.Hsn(1,6),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState)}}function Zne(n,e){if(1&n&&(u.TgZ(0,"mat-hint",34),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.Q6J("id",t._hintLabelId),u.xp6(1),u.Oqu(t.hintLabel)}}function Qne(n,e){if(1&n&&(u.TgZ(0,"div",31),u.YNc(1,Zne,2,2,"mat-hint",32),u.Hsn(2,7),u._UZ(3,"div",33),u.Hsn(4,8),u.qZA()),2&n){const t=u.oxw();u.Q6J("@transitionMessages",t._subscriptAnimationState),u.xp6(1),u.Q6J("ngIf",t.hintLabel)}}const Jne=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Xne=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let iB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-label"]]}),n})();const eie=new u.OlP("MatError");let tie=0,uW=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+tie++}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,i){2&t&&(u.Ikx("id",i.id),u.uIk("align",null),u.ekj("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}}),n})();const nie=new u.OlP("MatPrefix"),iie=new u.OlP("MatSuffix"),dW=new u.OlP("FloatingLabelParent");let hW=(()=>{class n{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=(0,u.f3M)(Ine),this._ngZone=(0,u.f3M)(u.R0b),this._parent=(0,u.f3M)(dW),this._resizeSubscription=new ko.w0}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function rie(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const i=t.scrollWidth;return t.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}}),n})();const fW="mdc-line-ripple--active",MA="mdc-line-ripple--deactivating";let pW=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{const o=this._elementRef.nativeElement.classList,l=o.contains(MA);"opacity"===r.propertyName&&l&&o.remove(fW,MA)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(MA),t.add(fW)}deactivate(){this._elementRef.nativeElement.classList.add(MA)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),mW=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){this._notch.nativeElement.style.width=this.open&&t?`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(t,i){if(1&t&&u.Gf(Ane,5),2&t){let r;u.iGM(r=u.CRH())&&(i._notch=r.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,i){2&t&&u.ekj("mdc-notched-outline--notched",i.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Mne,ngContentSelectors:Nne,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(t,i){1&t&&(u.F$t(),u._UZ(0,"div",0),u.TgZ(1,"div",1,2),u.Hsn(3),u.qZA(),u._UZ(4,"div",3))},encapsulation:2,changeDetection:0}),n})();const oie={transitionMessages:U_("transitionMessages",[qb("enter",Kl({opacity:1,transform:"translateY(0%)"})),Fp("void => enter",[Kl({opacity:0,transform:"translateY(-5px)"}),EM("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let gW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})();const _W=new u.OlP("MatFormField"),sie=new u.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let yW=0,cie=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=ib(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,o,l,h,p,y){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=o,this._platform=l,this._defaults=h,this._animationMode=p,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+yW++,this._hintLabelId="mat-mdc-hint-"+yW++,this._subscriptAnimationState="",this._destroyed=new tn.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,h&&(h.appearance&&(this.appearance=h.appearance),this._hideRequiredMarker=!!h?.hideRequiredMarker,h.color&&(this.color=h.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Wn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,sf.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Wn(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Wn(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,r=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,o=i?.getBoundingClientRect().width??0,l=r?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${o+l}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.sBO),u.Y36(u.R0b),u.Y36(Zte),u.Y36(wu),u.Y36(sie,8),u.Y36(u.QbO,8),u.Y36(he))},n.\u0275cmp=u.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(u.Suo(r,iB,5),u.Suo(r,iB,7),u.Suo(r,gW,5),u.Suo(r,nie,5),u.Suo(r,iie,5),u.Suo(r,eie,5),u.Suo(r,uW,5)),2&t){let o;u.iGM(o=u.CRH())&&(i._labelChildNonStatic=o.first),u.iGM(o=u.CRH())&&(i._labelChildStatic=o.first),u.iGM(o=u.CRH())&&(i._formFieldControl=o.first),u.iGM(o=u.CRH())&&(i._prefixChildren=o),u.iGM(o=u.CRH())&&(i._suffixChildren=o),u.iGM(o=u.CRH())&&(i._errorChildren=o),u.iGM(o=u.CRH())&&(i._hintChildren=o)}},viewQuery:function(t,i){if(1&t&&(u.Gf(One,5),u.Gf(Rne,5),u.Gf(kne,5),u.Gf(hW,5),u.Gf(mW,5),u.Gf(pW,5)),2&t){let r;u.iGM(r=u.CRH())&&(i._textField=r.first),u.iGM(r=u.CRH())&&(i._iconPrefixContainer=r.first),u.iGM(r=u.CRH())&&(i._textPrefixContainer=r.first),u.iGM(r=u.CRH())&&(i._floatingLabel=r.first),u.iGM(r=u.CRH())&&(i._notchedOutline=r.first),u.iGM(r=u.CRH())&&(i._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(t,i){2&t&&u.ekj("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[u._Bn([{provide:_W,useExisting:n},{provide:dW,useExisting:n}])],ngContentSelectors:Xne,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(t,i){1&t&&(u.F$t(Jne),u.YNc(0,Lne,1,1,"ng-template",null,0,u.W1O),u.TgZ(2,"div",1,2),u.NdJ("click",function(o){return i._control.onContainerClick(o)}),u.YNc(4,Bne,1,0,"div",3),u.TgZ(5,"div",4),u.YNc(6,jne,2,2,"div",5),u.YNc(7,Hne,3,0,"div",6),u.YNc(8,$ne,3,0,"div",7),u.TgZ(9,"div",8),u.YNc(10,zne,1,1,"ng-template",9),u.Hsn(11),u.qZA(),u.YNc(12,Wne,2,0,"div",10),u.YNc(13,qne,2,0,"div",11),u.qZA(),u.YNc(14,Kne,1,0,"div",12),u.qZA(),u.TgZ(15,"div",13),u.YNc(16,Yne,2,1,"div",14),u.YNc(17,Qne,5,2,"div",15),u.qZA()),2&t&&(u.xp6(2),u.ekj("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),u.xp6(2),u.Q6J("ngIf",!i._hasOutline()&&!i._control.disabled),u.xp6(2),u.Q6J("ngIf",i._hasOutline()),u.xp6(1),u.Q6J("ngIf",i._hasIconPrefix),u.xp6(1),u.Q6J("ngIf",i._hasTextPrefix),u.xp6(2),u.Q6J("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),u.xp6(2),u.Q6J("ngIf",i._hasTextSuffix),u.xp6(1),u.Q6J("ngIf",i._hasIconSuffix),u.xp6(1),u.Q6J("ngIf",!i._hasOutline()),u.xp6(1),u.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),u.Q6J("ngSwitch",i._getDisplayedMessages()),u.xp6(1),u.Q6J("ngSwitchCase","error"),u.xp6(1),u.Q6J("ngSwitchCase","hint"))},dependencies:[Or,So,Xs,Nu,uW,hW,mW,pW],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[oie.transitionMessages]},changeDetection:0}),n})(),rB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Wf,Ri,xne,Wf]}),n})();const uie=new u.OlP("MAT_INPUT_VALUE_ACCESSOR"),die=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let hie=0;const fie=nne(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new tn.x}});let pie=(()=>{class n extends fie{get disabled(){return this._disabled}set disabled(t){this._disabled=ib(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(fO.required)??!1}set required(t){this._required=ib(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&V4().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=ib(t)}constructor(t,i,r,o,l,h,p,y,w,T){super(h,o,l,r),this._elementRef=t,this._platform=i,this._autofillMonitor=y,this._formField=T,this._uid="mat-input-"+hie++,this.focused=!1,this.stateChanges=new tn.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(L=>V4().has(L)),this._iOSKeyupListener=L=>{const H=L.target;!H.value&&0===H.selectionStart&&0===H.selectionEnd&&(H.setSelectionRange(1,1),H.setSelectionRange(0,0))};const M=this._elementRef.nativeElement,O=M.nodeName.toLowerCase();this._inputValueAccessor=p||M,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&w.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===O,this._isTextarea="textarea"===O,this._isInFormField=!!T,this._isNativeSelect&&(this.controlType=M.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){die.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(wu),u.Y36(Xl,10),u.Y36(cf,8),u.Y36(Am,8),u.Y36(rne),u.Y36(uie,10),u.Y36(Cne),u.Y36(u.R0b),u.Y36(_W,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(t,i){1&t&&u.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(u.Ikx("id",i.id)("disabled",i.disabled)("required",i.required),u.uIk("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),u.ekj("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[u._Bn([{provide:gW,useExisting:n}]),u.qOj,u.TTD]}),n})(),mie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Wf,rB,rB,Dne,Wf]}),n})();const gie=[{path:"auth",component:(()=>{class n{constructor(t,i){this.db=t,this.store=i,this.formGroup=new Dm("")}ngOnInit(){this.initForm(),this.store.collection("users").snapshotChanges().subscribe(t=>{this.dataSource=t.map(i=>Object.assign({id:i.payload.doc.id},i.payload.doc.data())),console.log(this.dataSource,"datasorce")})}initForm(){this.formGroup=new Dm({login:new ll(""),senha:new ll(""),token:new ll("")})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Z$),u.Y36(L4))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-auth"]],decls:24,vars:2,consts:[[1,"auth-container"],[1,"login-container"],[1,"auth-form"],[3,"formGroup"],[1,"form","form-group"],["matInput","","formControlName","login"],[1,"form-group"],["matInput","","formControlName","senha",3,"type"],[1,"help-buttons"],[1,"registrar"],["mat-button",""],[1,"forgot"],[1,"btn-entrar"],["mat-raised-button","","color","primary",1,"btn-entrar"]],template:function(t,i){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",4)(5,"mat-form-field")(6,"mat-label"),u._uU(7,"Login"),u.qZA(),u._UZ(8,"input",5),u.qZA()(),u.TgZ(9,"div",6)(10,"mat-form-field")(11,"mat-label"),u._uU(12,"Senha"),u.qZA(),u._UZ(13,"input",7),u.qZA()(),u.TgZ(14,"div",8)(15,"div",9)(16,"button",10),u._uU(17," Registrar-se "),u.qZA()(),u.TgZ(18,"div",11)(19,"button",10),u._uU(20,"Esqueceu a senha?"),u.qZA()()(),u.TgZ(21,"div",12)(22,"button",13),u._uU(23,"Entrar"),u.qZA()()()()()()),2&t&&(u.xp6(3),u.Q6J("formGroup",i.formGroup),u.xp6(10),u.Q6J("type","password"))},dependencies:[Tw,gm,pw,OI,Am,Mw,bne,pie,cie,iB],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;justify-content:center;align-items:center;background-color:#403544}.auth-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{display:flex;width:80%;height:80%;background:#231d25;border-radius:20px}@media (min-width: 768px){.auth-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{width:60%;height:80%}}.auth-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;text-align:left;color:#fff}.auth-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .help-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .auth-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .registrar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .auth-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff!important}.auth-container[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .btn-entrar[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;width:100%}"]}),n})()}];let _ie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Uh.forRoot(gie),Uh]}),n})(),yie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Ri,_ie,Fw,Ene,mie,rB,Pw]}),n})();const wW="firebasestorage.googleapis.com",EW="storageBucket";class Qi extends B.ZR{constructor(e,t){super(oB(e),`Firebase Storage: ${t} (${oB(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qi.prototype)}_codeEquals(e){return oB(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function oB(n){return"storage/"+n}function sB(){return new Qi("unknown","An unknown error occurred, please check the error payload for server response.")}function CW(){return new Qi("canceled","User canceled the upload/download.")}function DW(){return new Qi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function sb(n){return new Qi("invalid-argument",n)}function TW(){return new Qi("app-deleted","The Firebase app was deleted.")}function IW(n){return new Qi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function JC(n,e){return new Qi("invalid-format","String does not match format '"+n+"': "+e)}function XC(n){throw new Qi("internal-error","Internal error: "+n)}class $o{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=$o.makeFromUrl(e,t)}catch{return new $o(e,"")}if(""===i.path)return i;throw function xie(n){return new Qi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+r+"(/(.*))?$","i");function y(xe){xe.path_=decodeURIComponent(xe.path)}const T=t.replace(/[.]/g,"\\."),je=[{regex:h,indices:{bucket:1,path:3},postModify:function o(xe){"/"===xe.path.charAt(xe.path.length-1)&&(xe.path_=xe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===wW?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let xe=0;xe<je.length;xe++){const Qe=je[xe],ot=Qe.regex.exec(e);if(ot){let qt=ot[Qe.indices.path];qt||(qt=""),i=new $o(ot[Qe.indices.bucket],qt),Qe.postModify(i);break}}if(null==i)throw function Sie(n){return new Qi("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class Oie{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function NA(n){return"string"==typeof n||n instanceof String}function SW(n){return aB()&&n instanceof Blob}function aB(){return typeof Blob<"u"}function lB(n,e,t,i){if(i<e)throw sb(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw sb(`Invalid value for '${n}'. Expected ${t} or less.`)}function Hd(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function xW(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var ab=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(ab||{});class Bie{constructor(e,t,i,r,o,l,h,p,y,w,T){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,O)=>{this.resolve_=M,this.reject_=O,this.start_()})}start_(){const t=(i,r)=>{const o=this.resolve_,l=this.reject_,h=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function Pie(n){return void 0!==n}(p)?o():o(p)}catch(p){l(p)}else if(null!==h){const p=sB();p.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,p):p)}else l(r.canceled?this.appDelete_?TW():CW():function Iie(){return new Qi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new OA(!1,null,!0)):this.backoffId_=function Rie(n,e,t){let i=1,r=null,o=null,l=!1,h=0;function p(){return 2===h}let y=!1;function w(...te){y||(y=!0,e.apply(null,te))}function T(te){r=setTimeout(()=>{r=null,n(O,p())},te)}function M(){o&&clearTimeout(o)}function O(te,...Te){if(y)return void M();if(te)return M(),void w.call(null,te,...Te);if(p()||l)return M(),void w.call(null,te,...Te);let je;i<64&&(i*=2),1===h?(h=2,je=0):je=1e3*(i+Math.random()),T(je)}let L=!1;function H(te){L||(L=!0,M(),!y&&(null!==r?(te||(h=2),clearTimeout(r),T(0)):te||(h=1)))}return T(0),o=setTimeout(()=>{l=!0,H(!0)},t),H}((i,r)=>{if(r)return void i(!1,new OA(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const h=o.getErrorCode()===ab.NO_ERROR,p=o.getStatus();if(!h||this.isRetryStatusCode_(p)){const w=o.getErrorCode()===ab.ABORT;return void i(!1,new OA(!1,null,w))}const y=-1!==this.successCodes_.indexOf(p);i(!0,new OA(y,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function kie(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,r=-1!==[408,429].indexOf(e),o=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||o}}class OA{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function zie(...n){const e=function Gie(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(aB())return new Blob(n);throw new Qi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ia={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cB{constructor(e,t){this.data=e,this.contentType=t||null}}function uB(n,e){switch(n){case Ia.RAW:return new cB(AW(e));case Ia.BASE64:case Ia.BASE64URL:return new cB(MW(n,e));case Ia.DATA_URL:return new cB(function Yie(n){const e=new NW(n);return e.base64?MW(Ia.BASE64,e.rest):function Kie(n){let e;try{e=decodeURIComponent(n)}catch{throw JC(Ia.DATA_URL,"Malformed data URL.")}return AW(e)}(e.rest)}(e),function Zie(n){return new NW(n).contentType}(e))}throw sB()}function AW(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function MW(n,e){switch(n){case Ia.BASE64:{const r=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(r||o)throw JC(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ia.BASE64URL:{const r=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(r||o)throw JC(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function qie(n){return atob(n)}(e)}catch{throw JC(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class NW{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw JC(Ia.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function Qie(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class Eu{constructor(e,t){let i=0,r="";SW(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(SW(this.data_)){const r=function Wie(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new Eu(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Eu(i,!0)}}static getBlob(...e){if(aB()){const t=e.map(i=>i instanceof Eu?i.data_:i);return new Eu(zie.apply(null,t))}{const t=e.map(l=>NA(l)?uB(Ia.RAW,l).data:l.data_);let i=0;t.forEach(l=>{i+=l.byteLength});const r=new Uint8Array(i);let o=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)r[o++]=l[h]}),new Eu(r,!0)}}uploadData(){return this.data_}}function dB(n){let e;try{e=JSON.parse(n)}catch{return null}return function Lie(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function OW(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function ere(n,e){return e}class Cs{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||ere}}let RA=null;function eD(){if(RA)return RA;const n=[];n.push(new Cs("bucket")),n.push(new Cs("generation")),n.push(new Cs("metageneration")),n.push(new Cs("name","fullPath",!0));const t=new Cs("name");t.xform=function e(o,l){return function tre(n){return!NA(n)||n.length<2?n:OW(n)}(l)},n.push(t);const r=new Cs("size");return r.xform=function i(o,l){return void 0!==l?Number(l):l},n.push(r),n.push(new Cs("timeCreated")),n.push(new Cs("updated")),n.push(new Cs("md5Hash",null,!0)),n.push(new Cs("cacheControl",null,!0)),n.push(new Cs("contentDisposition",null,!0)),n.push(new Cs("contentEncoding",null,!0)),n.push(new Cs("contentLanguage",null,!0)),n.push(new Cs("contentType",null,!0)),n.push(new Cs("metadata","customMetadata",!0)),RA=n,RA}function RW(n,e,t){const i=dB(e);return null===i?null:function ire(n,e,t){const i={type:"file"},r=t.length;for(let o=0;o<r;o++){const l=t[o];i[l.local]=l.xform(i,e[l.server])}return function nre(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new $o(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(i,n),i}(n,i,t)}function hB(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const kW="prefixes",PW="items";class Cu{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Du(n){if(!n)throw sB()}function kA(n,e){return function t(i,r){const o=RW(n,r,e);return Du(null!==o),o}}function lb(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Die(){return new Qi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Cie(){return new Qi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Eie(n){return new Qi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Tie(n){return new Qi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function tD(n){const e=lb(n);return function t(i,r){let o=e(i,r);return 404===i.getStatus()&&(o=function wie(n){return new Qi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=r.serverResponse,o}}function FW(n,e,t){const r=Hd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Cu(r,"GET",kA(n,t),l);return h.errorHandler=tD(e),h}function cre(n,e,t,i,r){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),i&&(o.pageToken=i),r&&(o.maxResults=r);const h=Hd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,w=new Cu(h,"GET",function are(n,e){return function t(i,r){const o=function sre(n,e,t){const i=dB(t);return null===i?null:function ore(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[kW])for(const r of t[kW]){const o=r.replace(/\/$/,""),l=n._makeStorageReference(new $o(e,o));i.prefixes.push(l)}if(t[PW])for(const r of t[PW]){const o=n._makeStorageReference(new $o(e,r.name));i.items.push(o)}return i}(n,e,i)}(n,e,r);return Du(null!==o),o}}(n,e.bucket),y);return w.urlParams=o,w.errorHandler=lb(e),w}function BW(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function fre(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class PA{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function fB(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Du(!1)}return Du(!!t&&-1!==(e||["active"]).indexOf(t)),t}const _re={STATE_CHANGED:"state_changed"},Ds={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function pB(n){switch(n){case"running":case"pausing":case"canceling":return Ds.RUNNING;case"paused":return Ds.PAUSED;case"success":return Ds.SUCCESS;case"canceled":return Ds.CANCELED;default:return Ds.ERROR}}class yre{constructor(e,t,i){if(function Fie(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function cb(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let jW=null;class vre{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ab.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ab.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ab.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw XC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw XC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw XC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw XC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw XC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class bre extends vre{initXhr(){this.xhr_.responseType="text"}}function dc(){return jW?jW():new bre}class HW{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=eD(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function pre(n,e,t,i,r){const o=e.bucketOnlyServerUrl(),l=BW(e,i,r),h={name:l.fullPath},p=Hd(o,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},T=hB(l,t),L=new Cu(p,"POST",function O(H){let te;fB(H);try{te=H.getResponseHeader("X-Goog-Upload-URL")}catch{Du(!1)}return Du(NA(te)),te},n.maxUploadRetryTime);return L.urlParams=h,L.headers=w,L.body=T,L.errorHandler=lb(e),L}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,dc,e,t);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function mre(n,e,t,i){const p=new Cu(t,"POST",function o(y){const w=fB(y,["active","final"]);let T=null;try{T=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Du(!1)}T||Du(!1);const M=Number(T);return Du(!isNaN(M)),new PA(M,i.size(),"final"===w)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=lb(e),p}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,dc,t,i);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new PA(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let l;try{l=function gre(n,e,t,i,r,o,l,h){const p=new PA(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function Mie(){return new Qi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let w=y;r>0&&(w=Math.min(w,r));const T=p.current,L={"X-Goog-Upload-Command":w===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},H=i.slice(T,T+w);if(null===H)throw DW();const je=new Cu(t,"POST",function te(xe,Qe){const ot=fB(xe,["active","final"]),wt=p.current+w,qt=i.size();let kn;return kn="final"===ot?kA(e,o)(xe,Qe):null,new PA(wt,qt,"final"===ot,kn)},e.maxUploadRetryTime);return je.headers=L,je.body=H.uploadData(),je.progressCallback=h||null,je.errorHandler=lb(n),je}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(l,dc,r,o);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=FW(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,dc,e,t);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function VW(n,e,t,i,r){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let je="";for(let xe=0;xe<2;xe++)je+=Math.random().toString().slice(2);return je}();l["Content-Type"]="multipart/related; boundary="+p;const y=BW(e,i,r),w=hB(y,t),O=Eu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===O)throw DW();const L={name:y.fullPath},H=Hd(o,n.host,n._protocol),Te=n.maxUploadRetryTime,Ne=new Cu(H,"POST",kA(n,t),Te);return Ne.urlParams=L,Ne.headers=l,Ne.body=O.uploadData(),Ne.errorHandler=lb(e),Ne}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,dc,e,t);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=CW(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=pB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const o=new yre(t||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(pB(this._state)){case Ds.SUCCESS:cb(this._resolve.bind(null,this.snapshot))();break;case Ds.CANCELED:case Ds.ERROR:cb(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(pB(this._state)){case Ds.RUNNING:case Ds.PAUSED:e.next&&cb(e.next.bind(e,this.snapshot))();break;case Ds.SUCCESS:e.complete&&cb(e.complete.bind(e))();break;default:e.error&&cb(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ng{constructor(e,t){this._service=e,this._location=t instanceof $o?t:$o.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ng(e,t)}get root(){const e=new $o(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return OW(this._location.path)}get storage(){return this._service}get parent(){const e=function Jie(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new $o(this._location.bucket,e);return new Ng(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw IW(e)}}function GW(n,e,t){return mB.apply(this,arguments)}function mB(){return mB=(0,Se.Z)(function*(n,e,t){const r=yield zW(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield GW(n,e,r.nextPageToken))}),mB.apply(this,arguments)}function zW(n,e){null!=e&&"number"==typeof e.maxResults&&lB("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=cre(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,dc)}function Ore(n){n._throwIfRoot("getDownloadURL");const e=function ure(n,e,t){const r=Hd(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Cu(r,"GET",function lre(n,e){return function t(i,r){const o=RW(n,r,e);return Du(null!==o),function rre(n,e,t,i){const r=dB(e);if(null===r||!NA(r.downloadTokens))return null;const o=r.downloadTokens;if(0===o.length)return null;const l=encodeURIComponent;return o.split(",").map(y=>{const T=n.fullPath;return Hd("/b/"+l(n.bucket)+"/o/"+l(T),t,i)+xW({alt:"media",token:y})})[0]}(o,r,n.host,n._protocol)}}(n,t),l);return h.errorHandler=tD(e),h}(n.storage,n._location,eD());return n.storage.makeRequestWithTokens(e,dc).then(t=>{if(null===t)throw function Nie(){return new Qi("no-download-url","The given file does not have any download URLs.")}();return t})}function WW(n,e){const t=function Xie(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new $o(n._location.bucket,t);return new Ng(n.storage,i)}function qW(n,e){if(n instanceof gB){const t=n;if(null==t._bucket)throw function Aie(){return new Qi("no-default-bucket","No default bucket found. Did you set the '"+EW+"' property when initializing the app?")}();const i=new Ng(t,t._bucket);return null!=e?qW(i,e):i}return void 0!==e?WW(n,e):n}function Fre(n,e){if(e&&function kre(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof gB)return function Pre(n,e){return new Ng(n,e)}(n,e);throw sb("To use ref(service, url), the first argument must be a Storage instance.")}return qW(n,e)}function KW(n,e){const t=e?.[EW];return null==t?null:$o.makeFromBucketSpec(t,n)}class gB{constructor(e,t,i,r,o){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=wW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?$o.makeFromBucketSpec(r,this._host):KW(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?$o.makeFromBucketSpec(this._url,e):KW(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lB("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lB("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Se.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Se.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ng(this,e)}_makeRequest(e,t,i,r){if(this._deleted)return new Oie(TW());{const o=function $ie(n,e,t,i,r,o){const l=xW(n.urlParams),h=n.url+l,p=Object.assign({},n.headers);return function jie(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function Vie(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function Uie(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(p,o),function Hie(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,i),new Bie(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(e,this._appId,i,r,t,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var i=this;return(0,Se.Z)(function*(){const[r,o]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,o).getPromise()})()}}const YW="@firebase/storage";function JW(n,e){return Fre(n=(0,B.m9)(n),e)}function qre(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new gB(t,i,r,e,ps.SDK_VERSION)}!function Kre(){(0,ps._registerComponent)(new ic.wA("storage",qre,"PUBLIC").setMultipleInstances(!0)),(0,ps.registerVersion)(YW,"0.9.9",""),(0,ps.registerVersion)(YW,"0.9.9","esm2017")}();class FA{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class XW{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new FA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new FA(i,this,this._ref))},t)}on(e,t,i,r){let o;return t&&(o="function"==typeof t?l=>t(new FA(l,this,this._ref)):{next:t.next?l=>t.next(new FA(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,i||void 0,r||void 0)}}class e8{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new $d(e,this._service))}get items(){return this._delegate.items.map(e=>new $d(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class $d{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function zre(n,e){return WW(n,e)}(this._delegate,e);return new $d(t,this.storage)}get root(){return new $d(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new $d(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new XW(function Bre(n,e,t){return function Sre(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new HW(n,new Eu(e),t)}(n=(0,B.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ia.RAW,i){this._throwIfRoot("putString");const r=uB(t,e),o=Object.assign({},i);return null==o.contentType&&null!=r.contentType&&(o.contentType=r.contentType),new XW(new HW(this._delegate,new Eu(r.data,!0),o),this)}listAll(){return function Hre(n){return function Are(n){const e={prefixes:[],items:[]};return GW(n,e).then(()=>e)}(n=(0,B.m9)(n))}(this._delegate).then(e=>new e8(e,this.storage))}list(e){return function jre(n,e){return zW(n=(0,B.m9)(n),e)}(this._delegate,e||void 0).then(t=>new e8(t,this.storage))}getMetadata(){return function Vre(n){return function Mre(n){n._throwIfRoot("getMetadata");const e=FW(n.storage,n._location,eD());return n.storage.makeRequestWithTokens(e,dc)}(n=(0,B.m9)(n))}(this._delegate)}updateMetadata(e){return function Ure(n,e){return function Nre(n,e){n._throwIfRoot("updateMetadata");const t=function dre(n,e,t,i){const o=Hd(e.fullServerUrl(),n.host,n._protocol),h=hB(t,i),y=n.maxOperationRetryTime,w=new Cu(o,"PATCH",kA(n,i),y);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=h,w.errorHandler=tD(e),w}(n.storage,n._location,e,eD());return n.storage.makeRequestWithTokens(t,dc)}(n=(0,B.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function $re(n){return Ore(n=(0,B.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Gre(n){return function Rre(n){n._throwIfRoot("deleteObject");const e=function hre(n,e){const i=Hd(e.fullServerUrl(),n.host,n._protocol),h=new Cu(i,"DELETE",function l(p,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=tD(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,dc)}(n=(0,B.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw IW(e)}}class t8{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(n8(e))throw sb("ref() expected a child path but got a URL, use refFromURL instead.");return new $d(JW(this._delegate,e),this)}refFromURL(e){if(!n8(e))throw sb("refFromURL() expected a full URL but got a child path, use ref() instead.");try{$o.makeFromUrl(e,this._delegate.host)}catch{throw sb("refFromUrl() expected a valid full URL but got an invalid one.")}return new $d(JW(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function Wre(n,e,t,i={}){!function Lre(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,B.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function n8(n){return/^[A-Za-z]+:\/\//.test(n)}function Jre(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new t8(t,i)}function i8(n){const e=function eoe(n){return new jn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const o=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){o()}}).pipe(j4(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Tt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function LA(n){return{getDownloadURL:()=>(0,yt.of)(void 0).pipe(Vn.fc,(0,Dn.w)(()=>n.getDownloadURL()),Vn.iC),getMetadata:()=>(0,yt.of)(void 0).pipe(Vn.fc,(0,Dn.w)(()=>n.getMetadata()),Vn.iC),delete:()=>(0,wn.D)(n.delete()),child:e=>LA(n.child(e)),updateMetadata:e=>(0,wn.D)(n.updateMetadata(e)),put:(e,t)=>i8(n.put(e,t)),putString:(e,t,i)=>i8(n.putString(e,t,i)),list:e=>(0,wn.D)(n.list(e)),listAll:()=>(0,wn.D)(n.listAll())}}!function Xre(n){const e={TaskState:Ds,TaskEvent:_re,StringFormat:Ia,Storage:t8,Reference:$d};n.INTERNAL.registerComponent(new ic.wA("storage-compat",Jre,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(bk.Z);const toe=new u.OlP("angularfire2.storageBucket"),noe=new u.OlP("angularfire2.storage.maxUploadRetryTime"),ioe=new u.OlP("angularfire2.storage.maxOperationRetryTime"),roe=new u.OlP("angularfire2.storage.use-emulator");let ooe=(()=>{class n{constructor(t,i,r,o,l,h,p,y,w,T){const M=(0,xr.on)(t,l,i);this.storage=(0,xr.cc)(`${M.name}.storage.${r}`,"AngularFireStorage",M.name,()=>{const O=l.runOutsideAngular(()=>M.storage(r||void 0)),L=w;return L&&O.useEmulator(...L),p&&O.setMaxUploadRetryTime(p),y&&O.setMaxOperationRetryTime(y),O},[p,y])}ref(t){return LA(this.storage.ref(t))}refFromURL(t){return LA(this.storage.refFromURL(t))}upload(t,i,r){return LA(this.storage.ref(t)).put(i,r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xr.Dh),u.LFG(xr.xv,8),u.LFG(toe,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Vn.HU),u.LFG(noe,8),u.LFG(ioe,8),u.LFG(roe,8),u.LFG(HE,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),soe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),aoe=(()=>{class n{constructor(){ZP.Z.registerVersion("angularfire",Vn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[ooe],imports:[soe]}),n})();const loe_firebase={apiKey:"AIzaSyCsjiSUcp_OrcGmoogqELNthL0wPH5WyRE",authDomain:"controleponto-c357f.firebaseapp.com",projectId:"controleponto-c357f",storageBucket:"controleponto-c357f.appspot.com",messagingSenderId:"503831510151",appId:"1:503831510151:web:3db8ad36b285b6cc7d4c22",measurementId:"G-KY1GDCPQ66"};let coe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[wM]}),n.\u0275inj=u.cJS({imports:[kl,bM,Us,hI.forRoot({authReducer:XN}),Fw,Pw,G5,yie,xr.hO.initializeApp(loe_firebase),_te,YZ,aoe]}),n})();Oo().bootstrapModule(coe).catch(n=>console.error(n))},301:(mt,Ie,F)=>{F.d(Ie,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=F(4303);(0,u.registerVersion)("firebase","9.9.3","app")},3071:(mt,Ie,F)=>{F.d(Ie,{Z:()=>u.Z});var u=F(3106);u.Z.registerVersion("firebase","9.9.3","app-compat")},1128:(mt,Ie,F)=>{F.r(Ie);var u=F(5861),ie=F(3106),V=F(9058),le=F(4303),ce=F(7582),he=F(7879),ve=F(4537);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Je=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function Fe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pt=new he.Yd("@firebase/auth");function gt(b,...m){pt.logLevel<=he.in.ERROR&&pt.error(`Auth (${le.SDK_VERSION}): ${b}`,...m)}function se(b,...m){throw $e(b,...m)}function Ce(b,...m){return $e(b,...m)}function de(b,m,_){const E=Object.assign(Object.assign({},Ue()),{[m]:_});return new V.LL("auth","Firebase",E).create(m,{appName:b.name})}function Ae(b,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&se(b,"argument-error"),de(b,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(b,...m){if("string"!=typeof b){const _=m[0],E=[...m.slice(1)];return E[0]&&(E[0].appName=b.name),b._errorFactory.create(_,...E)}return it.create(b,...m)}function G(b,m,..._){if(!b)throw $e(m,..._)}function ke(b){const m="INTERNAL ASSERTION FAILED: "+b;throw gt(m),new Error(m)}function Ke(b,m){b||ke(m)}const Vt=new Map;function Yt(b){Ke(b instanceof Function,"Expected a class definition");let m=Vt.get(b);return m?(Ke(m instanceof b,"Instance stored in cache mismatched with class"),m):(m=new b,Vt.set(b,m),m)}function Sn(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function ri(){return"http:"===_r()||"https:"===_r()}function _r(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class be{constructor(m,_){this.shortDelay=m,this.longDelay=_,Ke(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function fe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ri()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ee(b,m){Ke(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class He{static initialize(m,_,E){this.fetchImpl=m,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},_t=new be(3e4,6e4);function tt(b,m){return b.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:b.tenantId}):m}function nn(b,m,_,E){return kt.apply(this,arguments)}function kt(){return(kt=(0,u.Z)(function*(b,m,_,E,N={}){return un(b,N,(0,u.Z)(function*(){let P={},Q={};E&&("GET"===m?Q=E:P={body:JSON.stringify(E)});const ge=(0,V.xO)(Object.assign({key:b.config.apiKey},Q)).slice(1),Xe=yield b._getAdditionalHeaders();return Xe["Content-Type"]="application/json",b.languageCode&&(Xe["X-Firebase-Locale"]=b.languageCode),He.fetch()(fi(b,b.config.apiHost,_,ge),Object.assign({method:m,headers:Xe,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function un(b,m,_){return St.apply(this,arguments)}function St(){return(St=(0,u.Z)(function*(b,m,_){b._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ye),m);try{const N=new pn(b),P=yield Promise.race([_(),N.promise]);N.clearNetworkTimeout();const Q=yield P.json();if("needConfirmation"in Q)throw re(b,"account-exists-with-different-credential",Q);if(P.ok&&!("errorMessage"in Q))return Q;{const ge=P.ok?Q.errorMessage:Q.error.message,[Xe,ut]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Xe)throw re(b,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Xe)throw re(b,"email-already-in-use",Q);if("USER_DISABLED"===Xe)throw re(b,"user-disabled",Q);const Mt=E[Xe]||Xe.toLowerCase().replace(/[_\s]+/g,"-");if(ut)throw de(b,Mt,ut);se(b,Mt)}}catch(N){if(N instanceof V.ZR)throw N;se(b,"network-request-failed")}})).apply(this,arguments)}function fn(b,m,_,E){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,u.Z)(function*(b,m,_,E,N={}){const P=yield nn(b,m,_,E,N);return"mfaPendingCredential"in P&&se(b,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function fi(b,m,_,E){const N=`${m}${_}?${E}`;return b.config.emulator?Ee(b.config,N):`${b.config.apiScheme}://${N}`}class pn{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Ce(this.auth,"network-request-failed")),_t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function re(b,m,_){const E={appName:b.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const N=Ce(b,m,E);return N.customData._tokenResponse=_,N}function ye(){return(ye=(0,u.Z)(function*(b,m){return nn(b,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function et(){return(et=(0,u.Z)(function*(b,m){return nn(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function En(){return(En=(0,u.Z)(function*(b,m){return nn(b,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function nt(b){if(b)try{const m=new Date(Number(b));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Cn(){return(Cn=(0,u.Z)(function*(b,m=!1){const _=(0,V.m9)(b),E=yield _.getIdToken(m),N=Kn(E);G(N&&N.exp&&N.auth_time&&N.iat,_.auth,"internal-error");const P="object"==typeof N.firebase?N.firebase:void 0,Q=P?.sign_in_provider;return{claims:N,token:E,authTime:nt(Oi(N.auth_time)),issuedAtTime:nt(Oi(N.iat)),expirationTime:nt(Oi(N.exp)),signInProvider:Q||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Oi(b){return 1e3*Number(b)}function Kn(b){var m;const[_,E,N]=b.split(".");if(void 0===_||void 0===E||void 0===N)return gt("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,V.tV)(E);return P?JSON.parse(P):(gt("Failed to decode base64 JWT payload"),null)}catch(P){return gt("Caught error parsing JWT payload as JSON",null===(m=P)||void 0===m?void 0:m.toString()),null}}function ln(b,m){return or.apply(this,arguments)}function or(){return(or=(0,u.Z)(function*(b,m,_=!1){if(_)return m;try{return yield m}catch(E){throw E instanceof V.ZR&&function jt({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(E)&&b.auth.currentUser===b&&(yield b.auth.signOut()),E}})).apply(this,arguments)}class $i{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const N=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,N)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(m);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),E)}iteration(){var m=this;return(0,u.Z)(function*(){var _;try{yield m.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(_=E)||void 0===_?void 0:_.code)&&m.schedule(!0))}m.schedule()})()}}class dn{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=nt(this.lastLoginAt),this.creationTime=nt(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sr(b){return ar.apply(this,arguments)}function ar(){return ar=(0,u.Z)(function*(b){var m;const _=b.auth,E=yield b.getIdToken(),N=yield ln(b,function st(b,m){return En.apply(this,arguments)}(_,{idToken:E}));G(N?.users.length,_,"internal-error");const P=N.users[0];b._notifyReloadListener(P);const Q=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?function z(b){return b.map(m=>{var{providerId:_}=m,E=(0,ce._T)(m,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}(P.providerUserInfo):[],ge=function K(b,m){return[...b.filter(E=>!m.some(N=>N.providerId===E.providerId)),...m]}(b.providerData,Q),Mt=!!b.isAnonymous&&!(b.email&&P.passwordHash||ge?.length),Nt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ge,metadata:new dn(P.createdAt,P.lastLoginAt),isAnonymous:Mt};Object.assign(b,Nt)}),ar.apply(this,arguments)}function J(){return(J=(0,u.Z)(function*(b){const m=(0,V.m9)(b);yield sr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function q(){return(q=(0,u.Z)(function*(b,m){const _=yield un(b,{},(0,u.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:N,apiKey:P}=b.config,Q=fi(b,N,"/v1/token",`key=${P}`),ge=yield b._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",He.fetch()(Q,{method:"POST",headers:ge,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Be{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){G(m.idToken,"internal-error"),G(typeof m.idToken<"u","internal-error"),G(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function mn(b){const m=Kn(b);return G(m,"internal-error"),G(typeof m.exp<"u","internal-error"),G(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var E=this;return(0,u.Z)(function*(){return G(!E.accessToken||E.refreshToken,m,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(m,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var E=this;return(0,u.Z)(function*(){const{accessToken:N,refreshToken:P,expiresIn:Q}=yield function Y(b,m){return q.apply(this,arguments)}(m,_);E.updateTokensAndExpiration(N,P,Number(Q))})()}updateTokensAndExpiration(m,_,E){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(m,_){const{refreshToken:E,accessToken:N,expirationTime:P}=_,Q=new Be;return E&&(G("string"==typeof E,"internal-error",{appName:m}),Q.refreshToken=E),N&&(G("string"==typeof N,"internal-error",{appName:m}),Q.accessToken=N),P&&(G("number"==typeof P,"internal-error",{appName:m}),Q.expirationTime=P),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Be,this.toJSON())}_performRefresh(){return ke("not implemented")}}function We(b,m){G("string"==typeof b||typeof b>"u","internal-error",{appName:m})}class It{constructor(m){var{uid:_,auth:E,stsTokenManager:N}=m,P=(0,ce._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $i(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=N,this.accessToken=N.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new dn(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,u.Z)(function*(){const E=yield ln(_,_.stsTokenManager.getToken(_.auth,m));return G(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(m){return function Dt(b){return Cn.apply(this,arguments)}(this,m)}reload(){return function gl(b){return J.apply(this,arguments)}(this)}_assign(m){this!==m&&(G(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new It(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var E=this;return(0,u.Z)(function*(){let N=!1;m.idToken&&m.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(m),N=!0),_&&(yield sr(E)),yield E.auth._persistUserIfCurrent(E),N&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var m=this;return(0,u.Z)(function*(){const _=yield m.getIdToken();return yield ln(m,function ne(b,m){return ye.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var E,N,P,Q,ge,Xe,ut,Mt;const Nt=null!==(E=_.displayName)&&void 0!==E?E:void 0,Ti=null!==(N=_.email)&&void 0!==N?N:void 0,Br=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,qc=null!==(Q=_.photoURL)&&void 0!==Q?Q:void 0,Qa=null!==(ge=_.tenantId)&&void 0!==ge?ge:void 0,zl=null!==(Xe=_._redirectEventId)&&void 0!==Xe?Xe:void 0,Nh=null!==(ut=_.createdAt)&&void 0!==ut?ut:void 0,ld=null!==(Mt=_.lastLoginAt)&&void 0!==Mt?Mt:void 0,{uid:Kc,emailVerified:Ab,isAnonymous:Mb,providerData:__,stsTokenManager:Nb}=_;G(Kc&&Nb,m,"internal-error");const Ob=Be.fromJSON(this.name,Nb);G("string"==typeof Kc,m,"internal-error"),We(Nt,m.name),We(Ti,m.name),G("boolean"==typeof Ab,m,"internal-error"),G("boolean"==typeof Mb,m,"internal-error"),We(Br,m.name),We(qc,m.name),We(Qa,m.name),We(zl,m.name),We(Nh,m.name),We(ld,m.name);const y_=new It({uid:Kc,auth:m,email:Ti,emailVerified:Ab,displayName:Nt,isAnonymous:Mb,photoURL:qc,phoneNumber:Br,tenantId:Qa,stsTokenManager:Ob,createdAt:Nh,lastLoginAt:ld});return __&&Array.isArray(__)&&(y_.providerData=__.map(v_=>Object.assign({},v_))),zl&&(y_._redirectEventId=zl),y_}static _fromIdTokenResponse(m,_,E=!1){return(0,u.Z)(function*(){const N=new Be;N.updateFromServerResponse(_);const P=new It({uid:_.localId,auth:m,stsTokenManager:N,isAnonymous:E});return yield sr(P),P})()}}const vn=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,E){var N=this;return(0,u.Z)(function*(){N.storage[_]=E})()}_get(_){var E=this;return(0,u.Z)(function*(){const N=E.storage[_];return void 0===N?null:N})()}_remove(_){var E=this;return(0,u.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return b.type="NONE",b})();function vi(b,m,_){return`firebase:${b}:${m}:${_}`}class Zt{constructor(m,_,E){this.persistence=m,this.auth=_,this.userKey=E;const{config:N,name:P}=this.auth;this.fullUserKey=vi(this.userKey,N.apiKey,P),this.fullPersistenceKey=vi("persistence",N.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,u.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?It._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,u.Z)(function*(){if(_.persistence===m)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,E="authUser"){return(0,u.Z)(function*(){if(!_.length)return new Zt(Yt(vn),m,E);const N=(yield Promise.all(_.map(function(){var ut=(0,u.Z)(function*(Mt){if(yield Mt._isAvailable())return Mt});return function(Mt){return ut.apply(this,arguments)}}()))).filter(ut=>ut);let P=N[0]||Yt(vn);const Q=vi(E,m.config.apiKey,m.name);let ge=null;for(const ut of _)try{const Mt=yield ut._get(Q);if(Mt){const Nt=It._fromJSON(m,Mt);ut!==P&&(ge=Nt),P=ut;break}}catch{}const Xe=N.filter(ut=>ut._shouldAllowMigration);return P._shouldAllowMigration&&Xe.length?(P=Xe[0],ge&&(yield P._set(Q,ge.toJSON())),yield Promise.all(_.map(function(){var ut=(0,u.Z)(function*(Mt){if(Mt!==P)try{yield Mt._remove(Q)}catch{}});return function(Mt){return ut.apply(this,arguments)}}())),new Zt(P,m,E)):new Zt(P,m,E)})()}}function yr(b){const m=b.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Wo(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(zo(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Kr(m))return"Blackberry";if(rn(m))return"Webos";if(xa(m))return"Safari";if((m.includes("chrome/")||Ji(m))&&!m.includes("edge/"))return"Chrome";if(lr(m))return"Android";{const E=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function zo(b=(0,V.z$)()){return/firefox\//i.test(b)}function xa(b=(0,V.z$)()){const m=b.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Ji(b=(0,V.z$)()){return/crios\//i.test(b)}function Wo(b=(0,V.z$)()){return/iemobile/i.test(b)}function lr(b=(0,V.z$)()){return/android/i.test(b)}function Kr(b=(0,V.z$)()){return/blackberry/i.test(b)}function rn(b=(0,V.z$)()){return/webos/i.test(b)}function To(b=(0,V.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function qo(b=(0,V.z$)()){return To(b)||lr(b)||rn(b)||Kr(b)||/windows phone/i.test(b)||Wo(b)}function Qs(b,m=[]){let _;switch(b){case"Browser":_=yr((0,V.z$)());break;case"Worker":_=`${yr((0,V.z$)())}-${b}`;break;default:_=b}const E=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${le.SDK_VERSION}/${E}`}class Su{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const E=P=>new Promise((Q,ge)=>{try{Q(m(P))}catch(Xe){ge(Xe)}});E.onAbort=_,this.queue.push(E);const N=this.queue.length-1;return()=>{this.queue[N]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,u.Z)(function*(){var E;if(_.auth.currentUser===m)return;const N=[];try{for(const P of _.queue)yield P(m),P.onAbort&&N.push(P.onAbort)}catch(P){N.reverse();for(const Q of N)try{Q()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=P)||void 0===E?void 0:E.message})}})()}}class xu{constructor(m,_,E){this.app=m,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yl(this),this.idTokenSubscription=new yl(this),this.beforeStateQueue=new Su(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(m,_){var E=this;return _&&(this._popupRedirectResolver=Yt(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var N,P;if(!E._deleted&&(E.persistenceManager=yield Zt.create(E,m),!E._deleted)){if(null!==(N=E._popupRedirectResolver)&&void 0!==N&&N._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,u.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,u.Z)(function*(){var E;const N=yield _.assertedPersistence.getCurrentUser();let P=N,Q=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const ge=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,Xe=P?._redirectEventId,ut=yield _.tryRedirectSignIn(m);(!ge||ge===Xe)&&ut?.user&&(P=ut.user,Q=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(Q)try{yield _.beforeStateQueue.runMiddleware(P)}catch(ge){P=N,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(ge))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return G(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var _=this;return(0,u.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,u.Z)(function*(){var E;try{yield sr(m)}catch(N){if("auth/network-request-failed"!==(null===(E=N)||void 0===E?void 0:E.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function _e(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var m=this;return(0,u.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,u.Z)(function*(){const E=m?(0,V.m9)(m):null;return E&&G(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(m,_=!1){var E=this;return(0,u.Z)(function*(){if(!E._deleted)return m&&G(E.tenantId===m.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(m)),E.queue((0,u.Z)(function*(){yield E.directlySetCurrentUser(m),E.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,u.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(Yt(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new V.LL("auth","Firebase",m())}onAuthStateChanged(m,_,E){return this.registerStateListener(this.authStateSubscription,m,_,E)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,E){return this.registerStateListener(this.idTokenSubscription,m,_,E)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var E=this;return(0,u.Z)(function*(){const N=yield E.getOrInitRedirectPersistenceManager(_);return null===m?N.removeCurrentUser():N.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const E=m&&Yt(m)||_._popupRedirectResolver;G(E,_,"argument-error"),_.redirectPersistenceManager=yield Zt.create(_,[Yt(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,u.Z)(function*(){var E,N;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===m?_._currentUser:(null===(N=_.redirectUser)||void 0===N?void 0:N._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,u.Z)(function*(){if(m===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,E,N){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return G(Q,this,"internal-error"),Q.then(()=>P(this.currentUser)),"function"==typeof _?m.addObserver(_,E,N):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Qs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,u.Z)(function*(){var _;const E={"X-Client-Version":m.clientVersion};m.app.options.appId&&(E["X-Firebase-gmpid"]=m.app.options.appId);const N=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return N&&(E["X-Firebase-Client"]=N),E})()}}function pi(b){return(0,V.m9)(b)}class yl{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,V.ne)(_=>this.observer=_)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Aa(b){const m=b.indexOf(":");return m<0?"":b.substr(0,m+1)}function Kf(b){if(!b)return null;const m=Number(b);return isNaN(m)?null:m}class Is{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return ke("not implemented")}_getIdTokenResponse(m){return ke("not implemented")}_linkToIdToken(m,_){return ke("not implemented")}_getReauthenticationResolver(m){return ke("not implemented")}}function Gi(b,m){return vr.apply(this,arguments)}function vr(){return(vr=(0,u.Z)(function*(b,m){return nn(b,"POST","/v1/accounts:resetPassword",tt(b,m))})).apply(this,arguments)}function zd(b,m){return vl.apply(this,arguments)}function vl(){return(vl=(0,u.Z)(function*(b,m){return nn(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Io(){return(Io=(0,u.Z)(function*(b,m){return nn(b,"POST","/v1/accounts:update",tt(b,m))})).apply(this,arguments)}function Yf(){return(Yf=(0,u.Z)(function*(b,m){return fn(b,"POST","/v1/accounts:signInWithPassword",tt(b,m))})).apply(this,arguments)}function Or(b,m){return bl.apply(this,arguments)}function bl(){return(bl=(0,u.Z)(function*(b,m){return nn(b,"POST","/v1/accounts:sendOobCode",tt(b,m))})).apply(this,arguments)}function wl(){return(wl=(0,u.Z)(function*(b,m){return Or(b,m)})).apply(this,arguments)}function Nu(){return(Nu=(0,u.Z)(function*(b,m){return Or(b,m)})).apply(this,arguments)}function Zf(){return(Zf=(0,u.Z)(function*(b,m){return Or(b,m)})).apply(this,arguments)}function Ma(){return(Ma=(0,u.Z)(function*(b,m){return Or(b,m)})).apply(this,arguments)}function So(){return(So=(0,u.Z)(function*(b,m){return fn(b,"POST","/v1/accounts:signInWithEmailLink",tt(b,m))})).apply(this,arguments)}function Ht(){return(Ht=(0,u.Z)(function*(b,m){return fn(b,"POST","/v1/accounts:signInWithEmailLink",tt(b,m))})).apply(this,arguments)}class oi extends Is{constructor(m,_,E,N=null){super("password",E),this._email=m,this._password=_,this._tenantId=N}static _fromEmailAndPassword(m,_){return new oi(m,_,"password")}static _fromEmailAndCode(m,_,E=null){return new oi(m,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,u.Z)(function*(){switch(_.signInMethod){case"password":return function fc(b,m){return Yf.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Qf(b,m){return So.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:se(m,"internal-error")}})()}_linkToIdToken(m,_){var E=this;return(0,u.Z)(function*(){switch(E.signInMethod){case"password":return zd(m,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Jf(b,m){return Ht.apply(this,arguments)}(m,{idToken:_,email:E._email,oobCode:E._password});default:se(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Yn(b,m){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,u.Z)(function*(b,m){return fn(b,"POST","/v1/accounts:signInWithIdp",tt(b,m))})).apply(this,arguments)}class Yr extends Is{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new Yr(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):se("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:N}=_,P=(0,ce._T)(_,["providerId","signInMethod"]);if(!E||!N)return null;const Q=new Yr(E,N);return Q.idToken=P.idToken||void 0,Q.accessToken=P.accessToken||void 0,Q.secret=P.secret,Q.nonce=P.nonce,Q.pendingToken=P.pendingToken||null,Q}_getIdTokenResponse(m){return Yn(m,this.buildRequest())}_linkToIdToken(m,_){const E=this.buildRequest();return E.idToken=_,Yn(m,E)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Yn(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,V.xO)(_)}return m}}function Na(){return(Na=(0,u.Z)(function*(b,m){return nn(b,"POST","/v1/accounts:sendVerificationCode",tt(b,m))})).apply(this,arguments)}function Ko(){return(Ko=(0,u.Z)(function*(b,m){return fn(b,"POST","/v1/accounts:signInWithPhoneNumber",tt(b,m))})).apply(this,arguments)}function lt(){return(lt=(0,u.Z)(function*(b,m){const _=yield fn(b,"POST","/v1/accounts:signInWithPhoneNumber",tt(b,m));if(_.temporaryProof)throw re(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ut={USER_NOT_FOUND:"user-not-found"};function wr(){return(wr=(0,u.Z)(function*(b,m){return fn(b,"POST","/v1/accounts:signInWithPhoneNumber",tt(b,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Ut)})).apply(this,arguments)}class Zr extends Is{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new Zr({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new Zr({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function pc(b,m){return Ko.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function mi(b,m){return lt.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Gn(b,m){return wr.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:E,verificationCode:N}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:E,code:N}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:E,phoneNumber:N,temporaryProof:P}=m;return E||_||N||P?new Zr({verificationId:_,verificationCode:E,phoneNumber:N,temporaryProof:P}):null}}class Fn{constructor(m){var _,E,N,P,Q,ge;const Xe=(0,V.zd)((0,V.pd)(m)),ut=null!==(_=Xe.apiKey)&&void 0!==_?_:null,Mt=null!==(E=Xe.oobCode)&&void 0!==E?E:null,Nt=function Xi(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(N=Xe.mode)&&void 0!==N?N:null);G(ut&&Mt&&Nt,"argument-error"),this.apiKey=ut,this.operation=Nt,this.code=Mt,this.continueUrl=null!==(P=Xe.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Q=Xe.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(ge=Xe.tenantId)&&void 0!==ge?ge:null}static parseLink(m){const _=function xs(b){const m=(0,V.zd)((0,V.pd)(b)).link,_=m?(0,V.zd)((0,V.pd)(m)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(b)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||_||m||b}(m);try{return new Fn(_)}catch{return null}}}let xo=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,E){return oi._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const N=Fn.parseLink(E);return G(N,"argument-error"),oi._fromEmailAndCode(_,N.code,N.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Ot{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Qr extends Ot{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class ta extends Qr{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return G("providerId"in _&&"signInMethod"in _,"argument-error"),Yr._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return G(m.idToken||m.accessToken,"argument-error"),Yr._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return ta.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return ta.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:N,pendingToken:P,nonce:Q,providerId:ge}=m;if(!E&&!N&&!_&&!P||!ge)return null;try{return new ta(ge)._credential({idToken:_,accessToken:E,nonce:Q,pendingToken:P})}catch{return null}}}let Ao=(()=>{class b extends Qr{constructor(){super("facebook.com")}static credential(_){return Yr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Un=(()=>{class b extends Qr{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return Yr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:N}=_;if(!E&&!N)return null;try{return b.credential(E,N)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),El=(()=>{class b extends Qr{constructor(){super("github.com")}static credential(_){return Yr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Ri extends Is{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Yn(m,this.buildRequest())}_linkToIdToken(m,_){const E=this.buildRequest();return E.idToken=_,Yn(m,E)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Yn(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:N,pendingToken:P}=_;return E&&N&&P&&E===N?new Ri(E,P):null}static _create(m,_){return new Ri(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Er extends Ot{constructor(m){G(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Er.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Er.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Ri.fromJSON(m);return G(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:E}=m;if(!_||!E)return null;try{return Ri._create(E,_)}catch{return null}}}let Zo=(()=>{class b extends Qr{constructor(){super("twitter.com")}static credential(_,E){return Yr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:N}=_;if(!E||!N)return null;try{return b.credential(E,N)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Rr(b,m){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,u.Z)(function*(b,m){return fn(b,"POST","/v1/accounts:signUp",tt(b,m))})).apply(this,arguments)}class gi{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,E,N=!1){return(0,u.Z)(function*(){const P=yield It._fromIdTokenResponse(m,E,N),Q=on(E);return new gi({user:P,providerId:Q,_tokenResponse:E,operationType:_})})()}static _forOperation(m,_,E){return(0,u.Z)(function*(){yield m._updateTokensIfNecessary(E,!0);const N=on(E);return new gi({user:m,providerId:N,_tokenResponse:E,operationType:_})})()}}function on(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function mc(){return(mc=(0,u.Z)(function*(b){var m;const _=pi(b);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new gi({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield Rr(_,{returnSecureToken:!0}),N=yield gi._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(N.user),N})).apply(this,arguments)}class Dl extends V.ZR{constructor(m,_,E,N){var P;super(_.code,_.message),this.operationType=E,this.user=N,Object.setPrototypeOf(this,Dl.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(m,_,E,N){return new Dl(m,_,E,N)}}function Jr(b,m,_,E){return("reauthenticate"===m?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Dl._fromErrorAndOperation(b,P,m,E):P})}function kr(b){return new Set(b.map(({providerId:m})=>m).filter(m=>!!m))}function Ms(){return Ms=(0,u.Z)(function*(b,m){const _=(0,V.m9)(b);yield si(!0,_,m);const{providerUserInfo:E}=yield function Oe(b,m){return et.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),N=kr(E||[]);return _.providerData=_.providerData.filter(P=>N.has(P.providerId)),N.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Ms.apply(this,arguments)}function _i(b,m){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,u.Z)(function*(b,m,_=!1){const E=yield ln(b,m._linkToIdToken(b.auth,yield b.getIdToken()),_);return gi._forOperation(b,"link",E)})).apply(this,arguments)}function si(b,m,_){return ki.apply(this,arguments)}function ki(){return(ki=(0,u.Z)(function*(b,m,_){yield sr(m);const N=!1===b?"provider-already-linked":"no-such-provider";G(kr(m.providerData).has(_)===b,m.auth,N)})).apply(this,arguments)}function gc(b,m){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,u.Z)(function*(b,m,_=!1){var E;const{auth:N}=b,P="reauthenticate";try{const Q=yield ln(b,Jr(N,P,m,b),_);G(Q.idToken,N,"internal-error");const ge=Kn(Q.idToken);G(ge,N,"internal-error");const{sub:Xe}=ge;return G(b.uid===Xe,N,"user-mismatch"),gi._forOperation(b,P,Q)}catch(Q){throw"auth/user-not-found"===(null===(E=Q)||void 0===E?void 0:E.code)&&se(N,"user-mismatch"),Q}})).apply(this,arguments)}function na(b,m){return zi.apply(this,arguments)}function zi(){return(zi=(0,u.Z)(function*(b,m,_=!1){const E="signIn",N=yield Jr(b,E,m),P=yield gi._fromIdTokenResponse(b,E,N);return _||(yield b._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Zn(b,m){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,u.Z)(function*(b,m){return na(pi(b),m)})).apply(this,arguments)}function _c(b,m){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,u.Z)(function*(b,m){const _=(0,V.m9)(b);return yield si(!1,_,m.providerId),_i(_,m)})).apply(this,arguments)}function ku(b,m){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,u.Z)(function*(b,m){return gc((0,V.m9)(b),m)})).apply(this,arguments)}function yc(){return(yc=(0,u.Z)(function*(b,m){return fn(b,"POST","/v1/accounts:signInWithCustomToken",tt(b,m))})).apply(this,arguments)}function Fu(){return Fu=(0,u.Z)(function*(b,m){const _=pi(b),E=yield function Qd(b,m){return yc.apply(this,arguments)}(_,{token:m,returnSecureToken:!0}),N=yield gi._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(N.user),N}),Fu.apply(this,arguments)}class Lu{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Xd._fromServerResponse(m,_):se(m,"internal-error")}}class Xd extends Lu{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Xd(_)}}function Bu(b,m,_){var E;G((null===(E=_.url)||void 0===E?void 0:E.length)>0,b,"invalid-continue-uri"),G(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(G(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(G(_.android.packageName.length>0,b,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function th(){return th=(0,u.Z)(function*(b,m,_){const E=(0,V.m9)(b),N={requestType:"PASSWORD_RESET",email:m};_&&Bu(E,N,_),yield function Xs(b,m){return Nu.apply(this,arguments)}(E,N)}),th.apply(this,arguments)}function nh(){return(nh=(0,u.Z)(function*(b,m,_){yield Gi((0,V.m9)(b),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Tl(){return Tl=(0,u.Z)(function*(b,m){yield function Wd(b,m){return Io.apply(this,arguments)}((0,V.m9)(b),{oobCode:m})}),Tl.apply(this,arguments)}function vc(b,m){return tp.apply(this,arguments)}function tp(){return(tp=(0,u.Z)(function*(b,m){const _=(0,V.m9)(b),E=yield Gi(_,{oobCode:m}),N=E.requestType;switch(G(N,_,"internal-error"),N){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(E.mfaInfo,_,"internal-error");default:G(E.email,_,"internal-error")}let P=null;return E.mfaInfo&&(P=Lu._fromServerResponse(pi(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:N}})).apply(this,arguments)}function np(){return(np=(0,u.Z)(function*(b,m){const{data:_}=yield vc((0,V.m9)(b),m);return _.email})).apply(this,arguments)}function Vu(){return(Vu=(0,u.Z)(function*(b,m,_){const E=pi(b),N=yield Rr(E,{returnSecureToken:!0,email:m,password:_}),P=yield gi._fromIdTokenResponse(E,"signIn",N);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function Uu(){return Uu=(0,u.Z)(function*(b,m,_){const E=(0,V.m9)(b),N={requestType:"EMAIL_SIGNIN",email:m};G(_.handleCodeInApp,E,"argument-error"),_&&Bu(E,N,_),yield function Pg(b,m){return Zf.apply(this,arguments)}(E,N)}),Uu.apply(this,arguments)}function bc(){return(bc=(0,u.Z)(function*(b,m,_){const E=(0,V.m9)(b),N=xo.credentialWithLink(m,_||Sn());return G(N._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Zn(E,N)})).apply(this,arguments)}function Il(){return(Il=(0,u.Z)(function*(b,m){return nn(b,"POST","/v1/accounts:createAuthUri",tt(b,m))})).apply(this,arguments)}function Ra(){return Ra=(0,u.Z)(function*(b,m){const E={identifier:m,continueUri:ri()?Sn():"http://localhost"},{signinMethods:N}=yield function hb(b,m){return Il.apply(this,arguments)}((0,V.m9)(b),E);return N||[]}),Ra.apply(this,arguments)}function Mo(){return Mo=(0,u.Z)(function*(b,m){const _=(0,V.m9)(b),N={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};m&&Bu(_.auth,N,m);const{email:P}=yield function qd(b,m){return wl.apply(this,arguments)}(_.auth,N);P!==b.email&&(yield b.reload())}),Mo.apply(this,arguments)}function Sl(){return Sl=(0,u.Z)(function*(b,m,_){const E=(0,V.m9)(b),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:m};_&&Bu(E.auth,P,_);const{email:Q}=yield function Ou(b,m){return Ma.apply(this,arguments)}(E.auth,P);Q!==b.email&&(yield b.reload())}),Sl.apply(this,arguments)}function ra(){return(ra=(0,u.Z)(function*(b,m){return nn(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function lh(){return lh=(0,u.Z)(function*(b,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const E=(0,V.m9)(b),P={idToken:yield E.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},Q=yield ln(E,function ka(b,m){return ra.apply(this,arguments)}(E.auth,P));E.displayName=Q.displayName||null,E.photoURL=Q.photoUrl||null;const ge=E.providerData.find(({providerId:Xe})=>"password"===Xe);ge&&(ge.displayName=E.displayName,ge.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Q)}),lh.apply(this,arguments)}function uh(b,m,_){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,u.Z)(function*(b,m,_){const{auth:E}=b,P={idToken:yield b.getIdToken(),returnSecureToken:!0};m&&(P.email=m),_&&(P.password=_);const Q=yield ln(b,zd(E,P));yield b._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class xl{constructor(m,_,E={}){this.isNewUser=m,this.providerId=_,this.profile=E}}class Bg extends xl{constructor(m,_,E,N){super(m,_,E),this.username=N}}class ip extends xl{constructor(m,_){super(m,"facebook.com",_)}}class ju extends Bg{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Vg extends xl{constructor(m,_){super(m,"google.com",_)}}class Hu extends Bg{constructor(m,_,E){super(m,"twitter.com",_,E)}}function dh(b){const{user:m,_tokenResponse:_}=b;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Lg(b){var m,_;if(!b)return null;const{providerId:E}=b,N=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},P=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!E&&b?.idToken){const Q=null===(_=null===(m=Kn(b.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(Q)return new xl(P,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!E)return null;switch(E){case"facebook.com":return new ip(P,N);case"github.com":return new ju(P,N);case"google.com":return new Vg(P,N);case"twitter.com":return new Hu(P,N,b.screenName||null);case"custom":case"anonymous":return new xl(P,null);default:return new xl(P,E,N)}}(_)}class oa{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new oa("enroll",m)}static _fromMfaPendingCredential(m){return new oa("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,E;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return oa._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(E=m.multiFactorSession)&&void 0!==E&&E.idToken)return oa._fromIdtoken(m.multiFactorSession.idToken)}return null}}class wc{constructor(m,_,E){this.session=m,this.hints=_,this.signInResolver=E}static _fromError(m,_){const E=pi(m),N=_.customData._serverResponse,P=(N.mfaInfo||[]).map(ge=>Lu._fromServerResponse(E,ge));G(N.mfaPendingCredential,E,"internal-error");const Q=oa._fromMfaPendingCredential(N.mfaPendingCredential);return new wc(Q,P,function(){var ge=(0,u.Z)(function*(Xe){const ut=yield Xe._process(E,Q);delete N.mfaInfo,delete N.mfaPendingCredential;const Mt=Object.assign(Object.assign({},N),{idToken:ut.idToken,refreshToken:ut.refreshToken});switch(_.operationType){case"signIn":const Nt=yield gi._fromIdTokenResponse(E,_.operationType,Mt);return yield E._updateCurrentUser(Nt.user),Nt;case"reauthenticate":return G(_.user,E,"internal-error"),gi._forOperation(_.user,_.operationType,Mt);default:se(E,"internal-error")}});return function(Xe){return ge.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,u.Z)(function*(){return _.signInResolver(m)})()}}class sa{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Lu._fromServerResponse(m.auth,E)))})}static _fromUser(m){return new sa(m)}getSession(){var m=this;return(0,u.Z)(function*(){return oa._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var E=this;return(0,u.Z)(function*(){const N=m,P=yield E.getSession(),Q=yield ln(E.user,N._process(E.user.auth,P,_));return yield E.user._updateTokensIfNecessary(Q),E.user.reload()})()}unenroll(m){var _=this;return(0,u.Z)(function*(){var E;const N="string"==typeof m?m:m.uid,P=yield _.user.getIdToken(),Q=yield ln(_.user,function Wi(b,m){return nn(b,"POST","/v2/accounts/mfaEnrollment:withdraw",tt(b,m))}(_.user.auth,{idToken:P,mfaEnrollmentId:N}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ge})=>ge!==N),yield _.user._updateTokensIfNecessary(Q);try{yield _.user.reload()}catch(ge){if("auth/user-token-expired"!==(null===(E=ge)||void 0===E?void 0:E.code))throw ge}})()}}const La=new WeakMap,bi="__sak";class fh{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(bi,"1"),this.storage.removeItem(bi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ba=(()=>{class b extends fh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function sp(){const b=(0,V.z$)();return xa(b)||To(b)}()&&function _l(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=qo(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const N=this.storage.getItem(E),P=this.localCache[E];N!==P&&_(E,P,N)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((ge,Xe,ut)=>{this.notifyListeners(ge,ut)});const N=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(N);if(_.newValue!==ge)null!==_.newValue?this.storage.setItem(N,_.newValue):this.storage.removeItem(N);else if(this.localCache[N]===_.newValue&&!E)return}const P=()=>{const ge=this.storage.getItem(N);!E&&this.localCache[N]===ge||this.notifyListeners(N,ge)},Q=this.storage.getItem(N);!function qf(){return(0,V.w1)()&&10===document.documentMode}()||Q===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,E){this.localCache[_]=E;const N=this.listeners[_];if(N)for(const P of Array.from(N))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,N)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:N}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var N=()=>super._set,P=this;return(0,u.Z)(function*(){yield N().call(P,_,E),P.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,N=this;return(0,u.Z)(function*(){const P=yield E().call(N,_);return N.localCache[_]=JSON.stringify(P),P})()}_remove(_){var E=()=>super._remove,N=this;return(0,u.Z)(function*(){yield E().call(N,_),delete N.localCache[_]})()}}return b.type="LOCAL",b})(),to=(()=>{class b extends fh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return b.type="SESSION",b})();let mh=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(P=>P.isListeningto(_));if(E)return E;const N=new b(_);return this.receivers.push(N),N}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,u.Z)(function*(){const N=_,{eventId:P,eventType:Q,data:ge}=N.data,Xe=E.handlersMap[Q];if(!Xe?.size)return;N.ports[0].postMessage({status:"ack",eventId:P,eventType:Q});const ut=Array.from(Xe).map(function(){var Nt=(0,u.Z)(function*(Ti){return Ti(N.origin,ge)});return function(Ti){return Nt.apply(this,arguments)}}()),Mt=yield function Ml(b){return Promise.all(b.map(function(){var m=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return m.apply(this,arguments)}}()))}(ut);N.ports[0].postMessage({status:"done",eventId:P,eventType:Q,response:Mt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Rt(b="",m=10){let _="";for(let E=0;E<m;E++)_+=Math.floor(10*Math.random());return b+_}class Cc{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,E=50){var N=this;return(0,u.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Q,ge;return new Promise((Xe,ut)=>{const Mt=Rt("",20);P.port1.start();const Nt=setTimeout(()=>{ut(new Error("unsupported_event"))},E);ge={messageChannel:P,onMessage(Ti){const Br=Ti;if(Br.data.eventId===Mt)switch(Br.data.status){case"ack":clearTimeout(Nt),Q=setTimeout(()=>{ut(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Xe(Br.data.response);break;default:clearTimeout(Nt),clearTimeout(Q),ut(new Error("invalid_response"))}}},N.handlers.add(ge),P.port1.addEventListener("message",ge.onMessage),N.target.postMessage({eventType:m,eventId:Mt,data:_},[P.port2])}).finally(()=>{ge&&N.removeMessageHandler(ge)})})()}}function wi(){return window}function Dc(){return typeof wi().WorkerGlobalScope<"u"&&"function"==typeof wi().importScripts}function Nl(){return(Nl=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Tc="firebaseLocalStorageDb",aa="firebaseLocalStorage",gh="fbase_key";class Re{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function en(b,m){return b.transaction([aa],m?"readwrite":"readonly").objectStore(aa)}function Ol(){const b=indexedDB.open(Tc,1);return new Promise((m,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const E=b.result;try{E.createObjectStore(aa,{keyPath:gh})}catch(N){_(N)}}),b.addEventListener("success",(0,u.Z)(function*(){const E=b.result;E.objectStoreNames.contains(aa)?m(E):(E.close(),yield function Ic(){const b=indexedDB.deleteDatabase(Tc);return new Re(b).toPromise()}(),m(yield Ol()))}))})}function ai(b,m,_){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,u.Z)(function*(b,m,_){const E=en(b,!0).put({[gh]:m,value:_});return new Re(E).toPromise()})).apply(this,arguments)}function Cr(){return(Cr=(0,u.Z)(function*(b,m){const _=en(b,!1).get(m),E=yield new Re(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function xc(b,m){const _=en(b,!0).delete(m);return new Re(_).toPromise()}const ca=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield Ol()),_.db})()}_withRetries(_){var E=this;return(0,u.Z)(function*(){let N=0;for(;;)try{const P=yield E._openDb();return yield _(P)}catch(P){if(N++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return Dc()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=mh._getInstance(function Wu(){return Dc()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,u.Z)(function*(N,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(N,P){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,u.Z)(function*(N,P){return["keyChanged"]});return function(N,P){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var E,N;if(_.activeServiceWorker=yield function zu(){return Nl.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Cc(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);P&&null!==(E=P[0])&&void 0!==E&&E.fulfilled&&null!==(N=P[0])&&void 0!==N&&N.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,u.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ns(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ol();return yield ai(_,bi,"1"),yield xc(_,bi),!0}catch{}return!1})()}_withPendingWrite(_){var E=this;return(0,u.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var N=this;return(0,u.Z)(function*(){return N._withPendingWrite((0,u.Z)(function*(){return yield N._withRetries(P=>ai(P,_,E)),N.localCache[_]=E,N.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,u.Z)(function*(){const N=yield E._withRetries(P=>function la(b,m){return Cr.apply(this,arguments)}(P,_));return E.localCache[_]=N,N})()}_remove(_){var E=this;return(0,u.Z)(function*(){return E._withPendingWrite((0,u.Z)(function*(){return yield E._withRetries(N=>xc(N,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const E=yield _._withRetries(Q=>{const ge=en(Q,!1).getAll();return new Re(ge).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const N=[],P=new Set;for(const{fbase_key:Q,value:ge}of E)P.add(Q),JSON.stringify(_.localCache[Q])!==JSON.stringify(ge)&&(_.notifyListeners(Q,ge),N.push(Q));for(const Q of Object.keys(_.localCache))_.localCache[Q]&&!P.has(Q)&&(_.notifyListeners(Q,null),N.push(Q));return N})()}notifyListeners(_,E){this.localCache[_]=E;const N=this.listeners[_];if(N)for(const P of Array.from(N))P(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Xo(){return(Xo=(0,u.Z)(function*(b){return(yield nn(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Va(b){return new Promise((m,_)=>{const E=document.createElement("script");E.setAttribute("src",b),E.onload=m,E.onerror=N=>{const P=Ce("internal-error");P.customData=N,_(P)},E.type="text/javascript",E.charset="UTF-8",function no(){var b,m;return null!==(m=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==m?m:document}().appendChild(E)})}function kl(b){return`__${b}${Math.floor(1e6*Math.random())}`}const ua=1e12;class _h{constructor(m){this.auth=m,this.counter=ua,this._widgets=new Map}render(m,_){const E=this.counter;return this._widgets.set(E,new qu(m,this.auth.name,_||{})),this.counter++,E}reset(m){var _;const E=m||ua;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(m){var _;return(null===(_=this._widgets.get(m||ua))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,u.Z)(function*(){var E;return null===(E=_._widgets.get(m||ua))||void 0===E||E.execute(),""})()}}class qu{constructor(m,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const N="string"==typeof m?document.getElementById(m):m;G(N,"argument-error",{appName:_}),this.container=N,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ac(b){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<b;E++)m.push(_.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ts=kl("rcb"),yh=new be(3e4,6e4);class Ua{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=wi().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return G(function vh(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(wi().grecaptcha):new Promise((E,N)=>{const P=wi().setTimeout(()=>{N(Ce(m,"network-request-failed"))},yh.get());wi()[ts]=()=>{wi().clearTimeout(P),delete wi()[ts];const ge=wi().grecaptcha;if(!ge)return void N(Ce(m,"internal-error"));const Xe=ge.render;ge.render=(ut,Mt)=>{const Nt=Xe(ut,Mt);return this.counter++,Nt},this.hostLanguage=_,E(ge)},Va(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:ts,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),N(Ce(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=wi().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $g{load(m){return(0,u.Z)(function*(){return new _h(m)})()}clearedOneInstance(){}}const cp="recaptcha",up={theme:"light",type:"image"};class Gg{constructor(m,_=Object.assign({},up),E){this.parameters=_,this.type=cp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pi(E),this.isInvisible="invisible"===this.parameters.size,G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const N="string"==typeof m?document.getElementById(m):m;G(N,this.auth,"argument-error"),this.container=N,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $g:new Ua,this.validateStartingState()}verify(){var m=this;return(0,u.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),E=m.getAssertedRecaptcha();return E.getResponse(_)||new Promise(P=>{const Q=ge=>{ge&&(m.tokenChangeListeners.delete(Q),P(ge))};m.tokenChangeListeners.add(Q),m.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof m)m(_);else if("string"==typeof m){const E=wi()[m];"function"==typeof E&&E(_)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,u.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,u.Z)(function*(){G(ri()&&!Dc(),m.auth,"internal-error"),yield function zg(){let b=null;return new Promise(m=>{"complete"!==document.readyState?(b=()=>m(),window.addEventListener("load",b)):m()}).catch(m=>{throw b&&window.removeEventListener("load",b),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Oo(b){return Xo.apply(this,arguments)}(m.auth);G(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class er{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=Zr._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Ln(){return(Ln=(0,u.Z)(function*(b,m,_){const E=pi(b),N=yield ja(E,m,(0,V.m9)(_));return new er(N,P=>Zn(E,P))})).apply(this,arguments)}function bh(){return(bh=(0,u.Z)(function*(b,m,_){const E=(0,V.m9)(b);yield si(!1,E,"phone");const N=yield ja(E.auth,m,(0,V.m9)(_));return new er(N,P=>_c(E,P))})).apply(this,arguments)}function wh(){return(wh=(0,u.Z)(function*(b,m,_){const E=(0,V.m9)(b),N=yield ja(E.auth,m,(0,V.m9)(_));return new er(N,P=>ku(E,P))})).apply(this,arguments)}function ja(b,m,_){return Pl.apply(this,arguments)}function Pl(){return Pl=(0,u.Z)(function*(b,m,_){var E;const N=yield _.verify();try{let P;if(G("string"==typeof N,b,"argument-error"),G(_.type===cp,b,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const Q=P.session;if("phoneNumber"in P)return G("enroll"===Q.type,b,"internal-error"),(yield function Al(b,m){return nn(b,"POST","/v2/accounts/mfaEnrollment:start",tt(b,m))}(b,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:N}})).phoneSessionInfo.sessionInfo;{G("signin"===Q.type,b,"internal-error");const ge=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return G(ge,b,"missing-multi-factor-info"),(yield function Pi(b,m){return nn(b,"POST","/v2/accounts/mfaSignIn:start",tt(b,m))}(b,{mfaPendingCredential:Q.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:N}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield function Kd(b,m){return Na.apply(this,arguments)}(b,{phoneNumber:P.phoneNumber,recaptchaToken:N});return Q}}finally{_._reset()}}),Pl.apply(this,arguments)}function io(){return(io=(0,u.Z)(function*(b,m){yield _i((0,V.m9)(b),m)})).apply(this,arguments)}let Ha=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=pi(_)}verifyPhoneNumber(_,E){return ja(this.auth,_,(0,V.m9)(E))}static credential(_,E){return Zr._fromVerification(_,E)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:N}=_;return E&&N?Zr._fromTokenResponse(E,N):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function ro(b,m){return m?Yt(m):(G(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class ha extends Is{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Yn(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Yn(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Yn(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Fl(b){return na(b.auth,new ha(b),b.bypassAuthState)}function Mc(b){const{auth:m,user:_}=b;return G(_,m,"internal-error"),gc(_,new ha(b),b.bypassAuthState)}function jn(b){return ur.apply(this,arguments)}function ur(){return(ur=(0,u.Z)(function*(b){const{auth:m,user:_}=b;return G(_,m,"internal-error"),_i(_,new ha(b),b.bypassAuthState)})).apply(this,arguments)}class dp{constructor(m,_,E,N,P=!1){this.auth=m,this.resolver=E,this.user=N,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,u.Z)(function*(E,N){m.pendingPromise={resolve:E,reject:N};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(E,N){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,u.Z)(function*(){const{urlResponse:E,sessionId:N,postBody:P,tenantId:Q,error:ge,type:Xe}=m;if(ge)return void _.reject(ge);const ut={auth:_.auth,requestUri:E,sessionId:N,tenantId:Q||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Xe)(ut))}catch(Mt){_.reject(Mt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Fl;case"linkViaPopup":case"linkViaRedirect":return jn;case"reauthViaPopup":case"reauthViaRedirect":return Mc;default:se(this.auth,"internal-error")}}resolve(m){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wn=new be(2e3,1e4);function Fi(){return(Fi=(0,u.Z)(function*(b,m,_){const E=pi(b);Ae(b,m,Ot);const N=ro(E,_);return new Ro(E,"signInViaPopup",m,N).executeNotNull()})).apply(this,arguments)}function $a(){return($a=(0,u.Z)(function*(b,m,_){const E=(0,V.m9)(b);Ae(E.auth,m,Ot);const N=ro(E.auth,_);return new Ro(E.auth,"reauthViaPopup",m,N,E).executeNotNull()})).apply(this,arguments)}function Zu(){return(Zu=(0,u.Z)(function*(b,m,_){const E=(0,V.m9)(b);Ae(E.auth,m,Ot);const N=ro(E.auth,_);return new Ro(E.auth,"linkViaPopup",m,N,E).executeNotNull()})).apply(this,arguments)}let Ro=(()=>{class b extends dp{constructor(_,E,N,P,Q){super(_,E,P,Q),this.provider=N,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const E=yield _.execute();return G(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,u.Z)(function*(){Ke(1===_.filter.length,"Popup operations only handle one event");const E=Rt();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(N=>{_.reject(N)}),_.resolver._isIframeWebStorageSupported(_.auth,N=>{N||_.reject(Ce(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,N;this.pollId=null!==(N=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==N&&N.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,wn.get())};_()}}return b.currentPopupAction=null,b})();const Yg="pendingRedirect",dr=new Map;class Tt extends dp{constructor(m,_,E=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,u.Z)(function*(){let E=dr.get(_.auth._key());if(!E){try{const P=(yield function Qu(b,m){return Nc.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;E=()=>Promise.resolve(P)}catch(N){E=()=>Promise.reject(N)}dr.set(_.auth._key(),E)}return _.bypassAuthState||dr.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,E=this;return(0,u.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(E,m);if("unknown"!==m.type){if(m.eventId){const N=yield E.auth._redirectUserForId(m.eventId);if(N)return E.user=N,_().call(E,m);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Nc(){return(Nc=(0,u.Z)(function*(b,m){const _=k(m),E=S(b);if(!(yield E._isAvailable()))return!1;const N="true"===(yield E._get(_));return yield E._remove(_),N})).apply(this,arguments)}function Os(b,m){return oo.apply(this,arguments)}function oo(){return(oo=(0,u.Z)(function*(b,m){return S(b)._set(k(m),"true")})).apply(this,arguments)}function I(b,m){dr.set(b._key(),m)}function S(b){return Yt(b._redirectPersistence)}function k(b){return vi(Yg,b.config.apiKey,b.name)}function $(b,m,_){return function ee(b,m,_){return pe.apply(this,arguments)}(b,m,_)}function pe(){return(pe=(0,u.Z)(function*(b,m,_){const E=pi(b);Ae(b,m,Ot);const N=ro(E,_);return yield Os(N,E),N._openRedirect(E,m,"signInViaRedirect")})).apply(this,arguments)}function Le(b,m,_){return function rt(b,m,_){return xt.apply(this,arguments)}(b,m,_)}function xt(){return(xt=(0,u.Z)(function*(b,m,_){const E=(0,V.m9)(b);Ae(E.auth,m,Ot);const N=ro(E.auth,_);yield Os(N,E.auth);const P=yield zn(E);return N._openRedirect(E.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function Ft(b,m,_){return function Pt(b,m,_){return At.apply(this,arguments)}(b,m,_)}function At(){return(At=(0,u.Z)(function*(b,m,_){const E=(0,V.m9)(b);Ae(E.auth,m,Ot);const N=ro(E.auth,_);yield si(!1,E,m.providerId),yield Os(N,E.auth);const P=yield zn(E);return N._openRedirect(E.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function li(){return(li=(0,u.Z)(function*(b,m){return yield pi(b)._initializationPromise,Ei(b,m,!1)})).apply(this,arguments)}function Ei(b,m){return ko.apply(this,arguments)}function ko(){return(ko=(0,u.Z)(function*(b,m,_=!1){const E=pi(b),N=ro(E,m),Q=yield new Tt(E,N,_).execute();return Q&&!_&&(delete Q.user._redirectEventId,yield E._persistUserIfCurrent(Q.user),yield E._setRedirectUser(null,m)),Q})).apply(this,arguments)}function zn(b){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,u.Z)(function*(b){const m=Rt(`${b.uid}:::`);return b._redirectEventId=m,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),m})).apply(this,arguments)}class tn{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(m,E)&&(_=!0,this.sendToConsumer(m,E),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Fr(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bn(b);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var E;if(m.error&&!Bn(m)){const N=(null===(E=m.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Ce(this.auth,N))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const E=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&E}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dn(m))}saveEventToCache(m){this.cachedEventUids.add(Dn(m)),this.lastProcessedEventTime=Date.now()}}function Dn(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(m=>m).join("-")}function Bn({type:b,error:m}){return"unknown"===b&&"auth/no-auth-event"===m?.code}function ti(b){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,u.Z)(function*(b,m={}){return nn(b,"GET","/v1/projects",m)})).apply(this,arguments)}const Rc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zg=/^https?/;function Fo(){return(Fo=(0,u.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:m}=yield ti(b);for(const _ of m)try{if(ks(_))return}catch{}se(b,"unauthorized-domain")})).apply(this,arguments)}function ks(b){const m=Sn(),{protocol:_,hostname:E}=new URL(m);if(b.startsWith("chrome-extension://")){const Q=new URL(b);return""===Q.hostname&&""===E?"chrome-extension:"===_&&b.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&Q.hostname===E}if(!Zg.test(_))return!1;if(Rc.test(b))return E===b;const N=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+N+"|"+N+")$","i").test(E)}const ci=new be(3e4,6e4);function so(){const b=wi().___jsl;if(b?.H)for(const m of Object.keys(b.H))if(b.H[m].r=b.H[m].r||[],b.H[m].L=b.H[m].L||[],b.H[m].r=[...b.H[m].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let Lo=null;const nD=new be(5e3,15e3),Xg="__/auth/iframe",e_="emulator/auth/iframe",Qt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Eh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iD(b){const m=b.config;G(m.authDomain,b,"auth-domain-config-required");const _=m.emulator?Ee(m,e_):`https://${b.config.authDomain}/${Xg}`,E={apiKey:m.apiKey,appName:b.name,v:le.SDK_VERSION},N=Eh.get(b.config.apiHost);N&&(E.eid=N);const P=b._getFrameworks();return P.length&&(E.fw=P.join(",")),`${_}?${(0,V.xO)(E).slice(1)}`}function t_(){return t_=(0,u.Z)(function*(b){const m=yield function Ga(b){return Lo=Lo||function Jg(b){return new Promise((m,_)=>{var E,N,P;function Q(){so(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{so(),_(Ce(b,"network-request-failed"))},timeout:ci.get()})}if(null!==(N=null===(E=wi().gapi)||void 0===E?void 0:E.iframes)&&void 0!==N&&N.Iframe)m(gapi.iframes.getContext());else{if(null===(P=wi().gapi)||void 0===P||!P.load){const ge=kl("iframefcb");return wi()[ge]=()=>{gapi.load?Q():_(Ce(b,"network-request-failed"))},Va(`https://apis.google.com/js/api.js?onload=${ge}`).catch(Xe=>_(Xe))}Q()}}).catch(m=>{throw Lo=null,m})}(b),Lo}(b),_=wi().gapi;return G(_,b,"internal-error"),m.open({where:document.body,url:iD(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qt,dontclear:!0},E=>new Promise(function(){var N=(0,u.Z)(function*(P,Q){yield E.restyle({setHideOnLeave:!1});const ge=Ce(b,"network-request-failed"),Xe=wi().setTimeout(()=>{Q(ge)},nD.get());function ut(){wi().clearTimeout(Xe),P(E)}E.ping(ut).then(ut,()=>{Q(ge)})});return function(P,Q){return N.apply(this,arguments)}}()))}),t_.apply(this,arguments)}const kc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pc{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Xu="__/auth/handler",hp="emulator/auth/handler";function Fc(b,m,_,E,N,P){G(b.config.authDomain,b,"auth-domain-config-required"),G(b.config.apiKey,b,"invalid-api-key");const Q={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:E,v:le.SDK_VERSION,eventId:N};if(m instanceof Ot){m.setDefaultLanguage(b.languageCode),Q.providerId=m.providerId||"",(0,V.xb)(m.getCustomParameters())||(Q.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Xe,ut]of Object.entries(P||{}))Q[Xe]=ut}if(m instanceof Qr){const Xe=m.getScopes().filter(ut=>""!==ut);Xe.length>0&&(Q.scopes=Xe.join(","))}b.tenantId&&(Q.tid=b.tenantId);const ge=Q;for(const Xe of Object.keys(ge))void 0===ge[Xe]&&delete ge[Xe];return`${function Lc({config:b}){return b.emulator?Ee(b,hp):`https://${b.authDomain}/${Xu}`}(b)}?${(0,V.xO)(ge).slice(1)}`}const Ch="webStorageSupport",Bl=class fp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=to,this._completeRedirectFn=Ei,this._overrideRedirectResult=I}_openPopup(m,_,E,N){var P=this;return(0,u.Z)(function*(){var Q;Ke(null===(Q=P.eventManagers[m._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const ge=Fc(m,_,E,Sn(),N);return function i_(b,m,_,E=500,N=600){const P=Math.max((window.screen.availHeight-N)/2,0).toString(),Q=Math.max((window.screen.availWidth-E)/2,0).toString();let ge="";const Xe=Object.assign(Object.assign({},kc),{width:E.toString(),height:N.toString(),top:P,left:Q}),ut=(0,V.z$)().toLowerCase();_&&(ge=Ji(ut)?"_blank":_),zo(ut)&&(m=m||"http://localhost",Xe.scrollbars="yes");const Mt=Object.entries(Xe).reduce((Ti,[Br,qc])=>`${Ti}${Br}=${qc},`,"");if(function Zs(b=(0,V.z$)()){var m;return To(b)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(ut)&&"_self"!==ge)return function ao(b,m){const _=document.createElement("a");_.href=b,_.target=m;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(m||"",ge),new Pc(null);const Nt=window.open(m||"",ge,Mt);G(Nt,b,"popup-blocked");try{Nt.focus()}catch{}return new Pc(Nt)}(m,ge,Rt())})()}_openRedirect(m,_,E,N){var P=this;return(0,u.Z)(function*(){return yield P._originValidation(m),function Gu(b){wi().location.href=b}(Fc(m,_,E,Sn(),N)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:N,promise:P}=this.eventManagers[_];return N?Promise.resolve(N):(Ke(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(m);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(m){var _=this;return(0,u.Z)(function*(){const E=yield function Ju(b){return t_.apply(this,arguments)}(m),N=new tn(m);return E.register("authEvent",P=>(G(P?.authEvent,m,"invalid-auth-event"),{status:N.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:N},_.iframes[m._key()]=E,N})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Ch,{type:Ch},N=>{var P;const Q=null===(P=N?.[0])||void 0===P?void 0:P[Ch];void 0!==Q&&_(!!Q),se(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Qg(b){return Fo.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return qo()||xa()||To()}};class On{constructor(m){this.factorId=m}_process(m,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,E);case"signin":return this._finalizeSignIn(m,_.credential);default:return ke("unexpected MultiFactorSessionType")}}}class Bi extends On{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Bi(m)}_finalizeEnroll(m,_,E){return function Ec(b,m){return nn(b,"POST","/v2/accounts/mfaEnrollment:finalize",tt(b,m))}(m,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function No(b,m){return nn(b,"POST","/v2/accounts/mfaSignIn:finalize",tt(b,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let pp=(()=>{class b{constructor(){}static assertion(_){return Bi._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var lo="@firebase/auth";class Bc{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(E=>{var N;m((null===(N=E)||void 0===N?void 0:N.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);_&&(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ns(){return window}!function yb(b){(0,le._registerComponent)(new ve.wA("auth",(m,{options:_})=>{const E=m.getProvider("app").getImmediate(),N=m.getProvider("heartbeat"),{apiKey:P,authDomain:Q}=E.options;return((ge,Xe)=>{G(P&&!P.includes(":"),"invalid-api-key",{appName:ge.name}),G(!Q?.includes(":"),"argument-error",{appName:ge.name});const ut={apiKey:P,authDomain:Q,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qs(b)},Mt=new xu(ge,Xe,ut);return function In(b,m){const _=m?.persistence||[],E=(Array.isArray(_)?_:[_]).map(Yt);m?.errorMap&&b._updateErrorMap(m.errorMap),b._initializeWithPersistence(E,m?.popupRedirectResolver)}(Mt,_),Mt})(E,N)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,E)=>{m.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new ve.wA("auth-internal",m=>{const _=pi(m.getProvider("auth").getImmediate());return new Bc(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(lo,"0.20.5",function mp(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,le.registerVersion)(lo,"0.20.5","esm2017")}("Browser");function ed(){return ed=(0,u.Z)(function*(b,m,_){var E;const{BuildInfo:N}=ns();Ke(m.sessionId,"AuthEvent did not contain a session ID");const P=yield function s_(b){return Ul.apply(this,arguments)}(m.sessionId),Q={};return To()?Q.ibi=N.packageName:lr()?Q.apn=N.packageName:se(b,"operation-not-supported-in-this-environment"),N.displayName&&(Q.appDisplayName=N.displayName),Q.sessionId=P,Fc(b,_,m.type,void 0,null!==(E=m.eventId)&&void 0!==E?E:void 0,Q)}),ed.apply(this,arguments)}function Vl(){return(Vl=(0,u.Z)(function*(b){const{BuildInfo:m}=ns(),_={};To()?_.iosBundleId=m.packageName:lr()?_.androidPackageName=m.packageName:se(b,"operation-not-supported-in-this-environment"),yield ti(b,_)})).apply(this,arguments)}function Uc(){return(Uc=(0,u.Z)(function*(b,m,_){const{cordova:E}=ns();let N=()=>{};try{yield new Promise((P,Q)=>{let ge=null;function Xe(){var Nt;P();const Ti=null===(Nt=E.plugins.browsertab)||void 0===Nt?void 0:Nt.close;"function"==typeof Ti&&Ti(),"function"==typeof _?.close&&_.close()}function ut(){ge||(ge=window.setTimeout(()=>{Q(Ce(b,"redirect-cancelled-by-user"))},2e3))}function Mt(){"visible"===document?.visibilityState&&ut()}m.addPassiveListener(Xe),document.addEventListener("resume",ut,!1),lr()&&document.addEventListener("visibilitychange",Mt,!1),N=()=>{m.removePassiveListener(Xe),document.removeEventListener("resume",ut,!1),document.removeEventListener("visibilitychange",Mt,!1),ge&&window.clearTimeout(ge)}})}finally{N()}})).apply(this,arguments)}function Ul(){return(Ul=(0,u.Z)(function*(b){const m=function Th(b){if(Ke(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const m=new ArrayBuffer(b.length),_=new Uint8Array(m);for(let E=0;E<b.length;E++)_[E]=b.charCodeAt(E);return _}(b),_=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(_)).map(N=>N.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class bb extends tn{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(m)),super.onEvent(m)}initialized(){var m=this;return(0,u.Z)(function*(){yield m.initPromise})()}}function Hc(b){return _p.apply(this,arguments)}function _p(){return(_p=(0,u.Z)(function*(b){const m=yield vp()._get(Wa(b));return m&&(yield vp()._remove(Wa(b))),m})).apply(this,arguments)}function yp(){const b=[];for(let _=0;_<20;_++){const E=Math.floor(62*Math.random());b.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(E))}return b.join("")}function vp(){return Yt(Ba)}function Wa(b){return vi("authEvent",b.config.apiKey,b.name)}function nd(b){if(!b?.includes("?"))return{};const[m,..._]=b.split("?");return(0,V.zd)(_.join("?"))}const bp=class $c{constructor(){this._redirectPersistence=to,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ei,this._overrideRedirectResult=I}_initialize(m){var _=this;return(0,u.Z)(function*(){const E=m._key();let N=_.eventManagers.get(E);return N||(N=new bb(m),_.eventManagers.set(E,N),_.attachCallbackListeners(m,N)),N})()}_openPopup(m){se(m,"operation-not-supported-in-this-environment")}_openRedirect(m,_,E,N){var P=this;return(0,u.Z)(function*(){!function vb(b){var m,_,E,N,P,Q,ge,Xe,ut,Mt;const Nt=ns();G("function"==typeof(null===(m=Nt?.universalLinks)||void 0===m?void 0:m.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(typeof(null===(_=Nt?.BuildInfo)||void 0===_?void 0:_.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(P=null===(N=null===(E=Nt?.cordova)||void 0===E?void 0:E.plugins)||void 0===N?void 0:N.browsertab)||void 0===P?void 0:P.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Xe=null===(ge=null===(Q=Nt?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Xe?void 0:Xe.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(Mt=null===(ut=Nt?.cordova)||void 0===ut?void 0:ut.InAppBrowser)||void 0===Mt?void 0:Mt.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const Q=yield P._initialize(m);yield Q.initialized(),Q.resetRedirect(),function Oc(){dr.clear()}(),yield P._originValidation(m);const ge=function wb(b,m,_=null){return{type:m,eventId:_,urlResponse:null,sessionId:yp(),postBody:null,tenantId:b.tenantId,error:Ce(b,"no-auth-event")}}(m,E,N);yield function jc(b,m){return vp()._set(Wa(b),m)}(m,ge);const Xe=yield function Dh(b,m,_){return ed.apply(this,arguments)}(m,ge,_),ut=yield function td(b){const{cordova:m}=ns();return new Promise(_=>{m.plugins.browsertab.isAvailable(E=>{let N=null;E?m.plugins.browsertab.openUrl(b):N=m.InAppBrowser.open(b,function Gd(b=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),_(N)})})}(Xe);return function o_(b,m,_){return Uc.apply(this,arguments)}(m,Q,ut)})()}_isIframeWebStorageSupported(m,_){throw new Error("Method not implemented.")}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Vc(b){return Vl.apply(this,arguments)}(m)),this.originValidationPromises[_]}attachCallbackListeners(m,_){const{universalLinks:E,handleOpenURL:N,BuildInfo:P}=ns(),Q=setTimeout((0,u.Z)(function*(){yield Hc(m),_.onEvent(Ih())}),500),ge=function(){var Mt=(0,u.Z)(function*(Nt){clearTimeout(Q);const Ti=yield Hc(m);let Br=null;Ti&&Nt?.url&&(Br=function Eb(b,m){var _,E;const N=function l_(b){const m=nd(b),_=m.link?decodeURIComponent(m.link):void 0,E=nd(_).link,N=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return nd(N).link||N||E||_||b}(m);if(N.includes("/__/auth/callback")){const P=nd(N),Q=P.firebaseError?function Cb(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(P.firebaseError)):null,ge=null===(E=null===(_=Q?.code)||void 0===_?void 0:_.split("auth/"))||void 0===E?void 0:E[1],Xe=ge?Ce(ge):null;return Xe?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:Xe,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:N,postBody:null}}return null}(Ti,Nt.url)),_.onEvent(Br||Ih())});return function(Ti){return Mt.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,ge);const Xe=N,ut=`${P.packageName.toLowerCase()}://`;ns().handleOpenURL=function(){var Mt=(0,u.Z)(function*(Nt){if(Nt.toLowerCase().startsWith(ut)&&ge({url:Nt}),"function"==typeof Xe)try{Xe(Nt)}catch(Ti){console.error(Ti)}});return function(Nt){return Mt.apply(this,arguments)}}()}};function Ih(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function id(){var b;return(null===(b=self?.location)||void 0===b?void 0:b.protocol)||null}function u_(b=(0,V.z$)()){return!("file:"!==id()&&"ionic:"!==id()&&"capacitor:"!==id()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function h_(){try{const b=self.localStorage,m=Rt();if(b)return b.setItem(m,"1"),b.removeItem(m),!function rD(b=(0,V.z$)()){return function Cp(){return(0,V.w1)()&&11===document?.documentMode}()||function d_(b=(0,V.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,V.hl)()}catch{return Dp()&&(0,V.hl)()}return!1}function Dp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gc(){return(function Ep(){return"http:"===id()||"https:"===id()}()||(0,V.ru)()||u_())&&!function Sh(){return(0,V.b$)()||(0,V.UG)()}()&&h_()&&!Dp()}function is(){return u_()&&typeof document<"u"}function Bo(){return(Bo=(0,u.Z)(function*(){return!!is()&&new Promise(b=>{const m=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),b(!0)})})})).apply(this,arguments)}const qi={LOCAL:"local",NONE:"none",SESSION:"session"},qa=G,Hl="persistence";function xh(b){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,u.Z)(function*(b){yield b._initializationPromise;const m=od(),_=vi(Hl,b.config.apiKey,b.name);m&&m.setItem(_,b._getPersistence())})).apply(this,arguments)}function od(){var b;try{return(null===(b=function rd(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const Ib=G;class Ka{constructor(){this.browserResolver=Yt(Bl),this.cordovaResolver=Yt(bp),this.underlyingResolver=null,this._redirectPersistence=to,this._completeRedirectFn=Ei,this._overrideRedirectResult=I}_initialize(m){var _=this;return(0,u.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,_,E,N){var P=this;return(0,u.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(m,_,E,N)})()}_openRedirect(m,_,E,N){var P=this;return(0,u.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(m,_,E,N)})()}_isIframeWebStorageSupported(m,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,_)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return is()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ib(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,u.Z)(function*(){if(m.underlyingResolver)return;const _=yield function zc(){return Bo.apply(this,arguments)}();m.underlyingResolver=_?m.cordovaResolver:m.browserResolver})()}}function p_(b){return b.unwrap()}function Tp(b){return Sb(b)}function Sb(b){const{_tokenResponse:m}=b instanceof V.ZR?b.customData:b;if(!m)return null;if(!(b instanceof V.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return Ha.credentialFromResult(b);const _=m.providerId;if(!_||_===ue.PASSWORD)return null;let E;switch(_){case ue.GOOGLE:E=Un;break;case ue.FACEBOOK:E=Ao;break;case ue.GITHUB:E=El;break;case ue.TWITTER:E=Zo;break;default:const{oauthIdToken:N,oauthAccessToken:P,oauthTokenSecret:Q,pendingToken:ge,nonce:Xe}=m;return P||Q||N||ge?ge?_.startsWith("saml.")?Ri._create(_,ge):Yr._fromParams({providerId:_,signInMethod:_,pendingToken:ge,idToken:N,accessToken:P}):new ta(_).credential({idToken:N,accessToken:P,rawNonce:Xe}):null}return b instanceof V.ZR?E.credentialFromError(b):E.credentialFromResult(b)}function Lr(b,m){return m.catch(_=>{throw _ instanceof V.ZR&&function g_(b,m){var _,E;const N=null===(_=m.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=m)||void 0===E?void 0:E.code))m.resolver=new Ip(b,function Kt(b,m){var _;const E=(0,V.m9)(b),N=m;return G(m.customData.operationType,E,"argument-error"),G(null===(_=N.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),wc._fromError(E,N)}(b,m));else if(N){const P=Sb(m),Q=m;P&&(Q.credential=P,Q.tenantId=N.tenantId||void 0,Q.email=N.email||void 0,Q.phoneNumber=N.phoneNumber||void 0)}}(b,_),_}).then(_=>{const N=_.user;return{operationType:_.operationType,credential:Tp(_),additionalUserInfo:dh(_),user:Xn.getOrCreate(N)}})}function Ya(b,m){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,u.Z)(function*(b,m){const _=yield m;return{verificationId:_.verificationId,confirm:E=>Lr(b,_.confirm(E))}})).apply(this,arguments)}class Ip{constructor(m,_){this.resolver=_,this.auth=function m_(b){return b.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return Lr(p_(this.auth),this.resolver.resolveSignIn(m))}}class Xn{constructor(m){this._delegate=m,this.multiFactor=function Qo(b){const m=(0,V.m9)(b);return La.has(m)||La.set(m,sa._fromUser(m)),La.get(m)}(m)}static getOrCreate(m){return Xn.USER_MAP.has(m)||Xn.USER_MAP.set(m,new Xn(m)),Xn.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var _=this;return(0,u.Z)(function*(){return Lr(_.auth,_c(_._delegate,m))})()}linkWithPhoneNumber(m,_){var E=this;return(0,u.Z)(function*(){return Ya(E.auth,function Wg(b,m,_){return bh.apply(this,arguments)}(E._delegate,m,_))})()}linkWithPopup(m){var _=this;return(0,u.Z)(function*(){return Lr(_.auth,function Kg(b,m,_){return Zu.apply(this,arguments)}(_._delegate,m,Ka))})()}linkWithRedirect(m){var _=this;return(0,u.Z)(function*(){return yield xh(pi(_.auth)),Ft(_._delegate,m,Ka)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var _=this;return(0,u.Z)(function*(){return Lr(_.auth,ku(_._delegate,m))})()}reauthenticateWithPhoneNumber(m,_){return Ya(this.auth,function qg(b,m,_){return wh.apply(this,arguments)}(this._delegate,m,_))}reauthenticateWithPopup(m){return Lr(this.auth,function Ll(b,m,_){return $a.apply(this,arguments)}(this._delegate,m,Ka))}reauthenticateWithRedirect(m){var _=this;return(0,u.Z)(function*(){return yield xh(pi(_.auth)),Le(_._delegate,m,Ka)})()}sendEmailVerification(m){return function Jn(b,m){return Mo.apply(this,arguments)}(this._delegate,m)}unlink(m){var _=this;return(0,u.Z)(function*(){return yield function As(b,m){return Ms.apply(this,arguments)}(_._delegate,m),_})()}updateEmail(m){return function ch(b,m){return uh((0,V.m9)(b),m,null)}(this._delegate,m)}updatePassword(m){return function Pa(b,m){return uh((0,V.m9)(b),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function Yu(b,m){return io.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function ah(b,m){return lh.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,_){return function sh(b,m,_){return Sl.apply(this,arguments)}(this._delegate,m,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xn.USER_MAP=new WeakMap;const Dr=G;let Za=(()=>{class b{constructor(_,E){if(this.app=_,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:N}=_.options;Dr(N,"invalid-api-key",{appName:_.name}),Dr(N,"invalid-api-key",{appName:_.name});const P=typeof window<"u"?Ka:void 0;this._delegate=E.initialize({options:{persistence:tr(N,_.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Je),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,E){!function Js(b,m,_){const E=pi(b);G(E._canInitEmulator,E,"emulator-config-failed"),G(/^https?:\/\//.test(m),E,"invalid-emulator-scheme");const N=!!_?.disableWarnings,P=Aa(m),{host:Q,port:ge}=function Au(b){const m=Aa(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(m.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",N=/^(\[[^\]]+\])(:|$)/.exec(E);if(N){const P=N[1];return{host:P,port:Kf(E.substr(P.length+1))}}{const[P,Q]=E.split(":");return{host:P,port:Kf(Q)}}}(m);E.config.emulator={url:`${P}//${Q}${null===ge?"":`:${ge}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Q,port:ge,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:N})}),N||function Mu(){function b(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,_,E)}applyActionCode(_){return function ih(b,m){return Tl.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return vc(this._delegate,_)}confirmPasswordReset(_,E){return function ep(b,m,_){return nh.apply(this,arguments)}(this._delegate,_,E)}createUserWithEmailAndPassword(_,E){var N=this;return(0,u.Z)(function*(){return Lr(N._delegate,function ia(b,m,_){return Vu.apply(this,arguments)}(N._delegate,_,E))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function Pr(b,m){return Ra.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function oh(b,m){const _=Fn.parseLink(m);return"EMAIL_SIGNIN"===_?.operation}(0,_)}getRedirectResult(){var _=this;return(0,u.Z)(function*(){Dr(Gc(),_._delegate,"operation-not-supported-in-this-environment");const E=yield function Li(b,m){return li.apply(this,arguments)}(_._delegate,Ka);return E?Lr(_._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function Db(b,m){pi(b)._logFramework(m)}(this._delegate,_)}onAuthStateChanged(_,E,N){const{next:P,error:Q,complete:ge}=sd(_,E,N);return this._delegate.onAuthStateChanged(P,Q,ge)}onIdTokenChanged(_,E,N){const{next:P,error:Q,complete:ge}=sd(_,E,N);return this._delegate.onIdTokenChanged(P,Q,ge)}sendSignInLinkToEmail(_,E){return function rh(b,m,_){return Uu.apply(this,arguments)}(this._delegate,_,E)}sendPasswordResetEmail(_,E){return function eh(b,m,_){return th.apply(this,arguments)}(this._delegate,_,E||void 0)}setPersistence(_){var E=this;return(0,u.Z)(function*(){let N;switch(function f_(b,m){qa(Object.values(qi).includes(m),b,"invalid-persistence-type"),(0,V.b$)()?qa(m!==qi.SESSION,b,"unsupported-persistence-type"):(0,V.UG)()?qa(m===qi.NONE,b,"unsupported-persistence-type"):Dp()?qa(m===qi.NONE||m===qi.LOCAL&&(0,V.hl)(),b,"unsupported-persistence-type"):qa(m===qi.NONE||h_(),b,"unsupported-persistence-type")}(E._delegate,_),_){case qi.SESSION:N=to;break;case qi.LOCAL:N=(yield Yt(ca)._isAvailable())?ca:Ba;break;case qi.NONE:N=vn;break;default:return se("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(N)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Lr(this._delegate,function Xf(b){return mc.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Lr(this._delegate,Zn(this._delegate,_))}signInWithCustomToken(_){return Lr(this._delegate,function Jd(b,m){return Fu.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,E){return Lr(this._delegate,function db(b,m,_){return Zn((0,V.m9)(b),xo.credential(m,_))}(this._delegate,_,E))}signInWithEmailLink(_,E){return Lr(this._delegate,function Fg(b,m,_){return bc.apply(this,arguments)}(this._delegate,_,E))}signInWithPhoneNumber(_,E){return Ya(this._delegate,function da(b,m,_){return Ln.apply(this,arguments)}(this._delegate,_,E))}signInWithPopup(_){var E=this;return(0,u.Z)(function*(){return Dr(Gc(),E._delegate,"operation-not-supported-in-this-environment"),Lr(E._delegate,function yt(b,m,_){return Fi.apply(this,arguments)}(E._delegate,_,Ka))})()}signInWithRedirect(_){var E=this;return(0,u.Z)(function*(){return Dr(Gc(),E._delegate,"operation-not-supported-in-this-environment"),yield xh(E._delegate),$(E._delegate,_,Ka)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Qn(b,m){return np.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=qi,b})();function sd(b,m,_){let E=b;"function"!=typeof b&&({next:E,error:m,complete:_}=b);const N=E;return{next:Q=>N(Q&&Xn.getOrCreate(Q)),error:m,complete:_}}function tr(b,m){const _=function Ah(b,m){const _=od();if(!_)return[];const E=vi(Hl,b,m);switch(_.getItem(E)){case qi.NONE:return[vn];case qi.LOCAL:return[ca,to];case qi.SESSION:return[to];default:return[]}}(b,m);if(typeof self<"u"&&!_.includes(ca)&&_.push(ca),typeof window<"u")for(const E of[Ba,to])_.includes(E)||_.push(E);return _.includes(vn)||_.push(vn),_}class $l{constructor(){this.providerId="phone",this._delegate=new Ha(p_(ie.Z.auth()))}static credential(m,_){return Ha.credential(m,_)}verifyPhoneNumber(m,_){return this._delegate.verifyPhoneNumber(m,_)}unwrap(){return this._delegate}}$l.PHONE_SIGN_IN_METHOD=Ha.PHONE_SIGN_IN_METHOD,$l.PROVIDER_ID=Ha.PROVIDER_ID;const Gl=G;class Sp{constructor(m,_,E=ie.Z.app()){var N;Gl(null===(N=E.options)||void 0===N?void 0:N.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Gg(m,_,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ad(b){b.INTERNAL.registerComponent(new ve.wA("auth-compat",m=>{const _=m.getProvider("app-compat").getImmediate(),E=m.getProvider("auth");return new Za(_,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xo,FacebookAuthProvider:Ao,GithubAuthProvider:El,GoogleAuthProvider:Un,OAuthProvider:ta,SAMLAuthProvider:Er,PhoneAuthProvider:$l,PhoneMultiFactorGenerator:pp,RecaptchaVerifier:Sp,TwitterAuthProvider:Zo,Auth:Za,AuthCredential:Is,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.2.18")}(ie.Z)},5619:(mt,Ie,F)=>{F.d(Ie,{X:()=>ie});var u=F(8645);class ie extends u.x{constructor(le){super(),this._value=le}get value(){return this.getValue()}_subscribe(le){const ce=super._subscribe(le);return!ce.closed&&le.next(this._value),ce}getValue(){const{hasError:le,thrownError:ce,_value:he}=this;if(le)throw ce;return this._throwIfClosed(),he}next(le){super.next(this._value=le)}}},5592:(mt,Ie,F)=>{F.d(Ie,{y:()=>De});var u=F(305),ie=F(7394),V=F(4850),le=F(8407),ce=F(2653),he=F(4674),ve=F(1441);let De=(()=>{class ae{constructor(Fe){Fe&&(this._subscribe=Fe)}lift(Fe){const Je=new ae;return Je.source=this,Je.operator=Fe,Je}subscribe(Fe,Je,Ue){const it=function W(ae){return ae&&ae instanceof u.Lv||function j(ae){return ae&&(0,he.m)(ae.next)&&(0,he.m)(ae.error)&&(0,he.m)(ae.complete)}(ae)&&(0,ie.Nn)(ae)}(Fe)?Fe:new u.Hp(Fe,Je,Ue);return(0,ve.x)(()=>{const{operator:Ve,source:pt}=this;it.add(Ve?Ve.call(it,pt):pt?this._subscribe(it):this._trySubscribe(it))}),it}_trySubscribe(Fe){try{return this._subscribe(Fe)}catch(Je){Fe.error(Je)}}forEach(Fe,Je){return new(Je=ue(Je))((Ue,it)=>{const Ve=new u.Hp({next:pt=>{try{Fe(pt)}catch(gt){it(gt),Ve.unsubscribe()}},error:it,complete:Ue});this.subscribe(Ve)})}_subscribe(Fe){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(Fe)}[V.L](){return this}pipe(...Fe){return(0,le.U)(Fe)(this)}toPromise(Fe){return new(Fe=ue(Fe))((Je,Ue)=>{let it;this.subscribe(Ve=>it=Ve,Ve=>Ue(Ve),()=>Je(it))})}}return ae.create=ze=>new ae(ze),ae})();function ue(ae){var ze;return null!==(ze=ae??ce.config.Promise)&&void 0!==ze?ze:Promise}},8645:(mt,Ie,F)=>{F.d(Ie,{x:()=>ve});var u=F(5592),ie=F(7394);const le=(0,F(2306).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=F(9039),he=F(1441);let ve=(()=>{class ue extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const ae=new De(this,this);return ae.operator=W,ae}_throwIfClosed(){if(this.closed)throw new le}next(W){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ae of this.currentObservers)ae.next(W)}})}error(W){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:ae}=this;for(;ae.length;)ae.shift().error(W)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:ae,isStopped:ze,observers:Fe}=this;return ae||ze?ie.Lc:(this.currentObservers=null,Fe.push(W),new ie.w0(()=>{this.currentObservers=null,(0,ce.P)(Fe,W)}))}_checkFinalizedStatuses(W){const{hasError:ae,thrownError:ze,isStopped:Fe}=this;ae?W.error(ze):Fe&&W.complete()}asObservable(){const W=new u.y;return W.source=this,W}}return ue.create=(j,W)=>new De(j,W),ue})();class De extends ve{constructor(j,W){super(),this.destination=j,this.source=W}next(j){var W,ae;null===(ae=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===ae||ae.call(W,j)}error(j){var W,ae;null===(ae=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===ae||ae.call(W,j)}complete(){var j,W;null===(W=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===W||W.call(j)}_subscribe(j){var W,ae;return null!==(ae=null===(W=this.source)||void 0===W?void 0:W.subscribe(j))&&void 0!==ae?ae:ie.Lc}}},305:(mt,Ie,F)=>{F.d(Ie,{Hp:()=>Ue,Lv:()=>ae});var u=F(4674),ie=F(7394),V=F(2653),le=F(3894),ce=F(2420);const he=ue("C",void 0,void 0);function ue(se,Ce,de){return{kind:se,value:Ce,error:de}}var j=F(7599),W=F(1441);class ae extends ie.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,ie.Nn)(Ce)&&Ce.add(this)):this.destination=gt}static create(Ce,de,Ae){return new Ue(Ce,de,Ae)}next(Ce){this.isStopped?pt(function De(se){return ue("N",se,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?pt(function ve(se){return ue("E",void 0,se)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?pt(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Fe(se,Ce){return ze.call(se,Ce)}class Je{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:de}=this;if(de.next)try{de.next(Ce)}catch(Ae){it(Ae)}}error(Ce){const{partialObserver:de}=this;if(de.error)try{de.error(Ce)}catch(Ae){it(Ae)}else it(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(de){it(de)}}}class Ue extends ae{constructor(Ce,de,Ae){let $e;if(super(),(0,u.m)(Ce)||!Ce)$e={next:Ce??void 0,error:de??void 0,complete:Ae??void 0};else{let G;this&&V.config.useDeprecatedNextContext?(G=Object.create(Ce),G.unsubscribe=()=>this.unsubscribe(),$e={next:Ce.next&&Fe(Ce.next,G),error:Ce.error&&Fe(Ce.error,G),complete:Ce.complete&&Fe(Ce.complete,G)}):$e=Ce}this.destination=new Je($e)}}function it(se){V.config.useDeprecatedSynchronousErrorHandling?(0,W.O)(se):(0,le.h)(se)}function pt(se,Ce){const{onStoppedNotification:de}=V.config;de&&j.z.setTimeout(()=>de(se,Ce))}const gt={closed:!0,next:ce.Z,error:function Ve(se){throw se},complete:ce.Z}},7394:(mt,Ie,F)=>{F.d(Ie,{Lc:()=>he,w0:()=>ce,Nn:()=>ve});var u=F(4674);const V=(0,F(2306).d)(ue=>function(W){ue(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((ae,ze)=>`${ze+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var le=F(9039);class ce{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Fe of W)Fe.remove(this);else W.remove(this);const{initialTeardown:ae}=this;if((0,u.m)(ae))try{ae()}catch(Fe){j=Fe instanceof V?Fe.errors:[Fe]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Fe of ze)try{De(Fe)}catch(Je){j=j??[],Je instanceof V?j=[...j,...Je.errors]:j.push(Je)}}if(j)throw new V(j)}}add(j){var W;if(j&&j!==this)if(this.closed)De(j);else{if(j instanceof ce){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(j)}}_hasParent(j){const{_parentage:W}=this;return W===j||Array.isArray(W)&&W.includes(j)}_addParent(j){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(j),W):W?[W,j]:j}_removeParent(j){const{_parentage:W}=this;W===j?this._parentage=null:Array.isArray(W)&&(0,le.P)(W,j)}remove(j){const{_finalizers:W}=this;W&&(0,le.P)(W,j),j instanceof ce&&j._removeParent(this)}}ce.EMPTY=(()=>{const ue=new ce;return ue.closed=!0,ue})();const he=ce.EMPTY;function ve(ue){return ue instanceof ce||ue&&"closed"in ue&&(0,u.m)(ue.remove)&&(0,u.m)(ue.add)&&(0,u.m)(ue.unsubscribe)}function De(ue){(0,u.m)(ue)?ue():ue.unsubscribe()}},2653:(mt,Ie,F)=>{F.d(Ie,{config:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(mt,Ie,F)=>{F.d(Ie,{E:()=>ie});const ie=new(F(5592).y)(ce=>ce.complete())},2459:(mt,Ie,F)=>{F.d(Ie,{D:()=>Ce});var u=F(4829),ie=F(3093),V=F(5137),he=F(5592),De=F(4971),ue=F(4674),j=F(7103);function ae(de,Ae){if(!de)throw new Error("Iterable cannot be null");return new he.y($e=>{(0,j.f)($e,Ae,()=>{const G=de[Symbol.asyncIterator]();(0,j.f)($e,Ae,()=>{G.next().then(ke=>{ke.done?$e.complete():$e.next(ke.value)})},0,!0)})})}var ze=F(8382),Fe=F(4026),Je=F(4266),Ue=F(3664),it=F(5726),Ve=F(9853),pt=F(541);function Ce(de,Ae){return Ae?function se(de,Ae){if(null!=de){if((0,ze.c)(de))return function le(de,Ae){return(0,u.Xf)(de).pipe((0,V.R)(Ae),(0,ie.Q)(Ae))}(de,Ae);if((0,Je.z)(de))return function ve(de,Ae){return new he.y($e=>{let G=0;return Ae.schedule(function(){G===de.length?$e.complete():($e.next(de[G++]),$e.closed||this.schedule())})})}(de,Ae);if((0,Fe.t)(de))return function ce(de,Ae){return(0,u.Xf)(de).pipe((0,V.R)(Ae),(0,ie.Q)(Ae))}(de,Ae);if((0,it.D)(de))return ae(de,Ae);if((0,Ue.T)(de))return function W(de,Ae){return new he.y($e=>{let G;return(0,j.f)($e,Ae,()=>{G=de[De.h](),(0,j.f)($e,Ae,()=>{let ke,Ke;try{({value:ke,done:Ke}=G.next())}catch(Vt){return void $e.error(Vt)}Ke?$e.complete():$e.next(ke)},0,!0)}),()=>(0,ue.m)(G?.return)&&G.return()})}(de,Ae);if((0,pt.L)(de))return function gt(de,Ae){return ae((0,pt.Q)(de),Ae)}(de,Ae)}throw(0,Ve.z)(de)}(de,Ae):(0,u.Xf)(de)}},4829:(mt,Ie,F)=>{F.d(Ie,{Xf:()=>ze});var u=F(7582),ie=F(4266),V=F(4026),le=F(5592),ce=F(8382),he=F(5726),ve=F(9853),De=F(3664),ue=F(541),j=F(4674),W=F(3894),ae=F(4850);function ze(se){if(se instanceof le.y)return se;if(null!=se){if((0,ce.c)(se))return function Fe(se){return new le.y(Ce=>{const de=se[ae.L]();if((0,j.m)(de.subscribe))return de.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(se);if((0,ie.z)(se))return function Je(se){return new le.y(Ce=>{for(let de=0;de<se.length&&!Ce.closed;de++)Ce.next(se[de]);Ce.complete()})}(se);if((0,V.t)(se))return function Ue(se){return new le.y(Ce=>{se.then(de=>{Ce.closed||(Ce.next(de),Ce.complete())},de=>Ce.error(de)).then(null,W.h)})}(se);if((0,he.D)(se))return Ve(se);if((0,De.T)(se))return function it(se){return new le.y(Ce=>{for(const de of se)if(Ce.next(de),Ce.closed)return;Ce.complete()})}(se);if((0,ue.L)(se))return function pt(se){return Ve((0,ue.Q)(se))}(se)}throw(0,ve.z)(se)}function Ve(se){return new le.y(Ce=>{(function gt(se,Ce){var de,Ae,$e,G;return(0,u.mG)(this,void 0,void 0,function*(){try{for(de=(0,u.KL)(se);!(Ae=yield de.next()).done;)if(Ce.next(Ae.value),Ce.closed)return}catch(ke){$e={error:ke}}finally{try{Ae&&!Ae.done&&(G=de.return)&&(yield G.call(de))}finally{if($e)throw $e.error}}Ce.complete()})})(se,Ce).catch(de=>Ce.error(de))})}},3019:(mt,Ie,F)=>{F.d(Ie,{T:()=>he});var u=F(7537),ie=F(4829),V=F(6232),le=F(9940),ce=F(2459);function he(...ve){const De=(0,le.yG)(ve),ue=(0,le._6)(ve,1/0),j=ve;return j.length?1===j.length?(0,ie.Xf)(j[0]):(0,u.J)(ue)((0,ce.D)(j,De)):V.E}},2096:(mt,Ie,F)=>{F.d(Ie,{of:()=>V});var u=F(9940),ie=F(2459);function V(...le){const ce=(0,u.yG)(le);return(0,ie.D)(le,ce)}},8251:(mt,Ie,F)=>{F.d(Ie,{x:()=>ie});var u=F(305);function ie(le,ce,he,ve,De){return new V(le,ce,he,ve,De)}class V extends u.Lv{constructor(ce,he,ve,De,ue,j){super(ce),this.onFinalize=ue,this.shouldUnsubscribe=j,this._next=he?function(W){try{he(W)}catch(ae){ce.error(ae)}}:super._next,this._error=De?function(W){try{De(W)}catch(ae){ce.error(ae)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(W){ce.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},3997:(mt,Ie,F)=>{F.d(Ie,{x:()=>le});var u=F(2737),ie=F(9360),V=F(8251);function le(he,ve=u.y){return he=he??ce,(0,ie.e)((De,ue)=>{let j,W=!0;De.subscribe((0,V.x)(ue,ae=>{const ze=ve(ae);(W||!he(j,ze))&&(W=!1,j=ze,ue.next(ae))}))})}function ce(he,ve){return he===ve}},7398:(mt,Ie,F)=>{F.d(Ie,{U:()=>V});var u=F(9360),ie=F(8251);function V(le,ce){return(0,u.e)((he,ve)=>{let De=0;he.subscribe((0,ie.x)(ve,ue=>{ve.next(le.call(ce,ue,De++))}))})}},7537:(mt,Ie,F)=>{F.d(Ie,{J:()=>V});var u=F(1631),ie=F(2737);function V(le=1/0){return(0,u.z)(ie.y,le)}},1631:(mt,Ie,F)=>{F.d(Ie,{z:()=>De});var u=F(7398),ie=F(4829),V=F(9360),le=F(7103),ce=F(8251),ve=F(4674);function De(ue,j,W=1/0){return(0,ve.m)(j)?De((ae,ze)=>(0,u.U)((Fe,Je)=>j(ae,Fe,ze,Je))((0,ie.Xf)(ue(ae,ze))),W):("number"==typeof j&&(W=j),(0,V.e)((ae,ze)=>function he(ue,j,W,ae,ze,Fe,Je,Ue){const it=[];let Ve=0,pt=0,gt=!1;const se=()=>{gt&&!it.length&&!Ve&&j.complete()},Ce=Ae=>Ve<ae?de(Ae):it.push(Ae),de=Ae=>{Fe&&j.next(Ae),Ve++;let $e=!1;(0,ie.Xf)(W(Ae,pt++)).subscribe((0,ce.x)(j,G=>{ze?.(G),Fe?Ce(G):j.next(G)},()=>{$e=!0},void 0,()=>{if($e)try{for(Ve--;it.length&&Ve<ae;){const G=it.shift();Je?(0,le.f)(j,Je,()=>de(G)):de(G)}se()}catch(G){j.error(G)}}))};return ue.subscribe((0,ce.x)(j,Ce,()=>{gt=!0,se()})),()=>{Ue?.()}}(ae,ze,ue,W)))}},3093:(mt,Ie,F)=>{F.d(Ie,{Q:()=>le});var u=F(7103),ie=F(9360),V=F(8251);function le(ce,he=0){return(0,ie.e)((ve,De)=>{ve.subscribe((0,V.x)(De,ue=>(0,u.f)(De,ce,()=>De.next(ue),he),()=>(0,u.f)(De,ce,()=>De.complete(),he),ue=>(0,u.f)(De,ce,()=>De.error(ue),he)))})}},3020:(mt,Ie,F)=>{F.d(Ie,{B:()=>ce});var u=F(4829),ie=F(8645),V=F(305),le=F(9360);function ce(ve={}){const{connector:De=(()=>new ie.x),resetOnError:ue=!0,resetOnComplete:j=!0,resetOnRefCountZero:W=!0}=ve;return ae=>{let ze,Fe,Je,Ue=0,it=!1,Ve=!1;const pt=()=>{Fe?.unsubscribe(),Fe=void 0},gt=()=>{pt(),ze=Je=void 0,it=Ve=!1},se=()=>{const Ce=ze;gt(),Ce?.unsubscribe()};return(0,le.e)((Ce,de)=>{Ue++,!Ve&&!it&&pt();const Ae=Je=Je??De();de.add(()=>{Ue--,0===Ue&&!Ve&&!it&&(Fe=he(se,W))}),Ae.subscribe(de),!ze&&Ue>0&&(ze=new V.Hp({next:$e=>Ae.next($e),error:$e=>{Ve=!0,pt(),Fe=he(gt,ue,$e),Ae.error($e)},complete:()=>{it=!0,pt(),Fe=he(gt,j),Ae.complete()}}),(0,u.Xf)(Ce).subscribe(ze))})(ae)}}function he(ve,De,...ue){if(!0===De)return void ve();if(!1===De)return;const j=new V.Hp({next:()=>{j.unsubscribe(),ve()}});return(0,u.Xf)(De(...ue)).subscribe(j)}},5137:(mt,Ie,F)=>{F.d(Ie,{R:()=>ie});var u=F(9360);function ie(V,le=0){return(0,u.e)((ce,he)=>{he.add(V.schedule(()=>ce.subscribe(he),le))})}},4664:(mt,Ie,F)=>{F.d(Ie,{w:()=>le});var u=F(4829),ie=F(9360),V=F(8251);function le(ce,he){return(0,ie.e)((ve,De)=>{let ue=null,j=0,W=!1;const ae=()=>W&&!ue&&De.complete();ve.subscribe((0,V.x)(De,ze=>{ue?.unsubscribe();let Fe=0;const Je=j++;(0,u.Xf)(ce(ze,Je)).subscribe(ue=(0,V.x)(De,Ue=>De.next(he?he(ze,Ue,Je,Fe++):Ue),()=>{ue=null,ae()}))},()=>{W=!0,ae()}))})}},9397:(mt,Ie,F)=>{F.d(Ie,{b:()=>ce});var u=F(4674),ie=F(9360),V=F(8251),le=F(2737);function ce(he,ve,De){const ue=(0,u.m)(he)||ve||De?{next:he,error:ve,complete:De}:he;return ue?(0,ie.e)((j,W)=>{var ae;null===(ae=ue.subscribe)||void 0===ae||ae.call(ue);let ze=!0;j.subscribe((0,V.x)(W,Fe=>{var Je;null===(Je=ue.next)||void 0===Je||Je.call(ue,Fe),W.next(Fe)},()=>{var Fe;ze=!1,null===(Fe=ue.complete)||void 0===Fe||Fe.call(ue),W.complete()},Fe=>{var Je;ze=!1,null===(Je=ue.error)||void 0===Je||Je.call(ue,Fe),W.error(Fe)},()=>{var Fe,Je;ze&&(null===(Fe=ue.unsubscribe)||void 0===Fe||Fe.call(ue)),null===(Je=ue.finalize)||void 0===Je||Je.call(ue)}))}):le.y}},1954:(mt,Ie,F)=>{F.d(Ie,{o:()=>ce});var u=F(7394);class ie extends u.w0{constructor(ve,De){super()}schedule(ve,De=0){return this}}const V={setInterval(he,ve,...De){const{delegate:ue}=V;return ue?.setInterval?ue.setInterval(he,ve,...De):setInterval(he,ve,...De)},clearInterval(he){const{delegate:ve}=V;return(ve?.clearInterval||clearInterval)(he)},delegate:void 0};var le=F(9039);class ce extends ie{constructor(ve,De){super(ve,De),this.scheduler=ve,this.work=De,this.pending=!1}schedule(ve,De=0){var ue;if(this.closed)return this;this.state=ve;const j=this.id,W=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(W,j,De)),this.pending=!0,this.delay=De,this.id=null!==(ue=this.id)&&void 0!==ue?ue:this.requestAsyncId(W,this.id,De),this}requestAsyncId(ve,De,ue=0){return V.setInterval(ve.flush.bind(ve,this),ue)}recycleAsyncId(ve,De,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return De;null!=De&&V.clearInterval(De)}execute(ve,De){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(ve,De);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,De){let j,ue=!1;try{this.work(ve)}catch(W){ue=!0,j=W||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:ve,scheduler:De}=this,{actions:ue}=De;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(ue,this),null!=ve&&(this.id=this.recycleAsyncId(De,ve,null)),this.delay=null,super.unsubscribe()}}}},2631:(mt,Ie,F)=>{F.d(Ie,{v:()=>V});var u=F(4552);class ie{constructor(ce,he=ie.now){this.schedulerActionCtor=ce,this.now=he}schedule(ce,he=0,ve){return new this.schedulerActionCtor(this,ce).schedule(ve,he)}}ie.now=u.l.now;class V extends ie{constructor(ce,he=ie.now){super(ce,he),this.actions=[],this._active=!1}flush(ce){const{actions:he}=this;if(this._active)return void he.push(ce);let ve;this._active=!0;do{if(ve=ce.execute(ce.state,ce.delay))break}while(ce=he.shift());if(this._active=!1,ve){for(;ce=he.shift();)ce.unsubscribe();throw ve}}}},6321:(mt,Ie,F)=>{F.d(Ie,{P:()=>le,z:()=>V});var u=F(1954);const V=new(F(2631).v)(u.o),le=V},4552:(mt,Ie,F)=>{F.d(Ie,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},2381:(mt,Ie,F)=>{F.d(Ie,{N:()=>ce});var u=F(1954),V=F(2631);const ce=new class le extends V.v{}(class ie extends u.o{constructor(De,ue){super(De,ue),this.scheduler=De,this.work=ue}schedule(De,ue=0){return ue>0?super.schedule(De,ue):(this.delay=ue,this.state=De,this.scheduler.flush(this),this)}execute(De,ue){return ue>0||this.closed?super.execute(De,ue):this._execute(De,ue)}requestAsyncId(De,ue,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(De,ue,j):(De.flush(this),0)}})},7599:(mt,Ie,F)=>{F.d(Ie,{z:()=>u});const u={setTimeout(ie,V,...le){const{delegate:ce}=u;return ce?.setTimeout?ce.setTimeout(ie,V,...le):setTimeout(ie,V,...le)},clearTimeout(ie){const{delegate:V}=u;return(V?.clearTimeout||clearTimeout)(ie)},delegate:void 0}},4971:(mt,Ie,F)=>{F.d(Ie,{h:()=>ie});const ie=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(mt,Ie,F)=>{F.d(Ie,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(mt,Ie,F)=>{F.d(Ie,{_6:()=>he,jO:()=>le,yG:()=>ce});var u=F(4674),ie=F(671);function V(ve){return ve[ve.length-1]}function le(ve){return(0,u.m)(V(ve))?ve.pop():void 0}function ce(ve){return(0,ie.K)(V(ve))?ve.pop():void 0}function he(ve,De){return"number"==typeof V(ve)?ve.pop():De}},9039:(mt,Ie,F)=>{function u(ie,V){if(ie){const le=ie.indexOf(V);0<=le&&ie.splice(le,1)}}F.d(Ie,{P:()=>u})},2306:(mt,Ie,F)=>{function u(ie){const le=ie(ce=>{Error.call(ce),ce.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}F.d(Ie,{d:()=>u})},1441:(mt,Ie,F)=>{F.d(Ie,{O:()=>le,x:()=>V});var u=F(2653);let ie=null;function V(ce){if(u.config.useDeprecatedSynchronousErrorHandling){const he=!ie;if(he&&(ie={errorThrown:!1,error:null}),ce(),he){const{errorThrown:ve,error:De}=ie;if(ie=null,ve)throw De}}else ce()}function le(ce){u.config.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=ce)}},7103:(mt,Ie,F)=>{function u(ie,V,le,ce=0,he=!1){const ve=V.schedule(function(){le(),he?ie.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(ie.add(ve),!he)return ve}F.d(Ie,{f:()=>u})},2737:(mt,Ie,F)=>{function u(ie){return ie}F.d(Ie,{y:()=>u})},4266:(mt,Ie,F)=>{F.d(Ie,{z:()=>u});const u=ie=>ie&&"number"==typeof ie.length&&"function"!=typeof ie},5726:(mt,Ie,F)=>{F.d(Ie,{D:()=>ie});var u=F(4674);function ie(V){return Symbol.asyncIterator&&(0,u.m)(V?.[Symbol.asyncIterator])}},4674:(mt,Ie,F)=>{function u(ie){return"function"==typeof ie}F.d(Ie,{m:()=>u})},8382:(mt,Ie,F)=>{F.d(Ie,{c:()=>V});var u=F(4850),ie=F(4674);function V(le){return(0,ie.m)(le[u.L])}},3664:(mt,Ie,F)=>{F.d(Ie,{T:()=>V});var u=F(4971),ie=F(4674);function V(le){return(0,ie.m)(le?.[u.h])}},4026:(mt,Ie,F)=>{F.d(Ie,{t:()=>ie});var u=F(4674);function ie(V){return(0,u.m)(V?.then)}},541:(mt,Ie,F)=>{F.d(Ie,{L:()=>le,Q:()=>V});var u=F(7582),ie=F(4674);function V(ce){return(0,u.FC)(this,arguments,function*(){const ve=ce.getReader();try{for(;;){const{value:De,done:ue}=yield(0,u.qq)(ve.read());if(ue)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(De)}}finally{ve.releaseLock()}})}function le(ce){return(0,ie.m)(ce?.getReader)}},671:(mt,Ie,F)=>{F.d(Ie,{K:()=>ie});var u=F(4674);function ie(V){return V&&(0,u.m)(V.schedule)}},9360:(mt,Ie,F)=>{F.d(Ie,{A:()=>ie,e:()=>V});var u=F(4674);function ie(le){return(0,u.m)(le?.lift)}function V(le){return ce=>{if(ie(ce))return ce.lift(function(he){try{return le(he,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(mt,Ie,F)=>{function u(){}F.d(Ie,{Z:()=>u})},8407:(mt,Ie,F)=>{F.d(Ie,{U:()=>V,z:()=>ie});var u=F(2737);function ie(...le){return V(le)}function V(le){return 0===le.length?u.y:1===le.length?le[0]:function(he){return le.reduce((ve,De)=>De(ve),he)}}},3894:(mt,Ie,F)=>{F.d(Ie,{h:()=>V});var u=F(2653),ie=F(7599);function V(le){ie.z.setTimeout(()=>{const{onUnhandledError:ce}=u.config;if(!ce)throw le;ce(le)})}},9853:(mt,Ie,F)=>{function u(ie){return new TypeError(`You provided ${null!==ie&&"object"==typeof ie?"an invalid object":`'${ie}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ie,{z:()=>u})},5879:(mt,Ie,F)=>{F.d(Ie,{$8M:()=>Fo,$WT:()=>Ss,$Z:()=>l0,AFp:()=>yM,AaK:()=>ae,CHM:()=>Ic,CRH:()=>gS,EJc:()=>hR,EpF:()=>cm,F$t:()=>V0,F4k:()=>L0,FYo:()=>$D,FiY:()=>td,Flj:()=>sh,Gf:()=>pS,GfV:()=>GD,Gpc:()=>Je,HDt:()=>kS,Hsn:()=>GT,Ikx:()=>iw,JOm:()=>od,KtG:()=>Ol,LFG:()=>We,LMc:()=>u1,Lbi:()=>RD,Lck:()=>NO,MAs:()=>nu,MGl:()=>dm,MMx:()=>KI,NdJ:()=>by,Ojb:()=>wM,OlP:()=>xn,Oqu:()=>X0,P3R:()=>dM,PXZ:()=>MR,Q6J:()=>O0,QGY:()=>vy,QbO:()=>bM,Qsj:()=>FM,R0b:()=>mo,RDi:()=>Ph,Rgc:()=>Om,SBq:()=>Bp,SDv:()=>HI,Sil:()=>PS,Suo:()=>mS,TTD:()=>dh,TgZ:()=>ef,Tol:()=>rI,VKq:()=>jy,VuI:()=>ak,W1O:()=>bS,WLB:()=>XI,X6Q:()=>BR,XFs:()=>nt,Xpm:()=>Xs,Xq5:()=>C0,Xts:()=>P_,Y36:()=>Xc,YKP:()=>MO,YNc:()=>FT,Yjl:()=>Jf,Yz7:()=>St,Z0I:()=>pn,ZZ4:()=>t1,_Bn:()=>Cw,_UZ:()=>gy,_c5:()=>tk,_uU:()=>J0,aQg:()=>r1,c2e:()=>RS,cJS:()=>Pn,cg1:()=>ow,dDg:()=>kV,dqk:()=>mn,eFA:()=>GS,eJc:()=>uf,ekj:()=>W0,eoX:()=>US,f3M:()=>Bt,g9A:()=>vM,gHi:()=>el,h0i:()=>ll,hGG:()=>eU,hij:()=>Iy,iGM:()=>Vw,ifc:()=>lr,ip1:()=>qw,jDz:()=>ZI,kEZ:()=>Hy,kL8:()=>gm,ktI:()=>y0,lG2:()=>So,lqb:()=>fd,lri:()=>TR,n5z:()=>Ci,oAB:()=>Ou,oxw:()=>HT,q4F:()=>zD,qFp:()=>aE,qLn:()=>$h,qOj:()=>ay,qZA:()=>am,rWj:()=>IR,rg0:()=>ip,s9C:()=>nf,sBO:()=>VR,s_b:()=>kw,soG:()=>Ad,tBr:()=>Vl,tb:()=>Jw,tdS:()=>xl,tp0:()=>Uc,uIk:()=>xT,vHH:()=>se,vpe:()=>_a,wAp:()=>Ii,xp6:()=>Hp,z2F:()=>mf,zSh:()=>AD,zW0:()=>TT,zs3:()=>Jc});var u=F(8645),ie=F(7394),V=F(5619),le=F(5592),ce=F(3019),he=F(2096),ve=F(3020),De=F(4664),ue=F(3997);function j(s){for(let a in s)if(s[a]===j)return a;throw Error("Could not find renamed property on target object.")}function W(s,a){for(const c in a)a.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=a[c])}function ae(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ae).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function ze(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const Fe=j({__forward_ref__:j});function Je(s){return s.__forward_ref__=Je,s.toString=function(){return ae(this())},s}function Ue(s){return it(s)?s():s}function it(s){return"function"==typeof s&&s.hasOwnProperty(Fe)&&s.__forward_ref__===Je}function Ve(s){return s&&!!s.\u0275providers}const gt="https://g.co/ng/security#xss";class se extends Error{constructor(a,c){super(function Ce(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,c)),this.code=a}}function de(s){return"string"==typeof s?s:null==s?"":String(s)}function Ke(s,a){throw new se(-201,!1)}function tt(s,a,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}function St(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Pn(s){return{providers:s.providers||[],imports:s.imports||[]}}function fi(s){return re(s,Oe)||re(s,st)}function pn(s){return null!==fi(s)}function re(s,a){return s.hasOwnProperty(a)?s[a]:null}function ye(s){return s&&(s.hasOwnProperty(et)||s.hasOwnProperty(En))?s[et]:null}const Oe=j({\u0275prov:j}),et=j({\u0275inj:j}),st=j({ngInjectableDef:j}),En=j({ngInjectorDef:j});var nt=function(s){return s[s.Default=0]="Default",s[s.Host=1]="Host",s[s.Self=2]="Self",s[s.SkipSelf=4]="SkipSelf",s[s.Optional=8]="Optional",s}(nt||{});let ft;function Dt(){return ft}function Cn(s){const a=ft;return ft=s,a}function Oi(s,a,c){const d=fi(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&nt.Optional?null:void 0!==a?a:void Ke(ae(s))}const mn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),$i={},dn="__NG_DI_FLAG__",sr="ngTempTokenPath",gl=/\n/gm,K="__source";let z;function q(s){const a=z;return z=s,a}function Be(s,a=nt.Default){if(void 0===z)throw new se(-203,!1);return null===z?Oi(s,void 0,a):z.get(s,a&nt.Optional?null:void 0,a)}function We(s,a=nt.Default){return(Dt()||Be)(Ue(s),a)}function Bt(s,a=nt.Default){return We(s,vn(a))}function vn(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function vi(s){const a=[];for(let c=0;c<s.length;c++){const d=Ue(s[c]);if(Array.isArray(d)){if(0===d.length)throw new se(900,!1);let f,g=nt.Default;for(let v=0;v<d.length;v++){const C=d[v],D=yr(C);"number"==typeof D?-1===D?f=C.token:g|=D:f=C}a.push(We(f,g))}else a.push(We(d))}return a}function Zt(s,a){return s[dn]=a,s.prototype[dn]=a,s}function yr(s){return s[dn]}function Ji(s){return{toString:s}.toString()}var Wo=function(s){return s[s.OnPush=0]="OnPush",s[s.Default=1]="Default",s}(Wo||{}),lr=function(s){return s[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",s}(lr||{});const Kr={},rn=[],To=j({\u0275cmp:j}),Gd=j({\u0275dir:j}),Zs=j({\u0275pipe:j}),qf=j({\u0275mod:j}),qo=j({\u0275fac:j}),_l=j({__NG_ELEMENT_ID__:j}),Qs=j({__NG_ENV_ID__:j});function Su(s,a,c){let d=s.length;for(;;){const f=s.indexOf(a,c);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const g=a.length;if(f+g===d||s.charCodeAt(f+g)<=32)return f}c=f+1}}function xu(s,a,c){let d=0;for(;d<c.length;){const f=c[d];if("number"==typeof f){if(0!==f)break;d++;const g=c[d++],v=c[d++],C=c[d++];s.setAttribute(a,v,C,g)}else{const g=f,v=c[++d];yl(g)?s.setProperty(a,g,v):s.setAttribute(a,g,v),d++}}return d}function pi(s){return 3===s||4===s||6===s}function yl(s){return 64===s.charCodeAt(0)}function Js(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?c=f:0===c||Aa(s,c,f,null,-1===c||2===c?a[++d]:null)}}return s}function Aa(s,a,c,d,f){let g=0,v=s.length;if(-1===a)v=-1;else for(;g<s.length;){const C=s[g++];if("number"==typeof C){if(C===a){v=-1;break}if(C>a){v=g-1;break}}}for(;g<s.length;){const C=s[g];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==f&&(s[g+1]=f));if(d===s[g+1])return void(s[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==v&&(s.splice(v,0,a),g=v+1),s.splice(g++,0,c),null!==d&&s.splice(g++,0,d),null!==f&&s.splice(g++,0,f)}const Au="ng-template";function Kf(s,a,c){let d=0,f=!0;for(;d<s.length;){let g=s[d++];if("string"==typeof g&&f){const v=s[d++];if(c&&"class"===g&&-1!==Su(v.toLowerCase(),a,0))return!0}else{if(1===g){for(;d<s.length&&"string"==typeof(g=s[d++]);)if(g.toLowerCase()===a)return!0;return!1}"number"==typeof g&&(f=!1)}}return!1}function Mu(s){return 4===s.type&&s.value!==Au}function Is(s,a,c){return a===(4!==s.type||c?s.value:Au)}function Gi(s,a,c){let d=4;const f=s.attrs||[],g=function Io(s){for(let a=0;a<s.length;a++)if(pi(s[a]))return a;return s.length}(f);let v=!1;for(let C=0;C<a.length;C++){const D=a[C];if("number"!=typeof D){if(!v)if(4&d){if(d=2|1&d,""!==D&&!Is(s,D,c)||""===D&&1===a.length){if(vr(d))return!1;v=!0}}else{const x=8&d?D:a[++C];if(8&d&&null!==s.attrs){if(!Kf(s.attrs,x,c)){if(vr(d))return!1;v=!0}continue}const U=zd(8&d?"class":D,f,Mu(s),c);if(-1===U){if(vr(d))return!1;v=!0;continue}if(""!==x){let X;X=U>g?"":f[U+1].toLowerCase();const oe=8&d?X:null;if(oe&&-1!==Su(oe,x,0)||2&d&&x!==X){if(vr(d))return!1;v=!0}}}}else{if(!v&&!vr(d)&&!vr(D))return!1;if(v&&vr(D))continue;v=!1,d=D|1&d}}return vr(d)||v}function vr(s){return 0==(1&s)}function zd(s,a,c,d){if(null===a)return-1;let f=0;if(d||!c){let g=!1;for(;f<a.length;){const v=a[f];if(v===s)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function fc(s,a){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,s)}function vl(s,a,c=!1){for(let d=0;d<a.length;d++)if(Gi(s,a[d],c))return!0;return!1}function Yf(s,a){e:for(let c=0;c<a.length;c++){const d=a[c];if(s.length===d.length){for(let f=0;f<s.length;f++)if(s[f]!==d[f])continue e;return!0}}return!1}function Or(s,a){return s?":not("+a.trim()+")":a}function bl(s){let a=s[0],c=1,d=2,f="",g=!1;for(;c<s.length;){let v=s[c];if("string"==typeof v)if(2&d){const C=s[++c];f+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!vr(v)&&(a+=Or(g,f),f=""),d=v,g=g||!vr(d);c++}return""!==f&&(a+=Or(g,f)),a}function Xs(s){return Ji(()=>{const a=Yr(s),c={...a,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===Wo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||lr.Emulated,styles:s.styles||rn,_:null,schemas:s.schemas||null,tView:null,id:""};Kd(c);const d=s.dependencies;return c.directiveDefs=Na(d,!1),c.pipeDefs=Na(d,!0),c.id=function Ko(s){let a=0;const c=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const f of c)a=Math.imul(31,a)+f.charCodeAt(0)<<0;return a+=2147483648,"c"+a}(c),c})}function Pg(s){return Ht(s)||oi(s)}function Zf(s){return null!==s}function Ou(s){return Ji(()=>({type:s.type,bootstrap:s.bootstrap||rn,declarations:s.declarations||rn,imports:s.imports||rn,exports:s.exports||rn,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Qf(s,a){if(null==s)return Kr;const c={};for(const d in s)if(s.hasOwnProperty(d)){let f=s[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),c[f]=d,a&&(a[f]=g)}return c}function So(s){return Ji(()=>{const a=Yr(s);return Kd(a),a})}function Jf(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ht(s){return s[To]||null}function oi(s){return s[Gd]||null}function Yn(s){return s[Zs]||null}function Ss(s){const a=Ht(s)||oi(s)||Yn(s);return null!==a&&a.standalone}function br(s,a){const c=s[qf]||null;if(!c&&!0===a)throw new Error(`Type ${ae(s)} does not have '\u0275mod' property.`);return c}function Yr(s){const a={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputTransforms:null,inputConfig:s.inputs||Kr,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||rn,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Qf(s.inputs,a),outputs:Qf(s.outputs)}}function Kd(s){s.features?.forEach(a=>a(s))}function Na(s,a){if(!s)return null;const c=a?Yn:Pg;return()=>("function"==typeof s?s():s).map(d=>c(d)).filter(Zf)}const mi=0,lt=1,Ut=2,Gn=3,wr=4,Zr=5,Xi=6,xs=7,Fn=8,ea=9,xo=10,Ot=11,Qr=12,ta=13,Ao=14,Un=15,El=16,Cl=17,Ri=18,Yo=19,Er=20,Zo=21,Rr=22,Oa=23,gi=24,on=25,mc=1,Dl=2,Jr=7,As=9,_i=11;function si(s){return Array.isArray(s)&&"object"==typeof s[mc]}function ki(s){return Array.isArray(s)&&!0===s[mc]}function gc(s){return 0!=(4&s.flags)}function Xr(s){return s.componentOffset>-1}function na(s){return 1==(1&s.flags)}function zi(s){return!!s.template}function Zn(s){return 0!=(512&s[Ut])}function ia(s,a){return s.hasOwnProperty(qo)?s[qo]:null}const Vu=Symbol("SIGNAL");function rh(s,a,c={}){return a[Vu]=s,Object.assign(a,c)}function Uu(s,a){return(null===s||"object"!=typeof s)&&Object.is(s,a)}let Fg=mn.WeakRef??class oh{constructor(a){this.ref=a}deref(){return this.ref}},Il=0,Pr=null,Ra=!1;function Jn(s){const a=Pr;return Pr=s,a}class Mo{constructor(){this.id=Il++,this.ref=function bc(s){return new Fg(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[a,c]of this.producers){const d=c.producerNode.deref();if(null!=d&&c.atTrackingVersion===this.trackingVersion){if(d.producerPollStatus(c.seenValueVersion))return!0}else this.producers.delete(a),d?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const a=Ra;Ra=!0;try{for(const[c,d]of this.consumers){const f=d.consumerNode.deref();null!=f&&f.trackingVersion===d.atTrackingVersion?f.onConsumerDependencyMayHaveChanged():(this.consumers.delete(c),f?.producers.delete(this.id))}}finally{Ra=a}}producerAccessed(){if(Ra)throw new Error("");if(null===Pr)return;let a=Pr.producers.get(this.id);void 0===a?(a={consumerNode:Pr.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Pr.trackingVersion},Pr.producers.set(this.id,a),this.consumers.set(Pr.id,a)):(a.seenValueVersion=this.valueVersion,a.atTrackingVersion=Pr.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Pr?.consumerAllowSignalWrites}producerPollStatus(a){return this.valueVersion!==a||(this.onProducerUpdateValueVersion(),this.valueVersion!==a)}}function sh(s,a){const c=new ah(s,a?.equal??Uu);return rh(c,c.signal.bind(c))}const Sl=Symbol("UNSET"),ka=Symbol("COMPUTING"),ra=Symbol("ERRORED");class ah extends Mo{constructor(a,c){super(),this.computation=a,this.equal=c,this.value=Sl,this.error=null,this.stale=!0,this.consumerAllowSignalWrites=!1}onConsumerDependencyMayHaveChanged(){this.stale||(this.stale=!0,this.producerMayHaveChanged())}onProducerUpdateValueVersion(){if(this.stale){if(this.value!==Sl&&this.value!==ka&&!this.consumerPollProducersForChange())return void(this.stale=!1);this.recomputeValue()}}recomputeValue(){if(this.value===ka)throw new Error("Detected cycle in computations.");const a=this.value;this.value=ka,this.trackingVersion++;const c=Jn(this);let d;try{d=this.computation()}catch(f){d=ra,this.error=f}finally{Jn(c)}this.stale=!1,a!==Sl&&a!==ra&&d!==ra&&this.equal(a,d)?this.value=a:(this.value=d,this.valueVersion++)}signal(){if(this.onProducerUpdateValueVersion(),this.producerAccessed(),this.value===ra)throw this.error;return this.value}}let ch=function lh(){throw new Error};function Pa(){ch()}class Lg extends Mo{constructor(a,c){super(),this.value=a,this.equal=c,this.consumerAllowSignalWrites=!1}onConsumerDependencyMayHaveChanged(){}onProducerUpdateValueVersion(){}set(a){this.producerUpdatesAllowed||Pa(),this.equal(this.value,a)||(this.value=a,this.valueVersion++,this.producerMayHaveChanged())}update(a){this.producerUpdatesAllowed||Pa(),this.set(a(this.value))}mutate(a){this.producerUpdatesAllowed||Pa(),a(this.value),this.valueVersion++,this.producerMayHaveChanged()}asReadonly(){return void 0===this.readonlySignal&&(this.readonlySignal=rh(this,()=>this.signal())),this.readonlySignal}signal(){return this.producerAccessed(),this.value}}function xl(s,a){const c=new Lg(s,a?.equal??Uu);return rh(c,c.signal.bind(c),{set:c.set.bind(c),update:c.update.bind(c),mutate:c.mutate.bind(c),asReadonly:c.asReadonly.bind(c)})}function ip(s){const a=Jn(null);try{return s()}finally{Jn(a)}}const ju=()=>{};class Vg extends Mo{constructor(a,c,d){super(),this.watch=a,this.schedule=c,this.dirty=!1,this.cleanupFn=ju,this.registerOnCleanup=f=>{this.cleanupFn=f},this.consumerAllowSignalWrites=d}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const a=Jn(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=ju,this.watch(this.registerOnCleanup)}finally{Jn(a)}}cleanup(){this.cleanupFn()}}class Hu{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function dh(){return Ug}function Ug(s){return s.type.prototype.ngOnChanges&&(s.setInput=rp),fb}function fb(){const s=mb(this),a=s?.current;if(a){const c=s.previous;if(c===Kr)s.previous=a;else for(let d in a)c[d]=a[d];s.current=null,this.ngOnChanges(a)}}function rp(s,a,c,d){const f=this.declaredInputs[c],g=mb(s)||function hh(s,a){return s[pb]=a}(s,{previous:Kr,current:null}),v=g.current||(g.current={}),C=g.previous,D=C[f];v[f]=new Hu(D&&D.currentValue,a,C===Kr),s[d]=a}dh.ngInherit=!0;const pb="__ngSimpleChanges__";function mb(s){return s[pb]||null}const eo=function(s,a,c){};function Kt(s){for(;Array.isArray(s);)s=s[mi];return s}function Ec(s,a){return Kt(a[s])}function Wi(s,a){return Kt(a[s.index])}function La(s,a){return s.data[a]}function bi(s,a){const c=a[s];return si(c)?c:c[mi]}function Jo(s,a){return null==a?null:s[a]}function cr(s){s[Cl]=0}function Ba(s){1024&s[Ut]||(s[Ut]|=1024,to(s,1))}function ph(s){1024&s[Ut]&&(s[Ut]&=-1025,to(s,-1))}function to(s,a){let c=s[Gn];if(null===c)return;c[Zr]+=a;let d=c;for(c=c[Gn];null!==c&&(1===a&&1===d[Zr]||-1===a&&0===d[Zr]);)c[Zr]+=a,d=c,c=c[Gn]}function Ml(s,a){if(256==(256&s[Ut]))throw new se(911,!1);null===s[Zo]&&(s[Zo]=[]),s[Zo].push(a)}const Rt={lFrame:vh(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Nl(){return Rt.bindingsEnabled}function Ns(){return null!==Rt.skipHydrationRootTNode}function Re(){return Rt.lFrame.lView}function en(){return Rt.lFrame.tView}function Ic(s){return Rt.lFrame.contextLView=s,s[Fn]}function Ol(s){return Rt.lFrame.contextLView=null,s}function ai(){let s=Sc();for(;null!==s&&64===s.type;)s=s.parent;return s}function Sc(){return Rt.lFrame.currentTNode}function la(){const s=Rt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}function Cr(s,a){const c=Rt.lFrame;c.currentTNode=s,c.isParent=a}function xc(){return Rt.lFrame.isParent}function Rl(){Rt.lFrame.isParent=!1}function Pi(){const s=Rt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Xo(){return Rt.lFrame.bindingIndex++}function no(s){const a=Rt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,c}function kl(s){Rt.lFrame.inI18n=s}function lp(s,a){const c=Rt.lFrame;c.bindingIndex=c.bindingRootIndex=s,ua(a)}function ua(s){Rt.lFrame.currentDirectiveIndex=s}function qu(){return Rt.lFrame.currentQueryIndex}function Ac(s){Rt.lFrame.currentQueryIndex=s}function ts(s){const a=s[lt];return 2===a.type?a.declTNode:1===a.type?s[Xi]:null}function yh(s,a,c){if(c&nt.SkipSelf){let f=a,g=s;for(;!(f=f.parent,null!==f||c&nt.Host||(f=ts(g),null===f||(g=g[Ao],10&f.type))););if(null===f)return!1;a=f,s=g}const d=Rt.lFrame=Ua();return d.currentTNode=a,d.lView=s,!0}function Ku(s){const a=Ua(),c=s[lt];Rt.lFrame=a,a.currentTNode=c.firstChild,a.lView=s,a.tView=c,a.contextLView=s,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Ua(){const s=Rt.lFrame,a=null===s?null:s.child;return null===a?vh(s):a}function vh(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function $g(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const cp=$g;function up(){const s=$g();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function er(){return Rt.lFrame.selectedIndex}function da(s){Rt.lFrame.selectedIndex=s}function Ln(){const s=Rt.lFrame;return La(s.tView,s.selectedIndex)}let Pl=!0;function Yu(){return Pl}function io(s){Pl=s}function ro(s,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const g=s.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:x,ngOnDestroy:R}=g;v&&(s.contentHooks??=[]).push(-c,v),C&&((s.contentHooks??=[]).push(c,C),(s.contentCheckHooks??=[]).push(c,C)),D&&(s.viewHooks??=[]).push(-c,D),x&&((s.viewHooks??=[]).push(c,x),(s.viewCheckHooks??=[]).push(c,x)),null!=R&&(s.destroyHooks??=[]).push(c,R)}}function ha(s,a,c){jn(s,a,3,c)}function Fl(s,a,c,d){(3&s[Ut])===c&&jn(s,a,c,d)}function Mc(s,a){let c=s[Ut];(3&c)===a&&(c&=8191,c+=1,s[Ut]=c)}function jn(s,a,c,d){const g=d??-1,v=a.length-1;let C=0;for(let D=void 0!==d?65535&s[Cl]:0;D<v;D++)if("number"==typeof a[D+1]){if(C=a[D],null!=d&&C>=d)break}else a[D]<0&&(s[Cl]+=65536),(C<g||-1==g)&&(dp(s,c,a,D),s[Cl]=(4294901760&s[Cl])+D+2),D++}function ur(s,a){eo(4,s,a);const c=Jn(null);try{a.call(s)}finally{Jn(c),eo(5,s,a)}}function dp(s,a,c,d){const f=c[d]<0,g=c[d+1],C=s[f?-c[d]:c[d]];f?s[Ut]>>13<s[Cl]>>16&&(3&s[Ut])===a&&(s[Ut]+=8192,ur(C,g)):ur(C,g)}const wn=-1;class yt{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function Tt(s){return s!==wn}function Qu(s){return 32767&s}function Os(s,a){let c=function Nc(s){return s>>16}(s),d=a;for(;c>0;)d=d[Ao],c--;return d}let oo=!0;function Oc(s){const a=oo;return oo=s,a}const S=255,k=5;let $=0;const ee={};function Le(s,a){const c=xt(s,a);if(-1!==c)return c;const d=a[lt];d.firstCreatePass&&(s.injectorIndex=a.length,rt(d.data,s),rt(a,null),rt(d.blueprint,null));const f=Ft(s,a),g=s.injectorIndex;if(Tt(f)){const v=Qu(f),C=Os(f,a),D=C[lt].data;for(let x=0;x<8;x++)a[g+x]=C[v+x]|D[v+x]}return a[g+8]=f,g}function rt(s,a){s.push(0,0,0,0,0,0,0,0,a)}function xt(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function Ft(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,f=a;for(;null!==f;){if(d=Qg(f),null===d)return wn;if(c++,f=f[Ao],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return wn}function Pt(s,a,c){!function pe(s,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(_l)&&(d=c[_l]),null==d&&(d=c[_l]=$++);const f=d&S;a.data[s+(f>>k)]|=1<<f}(s,a,c)}function Li(s,a,c){if(c&nt.Optional||void 0!==s)return s;Ke()}function li(s,a,c,d){if(c&nt.Optional&&void 0===d&&(d=null),!(c&(nt.Self|nt.Host))){const f=s[ea],g=Cn(void 0);try{return f?f.get(a,d,c&nt.Optional):Oi(a,d,c&nt.Optional)}finally{Cn(g)}}return Li(d,0,c)}function Ei(s,a,c,d=nt.Default,f){if(null!==s){if(2048&a[Ut]&&!(d&nt.Self)){const v=function Zg(s,a,c,d,f){let g=s,v=a;for(;null!==g&&null!==v&&2048&v[Ut]&&!(512&v[Ut]);){const C=ko(g,v,c,d|nt.Self,ee);if(C!==ee)return C;let D=g.parent;if(!D){const x=v[Er];if(x){const R=x.get(c,ee,d);if(R!==ee)return R}D=Qg(v),v=v[Ao]}g=D}return f}(s,a,c,d,ee);if(v!==ee)return v}const g=ko(s,a,c,d,ee);if(g!==ee)return g}return li(a,c,d,f)}function ko(s,a,c,d,f){const g=function tn(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(_l)?s[_l]:void 0;return"number"==typeof a?a>=0?a&S:ti:a}(c);if("function"==typeof g){if(!yh(a,s,d))return d&nt.Host?Li(f,0,d):li(a,c,d,f);try{const v=g(d);if(null!=v||d&nt.Optional)return v;Ke()}finally{cp()}}else if("number"==typeof g){let v=null,C=xt(s,a),D=wn,x=d&nt.Host?a[Un][Xi]:null;for((-1===C||d&nt.SkipSelf)&&(D=-1===C?Ft(s,a):a[C+8],D!==wn&&Bn(d,!1)?(v=a[lt],C=Qu(D),a=Os(D,a)):C=-1);-1!==C;){const R=a[lt];if(Dn(g,C,R.data)){const U=zn(C,a,c,v,d,x);if(U!==ee)return U}D=a[C+8],D!==wn&&Bn(d,a[lt].data[C+8]===x)&&Dn(g,C,a)?(v=R,C=Qu(D),a=Os(D,a)):C=-1}}return f}function zn(s,a,c,d,f,g){const v=a[lt],C=v.data[s+8],R=Rs(C,v,c,null==d?Xr(C)&&oo:d!=v&&0!=(3&C.type),f&nt.Host&&g===C);return null!==R?Po(a,v,R,C):ee}function Rs(s,a,c,d,f){const g=s.providerIndexes,v=a.data,C=1048575&g,D=s.directiveStart,R=g>>20,X=f?C+R:s.directiveEnd;for(let oe=d?C:C+R;oe<X;oe++){const Me=v[oe];if(oe<D&&c===Me||oe>=D&&Me.type===c)return oe}if(f){const oe=v[D];if(oe&&zi(oe)&&oe.type===c)return D}return null}function Po(s,a,c,d){let f=s[c];const g=a.data;if(function Fi(s){return s instanceof yt}(f)){const v=f;v.resolving&&function $e(s,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new se(-200,`Circular dependency in DI detected for ${s}${c}`)}(function Ae(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():de(s)}(g[c]));const C=Oc(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Cn(v.injectImpl):null;yh(s,d,nt.Default);try{f=s[c]=v.factory(void 0,g,s,d),a.firstCreatePass&&c>=d.directiveStart&&function Ha(s,a,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(d){const v=Ug(a);(c.preOrderHooks??=[]).push(s,v),(c.preOrderCheckHooks??=[]).push(s,v)}f&&(c.preOrderHooks??=[]).push(0-s,f),g&&((c.preOrderHooks??=[]).push(s,g),(c.preOrderCheckHooks??=[]).push(s,g))}(c,g[c],a)}finally{null!==D&&Cn(D),Oc(C),v.resolving=!1,cp()}}return f}function Dn(s,a,c){return!!(c[a+(s>>k)]&1<<s)}function Bn(s,a){return!(s&nt.Self||s&nt.Host&&a)}class Fr{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return Ei(this._tNode,this._lView,a,vn(d),c)}}function ti(){return new Fr(ai(),Re())}function Ci(s){return Ji(()=>{const a=s.prototype.constructor,c=a[qo]||Rc(a),d=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==d;){const g=f[qo]||Rc(f);if(g&&g!==c)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Rc(s){return it(s)?()=>{const a=Rc(Ue(s));return a&&a()}:ia(s)}function Qg(s){const a=s[lt],c=a.type;return 2===c?a.declTNode:1===c?s[Xi]:null}function Fo(s){return function At(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const c=s.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const g=c[f];if(pi(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(g===a)return c[f+1];f+=2}}}return null}(ai(),s)}const ci="__parameters__";function Ga(s,a,c){return Ji(()=>{const d=function Lo(s){return function(...c){if(s){const d=s(...c);for(const f in d)this[f]=d[f]}}}(a);function f(...g){if(this instanceof f)return d.apply(this,g),this;const v=new f(...g);return C.annotation=v,C;function C(D,x,R){const U=D.hasOwnProperty(ci)?D[ci]:Object.defineProperty(D,ci,{value:[]})[ci];for(;U.length<=R;)U.push(null);return(U[R]=U[R]||[]).push(v),D}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}function Xu(s,a){s.forEach(c=>Array.isArray(c)?Xu(c,a):a(c))}function hp(s,a,c){a>=s.length?s.push(c):s.splice(a,0,c)}function Fc(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Lc(s,a){const c=[];for(let d=0;d<s;d++)c.push(a);return c}function Bi(s,a,c){let d=lo(s,a);return d>=0?s[1|d]=c:(d=~d,function Bl(s,a,c,d){let f=s.length;if(f==a)s.push(c,d);else if(1===f)s.push(d,s[0]),s[0]=c;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=c,s[a+1]=d}}(s,d,a,c)),d}function pp(s,a){const c=lo(s,a);if(c>=0)return s[1|c]}function lo(s,a){return function Bc(s,a,c){let d=0,f=s.length>>c;for(;f!==d;){const g=d+(f-d>>1),v=s[g<<c];if(a===v)return g<<c;v>a?f=g:d=g+1}return~(f<<c)}(s,a,1)}const Vl=Zt(Ga("Inject",s=>({token:s})),-1),td=Zt(Ga("Optional"),8),Uc=Zt(Ga("SkipSelf"),4);function Wc(s){return 128==(128&s.flags)}var od=function(s){return s[s.Important=1]="Important",s[s.DashCase=2]="DashCase",s}(od||{});const Tp=new Map;let g_=0;const sd="__ngContext__";function tr(s,a){si(a)?(s[sd]=a[Yo],function Lr(s){Tp.set(s[Yo],s)}(a)):s[sd]=a}let Q;function ge(s,a){return Q(s,a)}function ut(s){const a=s[Gn];return ki(a)?a[Gn]:a}function Ti(s){return qc(s[Qr])}function Br(s){return qc(s[wr])}function qc(s){for(;null!==s&&!ki(s);)s=s[wr];return s}function Qa(s,a,c,d,f){if(null!=d){let g,v=!1;ki(d)?g=d:si(d)&&(v=!0,d=d[mi]);const C=Kt(d);0===s&&null!==c?null==f?kb(a,c,C):cd(a,c,C,f||null,!0):1===s&&null!==c?cd(a,c,C,f||null,!0):2===s?function E_(s,a,c){const d=Wl(s,a);d&&function UA(s,a,c,d){s.removeChild(a,c,d)}(s,d,a,c)}(a,C,v):3===s&&a.destroyNode(C),null!=g&&function HA(s,a,c,d,f){const g=c[Jr];g!==Kt(c)&&Qa(a,s,d,g,f);for(let C=_i;C<c.length;C++){const D=c[C];Rh(D[lt],D,s,a,d,g)}}(a,s,g,c,f)}}function zl(s,a){return s.createText(a)}function Kc(s,a,c){return s.createElement(a,c)}function v_(s,a){const c=s[As],d=c.indexOf(a);ph(a),c.splice(d,1)}function Rb(s,a){if(s.length<=_i)return;const c=_i+a,d=s[c];if(d){const f=d[El];null!==f&&f!==s&&v_(f,d),a>0&&(s[c-1][wr]=d[wr]);const g=Fc(s,_i+a);!function Ab(s,a){Rh(s,a,a[Ot],2,null,null),a[mi]=null,a[Xi]=null}(d[lt],d);const v=g[Ri];null!==v&&v.detachView(g[lt]),d[Gn]=null,d[wr]=null,d[Ut]&=-129}return d}function b_(s,a){if(!(256&a[Ut])){const c=a[Ot];a[Oa]?.destroy(),a[gi]?.destroy(),c.destroyNode&&Rh(s,a,c,3,null,null),function Nb(s){let a=s[Qr];if(!a)return rs(s[lt],s);for(;a;){let c=null;if(si(a))c=a[Qr];else{const d=a[_i];d&&(c=d)}if(!c){for(;a&&!a[wr]&&a!==s;)si(a)&&rs(a[lt],a),a=a[Gn];null===a&&(a=s),si(a)&&rs(a[lt],a),c=a&&a[wr]}a=c}}(a)}}function rs(s,a){if(!(256&a[Ut])){a[Ut]&=-129,a[Ut]|=256,function xp(s,a){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const f=a[c[d]];if(!(f instanceof yt)){const g=c[d+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const C=f[g[v]],D=g[v+1];eo(4,C,D);try{D.call(C)}finally{eo(5,C,D)}}else{eo(4,f,g);try{g.call(f)}finally{eo(5,f,g)}}}}}(s,a),function VA(s,a){const c=s.cleanup,d=a[xs];if(null!==c)for(let g=0;g<c.length-1;g+=2)if("string"==typeof c[g]){const v=c[g+3];v>=0?d[v]():d[-v].unsubscribe(),g+=2}else c[g].call(d[c[g+1]]);null!==d&&(a[xs]=null);const f=a[Zo];if(null!==f){a[Zo]=null;for(let g=0;g<f.length;g++)(0,f[g])()}}(s,a),1===a[lt].type&&a[Ot].destroy();const c=a[El];if(null!==c&&ki(a[Gn])){c!==a[Gn]&&v_(c,a);const d=a[Ri];null!==d&&d.detachView(s)}!function Mh(s){Tp.delete(s[Yo])}(a)}}function oD(s,a,c){return sD(s,a.parent,c)}function sD(s,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[mi];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:g}=s.data[d.directiveStart+f];if(g===lr.None||g===lr.Emulated)return null}return Wi(d,c)}}function cd(s,a,c,d,f){s.insertBefore(a,c,d,f)}function kb(s,a,c){s.appendChild(a,c)}function Ap(s,a,c,d,f){null!==d?cd(s,a,c,d,f):kb(s,a,c)}function Wl(s,a){return s.parentNode(a)}function aD(s,a,c){return Oh(s,a,c)}function lD(s,a,c){return 40&s.type?Wi(s,c):null}let ud,D_,I_,S_,Oh=lD;function cD(s,a){Oh=s,ud=a}function w_(s,a,c,d){const f=oD(s,d,a),g=a[Ot],C=aD(d.parent||a[Xi],d,a);if(null!=f)if(Array.isArray(c))for(let D=0;D<c.length;D++)Ap(g,f,c[D],C,!1);else Ap(g,f,c,C,!1);void 0!==ud&&ud(g,d,a,c,f)}function Np(s,a){if(null!==a){const c=a.type;if(3&c)return Wi(a,s);if(4&c)return Pb(-1,s[a.index]);if(8&c){const d=a.child;if(null!==d)return Np(s,d);{const f=s[a.index];return ki(f)?Pb(-1,f):Kt(f)}}if(32&c)return ge(a,s)()||Kt(s[a.index]);{const d=uD(s,a);return null!==d?Array.isArray(d)?d[0]:Np(ut(s[Un]),d):Np(s,a.next)}}return null}function uD(s,a){return null!==a?s[Un][Xi].projection[a.projection]:null}function Pb(s,a){const c=_i+s+1;if(c<a.length){const d=a[c],f=d[lt].firstChild;if(null!==f)return Np(d,f)}return a[Jr]}function Fb(s,a,c,d,f,g,v){for(;null!=c;){const C=d[c.index],D=c.type;if(v&&0===a&&(C&&tr(Kt(C),d),c.flags|=2),32!=(32&c.flags))if(8&D)Fb(s,a,c.child,d,f,g,!1),Qa(a,s,f,C,g);else if(32&D){const x=ge(c,d);let R;for(;R=x();)Qa(a,s,f,R,g);Qa(a,s,f,C,g)}else 16&D?dd(s,a,d,c,f,g):Qa(a,s,f,C,g);c=v?c.projectionNext:c.next}}function Rh(s,a,c,d,f,g){Fb(c,d,s.firstChild,a,f,g,!1)}function dd(s,a,c,d,f,g){const v=c[Un],D=v[Xi].projection[d.projection];if(Array.isArray(D))for(let x=0;x<D.length;x++)Qa(a,s,f,D[x],g);else{let x=D;const R=v[Gn];Wc(d)&&(x.flags|=128),Fb(s,a,x,R,f,g,!0)}}function dD(s,a,c){""===c?s.removeAttribute(a,"class"):s.setAttribute(a,"class",c)}function hD(s,a,c){const{mergedAttrs:d,classes:f,styles:g}=c;null!==d&&xu(s,a,d),null!==f&&dD(s,a,f),null!==g&&function GA(s,a,c){s.setAttribute(a,"style",c)}(s,a,g)}function kh(s){return function Lb(){if(void 0===D_&&(D_=null,mn.trustedTypes))try{D_=mn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return D_}()?.createHTML(s)||s}function Ph(s){I_=s}function Fh(){if(void 0!==I_)return I_;if(typeof document<"u")return document;throw new se(210,!1)}function mD(s){return function Bb(){if(void 0===S_&&(S_=null,mn.trustedTypes))try{S_=mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return S_}()?.createScriptURL(s)||s}class A_{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gt})`}}function fa(s){return s instanceof A_?s.changingThisBreaksApplicationSecurity:s}function Op(s,a){const c=function ZA(s){return s instanceof A_&&s.getTypeName()||null}(s);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${gt})`)}return c===a}class _D{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(kh(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class yD{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const c=this.inertDocument.createElement("template");return c.innerHTML=kh(a),c}}const eM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Vb(s){return(s=String(s)).match(eM)?s:"unsafe:"+s}function ql(s){const a={};for(const c of s.split(","))a[c]=!0;return a}function Rp(...s){const a={};for(const c of s)for(const d in c)c.hasOwnProperty(d)&&(a[d]=!0);return a}const vD=ql("area,br,col,hr,img,wbr"),Ub=ql("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),M_=ql("rp,rt"),N_=Rp(vD,Rp(Ub,ql("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Rp(M_,ql("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rp(M_,Ub)),Lh=ql("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wD=Rp(Lh,ql("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ql("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Bh=function(s){return s[s.NONE=0]="NONE",s[s.HTML=1]="HTML",s[s.STYLE=2]="STYLE",s[s.SCRIPT=3]="SCRIPT",s[s.URL=4]="URL",s[s.RESOURCE_URL=5]="RESOURCE_URL",s}(Bh||{});function os(s){const a=hd();return a?a.sanitize(Bh.URL,s)||"":Op(s,"URL")?fa(s):Vb(de(s))}function CD(s){const a=hd();if(a)return mD(a.sanitize(Bh.RESOURCE_URL,s)||"");if(Op(s,"ResourceURL"))return mD(fa(s));throw new se(904,!1)}function dM(s,a,c){return function DD(s,a){return"src"===a&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===a&&("base"===s||"link"===s)?CD:os}(a,c)(s)}function hd(){const s=Re();return s&&s[xo].sanitizer}class xn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=St({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const P_=new xn("ENVIRONMENT_INITIALIZER"),Hb=new xn("INJECTOR",-1),Ja=new xn("INJECTOR_DEF_TYPES");class TD{get(a,c=$i){if(c===$i){const d=new Error(`NullInjectorError: No provider for ${ae(a)}!`);throw d.name="NullInjectorError",d}return c}}function IB(...s){return{\u0275providers:fM(0,s),\u0275fromNgModule:!0}}function fM(s,...a){const c=[],d=new Set;let f;return Xu(a,g=>{const v=g;F_(v,c,[],d)&&(f||=[],f.push(v))}),void 0!==f&&$b(f,c),c}function $b(s,a){for(let c=0;c<s.length;c++){const{providers:f}=s[c];Gb(f,g=>{a.push(g)})}}function F_(s,a,c,d){if(!(s=Ue(s)))return!1;let f=null,g=ye(s);const v=!g&&Ht(s);if(g||v){if(v&&!v.standalone)return!1;f=s}else{const D=s.ngModule;if(g=ye(D),!g)return!1;f=D}const C=d.has(f);if(v){if(C)return!1;if(d.add(f),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of D)F_(x,a,c,d)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let x;d.add(f);try{Xu(g.imports,R=>{F_(R,a,c,d)&&(x||=[],x.push(R))})}finally{}void 0!==x&&$b(x,a)}if(!C){const x=ia(f)||(()=>new f);a.push({provide:f,useFactory:x,deps:rn},{provide:Ja,useValue:f,multi:!0},{provide:P_,useValue:()=>We(f),multi:!0})}const D=g.providers;null==D||C||Gb(D,R=>{a.push(R)})}}return f!==s&&void 0!==s.providers}function Gb(s,a){for(let c of s)Ve(c)&&(c=c.\u0275providers),Array.isArray(c)?Gb(c,a):a(c)}const pM=j({provide:String,useValue:j});function SD(s){return null!==s&&"object"==typeof s&&pM in s}function Vh(s){return"function"==typeof s}const AD=new xn("Set Injector scope."),L_={},xB={};let B_;function V_(){return void 0===B_&&(B_=new TD),B_}class fd{}class Uh extends fd{get destroyed(){return this._destroyed}constructor(a,c,d,f){super(),this.parent=c,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,OD(a,v=>this.processProvider(v)),this.records.set(Hb,jh(void 0,this)),f.has("environment")&&this.records.set(fd,jh(void 0,this));const g=this.records.get(AD);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Ja.multi,rn,nt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of a)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(a){return this.assertNotDestroyed(),this._onDestroyHooks.push(a),()=>this.removeOnDestroy(a)}runInContext(a){this.assertNotDestroyed();const c=q(this),d=Cn(void 0);try{return a()}finally{q(c),Cn(d)}}get(a,c=$i,d=nt.Default){if(this.assertNotDestroyed(),a.hasOwnProperty(Qs))return a[Qs](this);d=vn(d);const f=q(this),g=Cn(void 0);try{if(!(d&nt.SkipSelf)){let C=this.records.get(a);if(void 0===C){const D=function AB(s){return"function"==typeof s||"object"==typeof s&&s instanceof xn}(a)&&fi(a);C=D&&this.injectableDefInScope(D)?jh(Wb(a),L_):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(d&nt.Self?V_():this.parent).get(a,c=d&nt.Optional&&c===$i?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[sr]=v[sr]||[]).unshift(ae(a)),f)throw v;return function zo(s,a,c,d){const f=s[sr];throw a[K]&&f.unshift(a[K]),s.message=function xa(s,a,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=ae(a);if(Array.isArray(a))f=a.map(ae).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let C=a[v];g.push(v+":"+("string"==typeof C?JSON.stringify(C):ae(C)))}f=`{${g.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${s.replace(gl,"\n  ")}`}("\n"+s.message,f,c,d),s.ngTokenPath=f,s[sr]=null,s}(v,a,"R3InjectorError",this.source)}throw v}finally{Cn(g),q(f)}}resolveInjectorInitializers(){const a=q(this),c=Cn(void 0);try{const d=this.get(P_.multi,rn,nt.Self);for(const f of d)f()}finally{q(a),Cn(c)}}toString(){const a=[],c=this.records;for(const d of c.keys())a.push(ae(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(a){let c=Vh(a=Ue(a))?a:Ue(a&&a.provide);const d=function gM(s){return SD(s)?jh(void 0,s.useValue):jh(MD(s),L_)}(a);if(Vh(a)||!0!==a.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=jh(void 0,L_,!0),f.factory=()=>vi(f.multi),this.records.set(c,f)),c=a,f.multi.push(a)}this.records.set(c,d)}hydrate(a,c){return c.value===L_&&(c.value=xB,c.value=c.factory()),"object"==typeof c.value&&c.value&&function _M(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=Ue(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}removeOnDestroy(a){const c=this._onDestroyHooks.indexOf(a);-1!==c&&this._onDestroyHooks.splice(c,1)}}function Wb(s){const a=fi(s),c=null!==a?a.factory:ia(s);if(null!==c)return c;if(s instanceof xn)throw new se(204,!1);if(s instanceof Function)return function mM(s){const a=s.length;if(a>0)throw Lc(a,"?"),new se(204,!1);const c=function ne(s){return s&&(s[Oe]||s[st])||null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new se(204,!1)}function MD(s,a,c){let d;if(Vh(s)){const f=Ue(s);return ia(f)||Wb(f)}if(SD(s))d=()=>Ue(s.useValue);else if(function xD(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...vi(s.deps||[]));else if(function zb(s){return!(!s||!s.useExisting)}(s))d=()=>We(Ue(s.useExisting));else{const f=Ue(s&&(s.useClass||s.provide));if(!function ND(s){return!!s.deps}(s))return ia(f)||Wb(f);d=()=>new f(...vi(s.deps))}return d}function jh(s,a,c=!1){return{factory:s,value:a,multi:c?[]:void 0}}function OD(s,a){for(const c of s)Array.isArray(c)?OD(c,a):c&&Ve(c)?OD(c.\u0275providers,a):a(c)}const yM=new xn("AppId",{providedIn:"root",factory:()=>MB}),MB="ng",vM=new xn("Platform Initializer"),RD=new xn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),bM=new xn("AnimationModuleType"),wM=new xn("CSP nonce",{providedIn:"root",factory:()=>Fh().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let DM=(s,a)=>null;function VD(s,a){return DM(s,a)}class NM{}class jD{}class RM{resolveComponentFactory(a){throw function OM(s){const a=Error(`No component factory found for ${ae(s)}.`);return a.ngComponent=s,a}(a)}}let W_=(()=>{class s{}return s.NULL=new RM,s})();function kM(){return Hh(ai(),Re())}function Hh(s,a){return new Bp(Wi(s,a))}let Bp=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=kM,s})();function PM(s){return s instanceof Bp?s.nativeElement:s}class $D{}let FM=(()=>{class s{constructor(){this.destroyNode=null}}return s.__NG_ELEMENT_ID__=()=>function LM(){const s=Re(),c=bi(ai().index,s);return(si(c)?c:s)[Ot]}(),s})(),BM=(()=>{class s{}return s.\u0275prov=St({token:s,providedIn:"root",factory:()=>null}),s})();class GD{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const zD=new GD("16.1.6"),Xb={};function Vp(s){for(;s;){s[Ut]|=64;const a=ut(s);if(Zn(s)&&!a)return s;s=a}return null}function e0(s){return s.ngOriginalError}class $h{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&e0(a);for(;c&&e0(c);)c=e0(c);return c||null}}const q_=new xn("",{providedIn:"root",factory:()=>!1});function Xa(s){return s instanceof Function?s():s}class QD extends Mo{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(a){this._lView=a}onConsumerDependencyMayHaveChanged(){Vp(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(a,c,d){const f=Jn(this);this.trackingVersion++;try{a(c,d)}finally{Jn(f)}}destroy(){this.trackingVersion++}}let Up=null;function JD(){return Up??=new QD,Up}function K_(s,a){return s[a]??JD()}function jp(s,a){const c=JD();c.hasReadASignal&&(s[a]=Up,c.lView=s,Up=new QD)}const $t={};function Hp(s){a0(en(),Re(),er()+s,!1)}function a0(s,a,c,d){if(!d)if(3==(3&a[Ut])){const g=s.preOrderCheckHooks;null!==g&&ha(a,g,c)}else{const g=s.preOrderHooks;null!==g&&Fl(a,g,0,c)}da(c)}function el(s){if(!Dt()&&!function Y(){return z}())throw new se(-203,!1)}function Qc(s,a=null,c=null,d){const f=zh(s,a,c,d);return f.resolveInjectorInitializers(),f}function zh(s,a=null,c=null,d,f=new Set){const g=[c||rn,IB(s)];return d=d||("object"==typeof s?void 0:ae(s)),new Uh(g,a||V_(),d||null,f)}let Jc=(()=>{class s{static create(c,d){if(Array.isArray(c))return Qc({name:""},d,c,"");{const f=c.name??"";return Qc({name:f},c.parent,c.providers,f)}}}return s.THROW_IF_NOT_FOUND=$i,s.NULL=new TD,s.\u0275prov=St({token:s,providedIn:"any",factory:()=>We(Hb)}),s.__NG_ELEMENT_ID__=-1,s})();function Xc(s,a=nt.Default){const c=Re();return null===c?We(s,a):Ei(ai(),c,Ue(s),a)}function l0(){throw new Error("invalid")}function pd(s,a,c,d,f,g,v,C,D,x,R){const U=a.blueprint.slice();return U[mi]=f,U[Ut]=140|d,(null!==x||s&&2048&s[Ut])&&(U[Ut]|=2048),cr(U),U[Gn]=U[Ao]=s,U[Fn]=c,U[xo]=v||s&&s[xo],U[Ot]=C||s&&s[Ot],U[ea]=D||s&&s[ea]||null,U[Xi]=g,U[Yo]=function Sb(){return g_++}(),U[Rr]=R,U[Er]=x,U[Un]=2==a.type?s[Un]:U,U}function Wh(s,a,c,d,f){let g=s.data[a];if(null===g)g=Gp(s,a,c,d,f),function Va(){return Rt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=c,g.value=d,g.attrs=f;const v=la();g.injectorIndex=null===v?-1:v.injectorIndex}return Cr(g,!0),g}function Gp(s,a,c,d,f){const g=Sc(),v=xc(),D=s.data[a]=function YM(s,a,c,d,f,g){let v=a?a.injectorIndex:-1,C=0;return Ns()&&(C|=128),{type:c,index:d,insertBeforeIndex:null,injectorIndex:v,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,c,a,d,f);return null===s.firstChild&&(s.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D,D.prev=g)),D}function Q_(s,a,c,d){if(0===c)return-1;const f=a.length;for(let g=0;g<c;g++)a.push(d),s.blueprint.push(d),s.data.push(null);return f}function iT(s,a,c,d,f){const g=K_(a,Oa),v=er(),C=2&d;try{if(da(-1),C&&a.length>on&&a0(s,a,on,!1),eo(C?2:0,f),C)g.runInContext(c,d,f);else{const x=Jn(null);try{c(d,f)}finally{Jn(x)}}}finally{C&&null===a[Oa]&&jp(a,Oa),da(v),eo(C?3:1,f)}}function c0(s,a,c){if(gc(a)){const d=Jn(null);try{const g=a.directiveEnd;for(let v=a.directiveStart;v<g;v++){const C=s.data[v];C.contentQueries&&C.contentQueries(1,c[v],v)}}finally{Jn(d)}}}function co(s,a,c){Nl()&&(function JM(s,a,c,d){const f=c.directiveStart,g=c.directiveEnd;Xr(c)&&function iN(s,a,c){const d=Wi(a,s),f=zM(c);let v=16;c.signals?v=4096:c.onPush&&(v=64);const C=iy(s,pd(s,f,null,v,d,a,null,s[xo].rendererFactory.createRenderer(d,c),null,null,null));s[a.index]=C}(a,c,s.data[f+c.componentOffset]),s.firstCreatePass||Le(c,a),tr(d,a);const v=c.initialInputs;for(let C=f;C<g;C++){const D=s.data[C],x=Po(a,s,C,c);tr(x,a),null!==v&&ey(0,C-f,x,D,0,v),zi(D)&&(bi(c.index,a)[Fn]=Po(a,s,C,c))}}(s,a,c,Wi(c,a)),64==(64&c.flags)&&eu(s,a,c))}function J_(s,a,c=Wi){const d=a.localNames;if(null!==d){let f=a.index+1;for(let g=0;g<d.length;g+=2){const v=d[g+1],C=-1===v?c(a,s):s[v];s[f++]=C}}}function zM(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=rT(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):a}function rT(s,a,c,d,f,g,v,C,D,x,R){const U=on+d,X=U+f,oe=function PB(s,a){const c=[];for(let d=0;d<a;d++)c.push(d<s?null:$t);return c}(U,X),Me="function"==typeof x?x():x;return oe[lt]={type:s,blueprint:oe,template:c,queries:null,viewQuery:C,declTNode:a,data:oe.slice().fill(null,U),bindingStartIndex:U,expandoStartIndex:X,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Me,incompleteFirstPass:!1,ssrId:R}}let WM=s=>null;function zp(s,a,c,d){for(let f in s)if(s.hasOwnProperty(f)){c=null===c?{}:c;const g=s[f];null===d?Wp(c,a,f,g):d.hasOwnProperty(f)&&Wp(c,a,d[f],g)}return c}function Wp(s,a,c,d){s.hasOwnProperty(c)?s[c].push(a,d):s[c]=[a,d]}function as(s,a,c,d,f,g,v,C){const D=Wi(a,c);let R,x=a.inputs;!C&&null!=x&&(R=x[d])?(qp(s,c,R,d,f),Xr(a)&&function u0(s,a){const c=bi(a,s);16&c[Ut]||(c[Ut]|=64)}(c,a.index)):3&a.type&&(d=function sT(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),f=null!=v?v(f,a.value||"",d):f,g.setProperty(D,d,f))}function d0(s,a,c,d){if(Nl()){const f=null===d?null:{"":-1},g=function f0(s,a){const c=s.directiveRegistry;let d=null,f=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];if(vl(a,v.selectors,!1))if(d||(d=[]),zi(v))if(null!==v.findHostDirectiveDefs){const C=[];f=f||new Map,v.findHostDirectiveDefs(v,C,f),d.unshift(...C,v),qh(s,a,C.length)}else d.unshift(v),qh(s,a,0);else f=f||new Map,v.findHostDirectiveDefs?.(v,d,f),d.push(v)}return null===d?null:[d,f]}(s,c);let v,C;null===g?v=C=null:[v,C]=g,null!==v&&lT(s,a,c,v,f,C),f&&function XM(s,a,c){if(a){const d=s.localNames=[];for(let f=0;f<a.length;f+=2){const g=c[a[f+1]];if(null==g)throw new se(-301,!1);d.push(a[f],g)}}}(c,d,f)}c.mergedAttrs=Js(c.mergedAttrs,c.attrs)}function lT(s,a,c,d,f,g){for(let x=0;x<d.length;x++)Pt(Le(c,a),s,d[x].type);!function tN(s,a,c){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+c,s.providerIndexes=a}(c,s.data.length,d.length);for(let x=0;x<d.length;x++){const R=d[x];R.providersResolver&&R.providersResolver(R)}let v=!1,C=!1,D=Q_(s,a,d.length,null);for(let x=0;x<d.length;x++){const R=d[x];c.mergedAttrs=Js(c.mergedAttrs,R.hostAttrs),nN(s,c,a,D,R),eN(D,R,f),null!==R.contentQueries&&(c.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(c.flags|=64);const U=R.type.prototype;!v&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks??=[]).push(c.index),v=!0),!C&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(c.index),C=!0),D++}!function oT(s,a,c){const f=a.directiveEnd,g=s.data,v=a.attrs,C=[];let D=null,x=null;for(let R=a.directiveStart;R<f;R++){const U=g[R],X=c?c.get(U):null,Me=X?X.outputs:null;D=zp(U.inputs,R,D,X?X.inputs:null),x=zp(U.outputs,R,x,Me);const qe=null===D||null===v||Mu(a)?null:ny(D,R,v);C.push(qe)}null!==D&&(D.hasOwnProperty("class")&&(a.flags|=8),D.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=D,a.outputs=x}(s,c,g)}function eu(s,a,c){const d=c.directiveStart,f=c.directiveEnd,g=c.index,v=function es(){return Rt.lFrame.currentDirectiveIndex}();try{da(g);for(let C=d;C<f;C++){const D=s.data[C],x=a[C];ua(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&h0(D,x)}}finally{da(-1),ua(v)}}function h0(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function qh(s,a,c){a.componentOffset=c,(s.components??=[]).push(a.index)}function eN(s,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=s;zi(a)&&(c[""]=s)}}function nN(s,a,c,d,f){s.data[d]=f;const g=f.factory||(f.factory=ia(f.type)),v=new yt(g,zi(f),Xc);s.blueprint[d]=v,c[d]=v,function ZM(s,a,c,d,f){const g=f.hostBindings;if(g){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~a.index;(function QM(s){let a=s.length;for(;a>0;){const c=s[--a];if("number"==typeof c&&c<0)return c}return 0})(v)!=C&&v.push(C),v.push(c,d,g)}}(s,a,d,Q_(s,c,f.hostVars,$t),f)}function Ls(s,a,c,d,f,g){const v=Wi(s,a);!function p0(s,a,c,d,f,g,v){if(null==g)s.removeAttribute(a,f,c);else{const C=null==v?de(g):v(g,d||"",f);s.setAttribute(a,f,C,c)}}(a[Ot],v,g,s.value,c,d,f)}function ey(s,a,c,d,f,g){const v=g[a];if(null!==v)for(let C=0;C<v.length;)ty(d,c,v[C++],v[C++],v[C++])}function ty(s,a,c,d,f){const g=Jn(null);try{const v=s.inputTransforms;null!==v&&v.hasOwnProperty(d)&&(f=v[d].call(a,f)),null!==s.setInput?s.setInput(a,f,c,d):a[d]=f}finally{Jn(g)}}function ny(s,a,c){let d=null,f=0;for(;f<c.length;){const g=c[f];if(0!==g)if(5!==g){if("number"==typeof g)break;if(s.hasOwnProperty(g)){null===d&&(d=[]);const v=s[g];for(let C=0;C<v.length;C+=2)if(v[C]===a){d.push(g,v[C+1],c[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function cT(s,a,c,d){return[s,!0,!1,a,null,0,d,c,null,null,null]}function m0(s,a){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const g=c[d+1];if(-1!==g){const v=s.data[g];Ac(c[d]),v.contentQueries(2,a[g],g)}}}function iy(s,a){return s[Qr]?s[ta][wr]=a:s[Qr]=a,s[ta]=a,a}function uT(s,a,c){Ac(0);const d=Jn(null);try{a(s,c)}finally{Jn(d)}}function rN(s){return s[xs]||(s[xs]=[])}function hT(s){return s.cleanup||(s.cleanup=[])}function g0(s,a){const c=s[ea],d=c?c.get($h,null):null;d&&d.handleError(a)}function qp(s,a,c,d,f){for(let g=0;g<c.length;){const v=c[g++],C=c[g++];ty(s.data[v],a[v],d,C,f)}}function VB(s,a){const c=bi(a,s),d=c[lt];!function oN(s,a){for(let c=a.length;c<s.blueprint.length;c++)a.push(s.blueprint[c])}(d,c);const f=c[mi];null!==f&&null===c[Rr]&&(c[Rr]=VD(f,c[ea])),_0(d,c,c[Fn])}function _0(s,a,c){Ku(a);try{const d=s.viewQuery;null!==d&&uT(1,d,c);const f=s.template;null!==f&&iT(s,a,f,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&m0(s,a),s.staticViewQueries&&uT(2,s.viewQuery,c);const g=s.components;null!==g&&function sN(s,a){for(let c=0;c<a.length;c++)VB(s,a[c])}(a,g)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[Ut]&=-5,up()}}let y0=(()=>{class s{}return s.__NG_ELEMENT_ID__=lN,s.__NG_ENV_ID__=a=>a,s})();class aN extends y0{constructor(a){super(),this._lView=a}onDestroy(a){return Ml(this._lView,a),()=>function mh(s,a){if(null===s[Zo])return;const c=s[Zo].indexOf(a);-1!==c&&s[Zo].splice(c,1)}(this._lView,a)}}function lN(){return new aN(Re())}let v0=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(c,d,f){const g=typeof Zone>"u"?null:Zone.current,v=new Vg(c,x=>{this.all.has(x)&&this.queue.set(x,g)},f);let C;this.all.add(v),v.notify();const D=()=>{v.cleanup(),C?.(),this.all.delete(v),this.queue.delete(v)};return C=d?.onDestroy(D),{destroy:D}}flush(){if(0!==this.queue.size)for(const[c,d]of this.queue)this.queue.delete(c),d?d.run(()=>c.run()):c.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=St({token:s,providedIn:"root",factory:()=>new s}),s})();function ry(s,a,c){let d=c?s.styles:null,f=c?s.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const C=a[v];"number"==typeof C?g=C:1==g?f=ze(f,C):2==g&&(d=ze(d,C+": "+a[++v]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=f:s.classesWithoutHost=f}function Kh(s,a,c,d,f=!1){for(;null!==c;){const g=a[c.index];if(null!==g&&d.push(Kt(g)),ki(g)){for(let C=_i;C<g.length;C++){const D=g[C],x=D[lt].firstChild;null!==x&&Kh(D[lt],D,x,d)}g[Jr]!==g[mi]&&d.push(g[Jr])}const v=c.type;if(8&v)Kh(s,a,c.child,d);else if(32&v){const C=ge(c,a);let D;for(;D=C();)d.push(D)}else if(16&v){const C=uD(a,c);if(Array.isArray(C))d.push(...C);else{const D=ut(a[Un]);Kh(D[lt],D,C,d,!0)}}c=f?c.projectionNext:c.next}return d}function oy(s,a,c,d=!0){const f=a[xo].rendererFactory;f.begin&&f.begin();try{mT(s,a,s.template,c)}catch(v){throw d&&g0(a,v),v}finally{f.end&&f.end(),a[xo].effectManager?.flush()}}function mT(s,a,c,d){const f=a[Ut];if(256!=(256&f)){a[xo].effectManager?.flush(),Ku(a);try{cr(a),function Oo(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&iT(s,a,c,2,d);const v=3==(3&f);if(v){const x=s.preOrderCheckHooks;null!==x&&ha(a,x,null)}else{const x=s.preOrderHooks;null!==x&&Fl(a,x,0,null),Mc(a,0)}if(function dN(s){for(let a=Ti(s);null!==a;a=Br(a)){if(!a[Dl])continue;const c=a[As];for(let d=0;d<c.length;d++){Ba(c[d])}}}(a),gT(a,2),null!==s.contentQueries&&m0(s,a),v){const x=s.contentCheckHooks;null!==x&&ha(a,x)}else{const x=s.contentHooks;null!==x&&Fl(a,x,1),Mc(a,1)}!function $p(s,a){const c=s.hostBindingOpCodes;if(null===c)return;const d=K_(a,gi);try{for(let f=0;f<c.length;f++){const g=c[f];if(g<0)da(~g);else{const v=g,C=c[++f],D=c[++f];lp(C,v),d.runInContext(D,2,a[v])}}}finally{null===a[gi]&&jp(a,gi),da(-1)}}(s,a);const C=s.components;null!==C&&Bs(a,C,0);const D=s.viewQuery;if(null!==D&&uT(2,D,d),v){const x=s.viewCheckHooks;null!==x&&ha(a,x)}else{const x=s.viewHooks;null!==x&&Fl(a,x,2),Mc(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[Ut]&=-73,ph(a)}finally{up()}}}function gT(s,a){for(let c=Ti(s);null!==c;c=Br(c))for(let d=_i;d<c.length;d++)yT(c[d],a)}function _T(s,a,c){yT(bi(a,s),c)}function yT(s,a){if(!function sp(s){return 128==(128&s[Ut])}(s))return;const c=s[lt];if(80&s[Ut]&&0===a||1024&s[Ut]||2===a)mT(c,s,c.template,s[Fn]);else if(s[Zr]>0){gT(s,1);const f=s[lt].components;null!==f&&Bs(s,f,1)}}function Bs(s,a,c){for(let d=0;d<a.length;d++)_T(s,a[d],c)}class md{get rootNodes(){const a=this._lView,c=a[lt];return Kh(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Fn]}set context(a){this._lView[Fn]=a}get destroyed(){return 256==(256&this._lView[Ut])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Gn];if(ki(a)){const c=a[8],d=c?c.indexOf(this):-1;d>-1&&(Rb(a,d),Fc(c,d))}this._attachedToViewContainer=!1}b_(this._lView[lt],this._lView)}onDestroy(a){Ml(this._lView,a)}markForCheck(){Vp(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ut]&=-129}reattach(){this._lView[Ut]|=128}detectChanges(){oy(this._lView[lt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function __(s,a){Rh(s,a,a[Ot],2,null,null)}(this._lView[lt],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=a}}class Kp extends md{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;oy(a[lt],a,a[Fn],!1)}checkNoChanges(){}get context(){return null}}class sy extends W_{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=Ht(a);return new Yp(c,this.ngModule)}}function vT(s){const a=[];for(let c in s)s.hasOwnProperty(c)&&a.push({propName:s[c],templateName:c});return a}class b0{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,d){d=vn(d);const f=this.injector.get(a,Xb,d);return f!==Xb||c===Xb?f:this.parentInjector.get(a,c,d)}}class Yp extends jD{get inputs(){const a=this.componentDef,c=a.inputTransforms,d=vT(a.inputs);if(null!==c)for(const f of d)c.hasOwnProperty(f.propName)&&(f.transform=c[f.propName]);return d}get outputs(){return vT(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function qd(s){return s.map(bl).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,d,f){let g=(f=f||this.ngModule)instanceof fd?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new b0(a,g):a,C=v.get($D,null);if(null===C)throw new se(407,!1);const R={rendererFactory:C,sanitizer:v.get(BM,null),effectManager:v.get(v0,null)},U=C.createRenderer(null,this.componentDef),X=this.componentDef.selectors[0][0]||"div",oe=d?function FB(s,a,c,d){const g=d.get(q_,!1)||c===lr.ShadowDom,v=s.selectRootElement(a,g);return function LB(s){WM(s)}(v),v}(U,d,this.componentDef.encapsulation,v):Kc(U,X,function hN(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(X)),ct=this.componentDef.signals?4608:this.componentDef.onPush?576:528,Ct=rT(0,null,null,1,0,null,null,null,null,null,null),Pe=pd(null,Ct,null,ct,null,null,R,U,v,null,null);let Gt,sn;Ku(Pe);try{const gn=this.componentDef;let go,lE=null;gn.findHostDirectiveDefs?(go=[],lE=new Map,gn.findHostDirectiveDefs(gn,go,lE),go.push(gn)):go=[gn];const lU=function pN(s,a){const c=s[lt],d=on;return s[d]=a,Wh(c,d,2,"#host",null)}(Pe,oe),cU=function bT(s,a,c,d,f,g,v){const C=f[lt];!function wT(s,a,c,d){for(const f of s)a.mergedAttrs=Js(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(ry(a,a.mergedAttrs,!0),null!==c&&hD(d,c,a))}(d,s,a,v);let D=null;null!==a&&(D=VD(a,f[ea]));const x=g.rendererFactory.createRenderer(a,c);let R=16;c.signals?R=4096:c.onPush&&(R=64);const U=pd(f,zM(c),null,R,f[s.index],s,g,x,null,null,D);return C.firstCreatePass&&qh(C,s,d.length-1),iy(f,U),f[s.index]=U}(lU,oe,gn,go,Pe,R,U);sn=La(Ct,on),oe&&function Vs(s,a,c,d){if(d)xu(s,c,["ng-version",zD.full]);else{const{attrs:f,classes:g}=function wl(s){const a=[],c=[];let d=1,f=2;for(;d<s.length;){let g=s[d];if("string"==typeof g)2===f?""!==g&&a.push(g,s[++d]):8===f&&c.push(g);else{if(!vr(f))break;f=g}d++}return{attrs:a,classes:c}}(a.selectors[0]);f&&xu(s,c,f),g&&g.length>0&&dD(s,c,g.join(" "))}}(U,gn,oe,d),void 0!==c&&function Yh(s,a,c){const d=s.projection=[];for(let f=0;f<a.length;f++){const g=c[f];d.push(null!=g?Array.from(g):null)}}(sn,this.ngContentSelectors,c),Gt=function ET(s,a,c,d,f,g){const v=ai(),C=f[lt],D=Wi(v,f);lT(C,f,v,c,null,d);for(let R=0;R<c.length;R++)tr(Po(f,C,v.directiveStart+R,v),f);eu(C,f,v),D&&tr(D,f);const x=Po(f,C,v.directiveStart+v.componentOffset,v);if(s[Fn]=f[Fn]=x,null!==g)for(const R of g)R(x,a);return c0(C,v,s),x}(cU,gn,go,lE,Pe,[mN]),_0(Ct,Pe,null)}finally{up()}return new fN(this.componentType,Gt,Hh(sn,Pe),Pe,sn)}}class fN extends NM{constructor(a,c,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.previousInputValues=null,this.instance=c,this.hostView=this.changeDetectorRef=new Kp(f),this.componentType=a}setInput(a,c){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){if(this.previousInputValues??=new Map,this.previousInputValues.has(a)&&Object.is(this.previousInputValues.get(a),c))return;const g=this._rootLView;qp(g[lt],g,f,a,c),this.previousInputValues.set(a,c),Vp(bi(this._tNode.index,g))}}get injector(){return new Fr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function mN(){const s=ai();ro(Re()[lt],s)}function ay(s){let a=function CT(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const d=[s];for(;a;){let f;if(zi(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new se(903,!1);f=a.\u0275dir}if(f){if(c){d.push(f);const v=s;v.inputs=Zp(s.inputs),v.inputTransforms=Zp(s.inputTransforms),v.declaredInputs=Zp(s.declaredInputs),v.outputs=Zp(s.outputs);const C=f.hostBindings;C&&yN(s,C);const D=f.viewQuery,x=f.contentQueries;if(D&&ly(s,D),x&&_N(s,x),W(s.inputs,f.inputs),W(s.declaredInputs,f.declaredInputs),W(s.outputs,f.outputs),null!==f.inputTransforms&&(null===v.inputTransforms&&(v.inputTransforms={}),W(v.inputTransforms,f.inputTransforms)),zi(f)&&f.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const C=g[v];C&&C.ngInherit&&C(s),C===ay&&(c=!1)}}a=Object.getPrototypeOf(a)}!function gN(s){let a=0,c=null;for(let d=s.length-1;d>=0;d--){const f=s[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Js(f.hostAttrs,c=Js(c,f.hostAttrs))}}(d)}function Zp(s){return s===Kr?{}:s===rn?[]:s}function ly(s,a){const c=s.viewQuery;s.viewQuery=c?(d,f)=>{a(d,f),c(d,f)}:a}function _N(s,a){const c=s.contentQueries;s.contentQueries=c?(d,f,g)=>{a(d,f,g),c(d,f,g)}:a}function yN(s,a){const c=s.hostBindings;s.hostBindings=c?(d,f)=>{a(d,f),c(d,f)}:a}function TT(s){return a=>{a.findHostDirectiveDefs=IT,a.hostDirectives=(Array.isArray(s)?s:s()).map(c=>"function"==typeof c?{directive:Ue(c),inputs:Kr,outputs:Kr}:{directive:Ue(c.directive),inputs:ST(c.inputs),outputs:ST(c.outputs)})}}function IT(s,a,c){if(null!==s.hostDirectives)for(const d of s.hostDirectives){const f=oi(d.directive);bN(f.declaredInputs,d.inputs),IT(f,a,c),c.set(f,d),a.push(f)}}function ST(s){if(void 0===s||0===s.length)return Kr;const a={};for(let c=0;c<s.length;c+=2)a[s[c]]=s[c+1];return a}function bN(s,a){for(const c in a)a.hasOwnProperty(c)&&(s[a[c]]=s[c])}function C0(s){const a=s.inputConfig,c={};for(const d in a)if(a.hasOwnProperty(d)){const f=a[d];Array.isArray(f)&&f[2]&&(c[d]=f[2])}s.inputTransforms=c}function Jp(s){return!!D0(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function D0(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function nl(s,a,c){return s[a]=c}function Tr(s,a,c){return!Object.is(s[a],c)&&(s[a]=c,!0)}function Zl(s,a,c,d){const f=Tr(s,a,c);return Tr(s,a+1,d)||f}function xT(s,a,c,d){const f=Re();return Tr(f,Xo(),a)&&(en(),Ls(Ln(),f,s,a,c,d)),xT}function nm(s,a,c,d){return Tr(s,Xo(),c)?a+de(c)+d:$t}function FT(s,a,c,d,f,g,v,C){const D=Re(),x=en(),R=s+on,U=x.firstCreatePass?function N0(s,a,c,d,f,g,v,C,D){const x=a.consts,R=Wh(a,s,4,v||null,Jo(x,C));d0(a,c,R,Jo(x,D)),ro(a,R);const U=R.tView=rT(2,R,d,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,x,null);return null!==a.queries&&(a.queries.template(a,R),U.queries=a.queries.embeddedTView(R)),R}(R,x,D,a,c,d,f,g,v):x.data[R];Cr(U,!1);const X=kN(x,D,U,s);Yu()&&w_(x,D,X,U),tr(X,D),iy(D,D[R]=cT(X,D,X,U)),na(U)&&co(x,D,U),null!=v&&J_(D,U,C)}let kN=function PN(s,a,c,d){return io(!0),a[Ot].createComment("")};function nu(s){return function Qo(s,a){return s[a]}(function Hg(){return Rt.lFrame.contextLView}(),on+s)}function O0(s,a,c){const d=Re();return Tr(d,Xo(),a)&&as(en(),Ln(),d,s,a,d[Ot],c,!1),O0}function sm(s,a,c,d,f){const v=f?"class":"style";qp(s,c,a.inputs[v],v,d)}function ef(s,a,c,d){const f=Re(),g=en(),v=on+s,C=f[Ot],D=g.firstCreatePass?function BT(s,a,c,d,f,g){const v=a.consts,D=Wh(a,s,2,d,Jo(v,f));return d0(a,c,D,Jo(v,g)),null!==D.attrs&&ry(D,D.attrs,!1),null!==D.mergedAttrs&&ry(D,D.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,D),D}(v,g,f,a,c,d):g.data[v],x=R0(g,f,D,C,a,s);f[v]=x;const R=na(D);return Cr(D,!0),hD(C,x,D),32!=(32&D.flags)&&Yu()&&w_(g,f,x,D),0===function Gu(){return Rt.lFrame.elementDepthCount}()&&tr(x,f),function Dc(){Rt.lFrame.elementDepthCount++}(),R&&(co(g,f,D),c0(g,D,f)),null!==d&&J_(f,D),ef}function am(){let s=ai();xc()?Rl():(s=s.parent,Cr(s,!1));const a=s;(function Wu(s){return Rt.skipHydrationRootTNode===s})(a)&&function gh(){Rt.skipHydrationRootTNode=null}(),function zu(){Rt.lFrame.elementDepthCount--}();const c=en();return c.firstCreatePass&&(ro(c,s),gc(s)&&c.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Zu(s){return 0!=(8&s.flags)}(a)&&sm(c,a,Re(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Ro(s){return 0!=(16&s.flags)}(a)&&sm(c,a,Re(),a.stylesWithoutHost,!1),am}function gy(s,a,c,d){return ef(s,a,c,d),am(),gy}let R0=(s,a,c,d,f,g)=>(io(!0),Kc(d,f,function ja(){return Rt.lFrame.currentNamespace}()));function cm(){return Re()}function vy(s){return!!s&&"function"==typeof s.then}function L0(s){return!!s&&"function"==typeof s.subscribe}function by(s,a,c,d){const f=Re(),g=en(),v=ai();return function wy(s,a,c,d,f,g,v){const C=na(d),x=s.firstCreatePass&&hT(s),R=a[Fn],U=rN(a);let X=!0;if(3&d.type||v){const qe=Wi(d,a),ct=v?v(qe):qe,Ct=U.length,Pe=v?sn=>v(Kt(sn[d.index])):d.index;let Gt=null;if(!v&&C&&(Gt=function um(s,a,c,d){const f=s.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===c&&f[g+1]===d){const C=a[xs],D=f[g+2];return C.length>D?C[D]:null}"string"==typeof v&&(g+=2)}return null}(s,a,f,d.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=g,Gt.__ngLastListenerFn__=g,X=!1;else{g=Ey(d,a,R,g,!1);const sn=c.listen(ct,f,g);U.push(g,sn),x&&x.push(f,Pe,Ct,Ct+1)}}else g=Ey(d,a,R,g,!1);const oe=d.outputs;let Me;if(X&&null!==oe&&(Me=oe[f])){const qe=Me.length;if(qe)for(let ct=0;ct<qe;ct+=2){const gn=a[Me[ct]][Me[ct+1]].subscribe(g),go=U.length;U.push(g,gn),x&&x.push(f,d.index,go,-(go+1))}}}(g,f,f[Ot],v,s,a,d),by}function B0(s,a,c,d){try{return eo(6,a,c),!1!==c(d)}catch(f){return g0(s,f),!1}finally{eo(7,a,c)}}function Ey(s,a,c,d,f){return function g(v){if(v===Function)return d;Vp(s.componentOffset>-1?bi(s.index,a):a);let D=B0(a,c,d,v),x=g.__ngNextListenerFn__;for(;x;)D=B0(a,c,x,v)&&D,x=x.__ngNextListenerFn__;return f&&!1===D&&v.preventDefault(),D}}function HT(s=1){return function Gg(s){return(Rt.lFrame.contextLView=function zg(s,a){for(;s>0;)a=a[Ao],s--;return a}(s,Rt.lFrame.contextLView))[Fn]}(s)}function $T(s,a){let c=null;const d=function Wd(s){const a=s.attrs;if(null!=a){const c=a.indexOf(5);if(!(1&c))return a[c+1]}return null}(s);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===d?vl(s,g,!0):Yf(d,g))return f}else c=f}return c}function V0(s){const a=Re()[Un][Xi];if(!a.projection){const d=a.projection=Lc(s?s.length:1,null),f=d.slice();let g=a.child;for(;null!==g;){const v=s?$T(g,s):0;null!==v&&(f[v]?f[v].projectionNext=g:d[v]=g,f[v]=g),g=g.next}}}function GT(s,a=0,c){const d=Re(),f=en(),g=Wh(f,on+s,16,null,c||null);null===g.projection&&(g.projection=a),Rl(),(!d[Rr]||Ns())&&32!=(32&g.flags)&&function C_(s,a,c){dd(a[Ot],0,a,c,oD(s,c,a),aD(c.parent||a[Xi],c,a))}(f,d,g)}function nf(s,a,c){return dm(s,"",a,"",c),nf}function dm(s,a,c,d,f){const g=Re(),v=nm(g,a,c,d);return v!==$t&&as(en(),Ln(),g,s,v,g[Ot],f,!1),dm}function Cy(s,a){return s<<17|a<<2}function ma(s){return s>>17&32767}function fm(s){return 2|s}function iu(s){return(131068&s)>>2}function Dy(s,a){return-131069&s|a<<2}function H0(s){return 1|s}function $0(s,a,c,d,f){const g=s[c+1],v=null===a;let C=d?ma(g):iu(g),D=!1;for(;0!==C&&(!1===D||v);){const R=s[C+1];G0(s[C],a)&&(D=!0,s[C+1]=d?H0(R):fm(R)),C=d?ma(R):iu(R)}D&&(s[c+1]=d?fm(g):H0(g))}function G0(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&lo(s,a)>=0}const nr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function QT(s){return s.substring(nr.key,nr.keyEnd)}function XT(s,a){const c=nr.textEnd;return c===a?-1:(a=nr.keyEnd=function tI(s,a,c){for(;a<c&&s.charCodeAt(a)>32;)a++;return a}(s,nr.key=a,c),ru(s,a,c))}function ru(s,a,c){for(;a<c&&s.charCodeAt(a)<=32;)a++;return a}function W0(s,a){return function ls(s,a,c,d){const f=Re(),g=en(),v=no(2);g.firstUpdatePass&&sI(g,s,v,d),a!==$t&&Tr(f,v,a)&&cI(g,g.data[er()],f,f[Ot],s,f[v+1]=function YN(s,a){return null==s||""===s||("string"==typeof a?s+=a:"object"==typeof s&&(s=ae(fa(s)))),s}(a,c),d,v)}(s,a,null,!0),W0}function rI(s){!function ga(s,a,c,d){const f=en(),g=no(2);f.firstUpdatePass&&sI(f,null,g,d);const v=Re();if(c!==$t&&Tr(v,g,c)){const C=f.data[er()];if(ZN(C,d)&&!oI(f,g)){let D=d?C.classesWithoutHost:C.stylesWithoutHost;null!==D&&(c=ze(D,c||"")),sm(f,C,v,c,d)}else!function KN(s,a,c,d,f,g,v,C){f===$t&&(f=rn);let D=0,x=0,R=0<f.length?f[0]:null,U=0<g.length?g[0]:null;for(;null!==R||null!==U;){const X=D<f.length?f[D+1]:void 0,oe=x<g.length?g[x+1]:void 0;let qe,Me=null;R===U?(D+=2,x+=2,X!==oe&&(Me=U,qe=oe)):null===U||null!==R&&R<U?(D+=2,Me=R):(x+=2,Me=U,qe=oe),null!==Me&&cI(s,a,c,d,Me,qe,v,C),R=D<f.length?f[D]:null,U=x<g.length?g[x]:null}}(f,C,v,v[Ot],v[g+1],v[g+1]=function qN(s,a,c){if(null==c||""===c)return rn;const d=[],f=fa(c);if(Array.isArray(f))for(let g=0;g<f.length;g++)s(d,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&s(d,g,f[g]);else"string"==typeof f&&a(d,f);return d}(s,a,c),d,g)}}(Z0,al,s,!0)}function al(s,a){for(let c=function YB(s){return function jN(s){nr.key=0,nr.keyEnd=0,nr.value=0,nr.valueEnd=0,nr.textEnd=s.length}(s),XT(s,ru(s,0,nr.textEnd))}(a);c>=0;c=XT(a,c))Bi(s,QT(a),!0)}function oI(s,a){return a>=s.expandoStartIndex}function sI(s,a,c,d){const f=s.data;if(null===f[c+1]){const g=f[er()],v=oI(s,c);ZN(g,d)&&null===a&&!v&&(a=!1),a=function q0(s,a,c,d){const f=function _h(s){const a=Rt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let g=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(c=pm(c=Y0(null,s,a,c,d),a.attrs,d),g=null);else{const v=a.directiveStylingLast;if(-1===v||s[v]!==f)if(c=Y0(f,s,a,c,d),null===g){let D=function WN(s,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==iu(d))return s[ma(d)]}(s,a,d);void 0!==D&&Array.isArray(D)&&(D=Y0(null,s,a,D[1],d),D=pm(D,a.attrs,d),function K0(s,a,c,d){s[ma(c?a.classBindings:a.styleBindings)]=d}(s,a,d,D))}else g=function aI(s,a,c){let d;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)d=pm(d,s[g].hostAttrs,c);return pm(d,a.attrs,c)}(s,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),c}(f,g,a,d),function ZT(s,a,c,d,f,g){let v=g?a.classBindings:a.styleBindings,C=ma(v),D=iu(v);s[d]=c;let R,x=!1;if(Array.isArray(c)?(R=c[1],(null===R||lo(c,R)>0)&&(x=!0)):R=c,f)if(0!==D){const X=ma(s[C+1]);s[d+1]=Cy(X,C),0!==X&&(s[X+1]=Dy(s[X+1],d)),s[C+1]=function VN(s,a){return 131071&s|a<<17}(s[C+1],d)}else s[d+1]=Cy(C,0),0!==C&&(s[C+1]=Dy(s[C+1],d)),C=d;else s[d+1]=Cy(D,0),0===C?C=d:s[D+1]=Dy(s[D+1],d),D=d;x&&(s[d+1]=fm(s[d+1])),$0(s,R,d,!0),$0(s,R,d,!1),function UN(s,a,c,d,f){const g=f?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&lo(g,a)>=0&&(c[d+1]=H0(c[d+1]))}(a,R,s,d,g),v=Cy(C,D),g?a.classBindings=v:a.styleBindings=v}(f,g,a,c,v,d)}}function Y0(s,a,c,d,f){let g=null;const v=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<v&&(g=a[C],d=pm(d,g.hostAttrs,f),g!==s);)C++;return null!==s&&(c.directiveStylingLast=C),d}function pm(s,a,c){const d=c?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Bi(s,v,!!c||a[++g]))}return void 0===s?null:s}function Z0(s,a,c){const d=String(a);""!==d&&!d.includes(" ")&&Bi(s,d,c)}function cI(s,a,c,d,f,g,v,C){if(!(3&a.type))return;const D=s.data,x=D[C+1],R=function YT(s){return 1==(1&s)}(x)?Q0(D,a,c,f,iu(x),v):void 0;Ty(R)||(Ty(g)||function BN(s){return 2==(2&s)}(x)&&(g=Q0(D,null,c,f,C,v)),function $A(s,a,c,d,f){if(a)f?s.addClass(c,d):s.removeClass(c,d);else{let g=-1===d.indexOf("-")?void 0:od.DashCase;null==f?s.removeStyle(c,d,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=od.Important),s.setStyle(c,d,f,g))}}(d,v,Ec(er(),c),f,g))}function Q0(s,a,c,d,f,g){const v=null===a;let C;for(;f>0;){const D=s[f],x=Array.isArray(D),R=x?D[1]:D,U=null===R;let X=c[f+1];X===$t&&(X=U?rn:void 0);let oe=U?pp(X,d):R===d?X:void 0;if(x&&!Ty(oe)&&(oe=pp(D,d)),Ty(oe)&&(C=oe,v))return C;const Me=s[f+1];f=v?ma(Me):iu(Me)}if(null!==a){let D=g?a.residualClasses:a.residualStyles;null!=D&&(C=pp(D,d))}return C}function Ty(s){return void 0!==s}function ZN(s,a){return 0!=(s.flags&(a?8:16))}function J0(s,a=""){const c=Re(),d=en(),f=s+on,g=d.firstCreatePass?Wh(d,f,1,a,null):d.data[f],v=uI(d,c,g,a,s);c[f]=v,Yu()&&w_(d,c,v,g),Cr(g,!1)}let uI=(s,a,c,d,f)=>(io(!0),zl(a[Ot],d));function X0(s){return Iy("",s,""),X0}function Iy(s,a,c){const d=Re(),f=nm(d,s,a,c);return f!==$t&&function tl(s,a,c){const d=Ec(a,s);!function Nh(s,a,c){s.setValue(a,c)}(s[Ot],d,c)}(d,er(),f),Iy}function iw(s,a,c){const d=Re();return Tr(d,Xo(),a)&&as(en(),Ln(),d,s,a,d[Ot],c,!0),iw}const cs=void 0;var uO=["en",[["a","p"],["AM","PM"],cs],[["AM","PM"],cs,cs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cs,"{1} 'at' {0}",cs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function js(s){const c=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let yd={};function ow(s){const a=function ou(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=Jl(a);if(c)return c;const d=a.split("-")[0];if(c=Jl(d),c)return c;if("en"===d)return uO;throw new se(701,!1)}function gm(s){return ow(s)[Ii.PluralCase]}function Jl(s){return s in yd||(yd[s]=mn.ng&&mn.ng.common&&mn.ng.common.locales&&mn.ng.common.locales[s]),yd[s]}var Ii=function(s){return s[s.LocaleId=0]="LocaleId",s[s.DayPeriodsFormat=1]="DayPeriodsFormat",s[s.DayPeriodsStandalone=2]="DayPeriodsStandalone",s[s.DaysFormat=3]="DaysFormat",s[s.DaysStandalone=4]="DaysStandalone",s[s.MonthsFormat=5]="MonthsFormat",s[s.MonthsStandalone=6]="MonthsStandalone",s[s.Eras=7]="Eras",s[s.FirstDayOfWeek=8]="FirstDayOfWeek",s[s.WeekendRange=9]="WeekendRange",s[s.DateFormat=10]="DateFormat",s[s.TimeFormat=11]="TimeFormat",s[s.DateTimeFormat=12]="DateTimeFormat",s[s.NumberSymbols=13]="NumberSymbols",s[s.NumberFormats=14]="NumberFormats",s[s.CurrencyCode=15]="CurrencyCode",s[s.CurrencySymbol=16]="CurrencySymbol",s[s.CurrencyName=17]="CurrencyName",s[s.Currencies=18]="Currencies",s[s.Directionality=19]="Directionality",s[s.PluralCase=20]="PluralCase",s[s.ExtraData=21]="ExtraData",s}(Ii||{});const vd="en-US",_m={marker:"element"},ym={marker:"ICU"};var uo=function(s){return s[s.SHIFT=2]="SHIFT",s[s.APPEND_EAGERLY=1]="APPEND_EAGERLY",s[s.COMMENT=2]="COMMENT",s}(uo||{});let sw=vd;function aw(s){(function _t(s,a){null==s&&tt(a,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(sw=s.toLowerCase().replace(/_/g,"-"))}function lw(s,a,c){const d=a.insertBeforeIndex,f=Array.isArray(d)?d[0]:d;return null===f?lD(s,0,c):Kt(c[f])}function cw(s,a,c,d,f){const g=a.insertBeforeIndex;if(Array.isArray(g)){let v=d,C=null;if(3&a.type||(C=v,v=f),null!==v&&-1===a.componentOffset)for(let D=1;D<g.length;D++)cd(s,v,c[g[D]],C,!1)}}function uw(s,a){if(s.push(a),s.length>1)for(let c=s.length-2;c>=0;c--){const d=s[c];dw(d)||mO(d,a)&&null===II(d)&&SI(d,a.index)}}function dw(s){return!(64&s.type)}function mO(s,a){return dw(a)||s.index>a.index}function II(s){const a=s.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function SI(s,a){const c=s.insertBeforeIndex;Array.isArray(c)?c[0]=a:(cD(lw,cw),s.insertBeforeIndex=a)}function AI(s,a,c){const d=Gp(s,c,64,null,null);return uw(a,d),d}function yO(){const s=[];let c,d,a=-1;function g(C,D){a=0;const x=function vm(s,a){const c=a[s.currentCaseLViewIndex];return null===c?c:c<0?~c:c}(C,D);d=null!==x?C.remove[x]:rn}function v(){if(a<d.length){const C=d[a++];return C>0?c[C]:(s.push(a,d),g(c[lt].data[~C],c),v())}return 0===s.length?null:(d=s.pop(),a=s.pop(),v())}return function f(C,D){for(c=D;s.length;)s.pop();return g(C.value,D),v}}const mw=/\ufffd(\d+):?\d*\ufffd/gi,nV=/\ufffd(\d+)\ufffd/,bO=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,wm="\ufffd",kI=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,iV=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,rV=/\uE500/g;function wd(s,a,c,d,f,g,v){const C=Q_(s,d,1,null);let D=C<<uo.SHIFT,x=la();a===x&&(x=null),null===x&&(D|=uo.APPEND_EAGERLY),v&&(D|=uo.COMMENT,function Xe(s){void 0===Q&&(Q=s())}(yO)),f.push(D,null===g?"":g);const R=Gp(s,C,v?32:1,null===g?"":g,null);uw(c,R);const U=R.index;return Cr(R,!1),null!==x&&a!==x&&function hw(s,a){let c=s.insertBeforeIndex;null===c?(cD(lw,cw),c=s.insertBeforeIndex=[null,a]):(function Sn(s,a,c){s!=a&&tt(c,s,a,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(a))}(x,U),R}function Em(s,a,c,d,f,g,v){const C=v.match(mw),D=wd(s,a,c,g,d,C?null:v,!1);C&&Cm(f,v,D.index,null,0,null)}function Cm(s,a,c,d,f,g){const v=s.length,C=v+1;s.push(null,null);const D=v+2,x=a.split(mw);let R=0;for(let U=0;U<x.length;U++){const X=x[U];if(1&U){const oe=f+parseInt(X,10);s.push(-1-oe),R|=PI(oe)}else""!==X&&s.push(X)}return s.push(c<<2|(d?1:0)),d&&s.push(d,g),s[v]=R,s[C]=s.length-D,R}function PI(s){return 1<<Math.min(s,31)}function yw(s){let a,g,c="",d=0,f=!1;for(;null!==(a=kI.exec(s));)f?a[0]===`${wm}/*${g}${wm}`&&(d=a.index,f=!1):(c+=s.substring(d,a.index+a[0].length),g=a[1],f=!0);return c+=s.slice(d),c}function vw(s,a,c,d,f,g){let v=0;const C={type:f.type,currentCaseLViewIndex:Q_(s,a,1,null),anchorIdx:g,cases:[],create:[],remove:[],update:[]};(function Tm(s,a,c){s.push(PI(a.mainBinding),2,-1-a.mainBinding,c<<2|2)})(c,f,g),function xI(s,a,c){const d=s.data[a];null===d?s.data[a]=c:d.value=c}(s,g,C);const D=f.values;for(let x=0;x<D.length;x++){const R=D[x],U=[];for(let X=0;X<R.length;X++){const oe=R[X];if("string"!=typeof oe){const Me=U.push(oe)-1;R[X]=`\x3c!--\ufffd${Me}\ufffd--\x3e`}}v=sV(s,C,a,c,d,f.cases[x],R.join(""),U)|v}v&&function Fy(s,a,c){s.push(a,1,c<<2|3)}(c,v,g)}function Dm(s){const a=[],c=[];let d=1,f=0;const g=LI(s=s.replace(bO,function(v,C,D){return d="select"===D?0:1,f=parseInt(C.slice(1),10),""}));for(let v=0;v<g.length;){let C=g[v++].trim();1===d&&(C=C.replace(/\s*(?:=)?(\w+)\s*/,"$1")),C.length&&a.push(C);const D=LI(g[v++]);a.length>c.length&&c.push(D)}return{type:d,mainBinding:f,cases:a,values:c}}function LI(s){if(!s)return[];let a=0;const c=[],d=[],f=/[{}]/g;let g;for(f.lastIndex=0;g=f.exec(s);){const C=g.index;if("}"==g[0]){if(c.pop(),0==c.length){const D=s.substring(a,C);bO.test(D)?d.push(Dm(D)):d.push(D),a=C+1}}else{if(0==c.length){const D=s.substring(a,C);d.push(D),a=C+1}c.push("{")}}const v=s.substring(a);return d.push(v),d}function sV(s,a,c,d,f,g,v,C){const D=[],x=[],R=[];a.cases.push(g),a.create.push(D),a.remove.push(x),a.update.push(R);const X=function JA(s){const a=new yD(s);return function XA(){try{return!!(new window.DOMParser).parseFromString(kh(""),"text/html")}catch{return!1}}()?new _D(a):a}(Fh()).getInertBodyElement(v),oe=function k_(s){return"content"in s&&function sM(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}(X)||X;return oe?BI(s,a,c,d,D,x,R,oe,f,C,0):0}function BI(s,a,c,d,f,g,v,C,D,x,R){let U=0,X=C.firstChild;for(;X;){const oe=Q_(s,c,1,null);switch(X.nodeType){case Node.ELEMENT_NODE:const Me=X,qe=Me.tagName.toLowerCase();if(N_.hasOwnProperty(qe)){Cd(f,_m,qe,D,oe),s.data[oe]=qe;const Gt=Me.attributes;for(let sn=0;sn<Gt.length;sn++){const gn=Gt.item(sn),go=gn.name.toLowerCase();gn.value.match(mw)?wD.hasOwnProperty(go)&&Cm(v,gn.value,oe,gn.name,0,Lh[go]?Vb:null):Ly(f,oe,gn)}U=BI(s,a,c,d,f,g,v,X,oe,x,R+1)|U,wO(g,oe,R)}break;case Node.TEXT_NODE:const ct=X.textContent||"",Ct=ct.match(mw);Cd(f,null,Ct?"":ct,D,oe),wO(g,oe,R),Ct&&(U=Cm(v,ct,oe,null,0,null)|U);break;case Node.COMMENT_NODE:const Pe=nV.exec(X.textContent||"");if(Pe){const sn=x[parseInt(Pe[1],10)];Cd(f,ym,"",D,oe),vw(s,c,d,D,sn,oe),Ed(g,oe,R)}}X=X.nextSibling}return U}function wO(s,a,c){0===c&&s.push(a)}function Ed(s,a,c){0===c&&(s.push(~a),s.push(a))}function Cd(s,a,c,d,f){null!==a&&s.push(a),s.push(c,f,function MI(s,a,c){return s|a<<17|c<<1}(0,d,f))}function Ly(s,a,c){s.push(a<<1|1,c.name,c.value)}function jI(s,a,c=-1){const d=en(),f=Re(),g=on+s,v=Jo(d.consts,a),C=la();d.firstCreatePass&&function ky(s,a,c,d,f,g){const v=la(),C=[],D=[],x=[[]];f=function FI(s,a){if(function Py(s){return-1===s}(a))return yw(s);{const c=s.indexOf(`:${a}${wm}`)+2+a.toString().length,d=s.search(new RegExp(`${wm}\\/\\*\\d+:${a}${wm}`));return yw(s.substring(c,d))}}(f,g);const R=function oV(s){return s.replace(rV," ")}(f).split(iV);for(let U=0;U<R.length;U++){let X=R[U];if(1&U){const oe=47===X.charCodeAt(0),qe=(X.charCodeAt(oe?1:0),on+Number.parseInt(X.substring(oe?2:1)));if(oe)x.shift(),Cr(la(),!1);else{const ct=AI(s,x[0],qe);x.unshift([]),Cr(ct,!0)}}else{const oe=LI(X);for(let Me=0;Me<oe.length;Me++){let qe=oe[Me];if(1&Me){const ct=qe;if("object"!=typeof ct)throw new Error(`Unable to parse ICU expression in "${f}" message.`);vw(s,c,D,a,ct,wd(s,v,x[0],c,C,"",!0).index)}else""!==qe&&Em(s,v,x[0],C,D,c,qe)}}}s.data[d]={create:C,update:D}}(d,null===C?0:C.index,f,g,v,c),2===d.type?f[Un][Ut]|=32:f[Ut]|=32;const D=d.data[g],R=sD(d,C===f[Xi]?null:C,f);(function NI(s,a,c,d){const f=s[Ot];for(let g=0;g<a.length;g++){const v=a[g++],C=a[g],x=(v&uo.APPEND_EAGERLY)===uo.APPEND_EAGERLY,R=v>>>uo.SHIFT;let U=s[R];null===U&&(U=s[R]=(v&uo.COMMENT)===uo.COMMENT?f.createComment(C):zl(f,C)),x&&null!==c&&cd(f,c,U,d,!1)}})(f,D.create,R,C&&8&C.type?f[C.index]:null),kl(!0)}function HI(s,a,c){jI(s,a,c),function IO(){kl(!1)}()}function Vy(s,a,c,d,f){if(s=Ue(s),Array.isArray(s))for(let g=0;g<s.length;g++)Vy(s[g],a,c,d,f);else{const g=en(),v=Re();let C=Vh(s)?s:Ue(s.provide),D=MD(s);const x=ai(),R=1048575&x.providerIndexes,U=x.directiveStart,X=x.providerIndexes>>20;if(Vh(s)||!s.multi){const oe=new yt(D,f,Xc),Me=GI(C,a,f?R:R+X,U);-1===Me?(Pt(Le(x,v),g,C),Sm(g,s,a.length),a.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),c.push(oe),v.push(oe)):(c[Me]=oe,v[Me]=oe)}else{const oe=GI(C,a,R+X,U),Me=GI(C,a,R,R+X),ct=Me>=0&&c[Me];if(f&&!ct||!f&&!(oe>=0&&c[oe])){Pt(Le(x,v),g,C);const Ct=function zI(s,a,c,d,f){const g=new yt(s,c,Xc);return g.multi=[],g.index=a,g.componentProviders=0,$I(g,f,d&&!c),g}(f?xm:AO,c.length,f,d,D);!f&&ct&&(c[Me].providerFactory=Ct),Sm(g,s,a.length,0),a.push(C),x.directiveStart++,x.directiveEnd++,f&&(x.providerIndexes+=1048576),c.push(Ct),v.push(Ct)}else Sm(g,s,oe>-1?oe:Me,$I(c[f?Me:oe],D,!f&&d));!f&&d&&ct&&c[Me].componentProviders++}}}function Sm(s,a,c,d){const f=Vh(a),g=function SB(s){return!!s.useClass}(a);if(f||g){const D=(g?Ue(a.useClass):a).prototype.ngOnDestroy;if(D){const x=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const R=x.indexOf(c);-1===R?x.push(c,[d,D]):x[R+1].push(d,D)}else x.push(c,D)}}}function $I(s,a,c){return c&&s.componentProviders++,s.multi.push(a)-1}function GI(s,a,c,d){for(let f=c;f<d;f++)if(a[f]===s)return f;return-1}function AO(s,a,c,d){return cf(this.multi,[])}function xm(s,a,c,d){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=Po(c,c[lt],this.providerFactory.index,d);g=C.slice(0,v),cf(f,g);for(let D=v;D<C.length;D++)g.push(C[D])}else g=[],cf(f,g);return g}function cf(s,a){for(let c=0;c<s.length;c++)a.push((0,s[c])());return a}function Cw(s,a=[]){return c=>{c.providersResolver=(d,f)=>function xO(s,a,c){const d=en();if(d.firstCreatePass){const f=zi(s);Vy(c,d.data,d.blueprint,f,!0),Vy(a,d.data,d.blueprint,f,!1)}}(d,f?f(s):s,a)}}class ll{}class MO{}function NO(s,a){return new WI(s,a??null,[])}class WI extends ll{constructor(a,c,d){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sy(this);const f=br(a);this._bootstrapComponents=Xa(f.bootstrap),this._r3Injector=zh(a,c,[{provide:ll,useValue:this},{provide:W_,useValue:this.componentFactoryResolver},...d],ae(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class qI extends MO{constructor(a){super(),this.moduleType=a}create(a){return new WI(this.moduleType,a,[])}}class RO extends ll{constructor(a){super(),this.componentFactoryResolver=new sy(this),this.instance=null;const c=new Uh([...a.providers,{provide:ll,useValue:this},{provide:W_,useValue:this.componentFactoryResolver}],a.parent||V_(),a.debugName,new Set(["environment"]));this.injector=c,a.runEnvironmentInitializers&&c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function KI(s,a,c=null){return new RO({providers:s,parent:a,debugName:c,runEnvironmentInitializers:!0}).injector}let YI=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c)){const d=fM(0,c.type),f=d.length>0?KI([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c,f)}return this.cachedInjectors.get(c)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=St({token:s,providedIn:"environment",factory:()=>new s(We(fd))}),s})();function ZI(s){s.getStandaloneInjector=a=>a.get(YI).getOrCreateStandaloneInjector(s)}function jy(s,a,c,d){return function nS(s,a,c,d,f,g){const v=a+c;return Tr(s,v,f)?nl(s,v+1,g?d.call(g,f):d(f)):Dd(s,v+1)}(Re(),Pi(),s,a,c,d)}function XI(s,a,c,d,f){return function iS(s,a,c,d,f,g,v){const C=a+c;return Zl(s,C,f,g)?nl(s,C+2,v?d.call(v,f,g):d(f,g)):Dd(s,C+2)}(Re(),Pi(),s,a,c,d,f)}function Hy(s,a,c,d,f,g){return function Nw(s,a,c,d,f,g,v,C){const D=a+c;return function em(s,a,c,d,f){const g=Zl(s,a,c,d);return Tr(s,a+2,f)||g}(s,D,f,g,v)?nl(s,D+3,C?d.call(C,f,g,v):d(f,g,v)):Dd(s,D+3)}(Re(),Pi(),s,a,c,d,f,g)}function Dd(s,a){const c=s[a];return c===$t?void 0:c}function Nm(s){return a=>{setTimeout(s,void 0,a)}}const _a=class YO extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){let f=a,g=c||(()=>null),v=d;if(a&&"object"==typeof a){const D=a;f=D.next?.bind(D),g=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(g=Nm(g),f&&(f=Nm(f)),v&&(v=Nm(v)));const C=super.subscribe({next:f,error:g,complete:v});return a instanceof ie.w0&&a.add(C),C}};function ZO(){return this._results[Symbol.iterator]()}class $y{get changes(){return this._changes||(this._changes=new _a)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=$y.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=ZO)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const f=function ao(s){return s.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function i_(s,a,c){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let f=s[d],g=a[d];if(c&&(f=c(f),g=c(g)),g!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Om=(()=>{class s{}return s.__NG_ELEMENT_ID__=lS,s})();const aS=Om,QO=class extends aS{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(a,c){return this.createEmbeddedViewImpl(a,c,null)}createEmbeddedViewImpl(a,c,d){const v=this._declarationTContainer.tView,C=pd(this._declarationLView,v,a,4096&this._declarationLView[Ut]?4096:16,null,v.declTNode,null,null,null,c||null,d||null);C[El]=this._declarationLView[this._declarationTContainer.index];const x=this._declarationLView[Ri];return null!==x&&(C[Ri]=x.createEmbeddedView(v)),_0(v,C,a),new md(C)}};function lS(){return Gy(ai(),Re())}function Gy(s,a){return 4&s.type?new QO(a,s,Hh(s,a)):null}let kw=(()=>{class s{}return s.__NG_ELEMENT_ID__=mV,s})();function mV(){return Rm(ai(),Re())}const gV=kw,Pw=class extends gV{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return Hh(this._hostTNode,this._hostLView)}get injector(){return new Fr(this._hostTNode,this._hostLView)}get parentInjector(){const a=Ft(this._hostTNode,this._hostLView);if(Tt(a)){const c=Os(a,this._hostLView),d=Qu(a);return new Fr(c[lt].data[d+8],c)}return new Fr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=Fw(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-_i}createEmbeddedView(a,c,d){let f,g;"number"==typeof d?f=d:null!=d&&(f=d.index,g=d.injector);const C=a.createEmbeddedViewImpl(c||{},g,null);return this.insertImpl(C,f,false),C}createComponent(a,c,d,f,g){const v=a&&!function Pc(s){return"function"==typeof s}(a);let C;if(v)C=c;else{const qe=c||{};C=qe.index,d=qe.injector,f=qe.projectableNodes,g=qe.environmentInjector||qe.ngModuleRef}const D=v?a:new Yp(Ht(a)),x=d||this.parentInjector;if(!g&&null==D.ngModule){const ct=(v?x:this.parentInjector).get(fd,null);ct&&(g=ct)}Ht(D.componentType??{});const oe=D.create(x,f,null,g);return this.insertImpl(oe.hostView,C,false),oe}insert(a,c){return this.insertImpl(a,c,!1)}insertImpl(a,c,d){const f=a._lView,g=f[lt];if(function $u(s){return ki(s[Gn])}(f)){const D=this.indexOf(a);if(-1!==D)this.detach(D);else{const x=f[Gn],R=new Pw(x,x[Xi],x[Gn]);R.detach(R.indexOf(a))}}const v=this._adjustIndex(c),C=this._lContainer;if(function Ob(s,a,c,d){const f=_i+d,g=c.length;d>0&&(c[f-1][wr]=a),d<g-_i?(a[wr]=c[f],hp(c,_i+d,a)):(c.push(a),a[wr]=null),a[Gn]=c;const v=a[El];null!==v&&c!==v&&function y_(s,a){const c=s[As];a[Un]!==a[Gn][Gn][Un]&&(s[Dl]=!0),null===c?s[As]=[a]:c.push(a)}(v,a);const C=a[Ri];null!==C&&C.insertView(s),a[Ut]|=128}(g,f,C,v),!d){const D=Pb(v,C),x=f[Ot],R=Wl(x,C[Jr]);null!==R&&function Mb(s,a,c,d,f,g){d[mi]=f,d[Xi]=a,Rh(s,d,c,1,f,g)}(g,C[Xi],x,f,R,D)}return a.attachToViewContainerRef(),hp(Lw(C),v,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=Fw(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=Rb(this._lContainer,c);d&&(Fc(Lw(this._lContainer),c),b_(d[lt],d))}detach(a){const c=this._adjustIndex(a,-1),d=Rb(this._lContainer,c);return d&&null!=Fc(Lw(this._lContainer),c)?new md(d):null}_adjustIndex(a,c=0){return a??this.length+c}};function Fw(s){return s[8]}function Lw(s){return s[8]||(s[8]=[])}function Rm(s,a){let c;const d=a[s.index];return ki(d)?c=d:(c=cT(d,a,null,s),a[s.index]=c,iy(a,c)),dS(c,a,s,d),new Pw(c,s,a)}let dS=function Bw(s,a,c,d){if(s[Jr])return;let f;f=8&c.type?Kt(d):function cl(s,a){const c=s[Ot],d=c.createComment(""),f=Wi(a,s);return cd(c,Wl(c,f),d,function Mp(s,a){return s.nextSibling(a)}(c,f),!1),d}(a,c),s[Jr]=f};class ds{constructor(a){this.queryList=a,this.matches=null}clone(){return new ds(this.queryList)}setDirty(){this.queryList.setDirty()}}class fo{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let g=0;g<d;g++){const v=c.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new fo(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==vS(a,c).matches&&this.queries[c].setDirty()}}class zy{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class Id{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,g=this.getByIndex(d).embeddedTView(a,f);g&&(g.indexInDeclarationView=d,null!==c?c.push(g):c=[g])}return null!==c?new Id(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class su{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new su(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(a,c,km(c,g)),this.matchTNodeWithReadOption(a,c,Rs(c,a,g,!1,!1))}else d===Om?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,Rs(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Bp||f===kw||f===Om&&4&c.type)this.addMatch(c.index,-2);else{const g=Rs(c,a,f,!1,!1);null!==g&&this.addMatch(c.index,g)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function km(s,a){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function hS(s,a,c,d){return-1===c?function tR(s,a){return 11&s.type?Hh(s,a):4&s.type?Gy(s,a):null}(a,s):-2===c?function Pm(s,a,c){return c===Bp?Hh(a,s):c===Om?Gy(a,s):c===kw?Rm(a,s):void 0}(s,a,d):Po(s,s[lt],c,a)}function fS(s,a,c,d){const f=a[Ri].queries[d];if(null===f.matches){const g=s.data,v=c.matches,C=[];for(let D=0;D<v.length;D+=2){const x=v[D];C.push(x<0?null:hS(a,g[x],v[D+1],c.metadata.read))}f.matches=C}return f.matches}function Wy(s,a,c,d){const f=s.queries.getByIndex(c),g=f.matches;if(null!==g){const v=fS(s,a,f,c);for(let C=0;C<g.length;C+=2){const D=g[C];if(D>0)d.push(v[C/2]);else{const x=g[C+1],R=a[-D];for(let U=_i;U<R.length;U++){const X=R[U];X[El]===X[Gn]&&Wy(X[lt],X,x,d)}if(null!==R[As]){const U=R[As];for(let X=0;X<U.length;X++){const oe=U[X];Wy(oe[lt],oe,x,d)}}}}}return d}function Vw(s){const a=Re(),c=en(),d=qu();Ac(d+1);const f=vS(c,d);if(s.dirty&&function fh(s){return 4==(4&s[Ut])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const g=f.crossesNgTemplate?Wy(c,a,d,[]):fS(c,a,f,d);s.reset(g,PM),s.notifyOnChanges()}return!0}return!1}function pS(s,a,c){const d=en();d.firstCreatePass&&(yS(d,new zy(s,a,c),-1),2==(2&a)&&(d.staticViewQueries=!0)),_S(d,Re(),a)}function mS(s,a,c,d){const f=en();if(f.firstCreatePass){const g=ai();yS(f,new zy(a,c,d),g.index),function iR(s,a){const c=s.contentQueries||(s.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,a)}(f,s),2==(2&c)&&(f.staticContentQueries=!0)}_S(f,Re(),c)}function gS(){return function nR(s,a){return s[Ri].queries[a].queryList}(Re(),qu())}function _S(s,a,c){const d=new $y(4==(4&c));(function KM(s,a,c,d){const f=rN(a);f.push(c),s.firstCreatePass&&hT(s).push(d,f.length-1)})(s,a,d,d.destroy),null===a[Ri]&&(a[Ri]=new fo),a[Ri].queries.push(new ds(d))}function yS(s,a,c){null===s.queries&&(s.queries=new Id),s.queries.track(new su(a,c))}function vS(s,a){return s.queries.getByIndex(a)}function bS(s,a){return Gy(s,a)}function uf(s){return!!br(s)}const qw=new xn("Application Initializer");let tv=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d}),this.appInits=Bt(qw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const c=[];for(const f of this.appInits){const g=f();if(vy(g))c.push(g);else if(L0(g)){const v=new Promise((C,D)=>{g.subscribe({complete:C,error:D})});c.push(v)}}const d=()=>{this.done=!0,this.resolve()};Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),RS=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Ad=new xn("LocaleId",{providedIn:"root",factory:()=>Bt(Ad,nt.Optional|nt.SkipSelf)||function xV(){return typeof $localize<"u"&&$localize.locale||vd}()}),hR=new xn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let kS=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new V.X(!1)}add(){this.hasPendingTasks.next(!0);const c=this.taskId++;return this.pendingTasks.add(c),c}remove(c){this.pendingTasks.delete(c),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class pR{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let PS=(()=>{class s{compileModuleSync(c){return new qI(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),g=Xa(br(c).declarations).reduce((v,C)=>{const D=Ht(C);return D&&v.push(new Yp(D)),v},[]);return new pR(d,g)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function LS(...s){}class mo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _a(!1),this.onMicrotaskEmpty=new _a(!1),this.onStable=new _a(!1),this.onError=new _a(!1),typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function yR(){const s="function"==typeof mn.requestAnimationFrame;let a=mn[s?"requestAnimationFrame":"setTimeout"],c=mn[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&a&&c){const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d);const f=c[Zone.__symbol__("OriginalDelegate")];f&&(c=f)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:c}}().nativeRequestAnimationFrame,function wR(s){const a=()=>{!function bR(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(mn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Yw(s),s.isCheckStableRunning=!0,Kw(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Yw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,g,v,C)=>{try{return BS(s),c.invokeTask(f,g,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),ER(s)}},onInvoke:(c,d,f,g,v,C,D)=>{try{return BS(s),c.invoke(f,g,v,C,D)}finally{s.shouldCoalesceRunChangeDetection&&a(),ER(s)}},onHasTask:(c,d,f,g)=>{c.hasTask(f,g),d===f&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Yw(s),Kw(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(c,d,f,g)=>(c.handleError(f,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mo.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(mo.isInAngularZone())throw new se(909,!1)}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,vR,LS,LS);try{return g.runTask(v,c,d)}finally{g.cancelTask(v)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const vR={};function Kw(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Yw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function BS(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function ER(s){s._nesting--,Kw(s)}class CR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _a,this.onMicrotaskEmpty=new _a,this.onStable=new _a,this.onError=new _a}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,f){return a.apply(c,d)}}const DR=new xn("",{providedIn:"root",factory:VS});function VS(){const s=Bt(mo);let a=!0;const c=new le.y(f=>{a=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{f.next(a),f.complete()})}),d=new le.y(f=>{let g;s.runOutsideAngular(()=>{g=s.onStable.subscribe(()=>{mo.assertNotInAngularZone(),queueMicrotask(()=>{!a&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(a=!0,f.next(!0))})})});const v=s.onUnstable.subscribe(()=>{mo.assertInAngularZone(),a&&(a=!1,s.runOutsideAngular(()=>{f.next(!1)}))});return()=>{g.unsubscribe(),v.unsubscribe()}});return(0,ce.T)(c,d.pipe((0,ve.B)()))}const TR=new xn(""),IR=new xn("");let Zw,kV=(()=>{class s{constructor(c,d,f){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Zw||(function SR(s){Zw=s}(f),f.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mo.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:g,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,f){return[]}}return s.\u0275fac=function(c){return new(c||s)(We(mo),We(US),We(IR))},s.\u0275prov=St({token:s,factory:s.\u0275fac}),s})(),US=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return Zw?.findTestabilityInTree(this,c,d)??null}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),lu=null;const jS=new xn("AllowMultipleToken"),Qw=new xn("PlatformDestroyListeners"),Jw=new xn("appBootstrapListener");class MR{constructor(a,c){this.name=a,this.token=c}}function GS(s,a,c=[]){const d=`Platform: ${a}`,f=new xn(d);return(g=[])=>{let v=Xw();if(!v||v.injector.get(jS,!1)){const C=[...c,...g,{provide:f,useValue:!0}];s?s(C):function NR(s){if(lu&&!lu.get(jS,!1))throw new se(400,!1);(function HS(){!function uh(s){ch=s}(()=>{throw new se(600,!1)})})(),lu=s;const a=s.get(WS);(function $S(s){s.get(vM,null)?.forEach(c=>c())})(s)}(function zS(s=[],a){return Jc.create({name:a,providers:[{provide:AD,useValue:"platform"},{provide:Qw,useValue:new Set([()=>lu=null])},...s]})}(C,d))}return function RR(s){const a=Xw();if(!a)throw new se(401,!1);return a}()}}function Xw(){return lu?.get(WS)??null}let WS=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const f=function kR(s="zone.js",a){return"noop"===s?new CR:"zone.js"===s?new mo(a):s}(d?.ngZone,function qS(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:d?.ngZoneEventCoalescing,runCoalescing:d?.ngZoneRunCoalescing}));return f.run(()=>{const g=function lV(s,a,c){return new WI(s,a,c)}(c.moduleType,this.injector,function QS(s){return[{provide:mo,useFactory:s},{provide:P_,multi:!0,useFactory:()=>{const a=Bt(FR,{optional:!0});return()=>a.initialize()}},{provide:ZS,useFactory:PR},{provide:DR,useFactory:VS}]}(()=>f)),v=g.injector.get($h,null);return f.runOutsideAngular(()=>{const C=f.onError.subscribe({next:D=>{v.handleError(D)}});g.onDestroy(()=>{nv(this._modules,g),C.unsubscribe()})}),function KS(s,a,c){try{const d=c();return vy(d)?d.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(v,f,()=>{const C=g.injector.get(tv);return C.runInitializers(),C.donePromise.then(()=>(aw(g.injector.get(Ad,vd)||vd),this._moduleDoBootstrap(g),g))})})}bootstrapModule(c,d=[]){const f=YS({},d);return function xR(s,a,c){const d=new qI(c);return Promise.resolve(d)}(0,0,c).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(c){const d=c.injector.get(mf);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new se(-403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(Qw,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(We(Jc))},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function YS(s,a){return Array.isArray(a)?a.reduce(YS,s):{...s,...a}}let mf=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Bt(ZS),this.zoneIsStable=Bt(DR),this.componentTypes=[],this.components=[],this.isStable=Bt(kS).hasPendingTasks.pipe((0,De.w)(c=>c?(0,he.of)(!1):this.zoneIsStable),(0,ue.x)(),(0,ve.B)()),this._injector=Bt(fd)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const f=c instanceof jD;if(!this._injector.get(tv).done)throw!f&&Ss(c),new se(405,!1);let v;v=f?c:this._injector.get(W_).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const C=function AR(s){return s.isBoundToModule}(v)?void 0:this._injector.get(ll),x=v.create(Jc.NULL,[],d||v.selector,C),R=x.location.nativeElement,U=x.injector.get(TR,null);return U?.registerApplication(R),x.onDestroy(()=>{this.detachView(x.hostView),nv(this.components,x),U?.unregisterApplication(R)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new se(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this.internalErrorHandler(c)}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;nv(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const d=this._injector.get(Jw,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>nv(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new se(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function nv(s,a){const c=s.indexOf(a);c>-1&&s.splice(c,1)}const ZS=new xn("",{providedIn:"root",factory:()=>Bt($h).handleError.bind(void 0)});function PR(){const s=Bt(mo),a=Bt($h);return c=>s.runOutsideAngular(()=>a.handleError(c))}let FR=(()=>{class s{constructor(){this.zone=Bt(mo),this.applicationRef=Bt(mf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=St({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function BR(){return!1}let VR=(()=>{class s{}return s.__NG_ELEMENT_ID__=UR,s})();function UR(s){return function jR(s,a,c){if(Xr(s)&&!c){const d=bi(s.index,a);return new md(d,d)}return 47&s.type?new md(a[Un],a):null}(ai(),Re(),16==(16&s))}class WR{constructor(){}supports(a){return Jp(a)}create(a){return new KV(a)}}const qR=(s,a)=>a;class KV{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||qR}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,f=0,g=null;for(;c||d;){const v=!d||c&&c.currentIndex<YR(d,f,g)?c:d,C=YR(v,f,g),D=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(c=c._next,null==v.previousIndex)f++;else{g||(g=[]);const x=C-f,R=D-f;if(x!=R){for(let X=0;X<x;X++){const oe=X<g.length?g[X]:g[X]=0,Me=oe+X;R<=Me&&Me<x&&(g[X]=oe+1)}g[v.previousIndex]=R-x}}C!==D&&a(v,C,D)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Jp(a))throw new se(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)g=a[C],v=this._trackByFn(C,g),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,g,v,C)),Object.is(c.item,g)||this._addIdentityChange(c,g)):(c=this._mismatch(c,g,v,C),d=!0),c=c._next}else f=0,function CN(s,a){if(Array.isArray(s))for(let c=0;c<s.length;c++)a(s[c]);else{const c=s[Symbol.iterator]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,C=>{v=this._trackByFn(f,C),null!==c&&Object.is(c.trackById,v)?(d&&(c=this._verifyReinsertion(c,C,v,f)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,v,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,g,f)):a=this._addAfter(new YV(c,d),g,f),a}_verifyReinsertion(a,c,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new KR),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new KR),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class YV{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ZV{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class KR{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new ZV,this.map.set(c,d)),d.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function YR(s,a,c){const d=s.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+a+f}class ZR{constructor(){}supports(a){return a instanceof Map||D0(a)}create(){return new QR}}class QR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||D0(a)))throw new se(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const g=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,g)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const d=new JR(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class JR{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function XR(){return new t1([new WR])}let t1=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||XR()),deps:[[s,new Uc,new td]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new se(901,!1)}}return s.\u0275prov=St({token:s,providedIn:"root",factory:XR}),s})();function n1(){return new r1([new ZR])}let r1=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||n1()),deps:[[s,new Uc,new td]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new se(901,!1)}}return s.\u0275prov=St({token:s,providedIn:"root",factory:n1}),s})();const tk=GS(null,"core",[]);let eU=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(We(mf))},s.\u0275mod=Ou({type:s}),s.\u0275inj=Pn({}),s})();function ak(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function u1(s,a){const c=Ht(s),d=a.elementInjector||V_();return new Yp(c).create(d,a.projectableNodes,a.hostElement,a.environmentInjector)}function aE(s){const a=Ht(s);if(!a)return null;const c=new Yp(a);return{get selector(){return c.selector},get type(){return c.componentType},get inputs(){return c.inputs},get outputs(){return c.outputs},get ngContentSelectors(){return c.ngContentSelectors},get isStandalone(){return a.standalone},get isSignal(){return a.signals}}}},2614:()=>{const mt=":";const Pn=function(re,...ne){if(Pn.translate){const Oe=Pn.translate(re,ne);re=Oe[0],ne=Oe[1]}let ye=pn(re[0],re.raw[0]);for(let Oe=1;Oe<re.length;Oe++)ye+=ne[Oe-1]+pn(re[Oe],re.raw[Oe]);return ye},fi=":";function pn(re,ne){return ne.charAt(0)===fi?re.substring(function _e(re,ne){for(let ye=1,Oe=1;ye<re.length;ye++,Oe++)if("\\"===ne[Oe])Oe++;else if(re[ye]===mt)return ye;throw new Error(`Unterminated $localize metadata block in "${ne}".`)}(re,ne)+1):re}(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)().$localize=Pn},3106:(mt,Ie,F)=>{F.d(Ie,{Z:()=>Je});var u=F(9058),ie=F(4537),V=F(4303),le=F(7879);class ce{constructor(it,Ve){this._delegate=it,this.firebase=Ve,(0,V._addComponent)(it,new ie.wA("app-compat",()=>this,"PUBLIC")),this.container=it.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(it){this._delegate.automaticDataCollectionEnabled=it}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(it=>{this._delegate.checkDestroyed(),it()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(it,Ve=V._DEFAULT_ENTRY_NAME){var pt;this._delegate.checkDestroyed();const gt=this._delegate.container.getProvider(it);return!gt.isInitialized()&&"EXPLICIT"===(null===(pt=gt.getComponent())||void 0===pt?void 0:pt.instantiationMode)&&gt.initialize(),gt.getImmediate({identifier:Ve})}_removeServiceInstance(it,Ve=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(it).clearInstance(Ve)}_addComponent(it){(0,V._addComponent)(this._delegate,it)}_addOrOverwriteComponent(it){(0,V._addOrOverwriteComponent)(this._delegate,it)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ue(){const Ue=function De(Ue){const it={},Ve={__esModule:!0,initializeApp:function se($e,G={}){const ke=V.initializeApp($e,G);if((0,u.r3)(it,ke.name))return it[ke.name];const Ke=new Ue(ke,Ve);return it[ke.name]=Ke,Ke},app:gt,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function de($e){const G=$e.name,ke=G.replace("-compat","");if(V._registerComponent($e)&&"PUBLIC"===$e.type){const Ke=(Vt=gt())=>{if("function"!=typeof Vt[ke])throw ve.create("invalid-app-argument",{appName:G});return Vt[ke]()};void 0!==$e.serviceProps&&(0,u.ZB)(Ke,$e.serviceProps),Ve[ke]=Ke,Ue.prototype[ke]=function(...Vt){return this._getService.bind(this,G).apply(this,$e.multipleInstances?Vt:[])}}return"PUBLIC"===$e.type?Ve[ke]:null},removeApp:function pt($e){delete it[$e]},useAsService:function Ae($e,G){return"serverAuth"===G?null:G},modularAPIs:V}};function gt($e){if(!(0,u.r3)(it,$e=$e||V._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:$e});return it[$e]}return Ve.default=Ve,Object.defineProperty(Ve,"apps",{get:function Ce(){return Object.keys(it).map($e=>it[$e])}}),gt.App=Ue,Ve}(ce);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function it(Ve){(0,u.ZB)(Ue,Ve)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),Ue}(),W=new le.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Je=j;!function Fe(Ue){(0,V.registerVersion)("@firebase/app-compat","0.1.32",Ue)}()},4303:(mt,Ie,F)=>{F.r(Ie),F.d(Ie,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>Pn,_DEFAULT_ENTRY_NAME:()=>fe,_addComponent:()=>He,_addOrOverwriteComponent:()=>Ye,_apps:()=>be,_clearComponents:()=>kt,_components:()=>Ee,_getProvider:()=>tt,_registerComponent:()=>_t,_removeServiceInstance:()=>nn,deleteApp:()=>ne,getApp:()=>pn,getApps:()=>re,initializeApp:()=>fi,onLog:()=>et,registerVersion:()=>Oe,setLogLevel:()=>st});var u=F(5861),ie=F(4537),V=F(7879),le=F(9058),ce=F(1878);class he{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(q=>{if(function ve(z){const Y=z.getComponent();return"VERSION"===Y?.type}(q)){const Be=q.getImmediate();return`${Be.library}/${Be.version}`}return null}).filter(q=>q).join(" ")}}const De="@firebase/app",j=new V.Yd("@firebase/app"),fe="[DEFAULT]",_e={[De]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},be=new Map,Ee=new Map;function He(z,Y){try{z.container.addComponent(Y)}catch(q){j.debug(`Component ${Y.name} failed to register with FirebaseApp ${z.name}`,q)}}function Ye(z,Y){z.container.addOrOverwriteComponent(Y)}function _t(z){const Y=z.name;if(Ee.has(Y))return j.debug(`There were multiple attempts to register component ${Y}.`),!1;Ee.set(Y,z);for(const q of be.values())He(q,z);return!0}function tt(z,Y){const q=z.container.getProvider("heartbeat").getImmediate({optional:!0});return q&&q.triggerHeartbeat(),z.container.getProvider(Y)}function nn(z,Y,q=fe){tt(z,Y).clearInstance(q)}function kt(){Ee.clear()}const St=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fn{constructor(Y,q,Be){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=Be,this.container.addComponent(new ie.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw St.create("app-deleted",{appName:this._name})}}const Pn="9.9.3";function fi(z,Y={}){"object"!=typeof Y&&(Y={name:Y});const q=Object.assign({name:fe,automaticDataCollectionEnabled:!1},Y),Be=q.name;if("string"!=typeof Be||!Be)throw St.create("bad-app-name",{appName:String(Be)});const We=be.get(Be);if(We){if((0,le.vZ)(z,We.options)&&(0,le.vZ)(q,We.config))return We;throw St.create("duplicate-app",{appName:Be})}const It=new ie.H0(Be);for(const vn of Ee.values())It.addComponent(vn);const Bt=new fn(z,q,It);return be.set(Be,Bt),Bt}function pn(z=fe){const Y=be.get(z);if(!Y)throw St.create("no-app",{appName:z});return Y}function re(){return Array.from(be.values())}function ne(z){return ye.apply(this,arguments)}function ye(){return(ye=(0,u.Z)(function*(z){const Y=z.name;be.has(Y)&&(be.delete(Y),yield Promise.all(z.container.getProviders().map(q=>q.delete())),z.isDeleted=!0)})).apply(this,arguments)}function Oe(z,Y,q){var Be;let We=null!==(Be=_e[z])&&void 0!==Be?Be:z;q&&(We+=`-${q}`);const It=We.match(/\s|\//),Bt=Y.match(/\s|\//);if(It||Bt){const vn=[`Unable to register library "${We}" with version "${Y}":`];return It&&vn.push(`library name "${We}" contains illegal characters (whitespace or "/")`),It&&Bt&&vn.push("and"),Bt&&vn.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void j.warn(vn.join(" "))}_t(new ie.wA(`${We}-version`,()=>({library:We,version:Y}),"VERSION"))}function et(z,Y){if(null!==z&&"function"!=typeof z)throw St.create("invalid-log-argument");(0,V.Am)(z,Y)}function st(z){(0,V.Ub)(z)}const En="firebase-heartbeat-database",nt=1,ft="firebase-heartbeat-store";let Dt=null;function Cn(){return Dt||(Dt=(0,ce.X3)(En,nt,{upgrade:(z,Y)=>{0===Y&&z.createObjectStore(ft)}}).catch(z=>{throw St.create("idb-open",{originalErrorMessage:z.message})})),Dt}function Kn(){return(Kn=(0,u.Z)(function*(z){var Y;try{return(yield Cn()).transaction(ft).objectStore(ft).get(or(z))}catch(q){if(q instanceof le.ZR)j.warn(q.message);else{const Be=St.create("idb-get",{originalErrorMessage:null===(Y=q)||void 0===Y?void 0:Y.message});j.warn(Be.message)}}})).apply(this,arguments)}function mn(z,Y){return ln.apply(this,arguments)}function ln(){return(ln=(0,u.Z)(function*(z,Y){var q;try{const We=(yield Cn()).transaction(ft,"readwrite");return yield We.objectStore(ft).put(Y,or(z)),We.done}catch(Be){if(Be instanceof le.ZR)j.warn(Be.message);else{const We=St.create("idb-set",{originalErrorMessage:null===(q=Be)||void 0===q?void 0:q.message});j.warn(We.message)}}})).apply(this,arguments)}function or(z){return`${z.name}!${z.options.appId}`}class dn{constructor(Y){this.container=Y,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this._storage=new gl(q),this._heartbeatsCachePromise=this._storage.read().then(Be=>(this._heartbeatsCache=Be,Be))}triggerHeartbeat(){var Y=this;return(0,u.Z)(function*(){const Be=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),We=sr();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==We&&!Y._heartbeatsCache.heartbeats.some(It=>It.date===We))return Y._heartbeatsCache.heartbeats.push({date:We,agent:Be}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(It=>{const Bt=new Date(It.date).valueOf();return Date.now()-Bt<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,u.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const q=sr(),{heartbeatsToSend:Be,unsentEntries:We}=function ar(z,Y=1024){const q=[];let Be=z.slice();for(const We of z){const It=q.find(Bt=>Bt.agent===We.agent);if(It){if(It.dates.push(We.date),J(q)>Y){It.dates.pop();break}}else if(q.push({agent:We.agent,dates:[We.date]}),J(q)>Y){q.pop();break}Be=Be.slice(1)}return{heartbeatsToSend:q,unsentEntries:Be}}(Y._heartbeatsCache.heartbeats),It=(0,le.L)(JSON.stringify({version:2,heartbeats:Be}));return Y._heartbeatsCache.lastSentHeartbeatDate=q,We.length>0?(Y._heartbeatsCache.heartbeats=We,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),It})()}}function sr(){return(new Date).toISOString().substring(0,10)}class gl{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,u.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function Oi(z){return Kn.apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var q=this;return(0,u.Z)(function*(){var Be;if(yield q._canUseIndexedDBPromise){const It=yield q.read();return mn(q.app,{lastSentHeartbeatDate:null!==(Be=Y.lastSentHeartbeatDate)&&void 0!==Be?Be:It.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var q=this;return(0,u.Z)(function*(){var Be;if(yield q._canUseIndexedDBPromise){const It=yield q.read();return mn(q.app,{lastSentHeartbeatDate:null!==(Be=Y.lastSentHeartbeatDate)&&void 0!==Be?Be:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...Y.heartbeats]})}})()}}function J(z){return(0,le.L)(JSON.stringify({version:2,heartbeats:z})).length}!function K(z){_t(new ie.wA("platform-logger",Y=>new he(Y),"PRIVATE")),_t(new ie.wA("heartbeat",Y=>new dn(Y),"PRIVATE")),Oe(De,"0.7.31",z),Oe(De,"0.7.31","esm2017"),Oe("fire-js","")}("")},4537:(mt,Ie,F)=>{F.d(Ie,{H0:()=>De,wA:()=>V,zt:()=>ce});var u=F(5861),ie=F(9058);class V{constructor(j,W,ae){this.name=j,this.instanceFactory=W,this.type=ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const le="[DEFAULT]";class ce{constructor(j,W){this.name=j,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const W=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(W)){const ae=new ie.BH;if(this.instancesDeferred.set(W,ae),this.isInitialized(W)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:W});ze&&ae.resolve(ze)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(j){var W;const ae=this.normalizeInstanceIdentifier(j?.identifier),ze=null!==(W=j?.optional)&&void 0!==W&&W;if(!this.isInitialized(ae)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ae})}catch(Fe){if(ze)return null;throw Fe}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function ve(ue){return"EAGER"===ue.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[W,ae]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(W);try{const Fe=this.getOrInitializeService({instanceIdentifier:ze});ae.resolve(Fe)}catch{}}}}clearInstance(j=le){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,u.Z)(function*(){const W=Array.from(j.instances.values());yield Promise.all([...W.filter(ae=>"INTERNAL"in ae).map(ae=>ae.INTERNAL.delete()),...W.filter(ae=>"_delete"in ae).map(ae=>ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=le){return this.instances.has(j)}getOptions(j=le){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:W={}}=j,ae=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(ae))throw Error(`${this.name}(${ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:ae,options:W});for(const[Fe,Je]of this.instancesDeferred.entries())ae===this.normalizeInstanceIdentifier(Fe)&&Je.resolve(ze);return ze}onInit(j,W){var ae;const ze=this.normalizeInstanceIdentifier(W),Fe=null!==(ae=this.onInitCallbacks.get(ze))&&void 0!==ae?ae:new Set;Fe.add(j),this.onInitCallbacks.set(ze,Fe);const Je=this.instances.get(ze);return Je&&j(Je,ze),()=>{Fe.delete(j)}}invokeOnInitCallbacks(j,W){const ae=this.onInitCallbacks.get(W);if(ae)for(const ze of ae)try{ze(j,W)}catch{}}getOrInitializeService({instanceIdentifier:j,options:W={}}){let ae=this.instances.get(j);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=j,ue===le?void 0:ue),options:W}),this.instances.set(j,ae),this.instancesOptions.set(j,W),this.invokeOnInitCallbacks(ae,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,ae)}catch{}var ue;return ae||null}normalizeInstanceIdentifier(j=le){return this.component?this.component.multipleInstances?j:le:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class De{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const W=this.getProvider(j.name);if(W.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);W.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const W=new ce(j,this);return this.providers.set(j,W),W}getProviders(){return Array.from(this.providers.values())}}},7879:(mt,Ie,F)=>{F.d(Ie,{Am:()=>ue,Ub:()=>De,Yd:()=>ve,in:()=>ie});const u=[];var ie=function(j){return j[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",j}(ie||{});const V={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},le=ie.INFO,ce={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},he=(j,W,...ae)=>{if(W<j.logLevel)return;const ze=(new Date).toISOString(),Fe=ce[W];if(!Fe)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Fe](`[${ze}]  ${j.name}:`,...ae)};class ve{constructor(W){this.name=W,this._logLevel=le,this._logHandler=he,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in ie))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?V[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...W),this._logHandler(this,ie.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...W),this._logHandler(this,ie.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...W),this._logHandler(this,ie.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...W),this._logHandler(this,ie.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...W),this._logHandler(this,ie.ERROR,...W)}}function De(j){u.forEach(W=>{W.setLogLevel(j)})}function ue(j,W){for(const ae of u){let ze=null;W&&W.level&&(ze=V[W.level]),ae.userLogHandler=null===j?null:(Fe,Je,...Ue)=>{const it=Ue.map(Ve=>{if(null==Ve)return null;if("string"==typeof Ve)return Ve;if("number"==typeof Ve||"boolean"==typeof Ve)return Ve.toString();if(Ve instanceof Error)return Ve.message;try{return JSON.stringify(Ve)}catch{return null}}).filter(Ve=>Ve).join(" ");Je>=(ze??Fe.logLevel)&&j({level:ie[Je].toLowerCase(),message:it,args:Ue,type:Fe.name})}}}},1878:(mt,Ie,F)=>{F.d(Ie,{Lj:()=>se,X3:()=>gt});var u=F(5861);const ie=(G,ke)=>ke.some(Ke=>G instanceof Ke);let V,le;const ve=new WeakMap,De=new WeakMap,ue=new WeakMap,j=new WeakMap,W=new WeakMap;let Fe={get(G,ke,Ke){if(G instanceof IDBTransaction){if("done"===ke)return De.get(G);if("objectStoreNames"===ke)return G.objectStoreNames||ue.get(G);if("store"===ke)return Ke.objectStoreNames[1]?void 0:Ke.objectStore(Ke.objectStoreNames[0])}return Ve(G[ke])},set:(G,ke,Ke)=>(G[ke]=Ke,!0),has:(G,ke)=>G instanceof IDBTransaction&&("done"===ke||"store"===ke)||ke in G};function it(G){return"function"==typeof G?function Ue(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(...ke){return G.apply(pt(this),ke),Ve(ve.get(this))}:function(...ke){return Ve(G.apply(pt(this),ke))}:function(ke,...Ke){const Vt=G.call(pt(this),ke,...Ke);return ue.set(Vt,ke.sort?ke.sort():[ke]),Ve(Vt)}}(G):(G instanceof IDBTransaction&&function ze(G){if(De.has(G))return;const ke=new Promise((Ke,Vt)=>{const Yt=()=>{G.removeEventListener("complete",Nn),G.removeEventListener("error",In),G.removeEventListener("abort",In)},Nn=()=>{Ke(),Yt()},In=()=>{Vt(G.error||new DOMException("AbortError","AbortError")),Yt()};G.addEventListener("complete",Nn),G.addEventListener("error",In),G.addEventListener("abort",In)});De.set(G,ke)}(G),ie(G,function ce(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,Fe):G)}function Ve(G){if(G instanceof IDBRequest)return function ae(G){const ke=new Promise((Ke,Vt)=>{const Yt=()=>{G.removeEventListener("success",Nn),G.removeEventListener("error",In)},Nn=()=>{Ke(Ve(G.result)),Yt()},In=()=>{Vt(G.error),Yt()};G.addEventListener("success",Nn),G.addEventListener("error",In)});return ke.then(Ke=>{Ke instanceof IDBCursor&&ve.set(Ke,G)}).catch(()=>{}),W.set(ke,G),ke}(G);if(j.has(G))return j.get(G);const ke=it(G);return ke!==G&&(j.set(G,ke),W.set(ke,G)),ke}const pt=G=>W.get(G);function gt(G,ke,{blocked:Ke,upgrade:Vt,blocking:Yt,terminated:Nn}={}){const In=indexedDB.open(G,ke),Sn=Ve(In);return Vt&&In.addEventListener("upgradeneeded",ri=>{Vt(Ve(In.result),ri.oldVersion,ri.newVersion,Ve(In.transaction))}),Ke&&In.addEventListener("blocked",()=>Ke()),Sn.then(ri=>{Nn&&ri.addEventListener("close",()=>Nn()),Yt&&ri.addEventListener("versionchange",()=>Yt())}).catch(()=>{}),Sn}function se(G,{blocked:ke}={}){const Ke=indexedDB.deleteDatabase(G);return ke&&Ke.addEventListener("blocked",()=>ke()),Ve(Ke).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],de=["put","add","delete","clear"],Ae=new Map;function $e(G,ke){if(!(G instanceof IDBDatabase)||ke in G||"string"!=typeof ke)return;if(Ae.get(ke))return Ae.get(ke);const Ke=ke.replace(/FromIndex$/,""),Vt=ke!==Ke,Yt=de.includes(Ke);if(!(Ke in(Vt?IDBIndex:IDBObjectStore).prototype)||!Yt&&!Ce.includes(Ke))return;const Nn=function(){var In=(0,u.Z)(function*(Sn,...ri){const _r=this.transaction(Sn,Yt?"readwrite":"readonly");let fe=_r.store;return Vt&&(fe=fe.index(ri.shift())),(yield Promise.all([fe[Ke](...ri),Yt&&_r.done]))[0]});return function(ri){return In.apply(this,arguments)}}();return Ae.set(ke,Nn),Nn}!function Je(G){Fe=G(Fe)}(G=>({...G,get:(ke,Ke,Vt)=>$e(ke,Ke)||G.get(ke,Ke,Vt),has:(ke,Ke)=>!!$e(ke,Ke)||G.has(ke,Ke)}))},5861:(mt,Ie,F)=>{function u(V,le,ce,he,ve,De,ue){try{var j=V[De](ue),W=j.value}catch(ae){return void ce(ae)}j.done?le(W):Promise.resolve(W).then(he,ve)}function ie(V){return function(){var le=this,ce=arguments;return new Promise(function(he,ve){var De=V.apply(le,ce);function ue(W){u(De,he,ve,ue,j,"next",W)}function j(W){u(De,he,ve,ue,j,"throw",W)}ue(void 0)})}}F.d(Ie,{Z:()=>ie})},7582:(mt,Ie,F)=>{function le(fe,_e){var be={};for(var Ee in fe)Object.prototype.hasOwnProperty.call(fe,Ee)&&_e.indexOf(Ee)<0&&(be[Ee]=fe[Ee]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(Ee=Object.getOwnPropertySymbols(fe);He<Ee.length;He++)_e.indexOf(Ee[He])<0&&Object.prototype.propertyIsEnumerable.call(fe,Ee[He])&&(be[Ee[He]]=fe[Ee[He]])}return be}function ae(fe,_e,be,Ee){return new(be||(be=Promise))(function(Ye,_t){function tt(un){try{kt(Ee.next(un))}catch(St){_t(St)}}function nn(un){try{kt(Ee.throw(un))}catch(St){_t(St)}}function kt(un){un.done?Ye(un.value):function He(Ye){return Ye instanceof be?Ye:new be(function(_t){_t(Ye)})}(un.value).then(tt,nn)}kt((Ee=Ee.apply(fe,_e||[])).next())})}function se(fe){return this instanceof se?(this.v=fe,this):new se(fe)}function Ce(fe,_e,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,Ee=be.apply(fe,_e||[]),Ye=[];return He={},_t("next"),_t("throw"),_t("return"),He[Symbol.asyncIterator]=function(){return this},He;function _t(fn){Ee[fn]&&(He[fn]=function(Pn){return new Promise(function(fi,pn){Ye.push([fn,Pn,fi,pn])>1||tt(fn,Pn)})})}function tt(fn,Pn){try{!function nn(fn){fn.value instanceof se?Promise.resolve(fn.value.v).then(kt,un):St(Ye[0][2],fn)}(Ee[fn](Pn))}catch(fi){St(Ye[0][3],fi)}}function kt(fn){tt("next",fn)}function un(fn){tt("throw",fn)}function St(fn,Pn){fn(Pn),Ye.shift(),Ye.length&&tt(Ye[0][0],Ye[0][1])}}function Ae(fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,_e=fe[Symbol.asyncIterator];return _e?_e.call(fe):(fe=function Ue(fe){var _e="function"==typeof Symbol&&Symbol.iterator,be=_e&&fe[_e],Ee=0;if(be)return be.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&Ee>=fe.length&&(fe=void 0),{value:fe&&fe[Ee++],done:!fe}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(fe),be={},Ee("next"),Ee("throw"),Ee("return"),be[Symbol.asyncIterator]=function(){return this},be);function Ee(Ye){be[Ye]=fe[Ye]&&function(_t){return new Promise(function(tt,nn){!function He(Ye,_t,tt,nn){Promise.resolve(nn).then(function(kt){Ye({value:kt,done:tt})},_t)}(tt,nn,(_t=fe[Ye](_t)).done,_t.value)})}}}F.d(Ie,{FC:()=>Ce,KL:()=>Ae,_T:()=>le,mG:()=>ae,qq:()=>se}),"function"==typeof SuppressedError&&SuppressedError}},mt=>{var Ie=u=>mt(mt.s=u);Ie(2614),Ie(6809)}]);